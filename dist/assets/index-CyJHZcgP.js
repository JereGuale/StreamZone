(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function om(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function am(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var nd={exports:{}},Di={},rd={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var js=Symbol.for("react.element"),lm=Symbol.for("react.portal"),cm=Symbol.for("react.fragment"),um=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),hm=Symbol.for("react.provider"),fm=Symbol.for("react.context"),mm=Symbol.for("react.forward_ref"),pm=Symbol.for("react.suspense"),gm=Symbol.for("react.memo"),vm=Symbol.for("react.lazy"),_c=Symbol.iterator;function xm(t){return t===null||typeof t!="object"?null:(t=_c&&t[_c]||t["@@iterator"],typeof t=="function"?t:null)}var sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},id=Object.assign,od={};function Sr(t,e,n){this.props=t,this.context=e,this.refs=od,this.updater=n||sd}Sr.prototype.isReactComponent={};Sr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ad(){}ad.prototype=Sr.prototype;function nl(t,e,n){this.props=t,this.context=e,this.refs=od,this.updater=n||sd}var rl=nl.prototype=new ad;rl.constructor=nl;id(rl,Sr.prototype);rl.isPureReactComponent=!0;var jc=Array.isArray,ld=Object.prototype.hasOwnProperty,sl={current:null},cd={key:!0,ref:!0,__self:!0,__source:!0};function ud(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)ld.call(e,r)&&!cd.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:js,type:t,key:i,ref:a,props:s,_owner:sl.current}}function ym(t,e){return{$$typeof:js,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function il(t){return typeof t=="object"&&t!==null&&t.$$typeof===js}function bm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sc=/\/+/g;function fo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bm(""+t.key):e.toString(36)}function ti(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case js:case lm:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+fo(a,0):r,jc(s)?(n="",t!=null&&(n=t.replace(Sc,"$&/")+"/"),ti(s,e,n,"",function(u){return u})):s!=null&&(il(s)&&(s=ym(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Sc,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",jc(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+fo(i,l);a+=ti(i,e,n,c,s)}else if(c=xm(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+fo(i,l++),a+=ti(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Os(t,e,n){if(t==null)return t;var r=[],s=0;return ti(t,r,"","",function(i){return e.call(n,i,s++)}),r}function wm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ie={current:null},ni={transition:null},_m={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:ni,ReactCurrentOwner:sl};function dd(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:Os,forEach:function(t,e,n){Os(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Os(t,function(){e++}),e},toArray:function(t){return Os(t,function(e){return e})||[]},only:function(t){if(!il(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=Sr;q.Fragment=cm;q.Profiler=dm;q.PureComponent=nl;q.StrictMode=um;q.Suspense=pm;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_m;q.act=dd;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=id({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=sl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)ld.call(e,c)&&!cd.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:js,type:t.type,key:s,ref:i,props:r,_owner:a}};q.createContext=function(t){return t={$$typeof:fm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hm,_context:t},t.Consumer=t};q.createElement=ud;q.createFactory=function(t){var e=ud.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:mm,render:t}};q.isValidElement=il;q.lazy=function(t){return{$$typeof:vm,_payload:{_status:-1,_result:t},_init:wm}};q.memo=function(t,e){return{$$typeof:gm,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=ni.transition;ni.transition={};try{t()}finally{ni.transition=e}};q.unstable_act=dd;q.useCallback=function(t,e){return Ie.current.useCallback(t,e)};q.useContext=function(t){return Ie.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return Ie.current.useDeferredValue(t)};q.useEffect=function(t,e){return Ie.current.useEffect(t,e)};q.useId=function(){return Ie.current.useId()};q.useImperativeHandle=function(t,e,n){return Ie.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return Ie.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return Ie.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return Ie.current.useMemo(t,e)};q.useReducer=function(t,e,n){return Ie.current.useReducer(t,e,n)};q.useRef=function(t){return Ie.current.useRef(t)};q.useState=function(t){return Ie.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return Ie.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return Ie.current.useTransition()};q.version="18.3.1";rd.exports=q;var N=rd.exports;const jm=om(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm=N,Nm=Symbol.for("react.element"),km=Symbol.for("react.fragment"),Em=Object.prototype.hasOwnProperty,zm=Sm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cm={key:!0,ref:!0,__self:!0,__source:!0};function hd(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Em.call(e,r)&&!Cm.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Nm,type:t,key:i,ref:a,props:s,_owner:zm.current}}Di.Fragment=km;Di.jsx=hd;Di.jsxs=hd;nd.exports=Di;var o=nd.exports,Qo={},fd={exports:{}},Je={},md={exports:{}},pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,D){var R=P.length;P.push(D);e:for(;0<R;){var J=R-1>>>1,Q=P[J];if(0<s(Q,D))P[J]=D,P[R]=Q,R=J;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var D=P[0],R=P.pop();if(R!==D){P[0]=R;e:for(var J=0,Q=P.length,Xe=Q>>>1;J<Xe;){var St=2*(J+1)-1,Vt=P[St],Y=St+1,Nt=P[Y];if(0>s(Vt,R))Y<Q&&0>s(Nt,Vt)?(P[J]=Nt,P[Y]=R,J=Y):(P[J]=Vt,P[St]=R,J=St);else if(Y<Q&&0>s(Nt,R))P[J]=Nt,P[Y]=R,J=Y;else break e}}return D}function s(P,D){var R=P.sortIndex-D.sortIndex;return R!==0?R:P.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,v=3,w=!1,b=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=P)r(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(u)}}function j(P){if(y=!1,x(P),!b)if(n(c)!==null)b=!0,be(E);else{var D=n(u);D!==null&&Ne(j,D.startTime-P)}}function E(P,D){b=!1,y&&(y=!1,p(T),T=-1),w=!0;var R=v;try{for(x(D),f=n(c);f!==null&&(!(f.expirationTime>D)||P&&!Te());){var J=f.callback;if(typeof J=="function"){f.callback=null,v=f.priorityLevel;var Q=J(f.expirationTime<=D);D=t.unstable_now(),typeof Q=="function"?f.callback=Q:f===n(c)&&r(c),x(D)}else r(c);f=n(c)}if(f!==null)var Xe=!0;else{var St=n(u);St!==null&&Ne(j,St.startTime-D),Xe=!1}return Xe}finally{f=null,v=R,w=!1}}var k=!1,C=null,T=-1,M=5,V=-1;function Te(){return!(t.unstable_now()-V<M)}function Bt(){if(C!==null){var P=t.unstable_now();V=P;var D=!0;try{D=C(!0,P)}finally{D?gn():(k=!1,C=null)}}else k=!1}var gn;if(typeof g=="function")gn=function(){g(Bt)};else if(typeof MessageChannel<"u"){var Ft=new MessageChannel,Bn=Ft.port2;Ft.port1.onmessage=Bt,gn=function(){Bn.postMessage(null)}}else gn=function(){_(Bt,0)};function be(P){C=P,k||(k=!0,gn())}function Ne(P,D){T=_(function(){P(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){b||w||(b=!0,be(E))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var R=v;v=D;try{return P()}finally{v=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,D){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var R=v;v=P;try{return D()}finally{v=R}},t.unstable_scheduleCallback=function(P,D,R){var J=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?J+R:J):R=J,P){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=R+Q,P={id:d++,callback:D,priorityLevel:P,startTime:R,expirationTime:Q,sortIndex:-1},R>J?(P.sortIndex=R,e(u,P),n(c)===null&&P===n(u)&&(y?(p(T),T=-1):y=!0,Ne(j,R-J))):(P.sortIndex=Q,e(c,P),b||w||(b=!0,be(E))),P},t.unstable_shouldYield=Te,t.unstable_wrapCallback=function(P){var D=v;return function(){var R=v;v=D;try{return P.apply(this,arguments)}finally{v=R}}}})(pd);md.exports=pd;var Pm=md.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm=N,Qe=Pm;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,is={};function Mn(t,e){gr(t,e),gr(t+"Capture",e)}function gr(t,e){for(is[t]=e,t=0;t<e.length;t++)gd.add(e[t])}var Rt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=Object.prototype.hasOwnProperty,$m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nc={},kc={};function Am(t){return Jo.call(kc,t)?!0:Jo.call(Nc,t)?!1:$m.test(t)?kc[t]=!0:(Nc[t]=!0,!1)}function Om(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Im(t,e,n,r){if(e===null||typeof e>"u"||Om(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Re(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Se[t]=new Re(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Se[e]=new Re(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Se[t]=new Re(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Se[t]=new Re(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Se[t]=new Re(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Se[t]=new Re(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Se[t]=new Re(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Se[t]=new Re(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Se[t]=new Re(t,5,!1,t.toLowerCase(),null,!1,!1)});var ol=/[\-:]([a-z])/g;function al(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ol,al);Se[e]=new Re(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ol,al);Se[e]=new Re(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ol,al);Se[e]=new Re(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Se[t]=new Re(t,1,!1,t.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Se[t]=new Re(t,1,!1,t.toLowerCase(),null,!0,!0)});function ll(t,e,n,r){var s=Se.hasOwnProperty(e)?Se[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Im(e,n,s,r)&&(n=null),r||s===null?Am(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ut=Tm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Is=Symbol.for("react.element"),Yn=Symbol.for("react.portal"),Xn=Symbol.for("react.fragment"),cl=Symbol.for("react.strict_mode"),Yo=Symbol.for("react.profiler"),vd=Symbol.for("react.provider"),xd=Symbol.for("react.context"),ul=Symbol.for("react.forward_ref"),Xo=Symbol.for("react.suspense"),Zo=Symbol.for("react.suspense_list"),dl=Symbol.for("react.memo"),Gt=Symbol.for("react.lazy"),yd=Symbol.for("react.offscreen"),Ec=Symbol.iterator;function $r(t){return t===null||typeof t!="object"?null:(t=Ec&&t[Ec]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,mo;function Br(t){if(mo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mo=e&&e[1]||""}return`
`+mo+t}var po=!1;function go(t,e){if(!t||po)return"";po=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{po=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Br(t):""}function Rm(t){switch(t.tag){case 5:return Br(t.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 2:case 15:return t=go(t.type,!1),t;case 11:return t=go(t.type.render,!1),t;case 1:return t=go(t.type,!0),t;default:return""}}function ea(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xn:return"Fragment";case Yn:return"Portal";case Yo:return"Profiler";case cl:return"StrictMode";case Xo:return"Suspense";case Zo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xd:return(t.displayName||"Context")+".Consumer";case vd:return(t._context.displayName||"Context")+".Provider";case ul:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dl:return e=t.displayName||null,e!==null?e:ea(t.type)||"Memo";case Gt:e=t._payload,t=t._init;try{return ea(t(e))}catch{}}return null}function Lm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ea(e);case 8:return e===cl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function un(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Mm(t){var e=bd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rs(t){t._valueTracker||(t._valueTracker=Mm(t))}function wd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ta(t,e){var n=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=un(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _d(t,e){e=e.checked,e!=null&&ll(t,"checked",e,!1)}function na(t,e){_d(t,e);var n=un(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ra(t,e.type,n):e.hasOwnProperty("defaultValue")&&ra(t,e.type,un(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ra(t,e,n){(e!=="number"||fi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fr=Array.isArray;function cr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+un(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Fr(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:un(n)}}function jd(t,e){var n=un(e.value),r=un(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Tc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ia(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ls,Nd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ls=Ls||document.createElement("div"),Ls.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ls.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function os(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dm=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(t){Dm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kr[e]=Kr[t]})});function kd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kr.hasOwnProperty(t)&&Kr[t]?(""+e).trim():e+"px"}function Ed(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Um=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oa(t,e){if(e){if(Um[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function aa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var la=null;function hl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ca=null,ur=null,dr=null;function $c(t){if(t=ks(t)){if(typeof ca!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Wi(e),ca(t.stateNode,t.type,e))}}function zd(t){ur?dr?dr.push(t):dr=[t]:ur=t}function Cd(){if(ur){var t=ur,e=dr;if(dr=ur=null,$c(t),e)for(t=0;t<e.length;t++)$c(e[t])}}function Pd(t,e){return t(e)}function Td(){}var vo=!1;function $d(t,e,n){if(vo)return t(e,n);vo=!0;try{return Pd(t,e,n)}finally{vo=!1,(ur!==null||dr!==null)&&(Td(),Cd())}}function as(t,e){var n=t.stateNode;if(n===null)return null;var r=Wi(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var ua=!1;if(Rt)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){ua=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{ua=!1}function Bm(t,e,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Gr=!1,mi=null,pi=!1,da=null,Fm={onError:function(t){Gr=!0,mi=t}};function Vm(t,e,n,r,s,i,a,l,c){Gr=!1,mi=null,Bm.apply(Fm,arguments)}function Wm(t,e,n,r,s,i,a,l,c){if(Vm.apply(this,arguments),Gr){if(Gr){var u=mi;Gr=!1,mi=null}else throw Error(z(198));pi||(pi=!0,da=u)}}function Dn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ad(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ac(t){if(Dn(t)!==t)throw Error(z(188))}function qm(t){var e=t.alternate;if(!e){if(e=Dn(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ac(s),t;if(i===r)return Ac(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Od(t){return t=qm(t),t!==null?Id(t):null}function Id(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Id(t);if(e!==null)return e;t=t.sibling}return null}var Rd=Qe.unstable_scheduleCallback,Oc=Qe.unstable_cancelCallback,Hm=Qe.unstable_shouldYield,Km=Qe.unstable_requestPaint,ue=Qe.unstable_now,Gm=Qe.unstable_getCurrentPriorityLevel,fl=Qe.unstable_ImmediatePriority,Ld=Qe.unstable_UserBlockingPriority,gi=Qe.unstable_NormalPriority,Qm=Qe.unstable_LowPriority,Md=Qe.unstable_IdlePriority,Ui=null,_t=null;function Jm(t){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Ui,t,void 0,(t.current.flags&128)===128)}catch{}}var mt=Math.clz32?Math.clz32:Zm,Ym=Math.log,Xm=Math.LN2;function Zm(t){return t>>>=0,t===0?32:31-(Ym(t)/Xm|0)|0}var Ms=64,Ds=4194304;function Vr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Vr(l):(i&=a,i!==0&&(r=Vr(i)))}else a=n&~s,a!==0?r=Vr(a):i!==0&&(r=Vr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mt(e),s=1<<n,r|=t[n],e&=~s;return r}function ep(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tp(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-mt(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=ep(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function ha(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dd(){var t=Ms;return Ms<<=1,!(Ms&4194240)&&(Ms=64),t}function xo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ss(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mt(e),t[e]=n}function np(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-mt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ml(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var G=0;function Ud(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bd,pl,Fd,Vd,Wd,fa=!1,Us=[],tn=null,nn=null,rn=null,ls=new Map,cs=new Map,Jt=[],rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ic(t,e){switch(t){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":ls.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(e.pointerId)}}function Or(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ks(e),e!==null&&pl(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function sp(t,e,n,r,s){switch(e){case"focusin":return tn=Or(tn,t,e,n,r,s),!0;case"dragenter":return nn=Or(nn,t,e,n,r,s),!0;case"mouseover":return rn=Or(rn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ls.set(i,Or(ls.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,cs.set(i,Or(cs.get(i)||null,t,e,n,r,s)),!0}return!1}function qd(t){var e=zn(t.target);if(e!==null){var n=Dn(e);if(n!==null){if(e=n.tag,e===13){if(e=Ad(n),e!==null){t.blockedOn=e,Wd(t.priority,function(){Fd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ri(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ma(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);la=r,n.target.dispatchEvent(r),la=null}else return e=ks(n),e!==null&&pl(e),t.blockedOn=n,!1;e.shift()}return!0}function Rc(t,e,n){ri(t)&&n.delete(e)}function ip(){fa=!1,tn!==null&&ri(tn)&&(tn=null),nn!==null&&ri(nn)&&(nn=null),rn!==null&&ri(rn)&&(rn=null),ls.forEach(Rc),cs.forEach(Rc)}function Ir(t,e){t.blockedOn===e&&(t.blockedOn=null,fa||(fa=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,ip)))}function us(t){function e(s){return Ir(s,t)}if(0<Us.length){Ir(Us[0],t);for(var n=1;n<Us.length;n++){var r=Us[n];r.blockedOn===t&&(r.blockedOn=null)}}for(tn!==null&&Ir(tn,t),nn!==null&&Ir(nn,t),rn!==null&&Ir(rn,t),ls.forEach(e),cs.forEach(e),n=0;n<Jt.length;n++)r=Jt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jt.length&&(n=Jt[0],n.blockedOn===null);)qd(n),n.blockedOn===null&&Jt.shift()}var hr=Ut.ReactCurrentBatchConfig,xi=!0;function op(t,e,n,r){var s=G,i=hr.transition;hr.transition=null;try{G=1,gl(t,e,n,r)}finally{G=s,hr.transition=i}}function ap(t,e,n,r){var s=G,i=hr.transition;hr.transition=null;try{G=4,gl(t,e,n,r)}finally{G=s,hr.transition=i}}function gl(t,e,n,r){if(xi){var s=ma(t,e,n,r);if(s===null)zo(t,e,r,yi,n),Ic(t,r);else if(sp(s,t,e,n,r))r.stopPropagation();else if(Ic(t,r),e&4&&-1<rp.indexOf(t)){for(;s!==null;){var i=ks(s);if(i!==null&&Bd(i),i=ma(t,e,n,r),i===null&&zo(t,e,r,yi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else zo(t,e,r,null,n)}}var yi=null;function ma(t,e,n,r){if(yi=null,t=hl(r),t=zn(t),t!==null)if(e=Dn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ad(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yi=t,null}function Hd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gm()){case fl:return 1;case Ld:return 4;case gi:case Qm:return 16;case Md:return 536870912;default:return 16}default:return 16}}var Zt=null,vl=null,si=null;function Kd(){if(si)return si;var t,e=vl,n=e.length,r,s="value"in Zt?Zt.value:Zt.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return si=s.slice(t,1<r?1-r:void 0)}function ii(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bs(){return!0}function Lc(){return!1}function Ye(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bs:Lc,this.isPropagationStopped=Lc,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),e}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=Ye(Nr),Ns=ae({},Nr,{view:0,detail:0}),lp=Ye(Ns),yo,bo,Rr,Bi=ae({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rr&&(Rr&&t.type==="mousemove"?(yo=t.screenX-Rr.screenX,bo=t.screenY-Rr.screenY):bo=yo=0,Rr=t),yo)},movementY:function(t){return"movementY"in t?t.movementY:bo}}),Mc=Ye(Bi),cp=ae({},Bi,{dataTransfer:0}),up=Ye(cp),dp=ae({},Ns,{relatedTarget:0}),wo=Ye(dp),hp=ae({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),fp=Ye(hp),mp=ae({},Nr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pp=Ye(mp),gp=ae({},Nr,{data:0}),Dc=Ye(gp),vp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bp(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yp[t])?!!e[t]:!1}function yl(){return bp}var wp=ae({},Ns,{key:function(t){if(t.key){var e=vp[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ii(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yl,charCode:function(t){return t.type==="keypress"?ii(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ii(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_p=Ye(wp),jp=ae({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=Ye(jp),Sp=ae({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yl}),Np=Ye(Sp),kp=ae({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ep=Ye(kp),zp=ae({},Bi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cp=Ye(zp),Pp=[9,13,27,32],bl=Rt&&"CompositionEvent"in window,Qr=null;Rt&&"documentMode"in document&&(Qr=document.documentMode);var Tp=Rt&&"TextEvent"in window&&!Qr,Gd=Rt&&(!bl||Qr&&8<Qr&&11>=Qr),Bc=" ",Fc=!1;function Qd(t,e){switch(t){case"keyup":return Pp.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zn=!1;function $p(t,e){switch(t){case"compositionend":return Jd(e);case"keypress":return e.which!==32?null:(Fc=!0,Bc);case"textInput":return t=e.data,t===Bc&&Fc?null:t;default:return null}}function Ap(t,e){if(Zn)return t==="compositionend"||!bl&&Qd(t,e)?(t=Kd(),si=vl=Zt=null,Zn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gd&&e.locale!=="ko"?null:e.data;default:return null}}var Op={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Op[t.type]:e==="textarea"}function Yd(t,e,n,r){zd(r),e=bi(e,"onChange"),0<e.length&&(n=new xl("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jr=null,ds=null;function Ip(t){lh(t,0)}function Fi(t){var e=nr(t);if(wd(e))return t}function Rp(t,e){if(t==="change")return e}var Xd=!1;if(Rt){var _o;if(Rt){var jo="oninput"in document;if(!jo){var Wc=document.createElement("div");Wc.setAttribute("oninput","return;"),jo=typeof Wc.oninput=="function"}_o=jo}else _o=!1;Xd=_o&&(!document.documentMode||9<document.documentMode)}function qc(){Jr&&(Jr.detachEvent("onpropertychange",Zd),ds=Jr=null)}function Zd(t){if(t.propertyName==="value"&&Fi(ds)){var e=[];Yd(e,ds,t,hl(t)),$d(Ip,e)}}function Lp(t,e,n){t==="focusin"?(qc(),Jr=e,ds=n,Jr.attachEvent("onpropertychange",Zd)):t==="focusout"&&qc()}function Mp(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fi(ds)}function Dp(t,e){if(t==="click")return Fi(e)}function Up(t,e){if(t==="input"||t==="change")return Fi(e)}function Bp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gt=typeof Object.is=="function"?Object.is:Bp;function hs(t,e){if(gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jo.call(e,s)||!gt(t[s],e[s]))return!1}return!0}function Hc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kc(t,e){var n=Hc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hc(n)}}function eh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function th(){for(var t=window,e=fi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fi(t.document)}return e}function wl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Fp(t){var e=th(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eh(n.ownerDocument.documentElement,n)){if(r!==null&&wl(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Kc(n,i);var a=Kc(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Vp=Rt&&"documentMode"in document&&11>=document.documentMode,er=null,pa=null,Yr=null,ga=!1;function Gc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ga||er==null||er!==fi(r)||(r=er,"selectionStart"in r&&wl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yr&&hs(Yr,r)||(Yr=r,r=bi(pa,"onSelect"),0<r.length&&(e=new xl("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=er)))}function Fs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var tr={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionend:Fs("Transition","TransitionEnd")},So={},nh={};Rt&&(nh=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function Vi(t){if(So[t])return So[t];if(!tr[t])return t;var e=tr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nh)return So[t]=e[n];return t}var rh=Vi("animationend"),sh=Vi("animationiteration"),ih=Vi("animationstart"),oh=Vi("transitionend"),ah=new Map,Qc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(t,e){ah.set(t,e),Mn(e,[t])}for(var No=0;No<Qc.length;No++){var ko=Qc[No],Wp=ko.toLowerCase(),qp=ko[0].toUpperCase()+ko.slice(1);hn(Wp,"on"+qp)}hn(rh,"onAnimationEnd");hn(sh,"onAnimationIteration");hn(ih,"onAnimationStart");hn("dblclick","onDoubleClick");hn("focusin","onFocus");hn("focusout","onBlur");hn(oh,"onTransitionEnd");gr("onMouseEnter",["mouseout","mouseover"]);gr("onMouseLeave",["mouseout","mouseover"]);gr("onPointerEnter",["pointerout","pointerover"]);gr("onPointerLeave",["pointerout","pointerover"]);Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wr));function Jc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Wm(r,e,void 0,t),t.currentTarget=null}function lh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Jc(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Jc(s,l,u),i=c}}}if(pi)throw t=da,pi=!1,da=null,t}function te(t,e){var n=e[wa];n===void 0&&(n=e[wa]=new Set);var r=t+"__bubble";n.has(r)||(ch(e,t,2,!1),n.add(r))}function Eo(t,e,n){var r=0;e&&(r|=4),ch(n,t,r,e)}var Vs="_reactListening"+Math.random().toString(36).slice(2);function fs(t){if(!t[Vs]){t[Vs]=!0,gd.forEach(function(n){n!=="selectionchange"&&(Hp.has(n)||Eo(n,!1,t),Eo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vs]||(e[Vs]=!0,Eo("selectionchange",!1,e))}}function ch(t,e,n,r){switch(Hd(e)){case 1:var s=op;break;case 4:s=ap;break;default:s=gl}n=s.bind(null,e,n,t),s=void 0,!ua||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function zo(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=zn(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}$d(function(){var u=i,d=hl(n),f=[];e:{var v=ah.get(t);if(v!==void 0){var w=xl,b=t;switch(t){case"keypress":if(ii(n)===0)break e;case"keydown":case"keyup":w=_p;break;case"focusin":b="focus",w=wo;break;case"focusout":b="blur",w=wo;break;case"beforeblur":case"afterblur":w=wo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=up;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Np;break;case rh:case sh:case ih:w=fp;break;case oh:w=Ep;break;case"scroll":w=lp;break;case"wheel":w=Cp;break;case"copy":case"cut":case"paste":w=pp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Uc}var y=(e&4)!==0,_=!y&&t==="scroll",p=y?v!==null?v+"Capture":null:v;y=[];for(var g=u,x;g!==null;){x=g;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,p!==null&&(j=as(g,p),j!=null&&y.push(ms(g,j,x)))),_)break;g=g.return}0<y.length&&(v=new w(v,b,null,n,d),f.push({event:v,listeners:y}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",v&&n!==la&&(b=n.relatedTarget||n.fromElement)&&(zn(b)||b[Lt]))break e;if((w||v)&&(v=d.window===d?d:(v=d.ownerDocument)?v.defaultView||v.parentWindow:window,w?(b=n.relatedTarget||n.toElement,w=u,b=b?zn(b):null,b!==null&&(_=Dn(b),b!==_||b.tag!==5&&b.tag!==6)&&(b=null)):(w=null,b=u),w!==b)){if(y=Mc,j="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=Uc,j="onPointerLeave",p="onPointerEnter",g="pointer"),_=w==null?v:nr(w),x=b==null?v:nr(b),v=new y(j,g+"leave",w,n,d),v.target=_,v.relatedTarget=x,j=null,zn(d)===u&&(y=new y(p,g+"enter",b,n,d),y.target=x,y.relatedTarget=_,j=y),_=j,w&&b)t:{for(y=w,p=b,g=0,x=y;x;x=Vn(x))g++;for(x=0,j=p;j;j=Vn(j))x++;for(;0<g-x;)y=Vn(y),g--;for(;0<x-g;)p=Vn(p),x--;for(;g--;){if(y===p||p!==null&&y===p.alternate)break t;y=Vn(y),p=Vn(p)}y=null}else y=null;w!==null&&Yc(f,v,w,y,!1),b!==null&&_!==null&&Yc(f,_,b,y,!0)}}e:{if(v=u?nr(u):window,w=v.nodeName&&v.nodeName.toLowerCase(),w==="select"||w==="input"&&v.type==="file")var E=Rp;else if(Vc(v))if(Xd)E=Up;else{E=Mp;var k=Lp}else(w=v.nodeName)&&w.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(E=Dp);if(E&&(E=E(t,u))){Yd(f,E,n,d);break e}k&&k(t,v,u),t==="focusout"&&(k=v._wrapperState)&&k.controlled&&v.type==="number"&&ra(v,"number",v.value)}switch(k=u?nr(u):window,t){case"focusin":(Vc(k)||k.contentEditable==="true")&&(er=k,pa=u,Yr=null);break;case"focusout":Yr=pa=er=null;break;case"mousedown":ga=!0;break;case"contextmenu":case"mouseup":case"dragend":ga=!1,Gc(f,n,d);break;case"selectionchange":if(Vp)break;case"keydown":case"keyup":Gc(f,n,d)}var C;if(bl)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Zn?Qd(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Gd&&n.locale!=="ko"&&(Zn||T!=="onCompositionStart"?T==="onCompositionEnd"&&Zn&&(C=Kd()):(Zt=d,vl="value"in Zt?Zt.value:Zt.textContent,Zn=!0)),k=bi(u,T),0<k.length&&(T=new Dc(T,t,null,n,d),f.push({event:T,listeners:k}),C?T.data=C:(C=Jd(n),C!==null&&(T.data=C)))),(C=Tp?$p(t,n):Ap(t,n))&&(u=bi(u,"onBeforeInput"),0<u.length&&(d=new Dc("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=C))}lh(f,e)})}function ms(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bi(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=as(t,n),i!=null&&r.unshift(ms(t,i,s)),i=as(t,e),i!=null&&r.push(ms(t,i,s))),t=t.return}return r}function Vn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yc(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=as(n,i),c!=null&&a.unshift(ms(n,c,l))):s||(c=as(n,i),c!=null&&a.push(ms(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Kp=/\r\n?/g,Gp=/\u0000|\uFFFD/g;function Xc(t){return(typeof t=="string"?t:""+t).replace(Kp,`
`).replace(Gp,"")}function Ws(t,e,n){if(e=Xc(e),Xc(t)!==e&&n)throw Error(z(425))}function wi(){}var va=null,xa=null;function ya(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ba=typeof setTimeout=="function"?setTimeout:void 0,Qp=typeof clearTimeout=="function"?clearTimeout:void 0,Zc=typeof Promise=="function"?Promise:void 0,Jp=typeof queueMicrotask=="function"?queueMicrotask:typeof Zc<"u"?function(t){return Zc.resolve(null).then(t).catch(Yp)}:ba;function Yp(t){setTimeout(function(){throw t})}function Co(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),us(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);us(e)}function sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function eu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var kr=Math.random().toString(36).slice(2),wt="__reactFiber$"+kr,ps="__reactProps$"+kr,Lt="__reactContainer$"+kr,wa="__reactEvents$"+kr,Xp="__reactListeners$"+kr,Zp="__reactHandles$"+kr;function zn(t){var e=t[wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lt]||n[wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=eu(t);t!==null;){if(n=t[wt])return n;t=eu(t)}return e}t=n,n=t.parentNode}return null}function ks(t){return t=t[wt]||t[Lt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Wi(t){return t[ps]||null}var _a=[],rr=-1;function fn(t){return{current:t}}function ne(t){0>rr||(t.current=_a[rr],_a[rr]=null,rr--)}function Z(t,e){rr++,_a[rr]=t.current,t.current=e}var dn={},Pe=fn(dn),Be=fn(!1),An=dn;function vr(t,e){var n=t.type.contextTypes;if(!n)return dn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Fe(t){return t=t.childContextTypes,t!=null}function _i(){ne(Be),ne(Pe)}function tu(t,e,n){if(Pe.current!==dn)throw Error(z(168));Z(Pe,e),Z(Be,n)}function uh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,Lm(t)||"Unknown",s));return ae({},n,r)}function ji(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dn,An=Pe.current,Z(Pe,t),Z(Be,Be.current),!0}function nu(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=uh(t,e,An),r.__reactInternalMemoizedMergedChildContext=t,ne(Be),ne(Pe),Z(Pe,t)):ne(Be),Z(Be,n)}var $t=null,qi=!1,Po=!1;function dh(t){$t===null?$t=[t]:$t.push(t)}function e0(t){qi=!0,dh(t)}function mn(){if(!Po&&$t!==null){Po=!0;var t=0,e=G;try{var n=$t;for(G=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$t=null,qi=!1}catch(s){throw $t!==null&&($t=$t.slice(t+1)),Rd(fl,mn),s}finally{G=e,Po=!1}}return null}var sr=[],ir=0,Si=null,Ni=0,Ze=[],et=0,On=null,At=1,Ot="";function Sn(t,e){sr[ir++]=Ni,sr[ir++]=Si,Si=t,Ni=e}function hh(t,e,n){Ze[et++]=At,Ze[et++]=Ot,Ze[et++]=On,On=t;var r=At;t=Ot;var s=32-mt(r)-1;r&=~(1<<s),n+=1;var i=32-mt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,At=1<<32-mt(e)+s|n<<s|r,Ot=i+t}else At=1<<i|n<<s|r,Ot=t}function _l(t){t.return!==null&&(Sn(t,1),hh(t,1,0))}function jl(t){for(;t===Si;)Si=sr[--ir],sr[ir]=null,Ni=sr[--ir],sr[ir]=null;for(;t===On;)On=Ze[--et],Ze[et]=null,Ot=Ze[--et],Ze[et]=null,At=Ze[--et],Ze[et]=null}var Ge=null,Ke=null,re=!1,ft=null;function fh(t,e){var n=tt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ru(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ge=t,Ke=sn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ge=t,Ke=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=On!==null?{id:At,overflow:Ot}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ge=t,Ke=null,!0):!1;default:return!1}}function ja(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sa(t){if(re){var e=Ke;if(e){var n=e;if(!ru(t,e)){if(ja(t))throw Error(z(418));e=sn(n.nextSibling);var r=Ge;e&&ru(t,e)?fh(r,n):(t.flags=t.flags&-4097|2,re=!1,Ge=t)}}else{if(ja(t))throw Error(z(418));t.flags=t.flags&-4097|2,re=!1,Ge=t}}}function su(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ge=t}function qs(t){if(t!==Ge)return!1;if(!re)return su(t),re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ya(t.type,t.memoizedProps)),e&&(e=Ke)){if(ja(t))throw mh(),Error(z(418));for(;e;)fh(t,e),e=sn(e.nextSibling)}if(su(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ke=sn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ke=null}}else Ke=Ge?sn(t.stateNode.nextSibling):null;return!0}function mh(){for(var t=Ke;t;)t=sn(t.nextSibling)}function xr(){Ke=Ge=null,re=!1}function Sl(t){ft===null?ft=[t]:ft.push(t)}var t0=Ut.ReactCurrentBatchConfig;function Lr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Hs(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function iu(t){var e=t._init;return e(t._payload)}function ph(t){function e(p,g){if(t){var x=p.deletions;x===null?(p.deletions=[g],p.flags|=16):x.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function s(p,g){return p=cn(p,g),p.index=0,p.sibling=null,p}function i(p,g,x){return p.index=x,t?(x=p.alternate,x!==null?(x=x.index,x<g?(p.flags|=2,g):x):(p.flags|=2,g)):(p.flags|=1048576,g)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,g,x,j){return g===null||g.tag!==6?(g=Lo(x,p.mode,j),g.return=p,g):(g=s(g,x),g.return=p,g)}function c(p,g,x,j){var E=x.type;return E===Xn?d(p,g,x.props.children,j,x.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Gt&&iu(E)===g.type)?(j=s(g,x.props),j.ref=Lr(p,g,x),j.return=p,j):(j=hi(x.type,x.key,x.props,null,p.mode,j),j.ref=Lr(p,g,x),j.return=p,j)}function u(p,g,x,j){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=Mo(x,p.mode,j),g.return=p,g):(g=s(g,x.children||[]),g.return=p,g)}function d(p,g,x,j,E){return g===null||g.tag!==7?(g=$n(x,p.mode,j,E),g.return=p,g):(g=s(g,x),g.return=p,g)}function f(p,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Lo(""+g,p.mode,x),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Is:return x=hi(g.type,g.key,g.props,null,p.mode,x),x.ref=Lr(p,null,g),x.return=p,x;case Yn:return g=Mo(g,p.mode,x),g.return=p,g;case Gt:var j=g._init;return f(p,j(g._payload),x)}if(Fr(g)||$r(g))return g=$n(g,p.mode,x,null),g.return=p,g;Hs(p,g)}return null}function v(p,g,x,j){var E=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:l(p,g,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Is:return x.key===E?c(p,g,x,j):null;case Yn:return x.key===E?u(p,g,x,j):null;case Gt:return E=x._init,v(p,g,E(x._payload),j)}if(Fr(x)||$r(x))return E!==null?null:d(p,g,x,j,null);Hs(p,x)}return null}function w(p,g,x,j,E){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(x)||null,l(g,p,""+j,E);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Is:return p=p.get(j.key===null?x:j.key)||null,c(g,p,j,E);case Yn:return p=p.get(j.key===null?x:j.key)||null,u(g,p,j,E);case Gt:var k=j._init;return w(p,g,x,k(j._payload),E)}if(Fr(j)||$r(j))return p=p.get(x)||null,d(g,p,j,E,null);Hs(g,j)}return null}function b(p,g,x,j){for(var E=null,k=null,C=g,T=g=0,M=null;C!==null&&T<x.length;T++){C.index>T?(M=C,C=null):M=C.sibling;var V=v(p,C,x[T],j);if(V===null){C===null&&(C=M);break}t&&C&&V.alternate===null&&e(p,C),g=i(V,g,T),k===null?E=V:k.sibling=V,k=V,C=M}if(T===x.length)return n(p,C),re&&Sn(p,T),E;if(C===null){for(;T<x.length;T++)C=f(p,x[T],j),C!==null&&(g=i(C,g,T),k===null?E=C:k.sibling=C,k=C);return re&&Sn(p,T),E}for(C=r(p,C);T<x.length;T++)M=w(C,p,T,x[T],j),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?T:M.key),g=i(M,g,T),k===null?E=M:k.sibling=M,k=M);return t&&C.forEach(function(Te){return e(p,Te)}),re&&Sn(p,T),E}function y(p,g,x,j){var E=$r(x);if(typeof E!="function")throw Error(z(150));if(x=E.call(x),x==null)throw Error(z(151));for(var k=E=null,C=g,T=g=0,M=null,V=x.next();C!==null&&!V.done;T++,V=x.next()){C.index>T?(M=C,C=null):M=C.sibling;var Te=v(p,C,V.value,j);if(Te===null){C===null&&(C=M);break}t&&C&&Te.alternate===null&&e(p,C),g=i(Te,g,T),k===null?E=Te:k.sibling=Te,k=Te,C=M}if(V.done)return n(p,C),re&&Sn(p,T),E;if(C===null){for(;!V.done;T++,V=x.next())V=f(p,V.value,j),V!==null&&(g=i(V,g,T),k===null?E=V:k.sibling=V,k=V);return re&&Sn(p,T),E}for(C=r(p,C);!V.done;T++,V=x.next())V=w(C,p,T,V.value,j),V!==null&&(t&&V.alternate!==null&&C.delete(V.key===null?T:V.key),g=i(V,g,T),k===null?E=V:k.sibling=V,k=V);return t&&C.forEach(function(Bt){return e(p,Bt)}),re&&Sn(p,T),E}function _(p,g,x,j){if(typeof x=="object"&&x!==null&&x.type===Xn&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Is:e:{for(var E=x.key,k=g;k!==null;){if(k.key===E){if(E=x.type,E===Xn){if(k.tag===7){n(p,k.sibling),g=s(k,x.props.children),g.return=p,p=g;break e}}else if(k.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Gt&&iu(E)===k.type){n(p,k.sibling),g=s(k,x.props),g.ref=Lr(p,k,x),g.return=p,p=g;break e}n(p,k);break}else e(p,k);k=k.sibling}x.type===Xn?(g=$n(x.props.children,p.mode,j,x.key),g.return=p,p=g):(j=hi(x.type,x.key,x.props,null,p.mode,j),j.ref=Lr(p,g,x),j.return=p,p=j)}return a(p);case Yn:e:{for(k=x.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(p,g.sibling),g=s(g,x.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Mo(x,p.mode,j),g.return=p,p=g}return a(p);case Gt:return k=x._init,_(p,g,k(x._payload),j)}if(Fr(x))return b(p,g,x,j);if($r(x))return y(p,g,x,j);Hs(p,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(p,g.sibling),g=s(g,x),g.return=p,p=g):(n(p,g),g=Lo(x,p.mode,j),g.return=p,p=g),a(p)):n(p,g)}return _}var yr=ph(!0),gh=ph(!1),ki=fn(null),Ei=null,or=null,Nl=null;function kl(){Nl=or=Ei=null}function El(t){var e=ki.current;ne(ki),t._currentValue=e}function Na(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fr(t,e){Ei=t,Nl=or=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ue=!0),t.firstContext=null)}function st(t){var e=t._currentValue;if(Nl!==t)if(t={context:t,memoizedValue:e,next:null},or===null){if(Ei===null)throw Error(z(308));or=t,Ei.dependencies={lanes:0,firstContext:t}}else or=or.next=t;return e}var Cn=null;function zl(t){Cn===null?Cn=[t]:Cn.push(t)}function vh(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,zl(e)):(n.next=s.next,s.next=n),e.interleaved=n,Mt(t,r)}function Mt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qt=!1;function Cl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function It(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function on(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Mt(t,n)}return s=r.interleaved,s===null?(e.next=e,zl(r)):(e.next=s.next,s.next=e),r.interleaved=e,Mt(t,n)}function oi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ml(t,n)}}function ou(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zi(t,e,n,r){var s=t.updateQueue;Qt=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,d=u=c=null,l=i;do{var v=l.lane,w=l.eventTime;if((r&v)===v){d!==null&&(d=d.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,y=l;switch(v=e,w=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){f=b.call(w,f,v);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,v=typeof b=="function"?b.call(w,f,v):b,v==null)break e;f=ae({},f,v);break e;case 2:Qt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else w={eventTime:w,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=w,c=f):d=d.next=w,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Rn|=a,t.lanes=a,t.memoizedState=f}}function au(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Es={},jt=fn(Es),gs=fn(Es),vs=fn(Es);function Pn(t){if(t===Es)throw Error(z(174));return t}function Pl(t,e){switch(Z(vs,e),Z(gs,t),Z(jt,Es),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ia(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ia(e,t)}ne(jt),Z(jt,e)}function br(){ne(jt),ne(gs),ne(vs)}function yh(t){Pn(vs.current);var e=Pn(jt.current),n=ia(e,t.type);e!==n&&(Z(gs,t),Z(jt,n))}function Tl(t){gs.current===t&&(ne(jt),ne(gs))}var ie=fn(0);function Ci(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var To=[];function $l(){for(var t=0;t<To.length;t++)To[t]._workInProgressVersionPrimary=null;To.length=0}var ai=Ut.ReactCurrentDispatcher,$o=Ut.ReactCurrentBatchConfig,In=0,oe=null,pe=null,xe=null,Pi=!1,Xr=!1,xs=0,n0=0;function Ee(){throw Error(z(321))}function Al(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gt(t[n],e[n]))return!1;return!0}function Ol(t,e,n,r,s,i){if(In=i,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ai.current=t===null||t.memoizedState===null?o0:a0,t=n(r,s),Xr){i=0;do{if(Xr=!1,xs=0,25<=i)throw Error(z(301));i+=1,xe=pe=null,e.updateQueue=null,ai.current=l0,t=n(r,s)}while(Xr)}if(ai.current=Ti,e=pe!==null&&pe.next!==null,In=0,xe=pe=oe=null,Pi=!1,e)throw Error(z(300));return t}function Il(){var t=xs!==0;return xs=0,t}function yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?oe.memoizedState=xe=t:xe=xe.next=t,xe}function it(){if(pe===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=pe.next;var e=xe===null?oe.memoizedState:xe.next;if(e!==null)xe=e,pe=t;else{if(t===null)throw Error(z(310));pe=t,t={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},xe===null?oe.memoizedState=xe=t:xe=xe.next=t}return xe}function ys(t,e){return typeof e=="function"?e(t):e}function Ao(t){var e=it(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=pe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((In&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,oe.lanes|=d,Rn|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,gt(r,e.memoizedState)||(Ue=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,oe.lanes|=i,Rn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Oo(t){var e=it(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);gt(i,e.memoizedState)||(Ue=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function bh(){}function wh(t,e){var n=oe,r=it(),s=e(),i=!gt(r.memoizedState,s);if(i&&(r.memoizedState=s,Ue=!0),r=r.queue,Rl(Sh.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||xe!==null&&xe.memoizedState.tag&1){if(n.flags|=2048,bs(9,jh.bind(null,n,r,s,e),void 0,null),ye===null)throw Error(z(349));In&30||_h(n,e,s)}return s}function _h(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jh(t,e,n,r){e.value=n,e.getSnapshot=r,Nh(e)&&kh(t)}function Sh(t,e,n){return n(function(){Nh(e)&&kh(t)})}function Nh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gt(t,n)}catch{return!0}}function kh(t){var e=Mt(t,1);e!==null&&pt(e,t,1,-1)}function lu(t){var e=yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:t},e.queue=t,t=t.dispatch=i0.bind(null,oe,t),[e.memoizedState,t]}function bs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Eh(){return it().memoizedState}function li(t,e,n,r){var s=yt();oe.flags|=t,s.memoizedState=bs(1|e,n,void 0,r===void 0?null:r)}function Hi(t,e,n,r){var s=it();r=r===void 0?null:r;var i=void 0;if(pe!==null){var a=pe.memoizedState;if(i=a.destroy,r!==null&&Al(r,a.deps)){s.memoizedState=bs(e,n,i,r);return}}oe.flags|=t,s.memoizedState=bs(1|e,n,i,r)}function cu(t,e){return li(8390656,8,t,e)}function Rl(t,e){return Hi(2048,8,t,e)}function zh(t,e){return Hi(4,2,t,e)}function Ch(t,e){return Hi(4,4,t,e)}function Ph(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Th(t,e,n){return n=n!=null?n.concat([t]):null,Hi(4,4,Ph.bind(null,e,t),n)}function Ll(){}function $h(t,e){var n=it();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Al(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ah(t,e){var n=it();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Al(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Oh(t,e,n){return In&21?(gt(n,e)||(n=Dd(),oe.lanes|=n,Rn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ue=!0),t.memoizedState=n)}function r0(t,e){var n=G;G=n!==0&&4>n?n:4,t(!0);var r=$o.transition;$o.transition={};try{t(!1),e()}finally{G=n,$o.transition=r}}function Ih(){return it().memoizedState}function s0(t,e,n){var r=ln(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rh(t))Lh(e,n);else if(n=vh(t,e,n,r),n!==null){var s=Oe();pt(n,t,r,s),Mh(n,e,r)}}function i0(t,e,n){var r=ln(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rh(t))Lh(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,gt(l,a)){var c=e.interleaved;c===null?(s.next=s,zl(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=vh(t,e,s,r),n!==null&&(s=Oe(),pt(n,t,r,s),Mh(n,e,r))}}function Rh(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function Lh(t,e){Xr=Pi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ml(t,n)}}var Ti={readContext:st,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useInsertionEffect:Ee,useLayoutEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useMutableSource:Ee,useSyncExternalStore:Ee,useId:Ee,unstable_isNewReconciler:!1},o0={readContext:st,useCallback:function(t,e){return yt().memoizedState=[t,e===void 0?null:e],t},useContext:st,useEffect:cu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,li(4194308,4,Ph.bind(null,e,t),n)},useLayoutEffect:function(t,e){return li(4194308,4,t,e)},useInsertionEffect:function(t,e){return li(4,2,t,e)},useMemo:function(t,e){var n=yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=s0.bind(null,oe,t),[r.memoizedState,t]},useRef:function(t){var e=yt();return t={current:t},e.memoizedState=t},useState:lu,useDebugValue:Ll,useDeferredValue:function(t){return yt().memoizedState=t},useTransition:function(){var t=lu(!1),e=t[0];return t=r0.bind(null,t[1]),yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=oe,s=yt();if(re){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),ye===null)throw Error(z(349));In&30||_h(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,cu(Sh.bind(null,r,i,t),[t]),r.flags|=2048,bs(9,jh.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=yt(),e=ye.identifierPrefix;if(re){var n=Ot,r=At;n=(r&~(1<<32-mt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=n0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},a0={readContext:st,useCallback:$h,useContext:st,useEffect:Rl,useImperativeHandle:Th,useInsertionEffect:zh,useLayoutEffect:Ch,useMemo:Ah,useReducer:Ao,useRef:Eh,useState:function(){return Ao(ys)},useDebugValue:Ll,useDeferredValue:function(t){var e=it();return Oh(e,pe.memoizedState,t)},useTransition:function(){var t=Ao(ys)[0],e=it().memoizedState;return[t,e]},useMutableSource:bh,useSyncExternalStore:wh,useId:Ih,unstable_isNewReconciler:!1},l0={readContext:st,useCallback:$h,useContext:st,useEffect:Rl,useImperativeHandle:Th,useInsertionEffect:zh,useLayoutEffect:Ch,useMemo:Ah,useReducer:Oo,useRef:Eh,useState:function(){return Oo(ys)},useDebugValue:Ll,useDeferredValue:function(t){var e=it();return pe===null?e.memoizedState=t:Oh(e,pe.memoizedState,t)},useTransition:function(){var t=Oo(ys)[0],e=it().memoizedState;return[t,e]},useMutableSource:bh,useSyncExternalStore:wh,useId:Ih,unstable_isNewReconciler:!1};function ut(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ka(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ki={isMounted:function(t){return(t=t._reactInternals)?Dn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Oe(),s=ln(t),i=It(r,s);i.payload=e,n!=null&&(i.callback=n),e=on(t,i,s),e!==null&&(pt(e,t,s,r),oi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Oe(),s=ln(t),i=It(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=on(t,i,s),e!==null&&(pt(e,t,s,r),oi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Oe(),r=ln(t),s=It(n,r);s.tag=2,e!=null&&(s.callback=e),e=on(t,s,r),e!==null&&(pt(e,t,r,n),oi(e,t,r))}};function uu(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!hs(n,r)||!hs(s,i):!0}function Dh(t,e,n){var r=!1,s=dn,i=e.contextType;return typeof i=="object"&&i!==null?i=st(i):(s=Fe(e)?An:Pe.current,r=e.contextTypes,i=(r=r!=null)?vr(t,s):dn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ki,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function du(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ki.enqueueReplaceState(e,e.state,null)}function Ea(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Cl(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=st(i):(i=Fe(e)?An:Pe.current,s.context=vr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ka(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ki.enqueueReplaceState(s,s.state,null),zi(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function wr(t,e){try{var n="",r=e;do n+=Rm(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Io(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function za(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var c0=typeof WeakMap=="function"?WeakMap:Map;function Uh(t,e,n){n=It(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ai||(Ai=!0,Ma=r),za(t,e)},n}function Bh(t,e,n){n=It(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){za(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){za(t,e),typeof r!="function"&&(an===null?an=new Set([this]):an.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function hu(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new c0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=j0.bind(null,t,e,n),e.then(t,t))}function fu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mu(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=It(-1,1),e.tag=2,on(n,e,1))),n.lanes|=1),t)}var u0=Ut.ReactCurrentOwner,Ue=!1;function Ae(t,e,n,r){e.child=t===null?gh(e,null,n,r):yr(e,t.child,n,r)}function pu(t,e,n,r,s){n=n.render;var i=e.ref;return fr(e,s),r=Ol(t,e,n,r,i,s),n=Il(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dt(t,e,s)):(re&&n&&_l(e),e.flags|=1,Ae(t,e,r,s),e.child)}function gu(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ql(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Fh(t,e,i,r,s)):(t=hi(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:hs,n(a,r)&&t.ref===e.ref)return Dt(t,e,s)}return e.flags|=1,t=cn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Fh(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(hs(i,r)&&t.ref===e.ref)if(Ue=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ue=!0);else return e.lanes=t.lanes,Dt(t,e,s)}return Ca(t,e,n,r,s)}function Vh(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z(lr,He),He|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Z(lr,He),He|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Z(lr,He),He|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Z(lr,He),He|=r;return Ae(t,e,s,n),e.child}function Wh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ca(t,e,n,r,s){var i=Fe(n)?An:Pe.current;return i=vr(e,i),fr(e,s),n=Ol(t,e,n,r,i,s),r=Il(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dt(t,e,s)):(re&&r&&_l(e),e.flags|=1,Ae(t,e,n,s),e.child)}function vu(t,e,n,r,s){if(Fe(n)){var i=!0;ji(e)}else i=!1;if(fr(e,s),e.stateNode===null)ci(t,e),Dh(e,n,r),Ea(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=st(u):(u=Fe(n)?An:Pe.current,u=vr(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&du(e,a,r,u),Qt=!1;var v=e.memoizedState;a.state=v,zi(e,r,a,s),c=e.memoizedState,l!==r||v!==c||Be.current||Qt?(typeof d=="function"&&(ka(e,n,d,r),c=e.memoizedState),(l=Qt||uu(e,n,l,r,v,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,xh(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ut(e.type,l),a.props=u,f=e.pendingProps,v=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=st(c):(c=Fe(n)?An:Pe.current,c=vr(e,c));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||v!==c)&&du(e,a,r,c),Qt=!1,v=e.memoizedState,a.state=v,zi(e,r,a,s);var b=e.memoizedState;l!==f||v!==b||Be.current||Qt?(typeof w=="function"&&(ka(e,n,w,r),b=e.memoizedState),(u=Qt||uu(e,n,u,r,v,b,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Pa(t,e,n,r,i,s)}function Pa(t,e,n,r,s,i){Wh(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&nu(e,n,!1),Dt(t,e,i);r=e.stateNode,u0.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=yr(e,t.child,null,i),e.child=yr(e,null,l,i)):Ae(t,e,l,i),e.memoizedState=r.state,s&&nu(e,n,!0),e.child}function qh(t){var e=t.stateNode;e.pendingContext?tu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tu(t,e.context,!1),Pl(t,e.containerInfo)}function xu(t,e,n,r,s){return xr(),Sl(s),e.flags|=256,Ae(t,e,n,r),e.child}var Ta={dehydrated:null,treeContext:null,retryLane:0};function $a(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hh(t,e,n){var r=e.pendingProps,s=ie.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Z(ie,s&1),t===null)return Sa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ji(a,r,0,null),t=$n(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$a(n),e.memoizedState=Ta,t):Ml(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return d0(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=cn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=cn(l,i):(i=$n(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?$a(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Ta,r}return i=t.child,t=i.sibling,r=cn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ml(t,e){return e=Ji({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ks(t,e,n,r){return r!==null&&Sl(r),yr(e,t.child,null,n),t=Ml(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function d0(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Io(Error(z(422))),Ks(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ji({mode:"visible",children:r.children},s,0,null),i=$n(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&yr(e,t.child,null,a),e.child.memoizedState=$a(a),e.memoizedState=Ta,i);if(!(e.mode&1))return Ks(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=Io(i,r,void 0),Ks(t,e,a,r)}if(l=(a&t.childLanes)!==0,Ue||l){if(r=ye,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mt(t,s),pt(r,t,s,-1))}return Wl(),r=Io(Error(z(421))),Ks(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=S0.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ke=sn(s.nextSibling),Ge=e,re=!0,ft=null,t!==null&&(Ze[et++]=At,Ze[et++]=Ot,Ze[et++]=On,At=t.id,Ot=t.overflow,On=e),e=Ml(e,r.children),e.flags|=4096,e)}function yu(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Na(t.return,e,n)}function Ro(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Kh(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ae(t,e,r.children,n),r=ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yu(t,n,e);else if(t.tag===19)yu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Z(ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ci(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ro(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ci(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ro(e,!0,n,null,i);break;case"together":Ro(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ci(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=cn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=cn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function h0(t,e,n){switch(e.tag){case 3:qh(e),xr();break;case 5:yh(e);break;case 1:Fe(e.type)&&ji(e);break;case 4:Pl(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Z(ki,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Z(ie,ie.current&1),e.flags|=128,null):n&e.child.childLanes?Hh(t,e,n):(Z(ie,ie.current&1),t=Dt(t,e,n),t!==null?t.sibling:null);Z(ie,ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Kh(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Z(ie,ie.current),r)break;return null;case 22:case 23:return e.lanes=0,Vh(t,e,n)}return Dt(t,e,n)}var Gh,Aa,Qh,Jh;Gh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Aa=function(){};Qh=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Pn(jt.current);var i=null;switch(n){case"input":s=ta(t,s),r=ta(t,r),i=[];break;case"select":s=ae({},s,{value:void 0}),r=ae({},r,{value:void 0}),i=[];break;case"textarea":s=sa(t,s),r=sa(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wi)}oa(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(is.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(is.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&te("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Jh=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mr(t,e){if(!re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function f0(t,e,n){var r=e.pendingProps;switch(jl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return Fe(e.type)&&_i(),ze(e),null;case 3:return r=e.stateNode,br(),ne(Be),ne(Pe),$l(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ft!==null&&(Ba(ft),ft=null))),Aa(t,e),ze(e),null;case 5:Tl(e);var s=Pn(vs.current);if(n=e.type,t!==null&&e.stateNode!=null)Qh(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return ze(e),null}if(t=Pn(jt.current),qs(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[wt]=e,r[ps]=i,t=(e.mode&1)!==0,n){case"dialog":te("cancel",r),te("close",r);break;case"iframe":case"object":case"embed":te("load",r);break;case"video":case"audio":for(s=0;s<Wr.length;s++)te(Wr[s],r);break;case"source":te("error",r);break;case"img":case"image":case"link":te("error",r),te("load",r);break;case"details":te("toggle",r);break;case"input":zc(r,i),te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},te("invalid",r);break;case"textarea":Pc(r,i),te("invalid",r)}oa(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ws(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ws(r.textContent,l,t),s=["children",""+l]):is.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&te("scroll",r)}switch(n){case"input":Rs(r),Cc(r,i,!0);break;case"textarea":Rs(r),Tc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wi)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[wt]=e,t[ps]=r,Gh(t,e,!1,!1),e.stateNode=t;e:{switch(a=aa(n,r),n){case"dialog":te("cancel",t),te("close",t),s=r;break;case"iframe":case"object":case"embed":te("load",t),s=r;break;case"video":case"audio":for(s=0;s<Wr.length;s++)te(Wr[s],t);s=r;break;case"source":te("error",t),s=r;break;case"img":case"image":case"link":te("error",t),te("load",t),s=r;break;case"details":te("toggle",t),s=r;break;case"input":zc(t,r),s=ta(t,r),te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ae({},r,{value:void 0}),te("invalid",t);break;case"textarea":Pc(t,r),s=sa(t,r),te("invalid",t);break;default:s=r}oa(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ed(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Nd(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&os(t,c):typeof c=="number"&&os(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(is.hasOwnProperty(i)?c!=null&&i==="onScroll"&&te("scroll",t):c!=null&&ll(t,i,c,a))}switch(n){case"input":Rs(t),Cc(t,r,!1);break;case"textarea":Rs(t),Tc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+un(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?cr(t,!!r.multiple,i,!1):r.defaultValue!=null&&cr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=wi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ze(e),null;case 6:if(t&&e.stateNode!=null)Jh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Pn(vs.current),Pn(jt.current),qs(e)){if(r=e.stateNode,n=e.memoizedProps,r[wt]=e,(i=r.nodeValue!==n)&&(t=Ge,t!==null))switch(t.tag){case 3:Ws(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ws(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wt]=e,e.stateNode=r}return ze(e),null;case 13:if(ne(ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(re&&Ke!==null&&e.mode&1&&!(e.flags&128))mh(),xr(),e.flags|=98560,i=!1;else if(i=qs(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[wt]=e}else xr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),i=!1}else ft!==null&&(Ba(ft),ft=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ie.current&1?ve===0&&(ve=3):Wl())),e.updateQueue!==null&&(e.flags|=4),ze(e),null);case 4:return br(),Aa(t,e),t===null&&fs(e.stateNode.containerInfo),ze(e),null;case 10:return El(e.type._context),ze(e),null;case 17:return Fe(e.type)&&_i(),ze(e),null;case 19:if(ne(ie),i=e.memoizedState,i===null)return ze(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Mr(i,!1);else{if(ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ci(t),a!==null){for(e.flags|=128,Mr(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Z(ie,ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&ue()>_r&&(e.flags|=128,r=!0,Mr(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ci(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!re)return ze(e),null}else 2*ue()-i.renderingStartTime>_r&&n!==1073741824&&(e.flags|=128,r=!0,Mr(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ue(),e.sibling=null,n=ie.current,Z(ie,r?n&1|2:n&1),e):(ze(e),null);case 22:case 23:return Vl(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?He&1073741824&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function m0(t,e){switch(jl(e),e.tag){case 1:return Fe(e.type)&&_i(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return br(),ne(Be),ne(Pe),$l(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tl(e),null;case 13:if(ne(ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));xr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ne(ie),null;case 4:return br(),null;case 10:return El(e.type._context),null;case 22:case 23:return Vl(),null;case 24:return null;default:return null}}var Gs=!1,Ce=!1,p0=typeof WeakSet=="function"?WeakSet:Set,$=null;function ar(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){le(t,e,r)}else n.current=null}function Oa(t,e,n){try{n()}catch(r){le(t,e,r)}}var bu=!1;function g0(t,e){if(va=xi,t=th(),wl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=t,v=null;t:for(;;){for(var w;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(w=f.firstChild)!==null;)v=f,f=w;for(;;){if(f===t)break t;if(v===n&&++u===s&&(l=a),v===i&&++d===r&&(c=a),(w=f.nextSibling)!==null)break;f=v,v=f.parentNode}f=w}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xa={focusedElem:t,selectionRange:n},xi=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,_=b.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:ut(e.type,y),_);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(j){le(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return b=bu,bu=!1,b}function Zr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Oa(e,n,i)}s=s.next}while(s!==r)}}function Gi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ia(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yh(t){var e=t.alternate;e!==null&&(t.alternate=null,Yh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wt],delete e[ps],delete e[wa],delete e[Xp],delete e[Zp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xh(t){return t.tag===5||t.tag===3||t.tag===4}function wu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ra(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wi));else if(r!==4&&(t=t.child,t!==null))for(Ra(t,e,n),t=t.sibling;t!==null;)Ra(t,e,n),t=t.sibling}function La(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(La(t,e,n),t=t.sibling;t!==null;)La(t,e,n),t=t.sibling}var _e=null,dt=!1;function Wt(t,e,n){for(n=n.child;n!==null;)Zh(t,e,n),n=n.sibling}function Zh(t,e,n){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Ui,n)}catch{}switch(n.tag){case 5:Ce||ar(n,e);case 6:var r=_e,s=dt;_e=null,Wt(t,e,n),_e=r,dt=s,_e!==null&&(dt?(t=_e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(dt?(t=_e,n=n.stateNode,t.nodeType===8?Co(t.parentNode,n):t.nodeType===1&&Co(t,n),us(t)):Co(_e,n.stateNode));break;case 4:r=_e,s=dt,_e=n.stateNode.containerInfo,dt=!0,Wt(t,e,n),_e=r,dt=s;break;case 0:case 11:case 14:case 15:if(!Ce&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Oa(n,e,a),s=s.next}while(s!==r)}Wt(t,e,n);break;case 1:if(!Ce&&(ar(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){le(n,e,l)}Wt(t,e,n);break;case 21:Wt(t,e,n);break;case 22:n.mode&1?(Ce=(r=Ce)||n.memoizedState!==null,Wt(t,e,n),Ce=r):Wt(t,e,n);break;default:Wt(t,e,n)}}function _u(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new p0),e.forEach(function(r){var s=N0.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:_e=l.stateNode,dt=!1;break e;case 3:_e=l.stateNode.containerInfo,dt=!0;break e;case 4:_e=l.stateNode.containerInfo,dt=!0;break e}l=l.return}if(_e===null)throw Error(z(160));Zh(i,a,s),_e=null,dt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){le(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ef(e,t),e=e.sibling}function ef(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lt(e,t),xt(t),r&4){try{Zr(3,t,t.return),Gi(3,t)}catch(y){le(t,t.return,y)}try{Zr(5,t,t.return)}catch(y){le(t,t.return,y)}}break;case 1:lt(e,t),xt(t),r&512&&n!==null&&ar(n,n.return);break;case 5:if(lt(e,t),xt(t),r&512&&n!==null&&ar(n,n.return),t.flags&32){var s=t.stateNode;try{os(s,"")}catch(y){le(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&_d(s,i),aa(l,a);var u=aa(l,i);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?Ed(s,f):d==="dangerouslySetInnerHTML"?Nd(s,f):d==="children"?os(s,f):ll(s,d,f,u)}switch(l){case"input":na(s,i);break;case"textarea":jd(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?cr(s,!!i.multiple,w,!1):v!==!!i.multiple&&(i.defaultValue!=null?cr(s,!!i.multiple,i.defaultValue,!0):cr(s,!!i.multiple,i.multiple?[]:"",!1))}s[ps]=i}catch(y){le(t,t.return,y)}}break;case 6:if(lt(e,t),xt(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){le(t,t.return,y)}}break;case 3:if(lt(e,t),xt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{us(e.containerInfo)}catch(y){le(t,t.return,y)}break;case 4:lt(e,t),xt(t);break;case 13:lt(e,t),xt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bl=ue())),r&4&&_u(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ce=(u=Ce)||d,lt(e,t),Ce=u):lt(e,t),xt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(f=$=d;$!==null;){switch(v=$,w=v.child,v.tag){case 0:case 11:case 14:case 15:Zr(4,v,v.return);break;case 1:ar(v,v.return);var b=v.stateNode;if(typeof b.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(y){le(r,n,y)}}break;case 5:ar(v,v.return);break;case 22:if(v.memoizedState!==null){Su(f);continue}}w!==null?(w.return=v,$=w):Su(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=kd("display",a))}catch(y){le(t,t.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){le(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:lt(e,t),xt(t),r&4&&_u(t);break;case 21:break;default:lt(e,t),xt(t)}}function xt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xh(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(os(s,""),r.flags&=-33);var i=wu(t);La(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=wu(t);Ra(t,l,a);break;default:throw Error(z(161))}}catch(c){le(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function v0(t,e,n){$=t,tf(t)}function tf(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Gs;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ce;l=Gs;var u=Ce;if(Gs=a,(Ce=c)&&!u)for($=s;$!==null;)a=$,c=a.child,a.tag===22&&a.memoizedState!==null?Nu(s):c!==null?(c.return=a,$=c):Nu(s);for(;i!==null;)$=i,tf(i),i=i.sibling;$=s,Gs=l,Ce=u}ju(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):ju(t)}}function ju(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ce||Gi(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ce)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ut(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&au(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}au(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&us(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ce||e.flags&512&&Ia(e)}catch(v){le(e,e.return,v)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Su(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Nu(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gi(4,e)}catch(c){le(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){le(e,s,c)}}var i=e.return;try{Ia(e)}catch(c){le(e,i,c)}break;case 5:var a=e.return;try{Ia(e)}catch(c){le(e,a,c)}}}catch(c){le(e,e.return,c)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var x0=Math.ceil,$i=Ut.ReactCurrentDispatcher,Dl=Ut.ReactCurrentOwner,nt=Ut.ReactCurrentBatchConfig,H=0,ye=null,de=null,je=0,He=0,lr=fn(0),ve=0,ws=null,Rn=0,Qi=0,Ul=0,es=null,Me=null,Bl=0,_r=1/0,Pt=null,Ai=!1,Ma=null,an=null,Qs=!1,en=null,Oi=0,ts=0,Da=null,ui=-1,di=0;function Oe(){return H&6?ue():ui!==-1?ui:ui=ue()}function ln(t){return t.mode&1?H&2&&je!==0?je&-je:t0.transition!==null?(di===0&&(di=Dd()),di):(t=G,t!==0||(t=window.event,t=t===void 0?16:Hd(t.type)),t):1}function pt(t,e,n,r){if(50<ts)throw ts=0,Da=null,Error(z(185));Ss(t,n,r),(!(H&2)||t!==ye)&&(t===ye&&(!(H&2)&&(Qi|=n),ve===4&&Yt(t,je)),Ve(t,r),n===1&&H===0&&!(e.mode&1)&&(_r=ue()+500,qi&&mn()))}function Ve(t,e){var n=t.callbackNode;tp(t,e);var r=vi(t,t===ye?je:0);if(r===0)n!==null&&Oc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Oc(n),e===1)t.tag===0?e0(ku.bind(null,t)):dh(ku.bind(null,t)),Jp(function(){!(H&6)&&mn()}),n=null;else{switch(Ud(r)){case 1:n=fl;break;case 4:n=Ld;break;case 16:n=gi;break;case 536870912:n=Md;break;default:n=gi}n=uf(n,nf.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nf(t,e){if(ui=-1,di=0,H&6)throw Error(z(327));var n=t.callbackNode;if(mr()&&t.callbackNode!==n)return null;var r=vi(t,t===ye?je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ii(t,r);else{e=r;var s=H;H|=2;var i=sf();(ye!==t||je!==e)&&(Pt=null,_r=ue()+500,Tn(t,e));do try{w0();break}catch(l){rf(t,l)}while(!0);kl(),$i.current=i,H=s,de!==null?e=0:(ye=null,je=0,e=ve)}if(e!==0){if(e===2&&(s=ha(t),s!==0&&(r=s,e=Ua(t,s))),e===1)throw n=ws,Tn(t,0),Yt(t,r),Ve(t,ue()),n;if(e===6)Yt(t,r);else{if(s=t.current.alternate,!(r&30)&&!y0(s)&&(e=Ii(t,r),e===2&&(i=ha(t),i!==0&&(r=i,e=Ua(t,i))),e===1))throw n=ws,Tn(t,0),Yt(t,r),Ve(t,ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Nn(t,Me,Pt);break;case 3:if(Yt(t,r),(r&130023424)===r&&(e=Bl+500-ue(),10<e)){if(vi(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Oe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ba(Nn.bind(null,t,Me,Pt),e);break}Nn(t,Me,Pt);break;case 4:if(Yt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-mt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*x0(r/1960))-r,10<r){t.timeoutHandle=ba(Nn.bind(null,t,Me,Pt),r);break}Nn(t,Me,Pt);break;case 5:Nn(t,Me,Pt);break;default:throw Error(z(329))}}}return Ve(t,ue()),t.callbackNode===n?nf.bind(null,t):null}function Ua(t,e){var n=es;return t.current.memoizedState.isDehydrated&&(Tn(t,e).flags|=256),t=Ii(t,e),t!==2&&(e=Me,Me=n,e!==null&&Ba(e)),t}function Ba(t){Me===null?Me=t:Me.push.apply(Me,t)}function y0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yt(t,e){for(e&=~Ul,e&=~Qi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mt(e),r=1<<n;t[n]=-1,e&=~r}}function ku(t){if(H&6)throw Error(z(327));mr();var e=vi(t,0);if(!(e&1))return Ve(t,ue()),null;var n=Ii(t,e);if(t.tag!==0&&n===2){var r=ha(t);r!==0&&(e=r,n=Ua(t,r))}if(n===1)throw n=ws,Tn(t,0),Yt(t,e),Ve(t,ue()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nn(t,Me,Pt),Ve(t,ue()),null}function Fl(t,e){var n=H;H|=1;try{return t(e)}finally{H=n,H===0&&(_r=ue()+500,qi&&mn())}}function Ln(t){en!==null&&en.tag===0&&!(H&6)&&mr();var e=H;H|=1;var n=nt.transition,r=G;try{if(nt.transition=null,G=1,t)return t()}finally{G=r,nt.transition=n,H=e,!(H&6)&&mn()}}function Vl(){He=lr.current,ne(lr)}function Tn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Qp(n)),de!==null)for(n=de.return;n!==null;){var r=n;switch(jl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_i();break;case 3:br(),ne(Be),ne(Pe),$l();break;case 5:Tl(r);break;case 4:br();break;case 13:ne(ie);break;case 19:ne(ie);break;case 10:El(r.type._context);break;case 22:case 23:Vl()}n=n.return}if(ye=t,de=t=cn(t.current,null),je=He=e,ve=0,ws=null,Ul=Qi=Rn=0,Me=es=null,Cn!==null){for(e=0;e<Cn.length;e++)if(n=Cn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Cn=null}return t}function rf(t,e){do{var n=de;try{if(kl(),ai.current=Ti,Pi){for(var r=oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pi=!1}if(In=0,xe=pe=oe=null,Xr=!1,xs=0,Dl.current=null,n===null||n.return===null){ve=1,ws=e,de=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=je,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var v=d.alternate;v?(d.updateQueue=v.updateQueue,d.memoizedState=v.memoizedState,d.lanes=v.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=fu(a);if(w!==null){w.flags&=-257,mu(w,a,l,i,e),w.mode&1&&hu(i,u,e),e=w,c=u;var b=e.updateQueue;if(b===null){var y=new Set;y.add(c),e.updateQueue=y}else b.add(c);break e}else{if(!(e&1)){hu(i,u,e),Wl();break e}c=Error(z(426))}}else if(re&&l.mode&1){var _=fu(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),mu(_,a,l,i,e),Sl(wr(c,l));break e}}i=c=wr(c,l),ve!==4&&(ve=2),es===null?es=[i]:es.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=Uh(i,c,e);ou(i,p);break e;case 1:l=c;var g=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(an===null||!an.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=Bh(i,l,e);ou(i,j);break e}}i=i.return}while(i!==null)}af(n)}catch(E){e=E,de===n&&n!==null&&(de=n=n.return);continue}break}while(!0)}function sf(){var t=$i.current;return $i.current=Ti,t===null?Ti:t}function Wl(){(ve===0||ve===3||ve===2)&&(ve=4),ye===null||!(Rn&268435455)&&!(Qi&268435455)||Yt(ye,je)}function Ii(t,e){var n=H;H|=2;var r=sf();(ye!==t||je!==e)&&(Pt=null,Tn(t,e));do try{b0();break}catch(s){rf(t,s)}while(!0);if(kl(),H=n,$i.current=r,de!==null)throw Error(z(261));return ye=null,je=0,ve}function b0(){for(;de!==null;)of(de)}function w0(){for(;de!==null&&!Hm();)of(de)}function of(t){var e=cf(t.alternate,t,He);t.memoizedProps=t.pendingProps,e===null?af(t):de=e,Dl.current=null}function af(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=m0(n,e),n!==null){n.flags&=32767,de=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ve=6,de=null;return}}else if(n=f0(n,e,He),n!==null){de=n;return}if(e=e.sibling,e!==null){de=e;return}de=e=t}while(e!==null);ve===0&&(ve=5)}function Nn(t,e,n){var r=G,s=nt.transition;try{nt.transition=null,G=1,_0(t,e,n,r)}finally{nt.transition=s,G=r}return null}function _0(t,e,n,r){do mr();while(en!==null);if(H&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(np(t,i),t===ye&&(de=ye=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qs||(Qs=!0,uf(gi,function(){return mr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nt.transition,nt.transition=null;var a=G;G=1;var l=H;H|=4,Dl.current=null,g0(t,n),ef(n,t),Fp(xa),xi=!!va,xa=va=null,t.current=n,v0(n),Km(),H=l,G=a,nt.transition=i}else t.current=n;if(Qs&&(Qs=!1,en=t,Oi=s),i=t.pendingLanes,i===0&&(an=null),Jm(n.stateNode),Ve(t,ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ai)throw Ai=!1,t=Ma,Ma=null,t;return Oi&1&&t.tag!==0&&mr(),i=t.pendingLanes,i&1?t===Da?ts++:(ts=0,Da=t):ts=0,mn(),null}function mr(){if(en!==null){var t=Ud(Oi),e=nt.transition,n=G;try{if(nt.transition=null,G=16>t?16:t,en===null)var r=!1;else{if(t=en,en=null,Oi=0,H&6)throw Error(z(331));var s=H;for(H|=4,$=t.current;$!==null;){var i=$,a=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:Zr(8,d,i)}var f=d.child;if(f!==null)f.return=d,$=f;else for(;$!==null;){d=$;var v=d.sibling,w=d.return;if(Yh(d),d===u){$=null;break}if(v!==null){v.return=w,$=v;break}$=w}}}var b=i.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}$=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,$=a;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zr(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,$=p;break e}$=i.return}}var g=t.current;for($=g;$!==null;){a=$;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,$=x;else e:for(a=g;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gi(9,l)}}catch(E){le(l,l.return,E)}if(l===a){$=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,$=j;break e}$=l.return}}if(H=s,mn(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Ui,t)}catch{}r=!0}return r}finally{G=n,nt.transition=e}}return!1}function Eu(t,e,n){e=wr(n,e),e=Uh(t,e,1),t=on(t,e,1),e=Oe(),t!==null&&(Ss(t,1,e),Ve(t,e))}function le(t,e,n){if(t.tag===3)Eu(t,t,n);else for(;e!==null;){if(e.tag===3){Eu(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(an===null||!an.has(r))){t=wr(n,t),t=Bh(e,t,1),e=on(e,t,1),t=Oe(),e!==null&&(Ss(e,1,t),Ve(e,t));break}}e=e.return}}function j0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Oe(),t.pingedLanes|=t.suspendedLanes&n,ye===t&&(je&n)===n&&(ve===4||ve===3&&(je&130023424)===je&&500>ue()-Bl?Tn(t,0):Ul|=n),Ve(t,e)}function lf(t,e){e===0&&(t.mode&1?(e=Ds,Ds<<=1,!(Ds&130023424)&&(Ds=4194304)):e=1);var n=Oe();t=Mt(t,e),t!==null&&(Ss(t,e,n),Ve(t,n))}function S0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lf(t,n)}function N0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),lf(t,n)}var cf;cf=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Be.current)Ue=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ue=!1,h0(t,e,n);Ue=!!(t.flags&131072)}else Ue=!1,re&&e.flags&1048576&&hh(e,Ni,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ci(t,e),t=e.pendingProps;var s=vr(e,Pe.current);fr(e,n),s=Ol(null,e,r,t,s,n);var i=Il();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fe(r)?(i=!0,ji(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cl(e),s.updater=Ki,e.stateNode=s,s._reactInternals=e,Ea(e,r,t,n),e=Pa(null,e,r,!0,i,n)):(e.tag=0,re&&i&&_l(e),Ae(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ci(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=E0(r),t=ut(r,t),s){case 0:e=Ca(null,e,r,t,n);break e;case 1:e=vu(null,e,r,t,n);break e;case 11:e=pu(null,e,r,t,n);break e;case 14:e=gu(null,e,r,ut(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ut(r,s),Ca(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ut(r,s),vu(t,e,r,s,n);case 3:e:{if(qh(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xh(t,e),zi(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=wr(Error(z(423)),e),e=xu(t,e,r,n,s);break e}else if(r!==s){s=wr(Error(z(424)),e),e=xu(t,e,r,n,s);break e}else for(Ke=sn(e.stateNode.containerInfo.firstChild),Ge=e,re=!0,ft=null,n=gh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xr(),r===s){e=Dt(t,e,n);break e}Ae(t,e,r,n)}e=e.child}return e;case 5:return yh(e),t===null&&Sa(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,ya(r,s)?a=null:i!==null&&ya(r,i)&&(e.flags|=32),Wh(t,e),Ae(t,e,a,n),e.child;case 6:return t===null&&Sa(e),null;case 13:return Hh(t,e,n);case 4:return Pl(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=yr(e,null,r,n):Ae(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ut(r,s),pu(t,e,r,s,n);case 7:return Ae(t,e,e.pendingProps,n),e.child;case 8:return Ae(t,e,e.pendingProps.children,n),e.child;case 12:return Ae(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Z(ki,r._currentValue),r._currentValue=a,i!==null)if(gt(i.value,a)){if(i.children===s.children&&!Be.current){e=Dt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=It(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Na(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Na(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ae(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,fr(e,n),s=st(s),r=r(s),e.flags|=1,Ae(t,e,r,n),e.child;case 14:return r=e.type,s=ut(r,e.pendingProps),s=ut(r.type,s),gu(t,e,r,s,n);case 15:return Fh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ut(r,s),ci(t,e),e.tag=1,Fe(r)?(t=!0,ji(e)):t=!1,fr(e,n),Dh(e,r,s),Ea(e,r,s,n),Pa(null,e,r,!0,t,n);case 19:return Kh(t,e,n);case 22:return Vh(t,e,n)}throw Error(z(156,e.tag))};function uf(t,e){return Rd(t,e)}function k0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tt(t,e,n,r){return new k0(t,e,n,r)}function ql(t){return t=t.prototype,!(!t||!t.isReactComponent)}function E0(t){if(typeof t=="function")return ql(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ul)return 11;if(t===dl)return 14}return 2}function cn(t,e){var n=t.alternate;return n===null?(n=tt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hi(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")ql(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Xn:return $n(n.children,s,i,e);case cl:a=8,s|=8;break;case Yo:return t=tt(12,n,e,s|2),t.elementType=Yo,t.lanes=i,t;case Xo:return t=tt(13,n,e,s),t.elementType=Xo,t.lanes=i,t;case Zo:return t=tt(19,n,e,s),t.elementType=Zo,t.lanes=i,t;case yd:return Ji(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vd:a=10;break e;case xd:a=9;break e;case ul:a=11;break e;case dl:a=14;break e;case Gt:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=tt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function $n(t,e,n,r){return t=tt(7,t,r,e),t.lanes=n,t}function Ji(t,e,n,r){return t=tt(22,t,r,e),t.elementType=yd,t.lanes=n,t.stateNode={isHidden:!1},t}function Lo(t,e,n){return t=tt(6,t,null,e),t.lanes=n,t}function Mo(t,e,n){return e=tt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function z0(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xo(0),this.expirationTimes=xo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hl(t,e,n,r,s,i,a,l,c){return t=new z0(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cl(i),t}function C0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function df(t){if(!t)return dn;t=t._reactInternals;e:{if(Dn(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Fe(n))return uh(t,n,e)}return e}function hf(t,e,n,r,s,i,a,l,c){return t=Hl(n,r,!0,t,s,i,a,l,c),t.context=df(null),n=t.current,r=Oe(),s=ln(n),i=It(r,s),i.callback=e??null,on(n,i,s),t.current.lanes=s,Ss(t,s,r),Ve(t,r),t}function Yi(t,e,n,r){var s=e.current,i=Oe(),a=ln(s);return n=df(n),e.context===null?e.context=n:e.pendingContext=n,e=It(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=on(s,e,a),t!==null&&(pt(t,s,a,i),oi(t,s,a)),a}function Ri(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kl(t,e){zu(t,e),(t=t.alternate)&&zu(t,e)}function P0(){return null}var ff=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gl(t){this._internalRoot=t}Xi.prototype.render=Gl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Yi(t,e,null,null)};Xi.prototype.unmount=Gl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ln(function(){Yi(null,t,null,null)}),e[Lt]=null}};function Xi(t){this._internalRoot=t}Xi.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jt.length&&e!==0&&e<Jt[n].priority;n++);Jt.splice(n,0,t),n===0&&qd(t)}};function Ql(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cu(){}function T0(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ri(a);i.call(u)}}var a=hf(e,r,t,0,null,!1,!1,"",Cu);return t._reactRootContainer=a,t[Lt]=a.current,fs(t.nodeType===8?t.parentNode:t),Ln(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ri(c);l.call(u)}}var c=Hl(t,0,!1,null,null,!1,!1,"",Cu);return t._reactRootContainer=c,t[Lt]=c.current,fs(t.nodeType===8?t.parentNode:t),Ln(function(){Yi(e,c,n,r)}),c}function eo(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Ri(a);l.call(c)}}Yi(e,a,t,s)}else a=T0(n,e,t,s,r);return Ri(a)}Bd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vr(e.pendingLanes);n!==0&&(ml(e,n|1),Ve(e,ue()),!(H&6)&&(_r=ue()+500,mn()))}break;case 13:Ln(function(){var r=Mt(t,1);if(r!==null){var s=Oe();pt(r,t,1,s)}}),Kl(t,1)}};pl=function(t){if(t.tag===13){var e=Mt(t,134217728);if(e!==null){var n=Oe();pt(e,t,134217728,n)}Kl(t,134217728)}};Fd=function(t){if(t.tag===13){var e=ln(t),n=Mt(t,e);if(n!==null){var r=Oe();pt(n,t,e,r)}Kl(t,e)}};Vd=function(){return G};Wd=function(t,e){var n=G;try{return G=t,e()}finally{G=n}};ca=function(t,e,n){switch(e){case"input":if(na(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wi(r);if(!s)throw Error(z(90));wd(r),na(r,s)}}}break;case"textarea":jd(t,n);break;case"select":e=n.value,e!=null&&cr(t,!!n.multiple,e,!1)}};Pd=Fl;Td=Ln;var $0={usingClientEntryPoint:!1,Events:[ks,nr,Wi,zd,Cd,Fl]},Dr={findFiberByHostInstance:zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A0={bundleType:Dr.bundleType,version:Dr.version,rendererPackageName:Dr.rendererPackageName,rendererConfig:Dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Od(t),t===null?null:t.stateNode},findFiberByHostInstance:Dr.findFiberByHostInstance||P0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Js=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Js.isDisabled&&Js.supportsFiber)try{Ui=Js.inject(A0),_t=Js}catch{}}Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$0;Je.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ql(e))throw Error(z(200));return C0(t,e,null,n)};Je.createRoot=function(t,e){if(!Ql(t))throw Error(z(299));var n=!1,r="",s=ff;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hl(t,1,!1,null,null,n,!1,r,s),t[Lt]=e.current,fs(t.nodeType===8?t.parentNode:t),new Gl(e)};Je.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Od(e),t=t===null?null:t.stateNode,t};Je.flushSync=function(t){return Ln(t)};Je.hydrate=function(t,e,n){if(!Zi(e))throw Error(z(200));return eo(null,t,e,!0,n)};Je.hydrateRoot=function(t,e,n){if(!Ql(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=ff;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=hf(e,null,t,1,n??null,s,!1,i,a),t[Lt]=e.current,fs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Xi(e)};Je.render=function(t,e,n){if(!Zi(e))throw Error(z(200));return eo(null,t,e,!1,n)};Je.unmountComponentAtNode=function(t){if(!Zi(t))throw Error(z(40));return t._reactRootContainer?(Ln(function(){eo(null,null,t,!1,function(){t._reactRootContainer=null,t[Lt]=null})}),!0):!1};Je.unstable_batchedUpdates=Fl;Je.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zi(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return eo(t,e,n,!1,r)};Je.version="18.3.1-next-f1338f8080-20240426";function mf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mf)}catch(t){console.error(t)}}mf(),fd.exports=Je;var O0=fd.exports,Pu=O0;Qo.createRoot=Pu.createRoot,Qo.hydrateRoot=Pu.hydrateRoot;const I0="modulepreload",R0=function(t){return"/"+t},Tu={},zs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=R0(c),c in Tu)return;Tu[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":I0,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((v,w)=>{f.addEventListener("load",v),f.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},L0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zs(async()=>{const{default:r}=await Promise.resolve().then(()=>Er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Jl extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class M0 extends Jl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class $u extends Jl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Au extends Jl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fa;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Fa||(Fa={}));var D0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class U0{constructor(e,{headers:n={},customFetch:r,region:s=Fa.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=L0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return D0(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(y=>{throw new M0(y)}),v=f.headers.get("x-relay-error");if(v&&v==="true")throw new $u(f);if(!f.ok)throw new Au(f);let w=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return w==="application/json"?b=yield f.json():w==="application/octet-stream"?b=yield f.blob():w==="text/event-stream"?b=f:w==="multipart/form-data"?b=yield f.formData():b=yield f.text(),{data:b,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof Au||s instanceof $u?s.context:void 0}}})}}var De={},Yl={},to={},Cs={},no={},ro={},B0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jr=B0();const F0=jr.fetch,pf=jr.fetch.bind(jr),gf=jr.Headers,V0=jr.Request,W0=jr.Response,Er=Object.freeze(Object.defineProperty({__proto__:null,Headers:gf,Request:V0,Response:W0,default:pf,fetch:F0},Symbol.toStringTag,{value:"Module"})),q0=am(Er);var so={};Object.defineProperty(so,"__esModule",{value:!0});let H0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};so.default=H0;var vf=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ro,"__esModule",{value:!0});const K0=vf(q0),G0=vf(so);let Q0=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=K0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,u;let d=null,f=null,v=null,w=i.status,b=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=g:f=JSON.parse(g))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");_&&p&&p.length>1&&(v=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,v=null,w=406,b="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const _=await i.text();try{d=JSON.parse(_),Array.isArray(d)&&i.status===404&&(f=[],d=null,w=200,b="OK")}catch{i.status===404&&_===""?(w=204,b="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,w=200,b="OK"),d&&this.shouldThrowOnError)throw new G0.default(d)}return{error:d,data:f,count:v,status:w,statusText:b}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};ro.default=Q0;var J0=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(no,"__esModule",{value:!0});const Y0=J0(ro);let X0=class extends Y0.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};no.default=X0;var Z0=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cs,"__esModule",{value:!0});const eg=Z0(no);let tg=class extends eg.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Cs.default=tg;var ng=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(to,"__esModule",{value:!0});const Ur=ng(Cs);let rg=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Ur.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ur.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ur.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Ur.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Ur.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};to.default=rg;var xf=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yl,"__esModule",{value:!0});const sg=xf(to),ig=xf(Cs);let og=class yf{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new sg.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new yf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([f,v])=>v!==void 0).map(([f,v])=>[f,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([f,v])=>{c.searchParams.append(f,v)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new ig.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Yl.default=og;var zr=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(De,"__esModule",{value:!0});De.PostgrestError=De.PostgrestBuilder=De.PostgrestTransformBuilder=De.PostgrestFilterBuilder=De.PostgrestQueryBuilder=De.PostgrestClient=void 0;const bf=zr(Yl);De.PostgrestClient=bf.default;const wf=zr(to);De.PostgrestQueryBuilder=wf.default;const _f=zr(Cs);De.PostgrestFilterBuilder=_f.default;const jf=zr(no);De.PostgrestTransformBuilder=jf.default;const Sf=zr(ro);De.PostgrestBuilder=Sf.default;const Nf=zr(so);De.PostgrestError=Nf.default;var ag=De.default={PostgrestClient:bf.default,PostgrestQueryBuilder:wf.default,PostgrestFilterBuilder:_f.default,PostgrestTransformBuilder:jf.default,PostgrestBuilder:Sf.default,PostgrestError:Nf.default};const{PostgrestClient:lg,PostgrestQueryBuilder:Jx,PostgrestFilterBuilder:Yx,PostgrestTransformBuilder:Xx,PostgrestBuilder:Zx,PostgrestError:ey}=ag;class cg{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ug="2.15.5",dg=`realtime-js/${ug}`,hg="1.0.0",Va=1e4,fg=1e3,mg=100;var ns;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ns||(ns={}));var fe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(fe||(fe={}));var ht;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ht||(ht={}));var Wa;(function(t){t.websocket="websocket"})(Wa||(Wa={}));var En;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(En||(En={}));class pg{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+s));a=a+s;const c=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class kf{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var X;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(X||(X={}));const Ou=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=gg(a,t,e,s),i),{})},gg=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?Ef(i,a):qa(a)},Ef=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return bg(e,n)}switch(t){case X.bool:return vg(e);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return xg(e);case X.json:case X.jsonb:return yg(e);case X.timestamp:return wg(e);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return qa(e);default:return qa(e)}},qa=t=>t,vg=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},xg=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},yg=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},bg=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Ef(e,l))}return t},wg=t=>typeof t=="string"?t.replace(" ","T"):t,zf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Do{constructor(e,n,r={},s=Va){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Iu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Iu||(Iu={}));class rs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rs.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=rs.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=rs.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const f=i[u];if(f){const v=d.map(_=>_.presence_ref),w=f.map(_=>_.presence_ref),b=d.filter(_=>w.indexOf(_.presence_ref)<0),y=f.filter(_=>v.indexOf(_.presence_ref)<0);b.length>0&&(l[u]=b),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const f=e[l].map(w=>w.presence_ref),v=d.filter(w=>f.indexOf(w.presence_ref)<0);e[l].unshift(...v)}r(l,d,c)}),this.map(a,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ru;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ru||(Ru={}));var ss;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ss||(ss={}));var Tt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Tt||(Tt={}));class Xl{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Do(this,ht.join,this.params,this.timeout),this.rejoinTimer=new kf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ht.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new rs(this),this.broadcastEndpointURL=zf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==fe.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(w=>w.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[ss.PRESENCE]&&this.bindings[ss.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},v={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(Tt.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(Tt.CLOSED)),this.updateJoinPayload(Object.assign({config:v},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var b;if(this.socket.setAuth(),w===void 0){e==null||e(Tt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,_=(b=y==null?void 0:y.length)!==null&&b!==void 0?b:0,p=[];for(let g=0;g<_;g++){const x=y[g],{filter:{event:j,schema:E,table:k,filter:C}}=x,T=w&&w[g];if(T&&T.event===j&&T.schema===E&&T.table===k&&T.filter===C)p.push(Object.assign(Object.assign({},x),{id:T.id}));else{this.unsubscribe(),this.state=fe.errored,e==null||e(Tt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Tt.SUBSCRIBED);return}}).receive("error",w=>{this.state=fe.errored,e==null||e(Tt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Tt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===fe.joined&&e===ss.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=fe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ht.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Do(this,ht.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fe.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Do(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>mg){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=ht;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var b,y,_;return((b=w.filter)===null||b===void 0?void 0:b.event)==="*"||((_=(y=w.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(w=>w.callback(v,r)):(i=this.bindings[a])===null||i===void 0||i.filter(w=>{var b,y,_,p,g,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in w){const j=w.id,E=(b=w.filter)===null||b===void 0?void 0:b.event;return j&&((y=n.ids)===null||y===void 0?void 0:y.includes(j))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const j=(g=(p=w==null?void 0:w.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return j==="*"||j===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===a}).map(w=>{if(typeof v=="object"&&"ids"in v){const b=v.data,{schema:y,table:_,commit_timestamp:p,type:g,errors:x}=b;v=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:p,eventType:g,new:{},old:{},errors:x}),this._getPayloadRecords(b))}w.callback(v,r)})}_isClosed(){return this.state===fe.closed}_isJoined(){return this.state===fe.joined}_isJoining(){return this.state===fe.joining}_isLeaving(){return this.state===fe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Xl.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ht.close,{},e)}_onError(e){this._on(ht.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Ou(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Ou(e.columns,e.old_record)),n}}const Uo=()=>{},Ys={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_g=[1e3,2e3,5e3,1e4],jg=1e4,Sg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ng{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Va,this.transport=null,this.heartbeatIntervalMs=Ys.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Uo,this.ref=0,this.reconnectTimer=null,this.logger=Uo,this.conn=null,this.sendBuffer=[],this.serializer=new pg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>zs(async()=>{const{default:l}=await Promise.resolve().then(()=>Er);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Wa.websocket}`,this.httpEndpoint=zf(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=cg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hg}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ns.connecting:return En.Connecting;case ns.open:return En.Open;case ns.closing:return En.Closing;default:return En.Closed}}isConnected(){return this.connectionState()===En.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Xl(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(fg,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ys.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ht.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Sg],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:dg};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(ht.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new kf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ys.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,a,l,c,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Va,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Ys.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Uo,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:f=>_g[f-1]||jg,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(f,v)=>v(JSON.stringify(f)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Zl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function me(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class kg extends Zl{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ha extends Zl{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Eg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Cf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zs(async()=>{const{default:r}=await Promise.resolve().then(()=>Er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},zg=()=>Eg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zs(()=>Promise.resolve().then(()=>Er),void 0)).Response:Response}),Ka=t=>{if(Array.isArray(t))return t.map(n=>Ka(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Ka(r)}),e},Cg=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Un=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Bo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Pg=(t,e,n)=>Un(void 0,void 0,void 0,function*(){const r=yield zg();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new kg(Bo(s),i,a))}).catch(s=>{e(new Ha(Bo(s),s))}):e(new Ha(Bo(t),t))}),Tg=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(Cg(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Ps(t,e,n,r,s,i){return Un(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(n,Tg(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Pg(c,l,r))})})}function Li(t,e,n,r){return Un(this,void 0,void 0,function*(){return Ps(t,"GET",e,n,r)})}function bt(t,e,n,r,s){return Un(this,void 0,void 0,function*(){return Ps(t,"POST",e,r,s,n)})}function Ga(t,e,n,r,s){return Un(this,void 0,void 0,function*(){return Ps(t,"PUT",e,r,s,n)})}function $g(t,e,n,r){return Un(this,void 0,void 0,function*(){return Ps(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Pf(t,e,n,r,s){return Un(this,void 0,void 0,function*(){return Ps(t,"DELETE",e,r,s,n)})}var $e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Ag={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Og{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Cf(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return $e(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Lu),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(e=="PUT"?Ga:bt)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(me(i))return{data:null,error:i};throw i}})}upload(e,n,r){return $e(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return $e(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Lu.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Ga(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(me(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return $e(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield bt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Zl("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}update(e,n,r){return $e(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return $e(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(me(s))return{data:null,error:s};throw s}})}copy(e,n,r){return $e(this,void 0,void 0,function*(){try{return{data:{path:(yield bt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(me(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return $e(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield bt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(me(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return $e(this,void 0,void 0,function*(){try{const s=yield bt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(me(s))return{data:null,error:s};throw s}})}download(e,n){return $e(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Li(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(me(l))return{data:null,error:l};throw l}})}info(e){return $e(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Li(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ka(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}exists(e){return $e(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield $g(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(me(r)&&r instanceof Ha){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return $e(this,void 0,void 0,function*(){try{return{data:yield Pf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}list(e,n,r){return $e(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Ag),n),{prefix:e||""});return{data:yield bt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(me(s))return{data:null,error:s};throw s}})}listV2(e,n){return $e(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield bt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Ig="2.12.1",Rg={"X-Client-Info":`storage-js/${Ig}`};var Wn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class Lg{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Rg),n),this.fetch=Cf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Wn(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(me(e))return{data:null,error:e};throw e}})}getBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Wn(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Wn(this,void 0,void 0,function*(){try{return{data:yield Ga(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield Pf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}}class Mg extends Lg{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new Og(this.url,this.headers,e,this.fetch)}}const Dg="2.57.4";let qr="";typeof Deno<"u"?qr="deno":typeof document<"u"?qr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qr="react-native":qr="node";const Ug={"X-Client-Info":`supabase-js-${qr}/${Dg}`},Bg={headers:Ug},Fg={schema:"public"},Vg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wg={};var qg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Hg=t=>{let e;return t?e=t:typeof fetch>"u"?e=pf:e=fetch,(...n)=>e(...n)},Kg=()=>typeof Headers>"u"?gf:Headers,Gg=(t,e,n)=>{const r=Hg(n),s=Kg();return(i,a)=>qg(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var Qg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function Jg(t){return t.endsWith("/")?t:t+"/"}function Yg(t,e){var n,r;const{db:s,auth:i,realtime:a,global:l}=t,{db:c,auth:u,realtime:d,global:f}=e,v={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Qg(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function Xg(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Jg(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Tf="2.71.1",Qn=30*1e3,Qa=3,Fo=Qa*Qn,Zg="http://localhost:9999",ev="supabase.auth.token",tv={"X-Client-Info":`gotrue-js/${Tf}`},Ja="X-Supabase-Api-Version",$f={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rv=10*60*1e3;class ec extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function B(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class sv extends ec{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function iv(t){return B(t)&&t.name==="AuthApiError"}class Af extends ec{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pn extends ec{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ht extends pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ov(t){return B(t)&&t.name==="AuthSessionMissingError"}class Xs extends pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zs extends pn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ei extends pn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function av(t){return B(t)&&t.name==="AuthImplicitGrantRedirectError"}class Mu extends pn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ya extends pn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Vo(t){return B(t)&&t.name==="AuthRetryableFetchError"}class Du extends pn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Xa extends pn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Uu=` 	
\r=`.split(""),lv=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Uu.length;e+=1)t[Uu[e].charCodeAt(0)]=-2;for(let e=0;e<Mi.length;e+=1)t[Mi[e].charCodeAt(0)]=e;return t})();function Bu(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Mi[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Mi[r]),e.queuedBits-=6}}function Of(t,e,n){const r=lv[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Fu(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{dv(a,r,n)};for(let a=0;a<t.length;a+=1)Of(t.charCodeAt(a),s,i);return e.join("")}function cv(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function uv(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}cv(r,e)}}function dv(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function hv(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Of(t.charCodeAt(s),n,r);return new Uint8Array(e)}function fv(t){const e=[];return uv(t,n=>e.push(n)),new Uint8Array(e)}function mv(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Bu(s,n,r)),Bu(null,n,r),e.join("")}function pv(t){return Math.round(Date.now()/1e3)+t}function gv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ct=()=>typeof window<"u"&&typeof document<"u",_n={tested:!1,writable:!1},If=()=>{if(!ct())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_n.tested)return _n.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),_n.tested=!0,_n.writable=!0}catch{_n.tested=!0,_n.writable=!1}return _n.writable};function vv(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Rf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zs(async()=>{const{default:r}=await Promise.resolve().then(()=>Er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},xv=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Jn=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},jn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},qt=async(t,e)=>{await t.removeItem(e)};class io{constructor(){this.promise=new io.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}io.promiseConstructor=Promise;function Wo(t){const e=t.split(".");if(e.length!==3)throw new Xa("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!nv.test(e[r]))throw new Xa("JWT not in base64url format");return{header:JSON.parse(Fu(e[0])),payload:JSON.parse(Fu(e[1])),signature:hv(e[2]),raw:{header:e[0],payload:e[1]}}}async function yv(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function bv(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function wv(t){return("0"+t.toString(16)).substr(-2)}function _v(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,wv).join("")}async function jv(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Sv(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await jv(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qn(t,e,n=!1){const r=_v();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Jn(t,`${e}-code-verifier`,s);const i=await Sv(r);return[i,r===i?"plain":"s256"]}const Nv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kv(t){const e=t.headers.get(Ja);if(!e||!e.match(Nv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ev(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function zv(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Cv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hn(t){if(!Cv.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qo(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vu(t){return JSON.parse(JSON.stringify(t))}var Pv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const kn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Tv=[502,503,504];async function Wu(t){var e;if(!xv(t))throw new Ya(kn(t),0);if(Tv.includes(t.status))throw new Ya(kn(t),t.status);let n;try{n=await t.json()}catch(i){throw new Af(kn(i),i)}let r;const s=kv(t);if(s&&s.getTime()>=$f["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Du(kn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ht}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Du(kn(n),t.status,n.weak_password.reasons);throw new sv(kn(n),t.status||500,r)}const $v=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function W(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Ja]||(i[Ja]=$f["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Av(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Av(t,e,n,r,s,i){const a=$v(e,r,s,i);let l;try{l=await t(n,Object.assign({},a))}catch(c){throw console.error(c),new Ya(kn(c),0)}if(l.ok||await Wu(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Wu(c)}}function Ct(t){var e;let n=null;Lv(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=pv(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function qu(t){const e=Ct(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Ov(t){return{data:t,error:null}}function Iv(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=Pv(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Rv(t){return t}function Lv(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ho=["global","local","others"];var Mv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Dv{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Rf(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Ho[0]){if(Ho.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ho.join(", ")}`);try{return await W(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await W(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Xt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Mv(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await W(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Iv,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(B(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await W(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xt})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await W(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Rv});if(d.error)throw d.error;const f=await d.json(),v=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return w.length>0&&(w.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(b.split(";")[1].split("=")[1]);u[`${_}Page`]=y}),u.total=parseInt(v)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(B(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Hn(e);try{return await W(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xt})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Hn(e);try{return await W(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Xt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Hn(e);try{return await W(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Xt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Hn(e.userId);try{const{data:n,error:r}=await W(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(B(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Hn(e.userId),Hn(e.id);try{return{data:await W(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}}function Hu(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Uv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Kn={debug:!!(globalThis&&If()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bv extends Lf{}async function Fv(t,e,n){Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Bv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Kn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Uv();const Vv={url:Zg,storageKey:ev,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ku(t,e,n){return await n()}const Gn={};class _s{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_s.nextInstanceID,_s.nextInstanceID+=1,this.instanceID>0&&ct()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Vv),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Dv({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Rf(s.fetch),this.lock=s.lock||Ku,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ct()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Fv:this.lock=Ku,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:If()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Hu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Hu(this.memoryStorage)),ct()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Gn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Gn[this.storageKey]=Object.assign(Object.assign({},Gn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Gn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Gn[this.storageKey]=Object.assign(Object.assign({},Gn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Tf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=vv(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ct()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),av(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return B(n)?{error:n}:{error:new Af("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ct}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:f,options:v}=e;let w=null,b=null;this.flowType==="pkce"&&([w,b]=await qn(this.storage,this.storageKey)),i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:d,password:f,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:w,code_challenge_method:b},xform:Ct})}else if("phone"in e){const{phone:d,password:f,options:v}=e;i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Ct})}else throw new Zs("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:l}=e;n=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:qu})}else if("phone"in e){const{phone:i,password:a,options:l}=e;n=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:qu})}else throw new Zs("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Xs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(B(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,a,l,c,u,d,f,v,w;let b,y;if("message"in e)b=e.message,y=e.signature;else{const{chain:_,wallet:p,statement:g,options:x}=e;let j;if(ct())if(typeof p=="object")j=p;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))j=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=p}const E=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const k=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)b=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),y=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${E.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await j.signMessage(new TextEncoder().encode(b),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=k}}try{const{data:_,error:p}=await W(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:mv(y)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Ct});if(p)throw p;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Xs}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:p})}catch(_){if(B(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await jn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await W(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ct});if(await qt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Xs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(B(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,l=await W(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ct}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Xs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(B(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await qn(this.storage,this.storageKey));const{error:f}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Zs("You must provide either an email or phone number.")}catch(l){if(B(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await W(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ct});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(B(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await qn(this.storage,this.storageKey)),await W(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Ov})}catch(i){if(B(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ht;const{error:s}=await W(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await W(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:l}=await W(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Zs("You must provide either an email or phone number and a type")}catch(n){if(B(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await jn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Fo:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await jn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=qo()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xt}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ht}:await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Xt})})}catch(n){if(B(n))return ov(n)&&(await this._removeSession(),await qt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ht;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await qn(this.storage,this.storageKey));const{data:u,error:d}=await W(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Xt});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ht;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Wo(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(B(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:l}=n;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ht;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(B(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ct())throw new ei("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ei(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Mu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ei("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Mu("No code detected.");const{data:g,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!a||!u)throw new ei("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let v=d+f;c&&(v=parseInt(c));const w=v-d;w*1e3<=Qn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${f}s`);const b=v-f;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,v,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,v,d);const{data:y,error:_}=await this._getUser(i);if(_)throw _;const p={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:v,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(B(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await jn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(iv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await qt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=gv(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await qn(this.storage,this.storageKey,!0));try{return await W(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(B(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:f,error:v}=i;if(v)throw v;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await W(this.fetch,"GET",w,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ct()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(B(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await W(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(B(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await bv(async s=>(s>0&&await yv(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await W(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ct})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Vo(i)&&Date.now()+a-r<Qn})}catch(r){if(this._debug(n,"error",r),B(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ct()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await jn(this.storage,this.storageKey);if(s&&this.userStorage){let a=await jn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Jn(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:qo()}else if(s&&!s.user&&!s.user){const a=await jn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await qt(this.storage,this.storageKey+"-user"),await Jn(this.storage,this.storageKey,s)):s.user=qo()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Fo;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Fo}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Vo(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new io;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Ht;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),B(i)){const a={session:null,error:i};return Vo(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Jn(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Vu(s);await Jn(this.storage,this.storageKey,i)}else{const s=Vu(n);await Jn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await qt(this.storage,this.storageKey),await qt(this.storage,this.storageKey+"-code-verifier"),await qt(this.storage,this.storageKey+"-user"),this.userStorage&&await qt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ct()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Qn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Qn}ms, refresh threshold is ${Qa} ticks`),s<=Qa&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Lf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ct()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await qn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await W(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(B(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await W(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(B(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(B(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(B(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Wo(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+rv>s)return r;const{data:i,error:a}=await W(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:w,error:b}=await this.getSession();if(b||!w.session)return{data:null,error:b};r=w.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Wo(r);n!=null&&n.allowExpired||Ev(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:w}=await this.getUser(r);if(w)throw w;return{data:{claims:i,header:s,signature:a},error:null}}const d=zv(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,fv(`${l}.${c}`)))throw new Xa("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}}}_s.nextInstanceID=0;const Wv=_s;class qv extends Wv{constructor(e){super(e)}}var Hv=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class Kv{constructor(e,n,r){var s,i,a;this.supabaseUrl=e,this.supabaseKey=n;const l=Xg(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Fg,realtime:Wg,auth:Object.assign(Object.assign({},Vg),{storageKey:c}),global:Bg},d=Yg(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=Gg(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new lg(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Mg(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new U0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Hv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:l,lock:c,debug:u},d,f){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qv({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),d),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ng(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Gv=(t,e,n)=>new Kv(t,e,n);function Qv(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Qv()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tc="https://gfjwebngyzfftakbbmji.supabase.co",nc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmandlYm5neXpmZnRha2JibWppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzMjI1MzEsImV4cCI6MjA3Mzg5ODUzMX0.niC_FqHiHZ4EMNW86VpXX_ouIVsxftfXV8JgZxuCBGE";console.log("🔍 Debug - Variables hardcodeadas:");console.log("URL:",tc);console.log("ANON_KEY:",nc.substring(0,20)+"...");console.log("✅ Variables configuradas correctamente");const Jv=tc.includes("supabase.co")&&nc.startsWith("eyJ");let I=null;if(Jv)try{I=Gv(tc,nc),console.log("[StreamZone] Supabase configurado correctamente")}catch(t){console.error("[StreamZone] Error configurando Supabase:",t),I=null}else console.warn("[StreamZone] Supabase no configurado. Para habilitar el guardado en la nube, crea .env.local con VITE_SUPABASE_URL y VITE_SUPABASE_ANON_KEY");const Yv=async t=>{if(!I)return console.warn("Supabase no configurado, no se puede crear usuario"),{data:null,error:new Error("Supabase no configurado")};try{const{data:e,error:n}=await I.from("users").insert([t]).select().single();if(n)throw n;return{data:e,error:null}}catch(e){return console.error("Error creating user:",e),{data:null,error:e}}},Xv=async t=>{if(!I)return console.warn("Supabase no configurado, no se puede obtener usuario"),{data:null,error:new Error("Supabase no configurado")};try{const{data:e,error:n}=await I.from("users").select("*").eq("phone",t).single();if(n&&n.code!=="PGRST116")throw n;return{data:e,error:null}}catch(e){return console.error("Error getting user by phone:",e),{data:null,error:e}}},Zv=async(t,e)=>{if(!I)return console.warn("Supabase no configurado, no se puede actualizar usuario"),{data:null,error:new Error("Supabase no configurado")};try{const{data:n,error:r}=await I.from("users").update(e).eq("id",t).select().single();if(r)throw r;return{data:n,error:null}}catch(n){return console.error("Error updating user:",n),{data:null,error:n}}},ex=async t=>{if(!I)return console.warn("Supabase no configurado, no se puede crear administrador"),{data:null,error:new Error("Supabase no configurado")};try{const{data:e,error:n}=await I.from("admin_emails").select("email").eq("email",t.email).single();if(e)return{data:null,error:new Error("Este email ya está registrado como administrador")};const{data:r,error:s}=await I.from("admin_emails").insert([t]).select().single();if(s){if(s.code==="23505"||s.message.includes("duplicate"))return{data:null,error:new Error("Este email ya está registrado como administrador")};throw s}return{data:r,error:null}}catch(e){return console.error("Error creating admin:",e),{data:null,error:e}}},Za=async()=>{if(!I)return console.warn("Supabase no configurado, no se puede obtener administradores"),{data:null,error:new Error("Supabase no configurado")};try{const{data:t,error:e}=await I.from("admin_emails").select("*").order("created_at",{ascending:!1});if(e)throw e;return{data:t,error:null}}catch(t){return console.error("Error getting admins:",t),{data:null,error:t}}},tx=async t=>{if(!I)return console.warn("Supabase no configurado, no se puede eliminar administrador"),{data:null,error:new Error("Supabase no configurado")};try{const{data:e,error:n}=await I.from("admin_emails").delete().eq("email",t).select();if(n)throw n;return{data:e,error:null}}catch(e){return console.error("Error deleting admin:",e),{data:null,error:e}}},nx=t=>{const e=Date.now().toString().slice(-4);return`Admin_${t.split("@")[0].slice(0,3).toUpperCase()}_${e}`},rx=async(t,e)=>{if(!I)return console.warn("Supabase no configurado, no se puede sincronizar administradores"),{data:null,error:new Error("Supabase no configurado")};try{const{data:n,error:r}=await I.from("admin_emails").select("email");if(r)return console.warn("Error obteniendo admins existentes, saltando sincronización:",r),{data:{created:0},error:null};const s=(n==null?void 0:n.map(a=>a.email))||[],i=t.filter(a=>!s.includes(a));if(i.length>0){const a=i.map(u=>({email:u,password:e[u]||nx(u),is_active:!0})),{data:l,error:c}=await I.from("admin_emails").insert(a);if(c)return console.warn("Error creando algunos admins, continuando:",c),{data:{created:0},error:null}}return{data:{created:i.length},error:null}}catch(n){return console.warn("Error syncing admins to database, continuando:",n),{data:{created:0},error:null}}},Gu=async t=>{if(!I)return console.warn("Supabase no configurado, no se puede crear compra"),{data:null,error:new Error("Supabase no configurado")};try{const{data:e,error:n}=await I.from("purchases").insert([t]).select().single();if(n)throw n;return{data:e,error:null}}catch(e){return console.error("Error creating purchase:",e),{data:null,error:e}}},sx=async t=>{if(!I)return console.warn("Supabase no configurado, no se pueden obtener compras"),{data:[],error:new Error("Supabase no configurado")};try{const{data:e,error:n}=await I.from("purchases").select("*").eq("phone",t).order("created_at",{ascending:!1});if(n)throw n;return{data:e,error:null}}catch(e){return console.error("Error getting user purchases:",e),{data:[],error:e}}},Qu=async t=>{if(!I)return console.warn("Supabase no configurado, saltando sincronización de servicios"),{data:[],error:null};try{const{data:e,error:n}=await I.from("services").select("*");if(n)throw n;const r=new Map((e==null?void 0:e.map(i=>[i.name,i]))||[]),s=t.filter(i=>!r.has(i.name));if(s.length>0){const{data:i,error:a}=await I.from("services").insert(s.map(l=>({id:l.id,name:l.name,price:l.price,billing:l.billing,color:l.color,logo:l.logo}))).select();if(a)throw a;console.log(`Sincronizados ${s.length} servicios nuevos`)}return{data:s,error:null}}catch(e){return console.error("Error syncing services:",e),{data:[],error:e}}},ix=async()=>{try{const{data:t,error:e}=await I.from("purchases").select(`
        *,
        users!purchases_phone_fkey (
          name,
          email
        )
      `).order("created_at",{ascending:!1});if(e)throw e;return{data:t,error:null}}catch(t){return console.error("Error getting all purchases:",t),{data:null,error:t}}},Ju=async(t,e,n,r,s)=>{if(!I)return console.warn("Supabase no configurado, no se puede aprobar compra"),{data:null,error:new Error("Supabase no configurado")};try{const{data:i,error:a}=await I.from("purchases").update({validated:!0,service_email:e,service_password:n,admin_notes:r,approved_by:s,approved_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw a;return{data:i,error:null}}catch(i){return console.error("Error approving purchase:",i),{data:null,error:i}}},ox=async()=>{if(!I)return console.warn("Supabase no configurado, no se puede obtener compras pendientes"),{data:null,error:new Error("Supabase no configurado")};try{const{data:t,error:e}=await I.from("purchases").select(`
        *,
        users!purchases_phone_fkey (
          name,
          email
        )
      `).eq("validated",!1).order("created_at",{ascending:!1});if(e)throw e;return{data:t,error:null}}catch(t){return console.error("Error getting pending purchases:",t),{data:null,error:t}}},ax=async t=>{if(!I)return console.warn("Supabase no configurado, no se puede obtener compras del usuario"),{data:null,error:new Error("Supabase no configurado")};try{const{data:e,error:n}=await I.from("purchases").select("*").eq("phone",t).eq("validated",!0).gte("end",new Date().toISOString().split("T")[0]).order("end",{ascending:!0});if(n)throw n;return{data:e,error:null}}catch(e){return console.error("Error getting user active purchases:",e),{data:null,error:e}}},lx=async(t=7)=>{if(!I)return console.warn("Supabase no configurado, no se puede obtener servicios próximos a vencer"),{data:null,error:new Error("Supabase no configurado")};try{const{data:e,error:n}=await I.rpc("get_expiring_services",{days_ahead:t});if(n)throw n;return{data:e,error:null}}catch(e){return console.error("Error getting expiring services:",e),{data:null,error:e}}},cx=async(t,e,n="system")=>{if(!I)return console.warn("Supabase no configurado, no se puede crear renovación"),{data:null,error:new Error("Supabase no configurado")};try{const{data:r,error:s}=await I.rpc("create_renewal",{purchase_uuid:t,renewal_months:e,admin_user:n});if(s)throw s;return{data:r,error:null}}catch(r){return console.error("Error creating renewal:",r),{data:null,error:r}}},ux=async()=>{if(!I)return console.warn("Supabase no configurado, no se pueden obtener estadísticas"),{data:null,error:new Error("Supabase no configurado")};try{const{data:t,error:e}=await I.from("purchases").select("auto_renewal, is_renewal, end, validated");if(e)throw e;return{data:{totalPurchases:t.length,autoRenewalEnabled:t.filter(r=>r.auto_renewal).length,renewalPurchases:t.filter(r=>r.is_renewal).length,expiringThisWeek:t.filter(r=>{const s=new Date(r.end),i=new Date,a=new Date(i.getTime()+7*24*60*60*1e3);return s>=i&&s<=a&&r.validated}).length,expiredServices:t.filter(r=>new Date(r.end)<new Date&&r.validated).length},error:null}}catch(t){return console.error("Error getting renewal stats:",t),{data:null,error:t}}},dx=async t=>{if(!I)return console.warn("Supabase no configurado, no se puede buscar usuario"),{data:null,error:new Error("Supabase no configurado")};try{const{data:e,error:n}=await I.from("users").select("*").eq("email",t.toLowerCase().trim()).single();if(n&&n.code!=="PGRST116")throw n;return{data:e,error:null}}catch(e){return console.error("Error buscando usuario por email:",e),{data:null,error:e}}},Mf=async t=>{if(!I)return console.warn("Supabase no configurado, no se puede generar token"),{data:null,error:new Error("Supabase no configurado")};try{if(!(await dx(t)).data)return{data:null,error:{message:`No existe un usuario con el email: ${t}. Verifica que el email sea correcto o crea una cuenta primero.`}};const n=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),r=new Date(Date.now()+30*60*1e3),{data:s,error:i}=await I.from("users").update({reset_token:n,reset_token_expires:r.toISOString()}).eq("email",t.toLowerCase().trim()).select().single();if(i)throw i;return{data:{token:n,user:s},error:null}}catch(e){return console.error("Error generando token de recuperación:",e),{data:null,error:e}}},rc=async t=>{if(!I)return console.warn("Supabase no configurado, no se puede verificar token"),{data:null,error:new Error("Supabase no configurado")};try{const{data:e,error:n}=await I.from("users").select("*").eq("reset_token",t).gt("reset_token_expires",new Date().toISOString()).single();if(n&&n.code!=="PGRST116")throw n;return{data:e,error:null}}catch(e){return console.error("Error verificando token:",e),{data:null,error:e}}},hx=async(t,e)=>{if(!I)return console.warn("Supabase no configurado, no se puede restablecer contraseña"),{data:null,error:new Error("Supabase no configurado")};try{if(!(await rc(t)).data)return{data:null,error:{message:"Token inválido o expirado"}};const{data:r,error:s}=await I.from("users").update({password:e,reset_token:null,reset_token_expires:null}).eq("reset_token",t).select().single();if(s)throw s;return{data:r,error:null}}catch(n){return console.error("Error restableciendo contraseña:",n),{data:null,error:n}}},fx=async(t,e)=>{if(!I)return console.warn("Supabase no configurado, no se puede hacer login"),{data:null,error:new Error("Supabase no configurado")};try{const{data:n,error:r}=await I.from("users").select("*").eq("email",t.toLowerCase().trim()).eq("password",e).single();if(r&&r.code!=="PGRST116")throw r;return{data:n,error:null}}catch(n){return console.error("Error en login:",n),{data:null,error:n}}},mx=t=>{const e=Date.now().toString().slice(-4);return`Admin_${t.split("@")[0].slice(0,3).toUpperCase()}_${e}`},qe=t=>Hr.some(e=>e.name===t),Ko=t=>({"Netflix + Disney Estándar":["Netflix","Disney+ Estándar"],"Netflix + Disney Premium":["Netflix","Disney+ Premium"],"Netflix + Max":["Netflix","Max"],"Netflix + Prime Video":["Netflix","Prime Video"],"Disney+ Premium + Max":["Disney+ Premium","Max"],"Prime Video + Disney+ Premium":["Prime Video","Disney+ Premium"],"Netflix + Max + Disney + Prime + Paramount":["Netflix","Max","Disney+ Premium","Prime Video","Paramount+"],"Spotify + Netflix":["Spotify","Netflix"],"Spotify + Disney Premium":["Spotify","Disney+ Premium"]})[t]||[],Kt=[{id:"netflix",name:"Netflix",price:4,billing:"monthly",color:"bg-red-600",logo:"N"},{id:"disney_premium",name:"Disney+ Premium",price:3.75,billing:"monthly",color:"bg-blue-600",logo:"D+"},{id:"disney_standard",name:"Disney+ Standard",price:3.25,billing:"monthly",color:"bg-blue-500",logo:"D+"},{id:"max",name:"Max",price:3,billing:"monthly",color:"bg-purple-700",logo:"MAX"},{id:"vix",name:"ViX",price:2.5,billing:"monthly",color:"bg-orange-500",logo:"ViX"},{id:"prime",name:"Prime Video",price:3,billing:"monthly",color:"bg-sky-700",logo:"PV"},{id:"youtube_premium",name:"YouTube Premium",price:3.35,billing:"monthly",color:"bg-red-700",logo:"YT"},{id:"paramount",name:"Paramount+",price:2.75,billing:"monthly",color:"bg-indigo-600",logo:"P+"},{id:"chatgpt",name:"ChatGPT",price:4,billing:"monthly",color:"bg-zinc-800",logo:"GPT"},{id:"crunchy",name:"Crunchyroll",price:2.5,billing:"monthly",color:"bg-orange-600",logo:"CR"},{id:"spotify",name:"Spotify",price:3.5,billing:"monthly",color:"bg-emerald-600",logo:"SP"},{id:"deezer",name:"Deezer",price:3,billing:"monthly",color:"bg-blue-700",logo:"DZ"},{id:"apple_tv",name:"Apple TV+",price:3.5,billing:"monthly",color:"bg-neutral-900",logo:"ATV"},{id:"canva_pro",name:"Canva Pro",price:2,billing:"monthly",color:"bg-indigo-500",logo:"C"},{id:"canva_pro_annual",name:"Canva Pro (1 año)",price:17.5,billing:"annual",color:"bg-indigo-600",logo:"C"},{id:"microsoft365",name:"Microsoft 365 (1 año)",price:15,billing:"annual",color:"bg-blue-500",logo:"M365"},{id:"autodesk",name:"Autodesk (1 año)",price:12.5,billing:"annual",color:"bg-zinc-700",logo:"AD"},{id:"office365",name:"Office 365 (1 año)",price:15,billing:"annual",color:"bg-blue-600",logo:"O365"}],Hr=[{id:"netflix_disney_std",name:"Netflix + Disney Estándar",price:6,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-blue-500",logo:"N+D"},{id:"netflix_disney_premium",name:"Netflix + Disney Premium",price:6.5,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-blue-600",logo:"N+D+"},{id:"netflix_max",name:"Netflix + Max",price:5.5,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-purple-700",logo:"N+MAX"},{id:"netflix_prime",name:"Netflix + Prime Video",price:5.5,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-sky-700",logo:"N+PV"},{id:"prime_disney_std",name:"Prime Video + Disney Estándar",price:5.75,billing:"monthly",color:"bg-gradient-to-r from-sky-700 to-blue-500",logo:"PV+D"},{id:"disney_premium_max",name:"Disney Premium + Max",price:6,billing:"monthly",color:"bg-gradient-to-r from-blue-600 to-purple-700",logo:"D++MAX"},{id:"max_prime",name:"Max + Prime Video",price:5.5,billing:"monthly",color:"bg-gradient-to-r from-purple-700 to-sky-700",logo:"MAX+PV"},{id:"paramount_max_prime",name:"Paramount + Max + Prime Video",price:7,billing:"monthly",color:"bg-gradient-to-r from-indigo-600 via-purple-700 to-sky-700",logo:"P+MAX+PV"},{id:"mega_combo",name:"Netflix + Max + Disney + Prime + Paramount",price:11.5,billing:"monthly",color:"bg-gradient-to-r from-red-600 via-purple-700 via-blue-500 via-sky-700 to-indigo-600",logo:"MEGA"},{id:"spotify_netflix",name:"Spotify + Netflix",price:6.5,billing:"monthly",color:"bg-gradient-to-r from-emerald-600 to-red-600",logo:"SP+N"},{id:"spotify_disney_premium",name:"Spotify + Disney Premium",price:6.5,billing:"monthly",color:"bg-gradient-to-r from-emerald-600 to-blue-600",logo:"SP+D+"}],px="+593984280334",Yu="+593984280334",Xu="+593998799579",gx=["gualejere@gmail.com"],pr="gualejere@gmail.com",el="Jeremias_012.@",ge=t=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"USD"}).format(t),we={load(t,e){try{return JSON.parse(localStorage.getItem(t)||JSON.stringify(e))}catch{return e}},save(t,e){localStorage.setItem(t,JSON.stringify(e))},del(t){localStorage.removeItem(t)}};function vx(){return Math.random().toString(36).slice(2,10)}function Go(t,e){const n=new Date(t),s=new Date(e).getTime()-n.getTime(),i=Math.ceil(s/(1e3*60*60*24));return isNaN(i)?0:i}function Df(t,e){return`https://wa.me/${t}?text=${encodeURIComponent(e)}`}function m(t,e,n){return t?n:e}function tl(t){return String(t||"").replace(/[^\d+]/g,"")}function xx(t){return/.+@.+\..+/.test(t)}function Zu({className:t="h-9 w-9"}){return o.jsxs("svg",{viewBox:"0 0 64 64",className:t,"aria-label":"StreamZone logo",role:"img",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"szg",x1:"0",y1:"0",x2:"1",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"#ef4444"}),o.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]})}),o.jsx("rect",{x:"0",y:"0",width:"64",height:"64",rx:"14",fill:"url(#szg)"}),o.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",fontFamily:"Inter,system-ui,Arial",fontSize:"26",fontWeight:"700",fill:"#ffffff",children:"SZ"})]})}function yx(t,e){return{answer:async(r,s=[])=>{var v,w,b;const i=r.toLowerCase().trim();if([...s,i].join(" "),/hola|buenas|hey|hi|hello|buenos|buenas tardes|buenas noches|gracias|thanks|ok|okay|vale|perfecto|excelente|genial|bien|mal|ayuda|help|soporte|support|que tal|como estas|buen dia/.test(i))return`¡Hola! 👋 ¡Bienvenido a StreamZone! 🎬✨ Soy tu asistente especializado en streaming. Puedo ayudarte con:

🎯 Recomendaciones personalizadas
💰 Precios y combos especiales
📺 Contenido disponible por plataforma
🔍 Búsqueda de títulos específicos
📱 Información sobre cuentas y dispositivos
🔐 Recuperación de contraseña

¿Qué te gustaría saber? 😊`;if(/olvide|olvidé|contraseña|password|recuperar|reset|resetear/.test(i))return`🔐 **RECUPERACIÓN DE CONTRASEÑA** 🔐

¡No te preocupes! Puedo ayudarte a recuperar tu contraseña.

📧 **Dime tu email** y te generaré un código de recuperación.

Ejemplo: \`miemail@gmail.com\`

⚠️ **Importante:** El código se mostrará aquí en el chat, no se envía por email.

¿Cuál es tu email registrado?`;if(/@.*\./.test(i)&&!/netflix|disney|hbo|amazon|spotify/.test(i)){const y=i.match(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/);if(y){const _=y[1];try{console.log("🔍 Chatbot generando token para:",_);const p=await Mf(_);return console.log("🔍 Chatbot resultado completo:",p),console.log("🔍 Token generado:",(v=p.data)==null?void 0:v.token),console.log("🔍 Usuario:",(w=p.data)==null?void 0:w.user),p.data?`🔐 **¡CÓDIGO GENERADO EXITOSAMENTE!** ✅

📧 Email: ${_}
🔑 **Tu código de recuperación:**

**${p.data.token}**

📋 **Instrucciones:**
1. Ve a "Iniciar sesión" → "¿Olvidaste tu contraseña?"
2. Ingresa tu email: ${_}
3. Copia y pega este código: **${p.data.token}**
4. Crea tu nueva contraseña

⏰ **El código expira en 30 minutos**

💡 ¡Guarda este código en un lugar seguro!`:(console.log("🔍 Error en resultado:",p.error),`❌ **Error generando código**

📧 Email: ${_}
🚫 ${((b=p.error)==null?void 0:b.message)||"Error desconocido"}

💡 **Posibles causas:**
• El email no está registrado
• Problema de conexión

🔧 **Solución:**
• Verifica que el email sea correcto
• Intenta crear una cuenta nueva si no tienes una`)}catch(p){return console.log("🔍 Chatbot error en catch:",p),`❌ **Error en el proceso**

📧 Email: ${_}
🚫 Error: ${p}

💡 Intenta de nuevo o contacta soporte.`}}}if(/recomendar|recomendación|recomendaciones|qué|que ver|mejor|sugerir|cuál|que plataforma|anime|familia|marvel|star wars|hbo|blockbuster|presupuesto bajo|dame|quiero ver|ayuda|opciones/.test(i))return/anime|manga|japonés|japones/.test(i)?`🎌 Para ANIME te recomiendo:

1️⃣ **Crunchyroll** - El catálogo más grande de anime
   Ejemplos: Attack on Titan, Demon Slayer, Jujutsu Kaisen

2️⃣ **Netflix** - Anime original y clásicos
   Ejemplos: Naruto, One Piece, Castlevania

💡 ¿Prefieres anime clásico o series nuevas?`:/familia|niños|kids|disney|marvel|star wars|pixar/.test(i)?`👨‍👩‍👧‍👦 Para CONTENIDO FAMILIAR te recomiendo:

1️⃣ **Disney+** - Marvel, Star Wars, Pixar
   Ejemplos: Loki, The Mandalorian, Encanto

2️⃣ **Combo Netflix + Disney+** - $6/mes (¡Ahorro!) 💰

🎭 ¿Buscas contenido para adultos o toda la familia?`:/hbo|warner|premiadas|premios|calidad|premium/.test(i)?`🏆 Para SERIES PREMIUM te recomiendo:

1️⃣ **Max (HBO)** - Contenido de alta calidad
   Ejemplos: House of the Dragon, The Last of Us, Succession

2️⃣ **Combo Max + Prime Video** - $5.50/mes

🎬 ¿Te gustan las series dramáticas o prefieres acción?`:/blockbuster|películas|peliculas|acción|accion|superhéroes/.test(i)?`🎬 Para BLOCKBUSTERS te recomiendo:

1️⃣ **Prime Video** - Películas + canales
   Ejemplos: The Boys, Jack Ryan, Fast & Furious

2️⃣ **Netflix** - Originales y éxitos
   Ejemplos: Stranger Things, The Witcher, Extraction

💥 ¿Prefieres películas de acción o series?`:/presupuesto bajo|barato|económico|economico|combo|ahorro/.test(i)?`💰 Para PRESUPUESTO BAJO te recomiendo:

1️⃣ **Netflix + Disney+** - $6/mes (¡50% descuento!)
2️⃣ **Netflix + Max** - $5.50/mes
3️⃣ **Prime Video + Disney+** - $5.75/mes

🎯 Todos incluyen: 1 perfil + 1 dispositivo
💡 ¿Cuánto quieres gastar al mes?`:`🎯 Te recomiendo estas opciones populares:

`+t.slice(0,3).map((_,p)=>`${p+1}️⃣ **${_.name}** - ${ge(_.price)}/${_.billing==="annual"?"año":"mes"}
   ${ed(_.id)}`).join(`

`)+`

🤔 ¿Qué tipo de contenido te gusta más? (anime, familia, acción, etc.)`;if(/película|pelicula|serie|contenido|qué hay|que hay|disponible|ver|catálogo|catalogo/.test(i))return/netflix/.test(i)?`📺 **NETFLIX** - Catálogo completo:

🎬 **Series Originales:**
• Stranger Things, The Crown, La Casa de Papel
• Bridgerton, Ozark, The Witcher
• Wednesday, Dahmer, Money Heist

🎭 **Géneros:** Drama, Thriller, Comedia, Documentales
🌍 **Países:** Disponible en Ecuador y Latinoamérica

💡 ¿Te interesa algún género específico?`:/disney/.test(i)?`🏰 **DISNEY+** - Catálogo completo:

🦸 **Marvel:** Loki, WandaVision, Hawkeye, Moon Knight
⭐ **Star Wars:** The Mandalorian, Obi-Wan Kenobi
🎨 **Pixar:** Soul, Luca, Turning Red
🏰 **Disney Clásico:** Frozen, Moana, Encanto

👨‍👩‍👧‍👦 **Perfecto para:** Familias, fans de Marvel/Star Wars

🎯 ¿Buscas contenido para niños o adultos?`:/max|hbo/.test(i)?`👑 **MAX (HBO)** - Contenido Premium:

🐉 **Series Épicas:** Game of Thrones, House of the Dragon
🎮 **Videojuegos:** The Last of Us, Arcane
💼 **Drama:** Succession, Euphoria, White Lotus
🎬 **Películas:** Batman, Dune, Matrix

🏆 **Calidad:** 4K, HDR, Dolby Atmos

🎭 ¿Prefieres series dramáticas o películas épicas?`:/prime/.test(i)?`📦 **PRIME VIDEO** - Exclusivas + Beneficios:

🦸 **Originales:** The Boys, The Marvelous Mrs. Maisel
🎬 **Blockbusters:** Jack Ryan, Tom Clancy's
📚 **Beneficios Extra:** Envío gratis Amazon

🌍 **Disponibilidad:** Ecuador, Latinoamérica
💰 **Valor:** Incluye envíos de Amazon

🛒 ¿Te interesan las exclusivas o los beneficios de Amazon?`:/spotify/.test(i)?`🎵 **SPOTIFY** - Música Sin Límites:

🎶 **Música:** 100M+ canciones
🎧 **Podcasts:** Joe Rogan, Serial, Crime Junkie
🎤 **Audiolibros:** Harry Potter, El Principito

📱 **Dispositivos:** Móvil, PC, TV, Auto
🎯 **Perfecto para:** Música, podcasts, audiolibros

🎧 ¿Prefieres música, podcasts o audiolibros?`:`📺 **CATÁLOGOS DISPONIBLES:**

🎬 **Netflix:** Series originales, thrillers, documentales
🏰 **Disney+:** Marvel, Star Wars, Pixar, Disney clásico
👑 **Max:** HBO premium, Game of Thrones, películas épicas
📦 **Prime Video:** Exclusivas, blockbusters + Amazon
🎵 **Spotify:** Música, podcasts, audiolibros

🤔 ¿Qué plataforma te interesa más?`;if(/dónde ver|donde ver|donde puedo ver|buscar|encontrar/.test(i)){const y=[{name:"Stranger Things",platforms:["Netflix"]},{name:"The Mandalorian",platforms:["Disney+"]},{name:"House of the Dragon",platforms:["Max"]},{name:"The Boys",platforms:["Prime Video"]},{name:"Loki",platforms:["Disney+"]},{name:"The Last of Us",platforms:["Max"]},{name:"Bridgerton",platforms:["Netflix"]},{name:"The Witcher",platforms:["Netflix"]}];for(const _ of y)if(i.includes(_.name.toLowerCase()))return`🎬 **${_.name}** está disponible en:

${_.platforms.map(p=>`📺 **${p}**`).join(`
`)}

💡 **¿Sabías que?** Una cuenta = 1 perfil + 1 dispositivo
💰 **Precio:** ${_.platforms.map(p=>{const g=t.find(x=>x.name.toLowerCase().includes(p.toLowerCase()));return g?`${p}: ${ge(g.price)}/mes`:""}).filter(Boolean).join(", ")}

🎯 ¿Te interesa alguna de estas plataformas?`;return`🔍 **BÚSQUEDA DE TÍTULOS:**

Puedo ayudarte a encontrar:
• Stranger Things → Netflix
• The Mandalorian → Disney+
• House of the Dragon → Max
• The Boys → Prime Video
• Loki → Disney+
• The Last of Us → Max

📝 **Escribe el nombre del título** que buscas y te diré dónde verlo

🎯 ¿Qué película o serie te interesa?`}if(/cuenta|perfil|dispositivo|device|cuántos|cuantos|compartir|usuarios|como funciona|funciona|incluye|que incluye/.test(i))return`📱 **INFORMACIÓN IMPORTANTE SOBRE CUENTAS:**

✅ **1 Cuenta = 1 Perfil + 1 Dispositivo**
📺 **Dispositivos soportados:** TV, móvil, tablet, PC
👤 **Perfiles:** Cada cuenta tiene su perfil personalizado

🔒 **Reglas de uso:**
• No compartir con otras personas
• Solo en un dispositivo a la vez
• Acceso 24/7 garantizado

💡 **¿Necesitas múltiples dispositivos?** Considera comprar varias cuentas

🎯 ¿Tienes alguna pregunta específica sobre el uso?`;if(/precio|cuanto|cuánto|costo|valor|vale|combo|descuento|pagar|pago|dinero|barato|caro|oferta/.test(i)){for(const y of t)if(i.includes(y.id)||i.includes(y.name.toLowerCase()))return`💰 **${y.name}**

💵 **Precio:** ${ge(y.price)}/${y.billing==="annual"?"año":"mes"}
📱 **Incluye:** 1 perfil + 1 dispositivo
🎯 **Perfecto para:** ${ed(y.id)}

🛒 **¿Quieres proceder con la compra?**
💬 Contacta a nuestros agentes para activación inmediata`;return/combo|descuento|ahorro|barato/.test(i)?`🎯 **COMBOS ESPECIALES - ¡GRANDES AHORROS!**

${e.slice(0,5).map((_,p)=>`${p+1}️⃣ **${_.name}** - ${ge(_.price)}/mes
   💰 Ahorro del ${Math.round((1-_.price/10)*100)}%`).join(`

`)}

✨ **Todos incluyen:** 1 perfil + 1 dispositivo
🚀 **Activación:** Inmediata tras pago

💡 **¿Cuál te interesa más?**`:`💰 **PRECIOS ACTUALES:**

${t.slice(0,6).map((y,_)=>`${_+1}️⃣ **${y.name}** - ${ge(y.price)}/${y.billing==="annual"?"año":"mes"}`).join(`
`)}

🎯 **Especifica una plataforma** para más detalles
💡 **¿Buscas descuentos?** Pregunta por nuestros combos especiales`}if(/como (compro|comprar|pago|pagar|reservar|adquirir)|proceso|pasos|quiero comprar|necesito comprar|como hago para|como puedo/.test(i))return`🛒 **PROCESO DE COMPRA - SÚPER FÁCIL:**

1️⃣ **Selecciona** tu plataforma favorita
2️⃣ **Haz clic** en 'Comprar Ahora' 🛒
3️⃣ **Completa** tus datos (nombre, email, teléfono)
4️⃣ **Elige** método de pago (banco, PayPal, móvil)
5️⃣ **Recibe** acceso inmediato por WhatsApp 📱

⏱️ **Tiempo total:** 5-10 minutos
✅ **Garantía:** 24/7 soporte técnico

🎯 ¿Quieres que te guíe paso a paso?`;if(/metodo|metodos|pago|transferencia|deposito|efectivo|forma de pago|banco|paypal|pago móvil|como pago|donde pago|donde deposito|transferir|cuenta|numero|numero de cuenta/.test(i))return`💳 **MÉTODOS DE PAGO ACEPTADOS:**

🏦 **BANCOS ECUATORIANOS:**
• Banco Pichincha: 2209034638 (Jeremias Guale)
• Banco Guayaquil: 0122407273 (Jeremias Joel Guale)
• Banco Pacífico: 1061220256 (Byron Guale)

💳 **DIGITALES:**
• PayPal: guale2023@outlook.com
• Pago móvil (todas las operadoras)

🔒 **100% SEGURO:** Todos los pagos están protegidos
📱 **IMPORTANTE:** Envía comprobante por WhatsApp para activación

💡 ¿Prefieres pago bancario o digital?`;if(/combo|combos|especial|oferta|descuento|ahorro|barato|económico|económico|promocion|promo/.test(i))return`🎯 **COMBOS ESPECIALES DISPONIBLES:**

${e.slice(0,4).map((_,p)=>`${p+1}️⃣ **${_.name}**
   💰 ${ge(_.price)}/mes
   🎁 Ahorro del ${Math.round((1-_.price/10)*100)}%
   📱 1 perfil + 1 dispositivo`).join(`

`)}

✨ **Beneficios:** Mayor ahorro, múltiples plataformas
🚀 **Activación:** Inmediata tras pago

💡 ¿Te interesa algún combo específico?`;if(/cuando|cuándo|hora|horario|disponible|disponibilidad|tiempo|rapido|rápido|inmediato|urgente|ya|ahora|hoy|mañana|cuanto tiempo|cuánto tiempo/.test(i))return`⏰ **DISPONIBILIDAD Y TIEMPOS:**

🚀 **Activación:** Inmediata tras confirmar pago
📱 **Soporte:** 24/7 por WhatsApp
⏱️ **Tiempo promedio:** 5-10 minutos

💡 **Para activación rápida:**
1. Completa tu compra
2. Envía comprobante por WhatsApp
3. Recibe acceso inmediato

¿Necesitas activación urgente? ¡Contáctanos!`;if(/dispositivo|dispositivos|cuenta|cuentas|perfil|perfiles|usuario|usuarios|login|acceso|entrar|iniciar sesion|iniciar sesión/.test(i))return`📱 **INFORMACIÓN SOBRE DISPOSITIVOS Y CUENTAS:**

✅ **1 Cuenta = 1 Perfil + 1 Dispositivo**
📺 **Dispositivos soportados:** TV, móvil, tablet, PC
👤 **Perfiles:** Cada cuenta tiene su perfil personalizado

🔒 **Reglas de uso:**
• No compartir con otras personas
• Solo en un dispositivo a la vez
• Acceso 24/7 garantizado

💡 **¿Necesitas múltiples dispositivos?** Considera comprar varias cuentas

🎯 ¿Tienes alguna pregunta específica sobre el uso?`;if(/contacto|whatsapp|hablar|agente|soporte|ayuda|telefono|problema|error|no funciona|garantia/.test(i))return`👨‍💼 **SOPORTE 24/7 DISPONIBLE:**

📱 **Agente Principal:** +593 98 428 0334 (Jeremi)
📞 **Agente Soporte:** +593 99 879 9579

⚡ **Tiempo de respuesta:** Menos de 30 minutos
🔧 **Resolución:** 24 horas máximo
✅ **Garantía:** 100% satisfacción o reembolso

💬 **WhatsApp directo** para consultas rápidas
🎯 ¿Qué problema específico tienes?`;if(/streaming|plataforma|app|aplicación|servicio/.test(i))return`🎬 **STREAMZONE - TU MEJOR OPCIÓN EN STREAMING:**

✨ **Plataformas Premium:** Netflix, Disney+, Max, Prime Video, Spotify
🚀 **Activación:** Inmediata tras pago
📱 **Soporte:** 24/7 WhatsApp
🔒 **Seguridad:** Cuentas 100% legales
💰 **Precios:** Los más competitivos del mercado

🎯 **¿Por qué elegirnos?**
• Sin publicidad
• Calidad 4K
• Múltiples dispositivos
• Soporte técnico incluido

💡 ¿Qué plataforma te interesa más?`;if(/calidad|4k|hd|ultra|hdr|dolby|audio|subs|subtítulos|idioma/.test(i))return`🎥 **CALIDAD Y CARACTERÍSTICAS:**

📺 **Calidades disponibles:**
• 4K Ultra HD (donde esté disponible)
• HDR10 y Dolby Vision
• Dolby Atmos (audio premium)

🌍 **Idiomas:**
• Audio: Español, inglés, portugués
• Subtítulos: Múltiples idiomas
• Doblaje: Latino y España

📱 **Dispositivos compatibles:**
• Smart TV, móvil, tablet, PC
• Chromecast, Apple TV, Roku

🎯 ¿Tienes alguna preferencia específica de calidad?`;if(/gracias|bye|adios|chao|hasta luego|nos vemos/.test(i))return`¡De nada! 😊 Ha sido un placer ayudarte. Si necesitas algo más, no dudes en contactarnos. ¡Que disfrutes mucho de tu streaming! 🎬✨

💡 **Recuerda:** Nuestros agentes están disponibles 24/7
📱 **WhatsApp:** +593 98 428 0334

¡Hasta pronto! 👋`;const a=i.split(" "),l=a.some(y=>["netflix","disney","max","hbo","prime","spotify","streaming","película","serie","música","pelicula","series","musica","video","videos","contenido","ver","mirar","escuchar","escuchar"].includes(y.toLowerCase())),c=a.some(y=>["pagar","pago","dinero","precio","cuesta","vale","costo","barato","caro","oferta","descuento","comprar","comprar","adquirir"].includes(y.toLowerCase())),u=a.some(y=>["problema","error","falla","fallo","no funciona","ayuda","soporte","técnico","reparar","arreglar","solucionar","configurar","instalar"].includes(y.toLowerCase()));if(l)return`🎬 Veo que mencionas contenido de streaming. Te puedo ayudar con:

📺 **Información sobre plataformas:**
• Netflix, Disney+, Max, Prime Video, Spotify
• Catálogos completos y precios
• Recomendaciones personalizadas

🔍 **¿Qué te interesa más?**
• Ver precios de una plataforma específica
• Saber qué contenido tiene cada una
• Encontrar títulos específicos

💡 **Ejemplo:** '¿Qué hay en Netflix?' o '¿Cuánto cuesta Disney+?'`;if(c)return`💰 Veo que preguntas sobre precios o pagos. Te puedo ayudar con:

💳 **Información de pago:**
• Precios desde $2.50/mes
• Múltiples métodos de pago
• Combos con descuentos especiales

🏦 **Métodos disponibles:**
• Bancos ecuatorianos
• PayPal
• Pago móvil

💡 **¿Qué necesitas saber específicamente?**
• Precio de una plataforma
• Cómo realizar el pago
• Información de cuentas bancarias`;if(u)return`🔧 Veo que tienes un problema técnico. Te puedo ayudar con:

🛠️ **Soporte técnico:**
• Problemas de acceso
• Configuración de dispositivos
• Resolución de errores

📱 **Contacto directo:**
• Agente 1: +593 98 428 0334
• Agente 2: +593 99 879 9579

💡 **¿Qué problema específico tienes?** Describe el error y te ayudo a resolverlo`;const d=[`🤔 Hmm, no estoy seguro de entender exactamente qué necesitas. ¿Podrías ser más específico?

🎯 **Algunas cosas que puedo ayudarte:**
• Recomendaciones de streaming
• Precios y combos
• Búsqueda de películas/series
• Información sobre cuentas

💡 **Prueba preguntando:** '¿Qué me recomiendas?' o '¿Cuánto cuesta Netflix?'`,`😊 Me gustaría ayudarte, pero necesito entender mejor tu pregunta.

🎬 **Soy experto en:**
• Recomendaciones de plataformas de streaming
• Información sobre precios y combos
• Búsqueda de contenido específico
• Proceso de compra y pagos

💭 **¿Qué te gustaría saber sobre streaming?**`,`🎯 ¡Estoy aquí para ayudarte con todo lo relacionado a streaming!

📺 **Puedo ayudarte con:**
• Encontrar la plataforma perfecta para ti
• Comparar precios y combos
• Buscar películas o series específicas
• Explicar cómo funciona todo

🤔 **¿Qué tipo de contenido te gusta más?** (acción, familia, anime, etc.)`],f=Math.floor(Math.random()*d.length);return d[f]}}}function ed(t){return{netflix:"Series originales, thrillers, documentales",disney:"Marvel, Star Wars, Pixar, familias",max:"HBO premium, series épicas, películas",prime:"Exclusivas, blockbusters, Amazon",spotify:"Música, podcasts, audiolibros",paramount:"Paramount, Nickelodeon, MTV",apple:"Originales Apple, 4K premium"}[t]||"Contenido premium de calidad"}function td({children:t,isDark:e}){return o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ring-1 ring-inset ${m(e,"bg-zinc-100 text-zinc-700 ring-zinc-200","bg-zinc-800 text-zinc-200 ring-zinc-700")}`,children:t})}function bx({s:t,onReserve:e,isDark:n}){return o.jsx("div",{className:`group rounded-2xl border p-4 md:p-6 shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-105 ${m(n,"border-zinc-200 bg-white","border-zinc-700 bg-zinc-800")}`,children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`h-12 w-12 md:h-16 md:w-16 ${t.color} rounded-2xl text-white grid place-content-center text-xl md:text-2xl font-bold mx-auto mb-3 md:mb-4 shadow-lg`,children:t.logo}),o.jsxs("div",{className:"mb-3 md:mb-4",children:[o.jsx("div",{className:m(n,"text-zinc-900 font-bold text-base md:text-lg mb-1 md:mb-2","text-white font-bold text-base md:text-lg mb-1 md:mb-2"),children:t.name}),o.jsx("div",{className:m(n,"text-xl md:text-2xl font-bold text-zinc-700","text-xl md:text-2xl font-bold text-zinc-200"),children:ge(t.price)}),o.jsxs("div",{className:m(n,"text-xs md:text-sm text-zinc-500","text-xs md:text-sm text-zinc-400"),children:["por ",t.billing==="annual"?"año":"mes"]})]}),o.jsx("button",{onClick:()=>e(t),className:`w-full rounded-xl px-3 md:px-4 py-2 md:py-3 text-xs md:text-sm font-semibold transition-all duration-200 ${m(n,"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 hover:shadow-lg","bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600 hover:shadow-lg")}`,children:"Comprar Ahora"})]})})}function wx({open:t,onClose:e,children:n,title:r,isDark:s}){return t?o.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/50 p-4",onClick:e,children:o.jsxs("div",{className:`w-full max-w-lg rounded-2xl p-6 shadow-2xl ${m(s,"bg-white","bg-zinc-900")}`,onClick:i=>i.stopPropagation(),children:[o.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold",children:r}),o.jsx("button",{onClick:e,className:`w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold transition-colors ${m(s,"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-100","text-zinc-300 hover:text-zinc-100 hover:bg-zinc-800")}`,children:"×"})]}),n]})}):null}function _x({answerFn:t,isDark:e}){const[n,r]=N.useState(!1),[s,i]=N.useState([{role:"bot",text:"¡Hola! 👋 ¡Bienvenido a StreamZone! 🎬✨ Soy tu asistente especializado en streaming. ¿En qué puedo ayudarte hoy?"}]),[a,l]=N.useState(""),[c,u]=N.useState(!1),[d,f]=N.useState([]),v=async()=>{const b=a.trim();if(b){i(y=>[...y,{role:"user",text:b}]),l(""),u(!0),f(y=>[...y.slice(-3),b.toLowerCase()]);try{const y=await t(b,d);i(_=>[..._,{role:"bot",text:y}])}catch(y){console.error("Error en chatbot:",y),i(_=>[..._,{role:"bot",text:"❌ Lo siento, hubo un error. Por favor intenta de nuevo."}])}finally{u(!1)}}},w=b=>b.split(`
`).map((y,_)=>o.jsxs("span",{children:[y,_<b.split(`
`).length-1&&o.jsx("br",{})]},_));return o.jsxs(o.Fragment,{children:[o.jsx("button",{"data-chat-button":!0,onClick:()=>r(!n),className:`fixed bottom-5 right-5 z-40 rounded-full px-4 py-3 shadow-lg transition-all duration-200 hover:scale-105 ${m(e,"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700","bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700")}`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:"💬"}),o.jsx("span",{className:"font-semibold",children:"Chat"})]})}),n&&o.jsxs("div",{className:`fixed bottom-20 right-5 z-40 w-96 rounded-2xl border shadow-2xl transition-all duration-300 ${m(e,"border-zinc-200 bg-white","border-zinc-700 bg-zinc-900")}`,children:[o.jsxs("div",{className:`rounded-t-2xl border-b p-4 font-semibold flex items-center gap-2 ${m(e,"bg-gradient-to-r from-purple-50 to-blue-50 border-zinc-200","bg-gradient-to-r from-purple-900/20 to-blue-900/20 border-zinc-700")}`,children:[o.jsx("span",{className:"text-xl",children:"🤖"}),o.jsx("span",{children:"Asistente StreamZone"}),o.jsx("div",{className:`ml-auto w-3 h-3 rounded-full ${m(e,"bg-green-400","bg-green-500")}`})]}),o.jsxs("div",{className:"p-4 h-96 overflow-y-auto flex flex-col gap-3",children:[s.map((b,y)=>o.jsx("div",{className:b.role==="bot"?"self-start":"self-end",children:o.jsx("div",{className:`max-w-[90%] rounded-2xl px-4 py-3 text-sm leading-relaxed ${b.role==="bot"?m(e,"bg-gradient-to-br from-blue-50 to-purple-50 text-zinc-800 border border-blue-100","bg-gradient-to-br from-blue-900/30 to-purple-900/30 text-zinc-100 border border-blue-700/30"):m(e,"bg-gradient-to-br from-purple-600 to-blue-600 text-white","bg-gradient-to-br from-purple-500 to-blue-600 text-white")}`,children:w(b.text)})},y)),c&&o.jsx("div",{className:"self-start",children:o.jsx("div",{className:`max-w-[90%] rounded-2xl px-4 py-3 text-sm ${m(e,"bg-zinc-100 text-zinc-600","bg-zinc-800 text-zinc-300")}`,children:o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{children:"Escribiendo"}),o.jsx("span",{className:"animate-pulse",children:"..."})]})})}),s.length<=1&&o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["🎯 Recomiéndame algo","💰 Ver precios","📺 ¿Qué hay en Netflix?","🛒 ¿Cómo compro?"].map((b,y)=>o.jsx("button",{onClick:()=>l(b),className:`px-3 py-2 rounded-full text-xs font-medium transition-all hover:scale-105 ${m(e,"bg-zinc-100 text-zinc-700 hover:bg-zinc-200","bg-zinc-700 text-zinc-300 hover:bg-zinc-600")}`,children:b},y))})]}),o.jsxs("div",{className:"p-4 flex gap-2 border-t",children:[o.jsx("input",{value:a,onChange:b=>l(b.target.value),onKeyDown:b=>b.key==="Enter"&&v(),placeholder:"Escribe tu pregunta...",className:`flex-1 rounded-xl border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-all ${m(e,"border-zinc-300 bg-white focus:ring-purple-500 focus:border-purple-500","border-zinc-600 bg-zinc-800 text-zinc-100 focus:ring-blue-500 focus:border-blue-500")}`}),o.jsx("button",{onClick:v,disabled:!a.trim()||c,className:`rounded-xl px-4 py-3 text-sm font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed ${m(e,"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700","bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700")}`,children:c?"⏳":"🚀"})]})]})]})}function jx({isDark:t,onToggle:e}){return o.jsx("button",{title:t?"Cambiar a modo claro":"Cambiar a modo oscuro",onClick:e,className:`fixed bottom-5 left-5 z-40 grid h-11 w-11 place-content-center rounded-full shadow-lg ring-1 ${t?"bg-white text-zinc-900 ring-zinc-200":"bg-zinc-900 text-white ring-zinc-800"}`,children:t?"☀":"☾"})}function Sx(){const[t,e]=N.useState(()=>{try{return localStorage.getItem("sz_theme")||"light"}catch{return"light"}}),n=t==="dark";N.useEffect(()=>{try{localStorage.setItem("sz_theme",t)}catch{}},[t]);const r=()=>e(n?"light":"dark"),[s,i]=N.useState("home"),[a,l]=N.useState(()=>we.load("userProfile",null)),[c,u]=N.useState(()=>!!we.load("adminLogged",!1)),[d,f]=N.useState(()=>we.load("userProfileData",null)),[v,w]=N.useState(()=>we.load("allPurchases",[]));N.useEffect(()=>{we.save("userProfile",a)},[a]),N.useEffect(()=>{we.save("userProfileData",d)},[d]),N.useEffect(()=>{we.save("allPurchases",v)},[v]),N.useEffect(()=>{we.save("adminLogged",c)},[c]),N.useEffect(()=>{(async()=>{try{await Qu([...Kt]),console.log("Servicios sincronizados con Supabase"),await Qu([...Hr]),console.log("Combos sincronizados con Supabase")}catch(S){console.error("Error sincronizando servicios:",S)}})()},[]),N.useEffect(()=>{(async()=>{try{await rx(b,_);const{data:S,error:L}=await Za();if(L){console.error("❌ Error cargando administradores desde BD:",L);return}if(S&&S.length>0){const A=S.map(U=>U.email),F=S.reduce((U,O)=>(U[O.email]=O.password,U),{});if(JSON.stringify(A.sort())!==JSON.stringify(b.sort())){y(A);const U={..._};Object.keys(F).forEach(O=>{U[O]||(U[O]=F[O])}),p(U),console.log("✅ Administradores sincronizados desde Supabase")}}}catch(S){console.error("❌ Error sincronizando administradores:",S)}})()},[]);const[b,y]=N.useState(()=>we.load("admin_emails",gx).map(S=>S.toLowerCase()).filter(S=>S!=="gualejeremi@gmaill.com")),[_,p]=N.useState(()=>{const S={...we.load("admin_passwords",{})};return Object.keys(S).forEach(L=>{S[L]==="default_password"&&delete S[L]}),pr in S,S[pr]=el,S});N.useEffect(()=>{we.save("admin_emails",b)},[b]),N.useEffect(()=>{we.save("admin_passwords",_)},[_]);const[g,x]=N.useState(!1),[j,E]=N.useState(!1),[k,C]=N.useState("login"),[T,M]=N.useState(""),[V,Te]=N.useState(""),[Bt,gn]=N.useState(""),[Ft,Bn]=N.useState([]),[be,Ne]=N.useState(!1),[P,D]=N.useState(null),[R,J]=N.useState({email:"",password:"",notes:""}),[Q,Xe]=N.useState([]),[St,Vt]=N.useState(!1),[Y,Nt]=N.useState(null),[he,vn]=N.useState({email:"",password:"",notes:""}),[Le,xn]=N.useState([]),[Ts,oo]=N.useState({}),Uf=h=>{if(qe(h.service)){const S=Ko(h.service);Xe(S.map(L=>({service:L,email:"",password:""})))}else Xe([])},sc=h=>{oo(S=>({...S,[h]:!S[h]}))},Bf=h=>{if(qe(h.service)){const S=Ko(h.service),L=[],A=h.admin_notes||"";if(A.includes("--- CUENTAS DEL COMBO ---")){S.forEach(U=>{const O=U.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ee=new RegExp(`${O}:\\s*([^\\s]+)\\s*/\\s*([^\\n]+)`,"i"),K=A.match(ee);L.push({service:U,email:K?K[1]:"",password:K?K[2]:""})});const F=A.split("--- CUENTAS DEL COMBO ---")[0].trim();vn({email:"",password:"",notes:F})}else S.forEach((F,U)=>{L.push({service:F,email:U===0&&h.service_email||"",password:U===0&&h.service_password||""})}),vn({email:"",password:"",notes:h.admin_notes||""});xn(L)}else vn({email:h.service_email||"",password:h.service_password||"",notes:h.admin_notes||""}),xn([])},[ce,kt]=N.useState({customer:"",phone:"",email:"",service:"",months:1,serviceEmail:"",servicePassword:"",notes:""}),[ic,Ff]=N.useState([]),[$s,Vf]=N.useState([]),[Rx,Lx]=N.useState([]),[Cr,Wf]=N.useState(null),[Mx,Dx]=N.useState(null),[oc,ac]=N.useState(!1);N.useEffect(()=>{console.log("🔍 authStep cambió a:",k),console.log("🔍 view actual:",s)},[k,s]),N.useEffect(()=>{s==="profile"&&a&&lc(a.phone)},[s,a]),N.useEffect(()=>{s==="admin"&&(ao(),lo())},[s]);const qf=async()=>{Ne(!0);try{const h=await ox();h.data?(Bn(h.data),console.log("✅ Compras pendientes cargadas:",h.data.length)):(console.log("⚠️ No se pudieron cargar las compras pendientes"),Bn([]))}catch(h){console.error("Error cargando compras pendientes:",h)}finally{Ne(!1)}},Hf=async()=>{try{const h=await ix();return h.data?(w(h.data),Tr(h.data),console.log("✅ Todas las compras cargadas desde Supabase:",h.data.length),h.data):(console.warn("⚠️ No se pudieron cargar las compras desde Supabase"),[])}catch(h){return console.error("❌ Error cargando todas las compras:",h),[]}},Fn=async()=>{try{await Hf(),await qf(),await ao(),await lo(),console.log("✅ Todas las estadísticas actualizadas desde Supabase")}catch(h){console.error("❌ Error actualizando estadísticas:",h)}},lc=async h=>{try{const S=await ax(h);S.data&&Ff(S.data)}catch(S){console.error("Error cargando compras del usuario:",S)}},Kf=async()=>{var S,L;if(!P){alert("No hay compra seleccionada");return}const h=qe(P.service);if(h){if(Q.filter(F=>!F.email||!F.password).length>0){alert("Por favor completa el email y contraseña para todos los servicios del combo");return}}else if(!R.email||!R.password){alert("Por favor completa el email y contraseña del servicio");return}Ne(!0);try{let A;if(h){const F=Q.map(O=>`${O.service}: ${O.email} / ${O.password}`).join(`
`),U=R.notes?`${R.notes}

--- CUENTAS DEL COMBO ---
${F}`:`--- CUENTAS DEL COMBO ---
${F}`;A=await Ju(P.id,((S=Q[0])==null?void 0:S.email)||"",((L=Q[0])==null?void 0:L.password)||"",U,"admin")}else A=await Ju(P.id,R.email,R.password,R.notes,"admin");A.data?(Bn(F=>F.filter(U=>U.id!==P.id)),alert("✅ Compra aprobada exitosamente"),D(null),J({email:"",password:"",notes:""}),Xe([]),setTimeout(()=>{Fn()},500)):alert("❌ Error aprobando la compra")}catch(A){console.error("Error aprobando compra:",A),alert("❌ Error aprobando la compra")}finally{Ne(!1)}},Gf=async h=>{if(confirm("¿Estás seguro de que quieres rechazar esta compra? Esta acción no se puede deshacer.")){Ne(!0);try{const{error:S}=await I.from("purchases").delete().eq("id",h);if(S)throw S;Bn(L=>L.filter(A=>A.id!==h)),alert("❌ Compra rechazada y eliminada"),setTimeout(()=>{Fn()},500)}catch(S){console.error("Error rechazando compra:",S),alert("❌ Error rechazando la compra")}finally{Ne(!1)}}},Qf=async()=>{var S,L,A,F;if(!Y)return;const h=qe(Y.service);if(h){if(Le.filter(O=>!O.email||!O.password).length>0){alert("Por favor completa el email y contraseña para todos los servicios del combo");return}}else if(!he.email||!he.password){alert("Por favor completa el email y contraseña del servicio");return}Ne(!0);try{let U=he.notes;if(h){const se=Le.map(ke=>`${ke.service}: ${ke.email} / ${ke.password}`).join(`
`);U=he.notes?`${he.notes}

--- CUENTAS DEL COMBO ---
${se}`:`--- CUENTAS DEL COMBO ---
${se}`}if(!I)throw new Error("Supabase no está configurado");console.log("🔍 Debug - Intentando actualizar compra:",{id:Y.id,service_email:h?(S=Le[0])==null?void 0:S.email:he.email,service_password:h?(L=Le[0])==null?void 0:L.password:he.password,admin_notes:U});const{data:O,error:ee}=await I.from("purchases").select("id, service, customer").eq("id",Y.id).single();if(ee)throw console.error("Error obteniendo compra:",ee),new Error(`No se pudo encontrar la compra: ${ee.message}`);console.log("✅ Compra encontrada:",O);const K={admin_notes:U};h?(K.service_email=((A=Le[0])==null?void 0:A.email)||"",K.service_password=((F=Le[0])==null?void 0:F.password)||""):(K.service_email=he.email,K.service_password=he.password);const{data:bn,error:ot}=await I.from("purchases").update(K).eq("id",Y.id).select();if(ot)throw console.error("Error de Supabase al actualizar:",ot),new Error(`Error actualizando compra: ${ot.message}`);console.log("✅ Compra actualizada en Supabase:",bn);const wn=`🔄 *ACTUALIZACIÓN DE CUENTA - STREAMZONE*

👤 *Cliente:* ${Y.customer}
📱 *WhatsApp:* ${Y.phone}

🛍️ *Servicio:* ${Y.service}
📅 *Actualizado:* ${new Date().toLocaleDateString("es-ES")}

${h?`🔐 *NUEVAS CREDENCIALES DEL COMBO:*
${Le.map(se=>`• ${se.service}: ${se.email}`).join(`
`)}

🔑 *Contraseñas actualizadas para todos los servicios del combo*`:`🔐 *NUEVA CREDENCIAL:*
📧 Email: ${he.email}
🔑 Contraseña actualizada`}

⚠️ *Importante:* Tus credenciales han sido actualizadas. Usa las nuevas credenciales para acceder.

🆔 *ID:* ${Y.id}

¿Necesitas ayuda? Contáctanos por WhatsApp.`,Et=`https://wa.me/${Yu.replace("+","")}?text=${encodeURIComponent(wn)}`,at=`https://wa.me/${Xu.replace("+","")}?text=${encodeURIComponent(wn)}`;(()=>{var ke,vt,zt,wc;const se=document.createElement("div");se.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",se.innerHTML=`
          <div class="bg-white rounded-xl p-6 max-w-md mx-4 shadow-2xl">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-xl font-bold text-gray-800">✅ Cuenta Actualizada</h3>
              <button id="closeModal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            <p class="text-gray-600 mb-6">Selecciona un agente para notificar al cliente sobre la actualización:</p>
            <div class="space-y-3">
              <button id="agent1" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-semibold transition-colors">
                👨‍💼 Agente 1 (+593 98 428 0334)
              </button>
              <button id="agent2" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold transition-colors">
                👨‍💼 Agente 2 (+593 99 879 9579)
              </button>
              <button id="skip" class="w-full bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg font-semibold transition-colors">
                ⏭️ Omitir notificación
              </button>
            </div>
          </div>
        `,document.body.appendChild(se),(ke=document.getElementById("closeModal"))==null||ke.addEventListener("click",()=>{document.body.removeChild(se)}),(vt=document.getElementById("agent1"))==null||vt.addEventListener("click",()=>{window.open(Et,"_blank"),document.body.removeChild(se)}),(zt=document.getElementById("agent2"))==null||zt.addEventListener("click",()=>{window.open(at,"_blank"),document.body.removeChild(se)}),(wc=document.getElementById("skip"))==null||wc.addEventListener("click",()=>{document.body.removeChild(se)})})(),Tr(se=>se.map(ke=>{var vt,zt;return ke.id===Y.id?{...ke,service_email:h?(vt=Le[0])==null?void 0:vt.email:he.email,service_password:h?(zt=Le[0])==null?void 0:zt.password:he.password,admin_notes:U}:ke})),alert("✅ Compra actualizada exitosamente"),Vt(!1),Nt(null),vn({email:"",password:"",notes:""}),xn([])}catch(U){console.error("Error actualizando compra:",U),alert("❌ Error actualizando la compra")}finally{Ne(!1)}},Jf=async(h,S,L)=>{if(!confirm(`⚠️ ADVERTENCIA: ¿Estás seguro de que quieres ELIMINAR PERMANENTEMENTE la compra activa de ${S} - ${L}?

Esta acción:
• Eliminará la compra de la base de datos
• El cliente perderá acceso al servicio
• NO se puede deshacer

Escribe "ELIMINAR" para confirmar:`))return;if(prompt("Para confirmar la eliminación, escribe exactamente: ELIMINAR")!=="ELIMINAR"){alert('❌ Eliminación cancelada. Debes escribir "ELIMINAR" para confirmar.');return}Ne(!0);try{const{error:F}=await I.from("purchases").delete().eq("id",h);if(F)throw F;alert(`✅ Compra de ${S} - ${L} eliminada permanentemente`),setTimeout(()=>{Fn()},500)}catch(F){console.error("Error eliminando compra activa:",F),alert("❌ Error eliminando la compra")}finally{Ne(!1)}},ao=async()=>{try{const h=await lx(7);h.data&&Vf(h.data)}catch(h){console.error("Error cargando servicios próximos a vencer:",h)}},lo=async()=>{try{const h=await ux();h.data&&Wf(h.data)}catch(h){console.error("Error cargando estadísticas de renovaciones:",h)}},cc=async(h,S)=>{ac(!0);try{(await cx(h,S,"admin")).data?(alert("✅ Renovación creada exitosamente"),ao(),lo()):alert("❌ Error creando renovación")}catch(L){console.error("Error creando renovación:",L),alert("❌ Error creando renovación")}finally{ac(!1)}},Yf=async()=>{if(!ce.customer||!ce.phone||!ce.service||!ce.serviceEmail||!ce.servicePassword){alert("Por favor completa todos los campos obligatorios");return}Ne(!0);try{const h=new Date,S=new Date;S.setMonth(S.getMonth()+ce.months);const L={customer:ce.customer,phone:ce.phone,service:ce.service,start:h.toISOString().split("T")[0],end:S.toISOString().split("T")[0],months:ce.months,validated:!0,service_email:ce.serviceEmail,service_password:ce.servicePassword,admin_notes:ce.notes||"Compra registrada manualmente por admin",approved_by:"admin",approved_at:new Date().toISOString()};(await Gu(L)).data?(alert("✅ Compra personalizada creada exitosamente"),kt({customer:"",phone:"",email:"",service:"",months:1,serviceEmail:"",servicePassword:"",notes:""}),yn(!1),Fn()):alert("❌ Error creando compra personalizada")}catch(h){console.error("Error creando compra personalizada:",h),alert("❌ Error creando compra personalizada")}finally{Ne(!1)}},[Xf,co]=N.useState(!1),[Pr,Zf]=N.useState(null),[We,Tr]=N.useState(()=>we.load("purchases",[]));N.useEffect(()=>we.save("purchases",We),[We]);const uc=h=>{a?(nm(h),fc(!0)):(Zf(h),co(!0))},dc=async h=>{const S={...h,id:vx(),validated:!1};try{const{data:O,error:ee}=await Xv(h.phone);let K;if(ee||!O){const se={name:h.customer,phone:h.phone,email:h.email||""},{data:ke,error:vt}=await Yv(se);if(vt||!ke)throw console.error("Error creating user:",vt),new Error("No se pudo crear el usuario");K=ke.id}else K=O.id,(O.name!==h.customer||O.email!==(h.email||""))&&await Zv(K,{name:h.customer,email:h.email||""});const bn=new Date,ot=new Date;if(ot.setMonth(ot.getMonth()+h.duration),!h.duration||isNaN(h.duration))throw console.error("❌ Duración inválida:",h.duration),new Error("Duración inválida: "+h.duration);if(isNaN(bn.getTime())||isNaN(ot.getTime()))throw new Error("Fechas inválidas generadas");const wn={customer:h.customer,phone:h.phone,service:h.service,start:bn.toISOString().split("T")[0],end:ot.toISOString().split("T")[0],months:h.duration,validated:!1},{data:Et,error:at}=await Gu(wn);if(at||!Et)throw console.error("Error saving purchase to Supabase:",at),new Error("No se pudo guardar la compra");const bc={...S,id:Et.id};if(Tr(se=>[bc,...se]),d){const se=Kt.find(zt=>zt.name===h.service),ke={id:Et.id,serviceId:(se==null?void 0:se.id)||"unknown",serviceName:h.service,price:h.total,duration:h.duration,isAnnual:h.duration>6,paymentMethod:"pichincha",notes:h.notes,status:"pending",purchaseDate:new Date().toISOString(),whatsappSent:!1},vt={...d,purchases:[...d.purchases||[],ke]};f(vt),w(zt=>[...zt,ke])}console.log("Compra guardada exitosamente en Supabase:",Et)}catch(O){console.error("Error en addPurchase:",O),Tr(ee=>[S,...ee]),console.log("⚠️ Error en addPurchase, pero la compra se procesó correctamente:",O)}const L=`🎬 *NUEVA COMPRA - STREAMZONE*

👤 *Cliente:* ${h.customer}
📱 *WhatsApp:* ${h.phone}
${h.email?`📧 *Email:* ${h.email}`:""}

🛍️ *Servicio:* ${h.service}
📱 *Dispositivos:* ${h.devices||1} ${(h.devices||1)===1?"dispositivo":"dispositivos"}
💰 *Total:* ${ge(h.total)}
⏱️ *Duración:* ${h.duration} ${h.duration>6?"años":"meses"}
${h.notes?`📝 *Notas:* ${h.notes}`:""}

🆔 *ID:* ${S.id}
📅 *Fecha:* ${new Date().toLocaleDateString("es-ES")}

⚠️ *Envía comprobante de pago para activar*`,A=`https://wa.me/${Yu.replace("+","")}?text=${encodeURIComponent(L)}`,F=`https://wa.me/${Xu.replace("+","")}?text=${encodeURIComponent(L)}`;(()=>{var bn,ot,wn,Et;const O=document.createElement("div");O.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",O.innerHTML=`
        <div class="bg-white rounded-xl p-6 max-w-md mx-4 shadow-2xl">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-gray-800">¡Compra Exitosa! 🎉</h3>
            <button id="closeModal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
          </div>
          <p class="text-gray-600 mb-6">Selecciona un agente para enviar tu comprobante de pago:</p>
          <div class="space-y-3">
            <button id="agent1" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-semibold transition-colors">
              👨‍💼 Agente 1 (+593 98 428 0334)
            </button>
            <button id="agent2" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold transition-colors">
              👨‍💼 Agente 2 (+593 99 879 9579)
            </button>
            <button id="cancel" class="w-full bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg font-semibold transition-colors">
              ❌ Cancelar
            </button>
          </div>
        </div>
      `,document.body.appendChild(O);const ee=()=>{try{O&&O.parentNode&&document.body.removeChild(O)}catch{console.log("Modal ya cerrado")}};(bn=document.getElementById("agent1"))==null||bn.addEventListener("click",()=>{ee(),setTimeout(()=>{try{window.open(A,"_blank")}catch{alert("No se pudo abrir WhatsApp automáticamente. Por favor, contacta al Agente 1: +593 98 428 0334")}},100)}),(ot=document.getElementById("agent2"))==null||ot.addEventListener("click",()=>{ee(),setTimeout(()=>{try{window.open(F,"_blank")}catch{alert("No se pudo abrir WhatsApp automáticamente. Por favor, contacta al Agente 2: +593 99 879 9579")}},100)}),(wn=document.getElementById("closeModal"))==null||wn.addEventListener("click",ee),(Et=document.getElementById("cancel"))==null||Et.addEventListener("click",ee),O.addEventListener("click",at=>{at.target===O&&ee()});const K=at=>{at.key==="Escape"&&(ee(),document.removeEventListener("keydown",K))};document.addEventListener("keydown",K)})()},hc=(h,S,L)=>({id:Date.now().toString(),name:h,whatsapp:S,email:L,purchases:[],createdAt:new Date().toISOString()}),[em,fc]=N.useState(!1),[Ux,Bx]=N.useState(""),[tm,nm]=N.useState(null),[mc,yn]=N.useState(!1),rm=h=>{var O,ee;let S=null;try{const K=JSON.parse(localStorage.getItem("userProfileData")||"null");K&&(K.whatsapp===h.phone||K.email===h.email)&&(S=K)}catch{console.log("No se pudo buscar perfil existente")}S||(S=hc(h.name,h.phone,h.email));const L=Kt.find(K=>K.name===h.service),A={id:Date.now().toString(),serviceId:(L==null?void 0:L.id)||"unknown",serviceName:h.service,price:h.price,duration:h.duration,isAnnual:h.isAnnual||!1,paymentMethod:h.paymentMethod||"pichincha",notes:h.notes,status:"active",purchaseDate:new Date().toISOString(),startDate:h.startDate||new Date().toISOString(),endDate:h.endDate,validatedBy:"admin",validatedAt:new Date().toISOString(),whatsappSent:!1},F={...S,purchases:[...S.purchases,A]};f(F),w(K=>[...K,A]);const U={id:A.id,customer:h.name,phone:h.phone,service:A.serviceName,price:A.price,duration:A.duration,total:A.price,start:((O=A.startDate)==null?void 0:O.slice(0,10))||new Date().toISOString().slice(0,10),end:((ee=A.endDate)==null?void 0:ee.slice(0,10))||new Date(Date.now()+A.duration*(A.isAnnual?365:30)*24*60*60*1e3).toISOString().slice(0,10),validated:!0,notes:A.notes||""};Tr(K=>[U,...K]),yn(!1),alert(`✅ Compra registrada exitosamente para ${h.name} (${h.phone})

Servicio: ${A.serviceName}
Precio: ${ge(A.price)}
Duración: ${A.duration} ${A.isAnnual?"años":"meses"}
Estado: Activo

La compra aparecerá en la cuenta del usuario si tiene una cuenta registrada.`)},sm=new Date().toISOString().slice(0,10);We.filter(h=>h.end===sm);const pc=()=>{c?(i("admin"),Fn()):i("adminLogin")},gc=()=>{l(null),f(null),we.del("userProfile"),we.del("userProfileData"),s==="profile"&&i("home")},im=()=>{u(!1),we.del("adminLogged"),s==="admin"&&i("home")},[Fx,uo]=N.useState("dashboard"),[As,vc]=N.useState("pending"),[xc,Vx]=N.useState("pending"),[ho,Wx]=N.useState("");We.filter(h=>!h.validated).length,We.filter(h=>h.validated).length,We.filter(h=>(xc==="all"?!0:xc==="pending"?!h.validated:h.validated)&&((h.customer||"").toLowerCase().includes(ho.toLowerCase())||(h.phone||"").includes(ho)||(h.service||"").toLowerCase().includes(ho.toLowerCase())));const yc=()=>{const S=[["Cliente","Telefono","Servicio","Inicio","Fin","Validada"]].concat(We.map(U=>[U.customer,U.phone,U.service,U.start,U.end,U.validated?"si":"no"])).map(U=>U.map(O=>`"${String(O).replace(/"/g,'""')}"`).join(",")).join(`
`),L=new Blob([S],{type:"text/csv"}),A=URL.createObjectURL(L),F=document.createElement("a");F.href=A,F.download="compras.csv",F.click(),URL.revokeObjectURL(A)};return o.jsxs("div",{className:`min-h-screen ${m(n,"bg-zinc-50 text-zinc-900","bg-zinc-950 text-zinc-100")}`,children:[o.jsx("header",{className:`sticky top-0 z-30 border-b backdrop-blur ${m(n,"bg-white/80 border-zinc-200","bg-zinc-950/70 border-zinc-800")}`,children:o.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-3",children:[o.jsxs("div",{className:"hidden md:flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Zu,{className:"h-9 w-9"}),o.jsx("div",{className:"font-semibold",children:"StreamZone"}),o.jsx(td,{isDark:n,children:"Seguridad y confianza"})]}),o.jsxs("nav",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>i("home"),className:m(n,"rounded-xl bg-zinc-100 px-3 py-1.5 text-sm hover:bg-zinc-200","rounded-xl bg-zinc-800 px-3 py-1.5 text-sm hover:bg-zinc-700"),children:"Inicio"}),o.jsx("button",{onClick:()=>i("combos"),className:m(n,"rounded-xl px-3 py-1.5 text-sm hover:bg-zinc-100","rounded-xl px-3 py-1.5 text-sm hover:bg-zinc-800"),children:"🎯 Combos"}),a&&o.jsx("button",{onClick:()=>i("profile"),className:m(n,"rounded-xl px-3 py-1.5 text-sm hover:bg-zinc-100","rounded-xl px-3 py-1.5 text-sm hover:bg-zinc-800"),children:"👤 Mi Perfil"}),a?o.jsx("button",{onClick:gc,className:m(n,"rounded-xl bg-red-100 text-red-700 px-3 py-1.5 text-sm hover:bg-red-200","rounded-xl bg-red-800 text-red-100 px-3 py-1.5 text-sm hover:bg-red-700"),children:"Cerrar sesión"}):o.jsx("button",{onClick:()=>i("auth"),className:m(n,"rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-1.5 text-sm hover:from-blue-600 hover:to-purple-700 shadow-lg","rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-1.5 text-sm hover:from-blue-600 hover:to-purple-700 shadow-lg"),children:"Iniciar sesión"}),o.jsx("button",{onClick:pc,className:m(n,"rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-1.5 text-sm hover:from-blue-700 hover:to-purple-700","rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1.5 text-sm hover:from-blue-600 hover:to-purple-600"),children:c?"Admin":"Login Admin"})]})]}),o.jsxs("div",{className:"md:hidden",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zu,{className:"h-8 w-8"}),o.jsx("div",{className:"font-semibold text-lg",children:"StreamZone"})]}),o.jsx("button",{onClick:pc,className:m(n,"rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-1.5 text-xs","rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1.5 text-xs"),children:"Admin"})]}),o.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[o.jsx("button",{onClick:()=>i("home"),className:m(n,"rounded-lg bg-zinc-100 px-3 py-1.5 text-xs whitespace-nowrap","rounded-lg bg-zinc-800 px-3 py-1.5 text-xs whitespace-nowrap"),children:"Inicio"}),o.jsx("button",{onClick:()=>i("combos"),className:m(n,"rounded-lg px-3 py-1.5 text-xs whitespace-nowrap hover:bg-zinc-100","rounded-lg px-3 py-1.5 text-xs whitespace-nowrap hover:bg-zinc-800"),children:"🎯 Combos"}),a?o.jsx("button",{onClick:gc,className:m(n,"rounded-lg bg-red-100 text-red-700 px-3 py-1.5 text-xs whitespace-nowrap","rounded-lg bg-red-800 text-red-100 px-3 py-1.5 text-xs whitespace-nowrap"),children:"Cerrar sesión"}):o.jsx("button",{onClick:()=>i("auth"),className:m(n,"rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 text-white px-3 py-1.5 text-xs whitespace-nowrap shadow-lg","rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 text-white px-3 py-1.5 text-xs whitespace-nowrap shadow-lg"),children:"Iniciar sesión"})]}),o.jsx("div",{className:"mt-2",children:o.jsx(td,{isDark:n,children:"Seguridad y confianza"})})]})]})}),s==="home"&&o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"relative",children:[o.jsx("div",{className:"relative mx-auto max-w-6xl px-4 py-12 md:py-16 lg:py-24",children:o.jsxs("div",{className:"grid items-center gap-6 md:gap-8 md:grid-cols-2",children:[o.jsxs("div",{className:"relative z-10",children:[o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-extrabold tracking-tight",children:"StreamZone"}),o.jsx("p",{className:m(n,"mt-2 text-base md:text-lg text-zinc-700","mt-2 text-base md:text-lg text-zinc-200"),children:"Tus plataformas favoritas, al mejor precio."}),o.jsx("p",{className:m(n,"mt-3 text-sm md:text-base text-zinc-600","mt-3 text-sm md:text-base text-zinc-300"),children:"Reserva por WhatsApp, recibe acceso con soporte inmediato y renueva sin complicaciones. Administra tus servicios desde tu cuenta."}),o.jsx("div",{className:"mt-6 flex flex-col gap-4",children:a?o.jsx("a",{href:"#catalogo",className:m(n,"rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 md:px-5 py-3 text-sm text-center","rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 md:px-5 py-3 text-sm text-center"),children:"Ver catálogo"}):o.jsx("button",{onClick:()=>i("auth"),className:m(n,"rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 md:px-5 py-3 text-sm text-center shadow-lg","rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 md:px-5 py-3 text-sm text-center shadow-lg"),children:"Iniciar sesión"})})]}),o.jsxs("div",{className:`relative z-10 rounded-2xl md:rounded-3xl p-4 md:p-6 shadow-sm backdrop-blur-md border ${m(n,"bg-white/60 border-white/10","bg-zinc-900/50 border-zinc-800")}`,children:[o.jsx("div",{className:m(n,"text-sm md:text-base font-semibold text-zinc-700","text-sm md:text-base font-semibold text-zinc-300"),children:"💳 Métodos de Pago"}),o.jsx("p",{className:m(n,"text-xs md:text-sm text-zinc-500 mt-1","text-xs md:text-sm text-zinc-400 mt-1"),children:"Transferencias bancarias, PayPal y Pago Móvil"}),o.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[o.jsx("span",{className:m(n,"text-xs bg-green-100 text-green-700 px-2 py-1 rounded","text-xs bg-green-800 text-green-200 px-2 py-1 rounded"),children:"🏦 Pichincha"}),o.jsx("span",{className:m(n,"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded","text-xs bg-blue-800 text-blue-200 px-2 py-1 rounded"),children:"🏛️ Guayaquil"}),o.jsx("span",{className:m(n,"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded","text-xs bg-purple-800 text-purple-200 px-2 py-1 rounded"),children:"🌊 Pacífico"}),o.jsx("span",{className:m(n,"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded","text-xs bg-orange-800 text-orange-200 px-2 py-1 rounded"),children:"💳 PayPal"})]}),o.jsx("p",{className:m(n,"text-xs text-zinc-500 mt-2","text-xs text-zinc-400 mt-2"),children:"Ver detalles completos al reservar"})]})]})}),o.jsx("div",{className:"absolute inset-0 -z-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),o.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-700"})]}),o.jsxs("section",{id:"catalogo",className:"mx-auto max-w-6xl px-4 pb-16",children:[o.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[o.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Nuestro Catálogo"}),o.jsx("p",{className:m(n,"text-zinc-600 text-base md:text-lg","text-zinc-300 text-base md:text-lg"),children:"Descubre todas las plataformas de streaming disponibles"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:Kt.map(h=>o.jsx("div",{children:o.jsx(bx,{s:h,onReserve:uc,isDark:n})},h.id))})]})]}),s==="auth"&&o.jsxs("section",{className:"min-h-[80vh] relative",children:[o.jsx("div",{className:"absolute inset-0 -z-10",style:{backgroundImage:"url(/img/bg-cinema.jpg)",backgroundSize:"cover",backgroundPosition:"center"}}),o.jsx("div",{className:"absolute inset-0 -z-0 bg-black/60"}),o.jsx("div",{className:"relative z-10 mx-auto max-w-md px-4 py-16",children:o.jsxs("div",{className:m(n,"rounded-3xl bg-white/95 p-8 shadow-2xl","rounded-3xl bg-zinc-900/95 p-8 shadow-2xl text-zinc-100"),children:[o.jsxs("div",{className:"text-center mb-8",children:[k==="login"&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"text-3xl font-bold mb-2",children:"🔐 Iniciar Sesión"}),o.jsx("p",{className:"text-sm opacity-80",children:"Accede a tu cuenta de StreamZone"})]}),k==="email"&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"text-3xl font-bold mb-2",children:"📧 Recuperar Contraseña"}),o.jsx("p",{className:"text-sm opacity-80",children:"Paso 1: Ingresa tu email para recibir el código"})]})]}),k==="login"&&o.jsx(zx,{isDark:n,onLogin:h=>{l(h),f(h),i("home")},onForgotPassword:()=>C("email")}),k==="email"&&o.jsx(Cx,{isDark:n,onBack:()=>C("login"),onTokenSent:(h,S)=>{M(h),Te(S),C("code")},setView:i}),k==="code"&&o.jsx(Px,{isDark:n,email:T,onBack:()=>C("email"),onCodeVerified:h=>{Te(h),C("newpassword")}}),k==="newpassword"&&o.jsx(Tx,{isDark:n,email:T,token:V,onSuccess:()=>{C("login"),M(""),Te("")}}),k==="login"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mt-6 text-center space-y-3",children:[o.jsx("div",{className:"text-sm opacity-70",children:"¿No tienes cuenta?"}),o.jsx("button",{onClick:()=>i("register"),className:`w-full rounded-xl px-4 py-2 font-medium transition-all ${m(n,"bg-gradient-to-r from-green-500 to-blue-500 text-white hover:from-green-600 hover:to-blue-600","bg-gradient-to-r from-blue-500 to-green-600 text-white hover:from-blue-600 hover:to-green-700")}`,children:"✨ Crear cuenta nueva"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:()=>i("home"),className:m(n,"text-zinc-500 hover:text-zinc-700 text-sm","text-zinc-400 hover:text-zinc-200 text-sm"),children:"← Volver al inicio"})})]})]})})]}),s==="auth"&&k==="code"&&o.jsxs("section",{className:"min-h-[80vh] relative",children:[o.jsx("div",{className:"absolute inset-0 -z-10",style:{backgroundImage:"url(/img/bg-cinema.jpg)",backgroundSize:"cover",backgroundPosition:"center"}}),o.jsx("div",{className:"absolute inset-0 -z-0 bg-black/60"}),o.jsx("div",{className:"relative z-10 mx-auto max-w-md px-4 py-16",children:o.jsxs("div",{className:m(n,"rounded-3xl bg-white/95 p-8 shadow-2xl","rounded-3xl bg-zinc-900/95 p-8 shadow-2xl text-zinc-100"),children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h3",{className:"text-3xl font-bold mb-2",children:"🔢 Verificar Código"}),o.jsxs("p",{className:"text-sm opacity-80",children:["Paso 2: Ingresa el código que enviamos a ",T]})]}),o.jsxs("form",{onSubmit:async h=>{h.preventDefault(),(await rc(Bt)).data?C("newpassword"):alert("Código inválido o expirado")},className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:m(n,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Código de verificación"}),o.jsx("input",{required:!0,type:"text",className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-800 text-zinc-100")}`,value:Bt,onChange:h=>gn(h.target.value),placeholder:"123456",maxLength:6})]}),o.jsx("button",{type:"submit",className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${m(n,"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700","bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700")}`,children:"🔍 Verificar Código"}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:()=>C("email"),className:`text-sm ${m(n,"text-zinc-500 hover:text-zinc-700","text-zinc-400 hover:text-zinc-200")}`,children:"← Volver al paso anterior"})})]})]})})]}),s==="register"&&o.jsxs("section",{className:"min-h-[80vh] relative",children:[o.jsx("div",{className:"absolute inset-0 -z-10",style:{backgroundImage:"url(/img/bg-cinema.jpg)",backgroundSize:"cover",backgroundPosition:"center"}}),o.jsx("div",{className:"absolute inset-0 -z-0 bg-black/60"}),o.jsx("div",{className:"relative z-10 mx-auto max-w-md px-4 py-16",children:o.jsxs("div",{className:m(n,"rounded-3xl bg-white/95 p-8 shadow-2xl","rounded-3xl bg-zinc-900/95 p-8 shadow-2xl text-zinc-100"),children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Crear cuenta"}),o.jsx("p",{className:"text-sm opacity-80",children:"Regístrate para guardar tus compras y ver el estado"})]}),o.jsx(Ex,{isDark:n,onSubmit:async h=>{l(h);const S=hc(h.name,h.phone,h.email);f(S);try{const{data:L,error:A}=await sx(h.phone);if(!A&&L&&L.length>0){const F=L.map(O=>{var ee;return{id:O.id,serviceId:((ee=Kt.find(K=>K.name===O.service))==null?void 0:ee.id)||"unknown",serviceName:O.service,price:0,duration:O.months,isAnnual:O.months>6,paymentMethod:"pichincha",notes:"",status:O.validated?"validated":"pending",purchaseDate:O.created_at,startDate:O.start,endDate:O.end,validatedBy:O.validated?"admin":void 0,validatedAt:O.validated?O.created_at:void 0,whatsappSent:!1}}),U={...S,purchases:[...S.purchases||[],...F]};f(U),w(O=>[...O,...F]),console.log(`Cargadas ${F.length} compras existentes desde Supabase`)}}catch(L){console.error("Error cargando compras existentes:",L)}i("home")}}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:()=>i("auth"),className:m(n,"text-zinc-500 hover:text-zinc-700 text-sm","text-zinc-400 hover:text-zinc-200 text-sm"),children:"← Volver a autenticación"})})]})})]}),s==="combos"&&o.jsxs("section",{className:"mx-auto max-w-6xl px-4 pb-16",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-3xl font-bold mb-2",children:"🎯 Combos Especiales"}),o.jsx("p",{className:m(n,"text-zinc-600","text-zinc-300"),children:"Ahorra más con nuestras combinaciones exclusivas"})]}),o.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Hr.map(h=>o.jsxs("div",{className:`${h.color} rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center text-white font-bold text-lg",children:h.logo}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold",children:ge(h.price)}),o.jsx("div",{className:"text-sm opacity-80",children:"por mes"})]})]}),o.jsx("h4",{className:"text-xl font-semibold mb-3",children:h.name}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-sm opacity-90",children:"💰 Ahorro significativo vs compras individuales"}),o.jsx("div",{className:"text-sm opacity-90",children:"🎬 Acceso completo a todas las plataformas"}),o.jsx("div",{className:"text-sm opacity-90",children:"⚡ Activación inmediata"})]}),o.jsx("button",{onClick:()=>uc(h),className:"w-full bg-white/20 hover:bg-white/30 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:"Comprar Combo"})]},h.id))}),o.jsx("div",{className:"mt-12 text-center",children:o.jsxs("div",{className:`${m(n,"bg-blue-50 border-blue-200","bg-blue-900/20 border-blue-700")} border rounded-2xl p-6`,children:[o.jsx("h4",{className:"text-xl font-bold mb-2",children:"💡 ¿Por qué elegir nuestros combos?"}),o.jsx("p",{className:m(n,"text-zinc-600","text-zinc-300"),children:"Combinamos las mejores plataformas de streaming en paquetes exclusivos que te permiten ahorrar hasta un 30% comparado con comprar cada servicio por separado."})]})})]}),s==="profile"&&o.jsxs("section",{className:"mx-auto max-w-6xl px-4 pb-16",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl font-bold mb-2",children:"👤 Mi Perfil"}),o.jsx("p",{className:m(n,"text-zinc-600","text-zinc-300"),children:"Gestiona tu cuenta y compras activas"})]}),o.jsx("button",{onClick:()=>i("home"),className:m(n,"rounded-xl bg-zinc-100 text-zinc-700 px-4 py-2 text-sm hover:bg-zinc-200","rounded-xl bg-zinc-800 text-zinc-200 px-4 py-2 text-sm hover:bg-zinc-700"),children:"← Inicio"})]})}),a?o.jsxs("div",{className:"grid gap-6",children:[o.jsxs("div",{className:`p-6 rounded-2xl border ${m(n,"bg-white border-zinc-200","bg-zinc-800 border-zinc-700")}`,children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"👤 Información Personal"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Nombre"}),o.jsx("p",{className:"font-medium",children:a.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"WhatsApp"}),o.jsx("p",{className:"font-medium",children:a.phone})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Email"}),o.jsx("p",{className:"font-medium",children:a.email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Miembro desde"}),o.jsx("p",{className:"font-medium",children:new Date().toLocaleDateString("es-ES")})]})]})]}),o.jsxs("div",{className:`p-6 rounded-2xl border ${m(n,"bg-white border-zinc-200","bg-zinc-800 border-zinc-700")}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-semibold",children:"🛍️ Mis Compras Activas"}),o.jsx("button",{onClick:()=>lc(a.phone),className:`px-3 py-1 rounded-lg text-sm ${m(n,"bg-blue-100 text-blue-700 hover:bg-blue-200","bg-blue-900/30 text-blue-400 hover:bg-blue-900/50")}`,children:"🔄 Actualizar"})]}),ic.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-4xl mb-2",children:"📺"}),o.jsx("p",{className:m(n,"text-zinc-600","text-zinc-400"),children:"No tienes compras activas"}),o.jsx("button",{onClick:()=>i("home"),className:`mt-4 px-4 py-2 rounded-xl text-sm ${m(n,"bg-blue-600 text-white hover:bg-blue-700","bg-blue-500 text-white hover:bg-blue-600")}`,children:"Ver Catálogo"})]}):o.jsx("div",{className:"space-y-4",children:ic.map(h=>o.jsxs("div",{className:`p-4 rounded-xl border ${m(n,"bg-green-50 border-green-200","bg-green-900/20 border-green-700")}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-2xl",children:h.service==="Netflix"?"🔴":h.service==="Disney+"?"🔵":h.service==="Max"?"🟣":h.service==="Prime Video"?"📦":h.service==="Spotify"?"🎵":"📺"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-lg",children:h.service}),o.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[h.months," meses • Activo"]})]})]}),o.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${m(n,"bg-green-100 text-green-800","bg-green-900/30 text-green-400")}`,children:"✅ Activo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"📅 Fecha de inicio"}),o.jsx("p",{className:"font-medium",children:new Date(h.start).toLocaleDateString("es-ES")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"⏰ Fecha de vencimiento"}),o.jsx("p",{className:"font-medium",children:new Date(h.end).toLocaleDateString("es-ES")})]})]}),h.service_email&&h.service_password&&o.jsxs("div",{className:`p-3 rounded-lg ${m(n,"bg-blue-50 border border-blue-200","bg-blue-900/20 border border-blue-700")}`,children:[o.jsx("h5",{className:"font-semibold mb-2 text-blue-800 dark:text-blue-300",children:"🔑 Credenciales del Servicio"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Email:"}),o.jsx("p",{className:`font-mono text-sm p-2 rounded border ${m(n,"bg-white text-zinc-800 border-zinc-200","bg-zinc-800 text-zinc-100 border-zinc-600")}`,children:h.service_email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Contraseña:"}),o.jsx("p",{className:`font-mono text-sm p-2 rounded border ${m(n,"bg-white text-zinc-800 border-zinc-200","bg-zinc-800 text-zinc-100 border-zinc-600")}`,children:h.service_password})]})]}),h.admin_notes&&o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Notas:"}),o.jsx("p",{className:`text-sm p-2 rounded border ${m(n,"bg-white text-zinc-800 border-zinc-200","bg-zinc-800 text-zinc-100 border-zinc-600")}`,children:h.admin_notes})]})]}),o.jsxs("div",{className:`p-3 rounded-lg mt-3 ${m(n,"bg-blue-50 border border-blue-200","bg-blue-900/20 border border-blue-700")}`,children:[o.jsx("h5",{className:"font-semibold mb-2 text-blue-800 dark:text-blue-300",children:"ℹ️ Información del Servicio"}),o.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsxs("p",{children:["📅 ",o.jsx("strong",{children:"Duración:"})," ",h.months," ",h.months===1?"mes":"meses"]}),o.jsxs("p",{children:["⏰ ",o.jsx("strong",{children:"Estado:"})," Activo"]}),o.jsxs("p",{children:["📧 ",o.jsx("strong",{children:"Contacto:"})," Para renovaciones, contacta al administrador"]})]})]})]},h.id))})]})]}):o.jsxs("div",{className:`text-center py-16 rounded-2xl border-2 border-dashed ${m(n,"border-zinc-200 bg-zinc-50","border-zinc-700 bg-zinc-800")}`,children:[o.jsx("div",{className:"text-6xl mb-4",children:"🔐"}),o.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Inicia sesión para ver tu perfil"}),o.jsx("p",{className:m(n,"text-zinc-600","text-zinc-400"),children:"Necesitas iniciar sesión para ver tus compras"}),o.jsx("button",{onClick:()=>i("auth"),className:m(n,"mt-4 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3","mt-4 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3"),children:"Iniciar sesión"})]}),mc&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:`w-full max-w-2xl rounded-2xl p-6 shadow-2xl ${m(n,"bg-white","bg-zinc-800")}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold",children:"➕ Registrar Compra Personalizada"}),o.jsx("button",{onClick:()=>yn(!1),className:"text-2xl hover:text-red-500",children:"×"})]}),o.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-4",children:"Para registrar compras realizadas fuera de la página web"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"👤 Nombre del Cliente *"}),o.jsx("input",{type:"text",value:ce.customer,onChange:h=>kt(S=>({...S,customer:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"Ej: Juan Pérez"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"📱 Teléfono *"}),o.jsx("input",{type:"tel",value:ce.phone,onChange:h=>kt(S=>({...S,phone:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"Ej: 0999123456"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"📧 Email del Cliente"}),o.jsx("input",{type:"email",value:ce.email,onChange:h=>kt(S=>({...S,email:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"Ej: cliente@email.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"📺 Servicio *"}),o.jsxs("select",{value:ce.service,onChange:h=>kt(S=>({...S,service:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300","border-zinc-600 bg-zinc-700 text-zinc-100")}`,children:[o.jsx("option",{value:"",children:"Seleccionar servicio"}),Kt.map(h=>o.jsx("option",{value:h.name,children:h.name},h.id)),Hr.map(h=>o.jsx("option",{value:h.name,children:h.name},h.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"📅 Duración (meses) *"}),o.jsxs("select",{value:ce.months,onChange:h=>kt(S=>({...S,months:parseInt(h.target.value)})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300","border-zinc-600 bg-zinc-700 text-zinc-100")}`,children:[o.jsx("option",{value:1,children:"1 mes"}),o.jsx("option",{value:3,children:"3 meses"}),o.jsx("option",{value:6,children:"6 meses"}),o.jsx("option",{value:12,children:"12 meses"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"📧 Email del Servicio *"}),o.jsx("input",{type:"email",value:ce.serviceEmail,onChange:h=>kt(S=>({...S,serviceEmail:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"Ej: usuario@netflix.com"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"🔑 Contraseña del Servicio *"}),o.jsx("input",{type:"password",value:ce.servicePassword,onChange:h=>kt(S=>({...S,servicePassword:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"Contraseña del servicio"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"📝 Notas Adicionales"}),o.jsx("textarea",{value:ce.notes,onChange:h=>kt(S=>({...S,notes:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300","border-zinc-600 bg-zinc-700 text-zinc-100")}`,rows:3,placeholder:"Información adicional sobre esta compra..."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>yn(!1),className:`flex-1 px-4 py-3 rounded-xl font-medium transition-all ${m(n,"bg-zinc-200 text-zinc-700 hover:bg-zinc-300","bg-zinc-700 text-zinc-200 hover:bg-zinc-600")}`,children:"Cancelar"}),o.jsx("button",{onClick:Yf,disabled:be,className:`flex-1 px-4 py-3 rounded-xl font-medium transition-all ${be?"opacity-50 cursor-not-allowed":""} ${m(n,"bg-blue-600 text-white hover:bg-blue-700","bg-blue-500 text-white hover:bg-blue-600")}`,children:be?"⏳ Creando...":"✅ Registrar Compra"})]})]})})]}),s==="adminLogin"&&o.jsxs("section",{className:"min-h-[80vh] relative",children:[o.jsx("div",{className:"absolute inset-0 -z-10",style:{backgroundImage:"url(/img/bg-cinema.jpg)",backgroundSize:"cover",backgroundPosition:"center"}}),o.jsx("div",{className:"absolute inset-0 -z-0 bg-black/60"}),o.jsx("div",{className:"relative z-10 min-h-[80vh] grid place-items-center",children:o.jsxs("div",{className:m(n,"w-full max-w-md rounded-3xl bg-white/95 p-8 shadow-2xl","w-full max-w-md rounded-3xl bg-zinc-900/95 p-8 shadow-2xl"),children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Acceso Administrador"}),o.jsx("p",{className:"text-sm opacity-80",children:"Ingresa tus credenciales para acceder al panel"})]}),o.jsx($x,{isDark:n,adminEmails:b,adminPasswords:_,onLogin:h=>{h&&(u(!0),i("admin"),uo("dashboard"))}}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:()=>i("home"),className:m(n,"text-zinc-500 hover:text-zinc-700 text-sm","text-zinc-400 hover:text-zinc-200 text-sm"),children:"← Volver al inicio"})})]})})]}),s==="admin"&&o.jsxs("section",{className:"mx-auto max-w-6xl px-4 pb-16",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl font-bold",children:"🔧 Panel Administrador"}),o.jsx("p",{className:m(n,"text-zinc-600","text-zinc-300"),children:"Gestiona compras, administradores y configuración"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:Fn,disabled:be,className:m(n,"rounded-xl bg-blue-600 text-white px-4 py-2 text-sm hover:bg-blue-700 disabled:opacity-50","rounded-xl bg-blue-500 text-white px-4 py-2 text-sm hover:bg-blue-600 disabled:opacity-50"),children:be?"⏳ Cargando...":"🔄 Actualizar Todo"}),o.jsx("button",{onClick:()=>E(!0),className:m(n,"rounded-xl bg-zinc-100 text-zinc-700 px-4 py-2 text-sm hover:bg-zinc-200","rounded-xl bg-zinc-800 text-zinc-200 px-4 py-2 text-sm hover:bg-zinc-700"),children:"☰ Menú"}),o.jsx("button",{onClick:()=>i("home"),className:m(n,"rounded-xl bg-zinc-100 text-zinc-700 px-4 py-2 text-sm hover:bg-zinc-200","rounded-xl bg-zinc-800 text-zinc-200 px-4 py-2 text-sm hover:bg-zinc-700"),children:"← Inicio"})]})]})}),o.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[o.jsx("div",{className:`rounded-2xl p-6 shadow-lg ${m(n,"bg-white border border-zinc-200","bg-zinc-800 border border-zinc-700")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-zinc-500 mb-1",children:"Total Compras"}),o.jsx("div",{className:"text-3xl font-bold",children:We.length})]}),o.jsx("div",{className:"text-3xl",children:"📊"})]})}),o.jsx("div",{className:`rounded-2xl p-6 shadow-lg ${m(n,"bg-white border border-zinc-200","bg-zinc-800 border border-zinc-700")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-zinc-500 mb-1",children:"Pendientes"}),o.jsx("div",{className:"text-3xl font-bold text-amber-600",children:Ft.length})]}),o.jsx("div",{className:"text-3xl",children:"⏳"})]})}),o.jsx("div",{className:`rounded-2xl p-6 shadow-lg ${m(n,"bg-white border border-zinc-200","bg-zinc-800 border border-zinc-700")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-zinc-500 mb-1",children:"Validadas"}),o.jsx("div",{className:"text-3xl font-bold text-green-600",children:We.filter(h=>h.validated).length})]}),o.jsx("div",{className:"text-3xl",children:"✅"})]})}),o.jsx("div",{className:`rounded-2xl p-6 shadow-lg ${m(n,"bg-white border border-zinc-200","bg-zinc-800 border border-zinc-700")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-zinc-500 mb-1",children:"Vencen Hoy"}),o.jsx("div",{className:"text-3xl font-bold text-red-600",children:$s.filter(h=>h.days_remaining===0).length})]}),o.jsx("div",{className:"text-3xl",children:"⚠️"})]})})]}),o.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[o.jsxs("button",{onClick:()=>uo("purchases"),className:`rounded-2xl p-6 text-left transition-all hover:scale-105 ${m(n,"bg-gradient-to-br from-blue-600 to-purple-600 text-white shadow-lg","bg-gradient-to-br from-blue-500 to-purple-500 text-white shadow-lg")}`,children:[o.jsx("div",{className:"text-2xl mb-2",children:"🛒"}),o.jsx("div",{className:"text-xl font-bold mb-2",children:"Gestionar Compras"}),o.jsx("div",{className:"text-sm opacity-70",children:"Revisa, valida y notifica por WhatsApp"})]}),o.jsxs("button",{onClick:()=>yn(!0),className:`rounded-2xl p-6 text-left transition-all hover:scale-105 ${m(n,"bg-blue-600 text-white shadow-lg","bg-blue-600 text-white shadow-lg")}`,children:[o.jsx("div",{className:"text-2xl mb-2",children:"➕"}),o.jsx("div",{className:"text-xl font-bold mb-2",children:"Registrar Compra"}),o.jsx("div",{className:"text-sm opacity-70",children:"Crear compra manual para un usuario"})]}),o.jsxs("button",{onClick:()=>x(!0),className:`rounded-2xl p-6 text-left transition-all hover:scale-105 ${m(n,"bg-gradient-to-br from-emerald-600 to-teal-600 text-white shadow-lg","bg-gradient-to-br from-emerald-500 to-teal-500 text-white shadow-lg")}`,children:[o.jsx("div",{className:"text-2xl mb-2",children:"👥"}),o.jsx("div",{className:"text-xl font-bold mb-2",children:"Administradores"}),o.jsx("div",{className:"text-sm opacity-70",children:"Agregar o quitar correos con acceso"})]}),o.jsxs("button",{onClick:yc,className:`rounded-2xl p-6 text-left transition-all hover:scale-105 ${m(n,"bg-gradient-to-br from-orange-600 to-red-600 text-white shadow-lg","bg-gradient-to-br from-orange-500 to-red-500 text-white shadow-lg")}`,children:[o.jsx("div",{className:"text-2xl mb-2",children:"📊"}),o.jsx("div",{className:"text-xl font-bold mb-2",children:"Exportar Datos"}),o.jsx("div",{className:"text-sm opacity-70",children:"Descargar reporte en formato CSV"})]})]}),o.jsxs("div",{className:`rounded-2xl p-6 shadow-lg mb-6 ${m(n,"bg-white border border-zinc-200","bg-zinc-800 border border-zinc-700")}`,children:[o.jsx("div",{className:"flex items-center justify-between mb-6",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>vc("pending"),className:`px-4 py-2 rounded-xl font-medium transition-all ${As==="pending"?m(n,"bg-amber-100 text-amber-800","bg-amber-900/30 text-amber-400"):m(n,"bg-zinc-100 text-zinc-600 hover:bg-zinc-200","bg-zinc-700 text-zinc-300 hover:bg-zinc-600")}`,children:["⏳ Pendientes (",Ft.length,")"]}),o.jsxs("button",{onClick:()=>vc("active"),className:`px-4 py-2 rounded-xl font-medium transition-all ${As==="active"?m(n,"bg-green-100 text-green-800","bg-green-900/30 text-green-400"):m(n,"bg-zinc-100 text-zinc-600 hover:bg-zinc-200","bg-zinc-700 text-zinc-300 hover:bg-zinc-600")}`,children:["✅ Activas (",We.filter(h=>h.validated).length,")"]})]})}),As==="pending"&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h4",{className:"text-xl font-bold",children:"⏳ Compras Pendientes"}),o.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${m(n,"bg-amber-100 text-amber-800","bg-amber-900/30 text-amber-400")}`,children:[Ft.length," pendientes"]})]}),be?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-2xl mb-2",children:"⏳"}),o.jsx("p",{children:"Cargando compras pendientes..."})]}):Ft.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-2xl mb-2",children:"✅"}),o.jsx("p",{children:"No hay compras pendientes"})]}):o.jsx("div",{className:"space-y-4",children:Ft.map(h=>o.jsx("div",{className:`p-4 rounded-xl border ${m(n,"bg-zinc-50 border-zinc-200","bg-zinc-700 border-zinc-600")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"font-semibold",children:h.customer}),o.jsx("span",{className:`px-2 py-1 rounded text-xs ${m(n,"bg-blue-100 text-blue-800","bg-blue-900/30 text-blue-400")}`,children:h.service})]}),o.jsxs("div",{className:"text-sm text-zinc-500 mb-2",children:["📱 ",h.phone," • 📅 ",new Date(h.created_at).toLocaleDateString()]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium",children:"Duración:"})," ",h.months," meses •",o.jsx("span",{className:"font-medium",children:" Inicio:"})," ",h.start," •",o.jsx("span",{className:"font-medium",children:" Fin:"})," ",h.end]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{D(h),Uf(h)},className:`px-3 py-2 rounded-xl font-medium transition-all text-sm ${m(n,"bg-green-600 text-white hover:bg-green-700","bg-green-500 text-white hover:bg-green-600")}`,children:"✅ Aprobar"}),o.jsx("button",{onClick:()=>Gf(h.id),className:`px-3 py-2 rounded-xl font-medium transition-all text-sm ${m(n,"bg-red-600 text-white hover:bg-red-700","bg-red-500 text-white hover:bg-red-600")}`,children:"❌ Rechazar"})]})]})},h.id))})]}),As==="active"&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h4",{className:"text-xl font-bold",children:"✅ Compras Activas"}),o.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${m(n,"bg-green-100 text-green-800","bg-green-900/30 text-green-400")}`,children:[We.filter(h=>h.validated).length," activas"]})]}),be?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-2xl mb-2",children:"⏳"}),o.jsx("p",{children:"Cargando compras activas..."})]}):We.filter(h=>h.validated).length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-2xl mb-2",children:"📺"}),o.jsx("p",{children:"No hay compras activas"})]}):o.jsx("div",{className:"space-y-4",children:We.filter(h=>h.validated).map(h=>o.jsx("div",{className:`p-4 rounded-xl border ${m(n,"bg-green-50 border-green-200","bg-green-900/20 border-green-700")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"font-semibold",children:h.customer}),o.jsx("span",{className:`px-2 py-1 rounded text-xs ${m(n,"bg-green-100 text-green-800","bg-green-900/30 text-green-400")}`,children:h.service}),o.jsx("span",{className:`px-2 py-1 rounded text-xs ${m(n,"bg-blue-100 text-blue-800","bg-blue-900/30 text-blue-400")}`,children:"✅ Activa"})]}),o.jsxs("div",{className:"text-sm text-zinc-500 mb-2",children:["📱 ",h.phone," • 📅 ",new Date(h.created_at).toLocaleDateString()]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium",children:"Duración:"})," ",h.months," meses •",o.jsx("span",{className:"font-medium",children:" Inicio:"})," ",h.start," •",o.jsx("span",{className:"font-medium",children:" Fin:"})," ",h.end]}),h.service_email&&h.service_password&&o.jsx("div",{className:"mt-2 text-xs text-zinc-600 dark:text-zinc-400",children:qe(h.service)?o.jsxs("div",{children:[o.jsx("div",{className:"mb-1",children:"🔑 Credenciales del combo:"}),(()=>{const S=h.admin_notes||"";return S.includes("--- CUENTAS DEL COMBO ---")?Ko(h.service).map(F=>{const U=F.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),O=new RegExp(`${U}:\\s*([^\\s]+)\\s*/\\s*([^\\n]+)`,"i"),ee=S.match(O);return ee?{service:F,email:ee[1]}:null}).filter(Boolean).map(F=>o.jsxs("div",{className:"ml-2",children:["• ",F.service,": ",F.email]},F.service)):o.jsxs("div",{children:["📧 ",h.service_email," • 🔑 Contraseña disponible"]})})()]}):o.jsxs("div",{children:["📧 ",h.service_email," • 🔑 Contraseña disponible"]})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{Nt(h),Bf(h),Vt(!0)},className:`px-3 py-2 rounded-xl font-medium transition-all text-sm ${m(n,"bg-blue-600 text-white hover:bg-blue-700","bg-blue-500 text-white hover:bg-blue-600")}`,children:"✏️ Editar"}),o.jsx("button",{onClick:()=>Jf(h.id,h.customer,h.service),className:`px-3 py-2 rounded-xl font-medium transition-all text-sm ${m(n,"bg-red-600 text-white hover:bg-red-700","bg-red-500 text-white hover:bg-red-600")}`,children:"🗑️ Eliminar"})]})]})},h.id))})]})]}),Cr&&o.jsxs("div",{className:`rounded-2xl p-6 shadow-lg mb-6 ${m(n,"bg-white border border-zinc-200","bg-zinc-800 border border-zinc-700")}`,children:[o.jsx("h4",{className:"text-xl font-bold mb-4",children:"📊 Estadísticas de Renovaciones"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Cr.totalPurchases}),o.jsx("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Total Compras"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:Cr.autoRenewalEnabled}),o.jsx("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Auto-Renovación"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-amber-600",children:Cr.expiringThisWeek}),o.jsx("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Vencen Esta Semana"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:Cr.expiredServices}),o.jsx("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Expirados"})]})]})]}),o.jsxs("div",{className:`rounded-2xl p-6 shadow-lg mb-6 ${m(n,"bg-white border border-zinc-200","bg-zinc-800 border border-zinc-700")}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h4",{className:"text-xl font-bold",children:"⏰ Servicios Próximos a Vencer"}),o.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${m(n,"bg-amber-100 text-amber-800","bg-amber-900/30 text-amber-400")}`,children:[$s.length," próximos a vencer"]})]}),$s.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-2xl mb-2",children:"✅"}),o.jsx("p",{children:"No hay servicios próximos a vencer"})]}):o.jsx("div",{className:"space-y-4",children:$s.map(h=>o.jsx("div",{className:`p-4 rounded-xl border ${m(n,"bg-amber-50 border-amber-200","bg-amber-900/20 border-amber-600")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"font-semibold",children:h.customer_name}),o.jsx("span",{className:`px-2 py-1 rounded text-xs ${m(n,"bg-blue-100 text-blue-800","bg-blue-900/30 text-blue-400")}`,children:h.service_name}),o.jsxs("span",{className:`px-2 py-1 rounded text-xs ${h.days_remaining<=3?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400"}`,children:[h.days_remaining," días"]})]}),o.jsxs("div",{className:"text-sm text-zinc-500 mb-2",children:["📱 ",h.customer_phone," • 📅 Vence: ",new Date(h.end_date).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>cc(h.purchase_id,1),disabled:oc,className:`px-3 py-1 rounded-lg text-sm font-medium transition-all ${m(n,"bg-green-600 text-white hover:bg-green-700 disabled:opacity-50","bg-green-500 text-white hover:bg-green-600 disabled:opacity-50")}`,children:"🔄 Renovar 1 mes"}),o.jsx("button",{onClick:()=>cc(h.purchase_id,3),disabled:oc,className:`px-3 py-1 rounded-lg text-sm font-medium transition-all ${m(n,"bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50","bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50")}`,children:"🔄 Renovar 3 meses"})]})]})},h.purchase_id))})]}),P&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:`w-full max-w-2xl rounded-2xl p-6 shadow-2xl ${m(n,"bg-white","bg-zinc-800")}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold",children:"✅ Aprobar Compra"}),o.jsx("button",{onClick:()=>{D(null),Xe([])},className:"text-2xl hover:text-red-500",children:"×"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"font-medium",children:P.customer}),o.jsxs("p",{className:"text-sm text-zinc-500",children:[P.service," • ",P.months," meses"]}),qe(P.service)&&o.jsx("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:o.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:["🎯 ",o.jsx("strong",{children:"Combo detectado:"})," Este servicio incluye múltiples plataformas"]})})]}),o.jsxs("div",{className:"space-y-4",children:[qe(P.service)?o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold mb-3",children:"🔐 Cuentas del Combo"}),o.jsx("div",{className:"space-y-4",children:Q.map((h,S)=>o.jsxs("div",{className:`p-4 rounded-xl border ${m(n,"border-zinc-200 bg-zinc-50","border-zinc-700 bg-zinc-800")}`,children:[o.jsx("h5",{className:"font-medium mb-3 text-sm text-zinc-600 dark:text-zinc-400",children:h.service}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium mb-1",children:"📧 Email"}),o.jsx("input",{type:"email",value:h.email,onChange:L=>{const A=[...Q];A[S].email=L.target.value,Xe(A)},className:`w-full rounded-lg border px-3 py-2 text-sm ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"usuario@servicio.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium mb-1",children:"🔑 Contraseña"}),o.jsx("input",{type:"password",value:h.password,onChange:L=>{const A=[...Q];A[S].password=L.target.value,Xe(A)},className:`w-full rounded-lg border px-3 py-2 text-sm ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"••••••••"})]})]})]},S))})]}):o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold mb-3",children:"🔐 Cuenta del Servicio"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"📧 Email del Servicio"}),o.jsx("input",{type:"email",value:R.email,onChange:h=>J(S=>({...S,email:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"usuario@netflix.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"🔑 Contraseña del Servicio"}),o.jsx("input",{type:"password",value:R.password,onChange:h=>J(S=>({...S,password:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"••••••••"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"📝 Notas (opcional)"}),o.jsx("textarea",{value:R.notes,onChange:h=>J(S=>({...S,notes:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-700 text-zinc-100")}`,rows:3,placeholder:"Notas adicionales..."})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:()=>{D(null),Xe([])},className:`flex-1 px-4 py-3 rounded-xl font-medium transition-all ${m(n,"bg-zinc-200 text-zinc-700 hover:bg-zinc-300","bg-zinc-700 text-zinc-200 hover:bg-zinc-600")}`,children:"Cancelar"}),o.jsx("button",{onClick:Kf,disabled:be||(qe(P.service)?Q.some(h=>!h.email||!h.password):!R.email||!R.password),className:`flex-1 px-4 py-3 rounded-xl font-medium transition-all ${be||(qe(P.service)?Q.some(h=>!h.email||!h.password):!R.email||!R.password)?"opacity-50 cursor-not-allowed":""} ${m(n,"bg-green-600 text-white hover:bg-green-700","bg-green-500 text-white hover:bg-green-600")}`,children:be?"⏳ Aprobando...":"✅ Aprobar Compra"})]})]})})]}),St&&Y&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:`w-full max-w-2xl rounded-2xl p-6 shadow-2xl ${m(n,"bg-white","bg-zinc-800")}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold",children:"✏️ Editar Compra Activa"}),o.jsx("button",{onClick:()=>{Vt(!1),Nt(null),xn([]),oo({})},className:"text-2xl hover:text-red-500",children:"×"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"font-medium",children:Y.customer}),o.jsxs("p",{className:"text-sm text-zinc-500",children:[Y.service," • ",Y.months," meses"]}),qe(Y.service)&&o.jsx("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:o.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:["🎯 ",o.jsx("strong",{children:"Combo detectado:"})," Este servicio incluye múltiples plataformas"]})})]}),o.jsxs("div",{className:"space-y-4",children:[qe(Y.service)?o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold mb-3",children:"🔐 Cuentas del Combo"}),o.jsx("div",{className:"space-y-4",children:Le.map((h,S)=>o.jsxs("div",{className:`p-4 rounded-xl border ${m(n,"border-zinc-200 bg-zinc-50","border-zinc-700 bg-zinc-800")}`,children:[o.jsx("h5",{className:"font-medium mb-3 text-sm text-zinc-600 dark:text-zinc-400",children:h.service}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium mb-1",children:"📧 Email"}),o.jsx("input",{type:"email",value:h.email,onChange:L=>{const A=[...Le];A[S].email=L.target.value,xn(A)},className:`w-full rounded-lg border px-3 py-2 text-sm ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"usuario@servicio.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium mb-1",children:"🔑 Contraseña"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:Ts[`combo_${S}`]?"text":"password",value:h.password,onChange:L=>{const A=[...Le];A[S].password=L.target.value,xn(A)},className:`w-full rounded-lg border px-3 py-2 pr-10 text-sm ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"••••••••"}),o.jsx("button",{type:"button",onClick:()=>sc(`combo_${S}`),className:`absolute right-2 top-1/2 transform -translate-y-1/2 p-1 rounded ${m(n,"text-zinc-500 hover:text-zinc-700","text-zinc-400 hover:text-zinc-200")}`,children:Ts[`combo_${S}`]?"🙈":"👁️"})]})]})]})]},S))})]}):o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold mb-3",children:"🔐 Cuenta del Servicio"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"📧 Email del Servicio"}),o.jsx("input",{type:"email",value:he.email,onChange:h=>vn(S=>({...S,email:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"usuario@netflix.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"🔑 Contraseña del Servicio"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:Ts.single?"text":"password",value:he.password,onChange:h=>vn(S=>({...S,password:h.target.value})),className:`w-full rounded-xl border px-4 py-3 pr-12 ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-700 text-zinc-100")}`,placeholder:"••••••••"}),o.jsx("button",{type:"button",onClick:()=>sc("single"),className:`absolute right-3 top-1/2 transform -translate-y-1/2 p-2 rounded ${m(n,"text-zinc-500 hover:text-zinc-700","text-zinc-400 hover:text-zinc-200")}`,children:Ts.single?"🙈":"👁️"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"📝 Notas (opcional)"}),o.jsx("textarea",{value:he.notes,onChange:h=>vn(S=>({...S,notes:h.target.value})),className:`w-full rounded-xl border px-4 py-3 ${m(n,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-700 text-zinc-100")}`,rows:3,placeholder:"Notas adicionales..."})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:()=>{Vt(!1),Nt(null),xn([]),oo({})},className:`flex-1 px-4 py-3 rounded-xl font-medium transition-all ${m(n,"bg-zinc-200 text-zinc-700 hover:bg-zinc-300","bg-zinc-700 text-zinc-200 hover:bg-zinc-600")}`,children:"Cancelar"}),o.jsx("button",{onClick:Qf,disabled:be||(qe(Y.service)?Le.some(h=>!h.email||!h.password):!he.email||!he.password),className:`flex-1 px-4 py-3 rounded-xl font-medium transition-all ${be||(qe(Y.service)?Le.some(h=>!h.email||!h.password):!he.email||!he.password)?"opacity-50 cursor-not-allowed":""} ${m(n,"bg-green-600 text-white hover:bg-green-700","bg-green-500 text-white hover:bg-green-600")}`,children:be?"⏳ Guardando...":"💾 Guardar Cambios"})]})]})}),o.jsxs("footer",{className:`border-t py-8 text-center text-sm ${m(n,"text-zinc-500 border-zinc-200","text-zinc-400 border-zinc-800")}`,children:["© ",new Date().getFullYear()," StreamZone"]}),o.jsx(wx,{open:Xf,onClose:()=>co(!1),title:`Comprar ${(Pr==null?void 0:Pr.name)||""}`,isDark:n,children:Pr&&o.jsx(Ax,{service:Pr,onClose:()=>co(!1),onAddPurchase:dc,isDark:n,user:a})}),o.jsx(Ox,{open:em,onClose:()=>fc(!1),service:tm,user:a,isDark:n,onPurchase:dc}),o.jsx(Ix,{open:mc,onClose:()=>yn(!1),onRegister:rm,isDark:n}),o.jsx(Nx,{open:g,onClose:()=>x(!1),isDark:n,adminEmails:b,setAdminEmails:y,adminPasswords:_,setAdminPasswords:p}),o.jsx(kx,{open:j,onClose:()=>E(!1),isDark:n,setSubView:uo,openAdmins:()=>x(!0),onExportCSV:yc,onLogout:im,onRegisterPurchase:()=>yn(!0)}),o.jsx(_x,{answerFn:(h,S)=>yx(Kt,Hr).answer(h,S),isDark:n}),o.jsx(jx,{isDark:n,onToggle:r})]})}function Nx({open:t,onClose:e,isDark:n,adminEmails:r,setAdminEmails:s,adminPasswords:i,setAdminPasswords:a}){const[l,c]=N.useState(""),[u,d]=N.useState(""),[f,v]=N.useState(!1),w=async()=>{const y=l.trim().toLowerCase();if(!xx(y)){alert("❌ Por favor ingresa un email válido");return}if(r.includes(y)){alert("⚠️ Este email ya está registrado como administrador");return}const _=mx(y);d(_),v(!0);try{const{data:p,error:g}=await ex({email:y,password:_,is_active:!0});if(g){if(console.error("Error creating admin in database:",g),g.message.includes("ya está registrado")){alert("⚠️ "+g.message);return}alert("⚠️ Error en la base de datos, se agregó localmente"),a({...i,[y]:_}),s([...r,y]),c("");return}else console.log("✅ Admin created in database:",p)}catch(p){console.error("Error creating admin:",p),a({...i,[y]:_}),s([...r,y]),c("");return}try{const{data:p,error:g}=await Za();if(g)console.error("Error fetching admins after creation:",g),a({...i,[y]:_}),s([...r,y]);else if(p&&p.length>0){const x=p.map(E=>E.email),j=p.reduce((E,k)=>(E[k.email]=k.password,E),{});s(x),a(j),console.log("✅ Administradores sincronizados desde BD después de crear")}}catch(p){console.error("Error syncing admins after creation:",p),a({...i,[y]:_}),s([...r,y])}c("")},b=async y=>{if(y===pr){alert("⚠️ No se puede eliminar al administrador principal");return}try{const{data:_,error:p}=await tx(y);if(p){console.error("Error deleting admin from database:",p),s(r.filter(x=>x!==y));const g={...i};delete g[y],a(g);return}else console.log("✅ Admin deleted from database:",_)}catch(_){console.error("Error deleting admin:",_),s(r.filter(g=>g!==y));const p={...i};delete p[y],a(p);return}try{const{data:_,error:p}=await Za();if(p){console.error("Error fetching admins after deletion:",p),s(r.filter(x=>x!==y));const g={...i};delete g[y],a(g)}else if(_){const g=_.map(j=>j.email),x=_.reduce((j,E)=>(j[E.email]=E.password,j),{});s(g),a(x),console.log("✅ Administradores sincronizados desde BD después de eliminar")}}catch(_){console.error("Error syncing admins after deletion:",_),s(r.filter(g=>g!==y));const p={...i};delete p[y],a(p)}};return t?o.jsxs("div",{className:"fixed inset-0 z-50",onClick:e,children:[o.jsx("div",{className:"absolute inset-0 bg-black/50"}),o.jsxs("aside",{className:`absolute right-0 top-0 h-full w-[380px] p-6 shadow-2xl ${m(n,"bg-white","bg-zinc-900 text-zinc-100")}`,onClick:y=>y.stopPropagation(),children:[o.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[o.jsx("h4",{className:"text-xl font-bold",children:"👥 Administradores"}),o.jsx("button",{onClick:e,className:`w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold transition-colors ${m(n,"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-100","text-zinc-300 hover:text-zinc-100 hover:bg-zinc-800")}`,children:"×"})]}),o.jsx("p",{className:m(n,"text-sm text-zinc-600 mb-6","text-sm text-zinc-300 mb-6"),children:"Los correos aquí listados podrán iniciar sesión como administrador"}),f&&u&&o.jsxs("div",{className:`mb-6 p-4 rounded-xl border-2 ${m(n,"bg-green-50 border-green-200","bg-green-900/20 border-green-700")}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-lg",children:"🔑"}),o.jsx("span",{className:"font-semibold text-green-800 dark:text-green-300",children:"Contraseña Generada"})]}),o.jsx("div",{className:`p-3 rounded-lg font-mono text-sm ${m(n,"bg-white border border-green-200","bg-zinc-800 border border-green-600")}`,children:u}),o.jsx("p",{className:"text-xs text-green-700 dark:text-green-400 mt-2",children:"⚠️ Guarda esta contraseña en un lugar seguro. Se usará para el primer acceso."}),o.jsx("button",{onClick:()=>v(!1),className:`mt-2 text-xs px-3 py-1 rounded-lg ${m(n,"bg-green-100 text-green-700 hover:bg-green-200","bg-green-800 text-green-100 hover:bg-green-700")}`,children:"Cerrar"})]}),o.jsxs("div",{className:"mb-6 flex gap-2",children:[o.jsx("input",{value:l,onChange:y=>c(y.target.value),placeholder:"nuevo@admin.com",className:`flex-1 rounded-xl border px-4 py-3 text-sm transition-colors ${m(n,"border-zinc-300 bg-white text-zinc-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-200","border-zinc-600 bg-zinc-700 text-zinc-100 focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20")}`,onKeyDown:y=>y.key==="Enter"&&w()}),o.jsx("button",{onClick:w,className:`rounded-xl px-4 py-3 text-sm font-semibold transition-colors ${m(n,"bg-blue-600 text-white hover:bg-blue-700","bg-blue-500 text-white hover:bg-blue-600")}`,children:"+ Agregar"})]}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.jsxs("ul",{className:"space-y-3",children:[r.map(y=>{const _=y===pr;return o.jsx("li",{className:`rounded-xl border p-4 ${_?"border-blue-300 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/30":m(n,"border-zinc-200 bg-zinc-50","border-zinc-700 bg-zinc-800")}`,children:o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:y}),_&&o.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 rounded-full",children:"Principal"})]}),o.jsx("button",{onClick:()=>b(y),disabled:_,className:`rounded-lg px-3 py-1 text-xs font-semibold ${_?"bg-zinc-200 text-zinc-500 cursor-not-allowed dark:bg-zinc-700 dark:text-zinc-400":m(n,"bg-red-100 text-red-700 hover:bg-red-200","bg-red-800 text-red-100 hover:bg-red-700")}`,title:_?"No se puede eliminar al administrador principal":"Eliminar administrador",children:_?"Protegido":"Quitar"})]})},y)}),r.length===0&&o.jsx("li",{className:`text-center py-8 text-sm ${m(n,"text-zinc-500","text-zinc-400")}`,children:"No hay administradores registrados"})]})})]})]}):null}function kx({open:t,onClose:e,isDark:n,setSubView:r,openAdmins:s,onExportCSV:i,onLogout:a,onRegisterPurchase:l}){return t?o.jsxs("div",{className:"fixed inset-0 z-50",onClick:e,children:[o.jsx("div",{className:"absolute inset-0 bg-black/50"}),o.jsxs("aside",{className:`absolute left-0 top-0 h-full w-[320px] p-6 shadow-2xl ${m(n,"bg-white","bg-zinc-900 text-zinc-100")}`,onClick:c=>c.stopPropagation(),children:[o.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[o.jsx("h4",{className:"text-xl font-bold",children:"☰ Menú Admin"}),o.jsx("button",{onClick:e,className:`w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold transition-colors ${m(n,"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-100","text-zinc-300 hover:text-zinc-100 hover:bg-zinc-800")}`,children:"×"})]}),o.jsxs("nav",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{r("dashboard"),e()},className:`w-full rounded-xl p-4 text-left transition-all hover:scale-105 ${m(n,"hover:bg-zinc-100","hover:bg-zinc-800")}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:"📊"}),o.jsx("span",{className:"font-semibold",children:"Dashboard"})]})}),o.jsx("button",{onClick:()=>{r("purchases"),e()},className:`w-full rounded-xl p-4 text-left transition-all hover:scale-105 ${m(n,"hover:bg-zinc-100","hover:bg-zinc-800")}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:"🛒"}),o.jsx("span",{className:"font-semibold",children:"Gestionar Compras"})]})}),o.jsx("button",{onClick:()=>{l(),e()},className:`w-full rounded-xl p-4 text-left transition-all hover:scale-105 ${m(n,"hover:bg-blue-50","hover:bg-blue-900/20")}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:"➕"}),o.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"Registrar Compra"})]})}),o.jsx("button",{onClick:()=>{s(),e()},className:`w-full rounded-xl p-4 text-left transition-all hover:scale-105 ${m(n,"hover:bg-zinc-100","hover:bg-zinc-800")}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:"👥"}),o.jsx("span",{className:"font-semibold",children:"Administradores"})]})}),o.jsx("button",{onClick:()=>{i(),e()},className:`w-full rounded-xl p-4 text-left transition-all hover:scale-105 ${m(n,"hover:bg-zinc-100","hover:bg-zinc-800")}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:"📊"}),o.jsx("span",{className:"font-semibold",children:"Exportar CSV"})]})}),o.jsx("div",{className:"border-t pt-3 mt-6",children:o.jsx("button",{onClick:()=>{a(),e()},className:`w-full rounded-xl p-4 text-left transition-all hover:scale-105 ${m(n,"text-red-600 hover:bg-red-50","text-red-400 hover:bg-red-900/20")}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:"🚪"}),o.jsx("span",{className:"font-semibold",children:"Cerrar Sesión"})]})})})]})]})]}):null}function Ex({isDark:t,onSubmit:e}){const[n,r]=N.useState(""),[s,i]=N.useState(""),[a,l]=N.useState(""),[c,u]=N.useState(""),[d,f]=N.useState(""),[v,w]=N.useState(!1),[b,y]=N.useState(""),[_,p]=N.useState(!1),g=async x=>{if(x.preventDefault(),y(""),p(!0),!n||!s||!a||!c){y("Todos los campos son obligatorios"),p(!1);return}if(c!==d){y("Las contraseñas no coinciden"),p(!1);return}if(c.length<6){y("La contraseña debe tener al menos 6 caracteres"),p(!1);return}try{const{data:j,error:E}=await I.from("users").insert([{name:n,phone:tl(s),email:a.toLowerCase().trim(),password:c}]).select().single();if(E){E.code==="23505"?y("Ya existe un usuario con este email o teléfono"):y("Error al crear la cuenta"),p(!1);return}y("✅ Cuenta creada exitosamente"),e({name:n,phone:tl(s),email:a,password:c})}catch{y("Error al crear la cuenta"),p(!1)}};return o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Nombre completo"}),o.jsx("input",{required:!0,className:`w-full rounded-xl border px-3 py-2 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:n,onChange:x=>r(x.target.value),placeholder:"Tu nombre completo",disabled:_})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"WhatsApp"}),o.jsx("input",{required:!0,className:`w-full rounded-xl border px-3 py-2 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:s,onChange:x=>i(x.target.value),placeholder:"+593 99 999 9999",disabled:_})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Correo electrónico"}),o.jsx("input",{required:!0,type:"email",className:`w-full rounded-xl border px-3 py-2 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:a,onChange:x=>l(x.target.value),placeholder:"tu@correo.com",disabled:_})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Contraseña"}),o.jsx("input",{required:!0,type:v?"text":"password",className:`w-full rounded-xl border px-3 py-2 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:c,onChange:x=>u(x.target.value),placeholder:"••••••••",minLength:6,disabled:_})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Confirmar contraseña"}),o.jsx("input",{required:!0,type:v?"text":"password",className:`w-full rounded-xl border px-3 py-2 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:d,onChange:x=>f(x.target.value),placeholder:"••••••••",minLength:6,disabled:_})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"showPassword",checked:v,onChange:x=>w(x.target.checked),className:"rounded",disabled:_}),o.jsx("label",{htmlFor:"showPassword",className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Mostrar contraseña"})]}),b&&o.jsx("div",{className:`text-sm ${b.includes("✅")?"text-green-600":"text-red-600"}`,children:b}),o.jsx("button",{type:"submit",disabled:_,className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${_?"opacity-50 cursor-not-allowed":""} ${m(t,"bg-gradient-to-r from-green-600 to-blue-600 text-white hover:from-green-700 hover:to-blue-700","bg-gradient-to-r from-green-500 to-blue-600 text-white hover:from-green-600 hover:to-blue-700")}`,children:_?"⏳ Creando cuenta...":"🚀 Crear cuenta"})]})}function zx({isDark:t,onLogin:e,onForgotPassword:n}){const[r,s]=N.useState(""),[i,a]=N.useState(""),[l,c]=N.useState(""),[u,d]=N.useState(!1),[f,v]=N.useState(!1),w=async b=>{b.preventDefault(),v(!0),c("");try{const y=await fx(r,i);y.data?(c("Login exitoso"),e(y.data)):c("Credenciales incorrectas")}catch{c("Error en el login")}finally{v(!1)}};return o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Correo electrónico"}),o.jsx("input",{required:!0,type:"email",className:`w-full rounded-xl border px-4 py-3 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-800 text-zinc-100")}`,value:r,onChange:b=>s(b.target.value),placeholder:"tu@correo.com",disabled:f})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Contraseña"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{required:!0,type:u?"text":"password",className:`w-full rounded-xl border px-4 py-3 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-800 text-zinc-100")}`,value:i,onChange:b=>a(b.target.value),placeholder:"••••••",disabled:f}),o.jsx("button",{type:"button",onClick:()=>d(b=>!b),className:m(t,"rounded-xl bg-zinc-100 px-4 py-3","rounded-xl bg-zinc-700 px-4 py-3"),disabled:f,children:u?"👁️":"👁️‍🗨️"})]})]}),l&&o.jsx("div",{className:`text-sm ${l.includes("exitoso")?"text-green-600":"text-red-600"}`,children:l}),o.jsx("button",{type:"submit",disabled:f,className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${f?"opacity-50 cursor-not-allowed":""} ${m(t,"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700","bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700")}`,children:f?"⏳ Iniciando sesión...":"🚀 Iniciar Sesión"}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:n,className:`text-sm ${m(t,"text-zinc-500 hover:text-zinc-700","text-zinc-400 hover:text-zinc-200")}`,disabled:f,children:"¿Olvidaste tu contraseña?"})})]})}function Cx({isDark:t,onBack:e,onTokenSent:n,setView:r}){const[s,i]=N.useState(""),[a,l]=N.useState(""),[c,u]=N.useState(!1),d=async f=>{var v;f.preventDefault(),u(!0),l("");try{console.log("🔍 Generando token para:",s);const w=await Mf(s);if(console.log("🔍 Resultado:",w),w.data){const b=`✅ Token generado: ${w.data.token}. Usa este código para continuar.`;console.log("🔍 Mensaje:",b),l(b),n(s,w.data.token)}else console.log("🔍 Error:",w.error),l(((v=w.error)==null?void 0:v.message)||"Error generando token")}catch(w){console.log("🔍 Error en catch:",w),l("Error en el proceso")}finally{u(!1)}};return o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold mb-2",children:"🔐 Recuperar Contraseña"}),o.jsx("p",{className:"text-sm opacity-80",children:"Para recuperar tu contraseña, necesitas un código de verificación"})]}),o.jsx("div",{className:`p-4 rounded-xl mb-4 ${m(t,"bg-blue-50 border border-blue-200","bg-blue-900/20 border border-blue-400/30")}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"text-2xl",children:"💬"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"📋 Instrucciones:"}),o.jsxs("ol",{className:"text-sm space-y-1 list-decimal list-inside",children:[o.jsxs("li",{children:["Haz clic en el botón ",o.jsx("span",{className:"font-semibold",children:'"Chat"'})," (esquina inferior derecha)"]}),o.jsxs("li",{children:["Escribe: ",o.jsx("span",{className:"font-mono bg-gray-200 dark:bg-gray-700 px-1 rounded",children:'"olvidé mi contraseña"'})]}),o.jsxs("li",{children:["Envía tu email: ",o.jsx("span",{className:"font-semibold",children:"ejemplo@gmail.com"})]}),o.jsx("li",{children:"Copia el código que te dé el chatbot"}),o.jsx("li",{children:"Regresa aquí y pega el código"})]})]})]})}),o.jsx("div",{className:"text-center mb-4",children:o.jsx("button",{type:"button",onClick:()=>{const f=document.querySelector("[data-chat-button]");f&&f.click()},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition-all ${m(t,"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700","bg-gradient-to-r from-purple-500 to-blue-600 text-white hover:from-purple-600 hover:to-blue-700")}`,children:"💬 Abrir Chatbot"})}),o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Correo electrónico"}),o.jsx("input",{required:!0,type:"email",className:`w-full rounded-xl border px-4 py-3 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-800 text-zinc-100")}`,value:s,onChange:f=>i(f.target.value),placeholder:"tu@correo.com",disabled:c})]}),a&&o.jsx("div",{className:`text-sm ${a.includes("✅")?"text-green-600":"text-red-600"}`,children:a}),a&&a.includes("No existe un usuario")&&o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:()=>r("register"),className:`text-sm ${m(t,"text-blue-600 hover:text-blue-700","text-blue-400 hover:text-blue-300")}`,children:"✨ Crear cuenta nueva"})}),o.jsx("button",{type:"submit",disabled:c,className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${c?"opacity-50 cursor-not-allowed":""} ${m(t,"bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600","bg-gradient-to-r from-red-500 to-orange-600 text-white hover:from-red-600 hover:to-orange-700")}`,children:c?"⏳ Generando token...":"📧 Enviar Token de Recuperación"}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:e,className:`text-sm ${m(t,"text-zinc-500 hover:text-zinc-700","text-zinc-400 hover:text-zinc-200")}`,disabled:c,children:"← Volver al login"})})]})}function Px({isDark:t,email:e,onBack:n,onCodeVerified:r}){const[s,i]=N.useState(""),[a,l]=N.useState(""),[c,u]=N.useState(!1),d=async f=>{f.preventDefault(),u(!0),l("");try{(await rc(s)).data?(l("✅ Código verificado correctamente"),r(s)):l("❌ Código inválido o expirado")}catch{l("Error verificando código")}finally{u(!1)}};return o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsx("div",{className:"text-center mb-6",children:o.jsx("h3",{className:"text-xl font-bold mb-2",children:"🔐 Verificar Código"})}),o.jsx("div",{className:`p-4 rounded-xl mb-4 ${m(t,"bg-green-50 border border-green-200","bg-green-900/20 border border-green-400/30")}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"text-2xl",children:"🔑"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"💡 ¿No tienes el código?"}),o.jsx("p",{className:"text-sm mb-2",children:"El código se obtiene del chatbot en el paso anterior."}),o.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:[o.jsx("strong",{children:"Tip:"})," Si no lo tienes, vuelve al paso anterior y sigue las instrucciones."]})]})]})}),o.jsx("div",{className:"text-center mb-4",children:o.jsx("button",{type:"button",onClick:()=>{const f=document.querySelector("[data-chat-button]");f&&f.click()},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition-all ${m(t,"bg-gradient-to-r from-green-500 to-blue-600 text-white hover:from-green-600 hover:to-blue-700","bg-gradient-to-r from-blue-500 to-green-600 text-white hover:from-blue-600 hover:to-green-700")}`,children:"💬 Abrir Chatbot"})}),o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Código de verificación"}),o.jsx("input",{required:!0,type:"text",className:`w-full rounded-xl border px-4 py-3 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-800 text-zinc-100")}`,value:s,onChange:f=>i(f.target.value),placeholder:"Ingresa el código de 6 dígitos",disabled:c})]}),a&&o.jsx("div",{className:`text-sm ${a.includes("✅")?"text-green-600":"text-red-600"}`,children:a}),o.jsx("button",{type:"submit",disabled:c,className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${c?"opacity-50 cursor-not-allowed":""} ${m(t,"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700","bg-gradient-to-r from-purple-500 to-blue-600 text-white hover:from-purple-600 hover:to-blue-700")}`,children:c?"⏳ Verificando código...":"✅ Verificar Código"}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:n,className:`text-sm ${m(t,"text-zinc-500 hover:text-zinc-700","text-zinc-400 hover:text-zinc-200")}`,disabled:c,children:"← Volver a ingresar email"})})]})}function Tx({isDark:t,email:e,token:n,onSuccess:r}){const[s,i]=N.useState(""),[a,l]=N.useState(""),[c,u]=N.useState(""),[d,f]=N.useState(!1),[v,w]=N.useState(!1),b=async y=>{var _;if(y.preventDefault(),s!==a){u("Las contraseñas no coinciden");return}if(s.length<6){u("La contraseña debe tener al menos 6 caracteres");return}f(!0),u("");try{const p=await hx(n,s);p.data?(u("✅ Contraseña restablecida exitosamente"),setTimeout(()=>r(),2e3)):u(((_=p.error)==null?void 0:_.message)||"Error restableciendo contraseña")}catch{u("Error en el proceso")}finally{f(!1)}};return o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold mb-2",children:"🔄 Nueva Contraseña"}),o.jsx("p",{className:"text-sm opacity-80",children:"Crea una nueva contraseña para tu cuenta"}),o.jsxs("p",{className:"text-xs opacity-60 mt-1",children:["Email: ",e]})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Nueva contraseña"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{required:!0,type:v?"text":"password",className:`w-full rounded-xl border px-4 py-3 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-800 text-zinc-100")}`,value:s,onChange:y=>i(y.target.value),placeholder:"Mínimo 6 caracteres",disabled:d}),o.jsx("button",{type:"button",onClick:()=>w(y=>!y),className:m(t,"rounded-xl bg-zinc-100 px-4 py-3","rounded-xl bg-zinc-700 px-4 py-3"),disabled:d,children:v?"👁️":"👁️‍🗨️"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Confirmar contraseña"}),o.jsx("input",{required:!0,type:"password",className:`w-full rounded-xl border px-4 py-3 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-600 bg-zinc-800 text-zinc-100")}`,value:a,onChange:y=>l(y.target.value),placeholder:"Repite la contraseña",disabled:d})]}),c&&o.jsx("div",{className:`text-sm ${c.includes("✅")?"text-green-600":"text-red-600"}`,children:c}),o.jsx("button",{type:"submit",disabled:d,className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${d?"opacity-50 cursor-not-allowed":""} ${m(t,"bg-gradient-to-r from-green-500 to-blue-500 text-white hover:from-green-600 hover:to-blue-600","bg-gradient-to-r from-blue-500 to-green-600 text-white hover:from-blue-600 hover:to-green-700")}`,children:d?"⏳ Restableciendo...":"✅ Restablecer Contraseña"})]})}function $x({isDark:t,onLogin:e,adminEmails:n,adminPasswords:r}){const[s,i]=N.useState(""),[a,l]=N.useState(""),[c,u]=N.useState(""),[d,f]=N.useState(!1),v=w=>{w.preventDefault();const b=s.trim().toLowerCase(),y=n.map(g=>g.toLowerCase()).includes(b);let _;b===pr?_=el:_=r[b]||"Jeremias_012.@";const p=y&&a.trim()===_;u(p?"":"Credenciales incorrectas"),e(p)};return o.jsxs("form",{onSubmit:v,className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-xs text-zinc-700","text-xs text-zinc-300"),children:"Correo"}),o.jsx("input",{required:!0,className:`w-full rounded-xl border px-3 py-2 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:s,onChange:w=>i(w.target.value),placeholder:"admin@correo.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(t,"text-xs text-zinc-700","text-xs text-zinc-300"),children:"Contraseña"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{required:!0,type:d?"text":"password",className:`w-full rounded-xl border px-3 py-2 ${m(t,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:a,onChange:w=>l(w.target.value),placeholder:"••••••"}),o.jsx("button",{type:"button",onClick:()=>f(w=>!w),className:m(t,"rounded-xl bg-zinc-100 text-zinc-700 px-3","rounded-xl bg-zinc-800 text-zinc-100 px-3"),children:d?"Ocultar":"Ver"})]})]}),c&&o.jsx("div",{className:"text-sm text-red-600",children:c}),o.jsx("button",{type:"submit",className:m(t,"rounded-xl bg-zinc-900 text-white px-4 py-2","rounded-xl bg-white text-zinc-900 px-4 py-2"),children:"Entrar"})]})}function Ax({service:t,onClose:e,onAddPurchase:n,isDark:r,user:s}){const i=t.billing==="annual",[a,l]=N.useState((s==null?void 0:s.name)||""),[c,u]=N.useState((s==null?void 0:s.phone)||""),[d,f]=N.useState(new Date().toISOString().slice(0,10)),[v,w]=N.useState(1),[b,y]=N.useState(1),[_,p]=N.useState(1),[g,x]=N.useState(""),j=N.useMemo(()=>{const M=new Date(d),V=i?12*Number(v):Number(b);return M.setMonth(M.getMonth()+V),M.toISOString().slice(0,10)},[d,b,v,i]),E=i?t.price*Number(v):t.price*Number(b),k=E*_,C=["🎬 *SOLICITUD DE RESERVA - STREAMZONE*","",`📺 *Servicio:* ${t.name}`,`👤 *Cliente:* ${a}`,`📱 *WhatsApp:* ${c}`,`📱 *Dispositivos:* ${_} ${_===1?"dispositivo":"dispositivos"}`,`⏱️ *Duración:* ${i?`${v} año(s)`:`${b} mes(es)`}`,`💰 *Total:* ${ge(k)}`,`📅 *Inicio:* ${d}`,`📅 *Fin:* ${j}`,g?`📝 *Notas:* ${g}`:"","","Espero su confirmación. Gracias."].filter(Boolean).join(`
`),T=()=>{n({customer:a,phone:tl(c),service:t.name,start:d,end:j,duration:i?12*Number(v):Number(b),months:i?12*Number(v):Number(b),devices:_,total:k}),window.open(Df(px,C),"_blank"),e()};return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:m(r,"text-xs text-zinc-600","text-xs text-zinc-300"),children:"Nombre"}),o.jsx("input",{className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:a,onChange:M=>l(M.target.value),placeholder:"Tu nombre"})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(r,"text-xs text-zinc-600","text-xs text-zinc-300"),children:"WhatsApp"}),o.jsx("input",{className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:c,onChange:M=>u(M.target.value),placeholder:"+593..."})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:m(r,"text-xs text-zinc-600","text-xs text-zinc-300"),children:"Inicio"}),o.jsx("input",{type:"date",className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:d,onChange:M=>f(M.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(r,"text-xs text-zinc-600","text-xs text-zinc-300"),children:"Fin"}),o.jsx("input",{disabled:!0,className:`w-full rounded-xl border px-3 py-2 ${m(r,"bg-zinc-50 border-zinc-300 text-zinc-600","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:j})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:m(r,"text-xs text-zinc-600","text-xs text-zinc-300"),children:i?"Años":"Meses"}),i?o.jsx("select",{className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:v,onChange:M=>w(Number(M.target.value)),children:[1,2,3].map(M=>o.jsx("option",{value:M,children:M},M))}):o.jsx("select",{className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,value:b,onChange:M=>y(Number(M.target.value)),children:[1,2,3,6,12].map(M=>o.jsx("option",{value:M,children:M},M))})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(r,"text-xs text-zinc-600","text-xs text-zinc-300"),children:"Dispositivos"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>p(Math.max(1,_-1)),className:`w-8 h-8 rounded-lg flex items-center justify-center ${m(r,"bg-zinc-200 hover:bg-zinc-300","bg-zinc-700 hover:bg-zinc-600")}`,children:"-"}),o.jsxs("span",{className:`flex-1 text-center font-medium ${m(r,"text-zinc-800","text-zinc-200")}`,children:[_," ",_===1?"Dispositivo":"Dispositivos"]}),o.jsx("button",{onClick:()=>p(Math.min(5,_+1)),className:`w-8 h-8 rounded-lg flex items-center justify-center ${m(r,"bg-zinc-200 hover:bg-zinc-300","bg-zinc-700 hover:bg-zinc-600")}`,children:"+"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:m(r,"text-xs text-zinc-600","text-xs text-zinc-300"),children:"Notas"}),o.jsx("textarea",{className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,rows:3,value:g,onChange:M=>x(M.target.value),placeholder:"Preferencias, usuario, correo, etc."})]}),o.jsx("div",{className:`p-3 rounded-xl ${m(r,"bg-blue-50 border border-blue-200","bg-blue-900/20 border border-blue-700")}`,children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{className:m(r,"text-zinc-600","text-zinc-300"),children:["Precio base (",i?`${v} año(s)`:`${b} mes(es)`,"):"]}),o.jsx("span",{className:m(r,"text-zinc-800","text-zinc-200"),children:ge(E)})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{className:m(r,"text-zinc-600","text-zinc-300"),children:["Dispositivos (",_,"):"]}),o.jsxs("span",{className:m(r,"text-zinc-800","text-zinc-200"),children:["x",_]})]}),o.jsxs("div",{className:"border-t pt-1 flex justify-between font-semibold",children:[o.jsx("span",{className:m(r,"text-zinc-800","text-zinc-200"),children:"Total:"}),o.jsx("span",{className:m(r,"text-zinc-900","text-zinc-100"),children:ge(k)})]})]})}),o.jsx("div",{className:"flex items-center justify-between pt-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:e,className:m(r,"rounded-xl bg-zinc-100 px-4 py-2","rounded-xl bg-zinc-800 px-4 py-2 text-white"),children:"Cancelar"}),o.jsx("button",{onClick:T,className:m(r,"rounded-xl bg-zinc-900 px-4 py-2 text-white","rounded-xl bg-white px-4 py-2 text-zinc-900"),children:"Confirmar por WhatsApp"})]})})]})}function Ox({open:t,onClose:e,service:n,user:r,isDark:s,onPurchase:i}){const[a,l]=N.useState(""),[c,u]=N.useState(1),[d,f]=N.useState(1),[v,w]=N.useState("");if(!t||!n)return null;const b=n.billing==="annual",y=n.price*c,_=y*d,p=()=>{const g={service:n.name,price:n.price,duration:c,devices:d,total:_,paymentMethod:"pichincha",notes:v,customer:r.name,phone:r.phone,email:r.email,start:new Date().toISOString().slice(0,10),end:new Date(Date.now()+(b?c*365:c*30)*24*60*60*1e3).toISOString().slice(0,10)};i(g),e()};return o.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/50 p-2 md:p-4",onClick:e,children:o.jsxs("div",{className:`w-full max-w-2xl max-h-[90vh] rounded-3xl p-4 md:p-6 shadow-2xl overflow-y-auto ${m(s,"bg-white","bg-zinc-900 text-zinc-100")}`,onClick:g=>g.stopPropagation(),children:[o.jsxs("div",{className:"mb-4 md:mb-6 flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl md:text-2xl font-bold",children:"Completar Compra"}),o.jsx("button",{onClick:e,className:`w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold transition-colors ${m(s,"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-100","text-zinc-300 hover:text-zinc-100 hover:bg-zinc-800")}`,children:"×"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:`rounded-2xl p-4 ${m(s,"bg-zinc-50","bg-zinc-800")}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`h-12 w-12 ${n.color} rounded-xl text-white grid place-content-center text-xl font-bold`,children:n.logo}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold",children:n.name}),o.jsxs("p",{className:"text-sm opacity-70",children:[ge(n.price)," por ",b?"año":"mes"]})]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Duración"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>u(1),className:`px-4 py-2 rounded-xl text-sm font-medium ${c===1?m(s,"bg-blue-600 text-white","bg-blue-500 text-white"):m(s,"bg-zinc-100","bg-zinc-700")}`,children:["1 ",b?"año":"mes"]}),o.jsxs("button",{onClick:()=>u(3),className:`px-4 py-2 rounded-xl text-sm font-medium ${c===3?m(s,"bg-blue-600 text-white","bg-blue-500 text-white"):m(s,"bg-zinc-100","bg-zinc-700")}`,children:["3 ",b?"años":"meses"]}),o.jsxs("button",{onClick:()=>u(6),className:`px-4 py-2 rounded-xl text-sm font-medium ${c===6?m(s,"bg-blue-600 text-white","bg-blue-500 text-white"):m(s,"bg-zinc-100","bg-zinc-700")}`,children:["6 ",b?"años":"meses"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Número de Dispositivos"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>f(Math.max(1,d-1)),className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg font-bold ${m(s,"bg-zinc-200 hover:bg-zinc-300","bg-zinc-700 hover:bg-zinc-600")}`,children:"-"}),o.jsxs("div",{className:`flex-1 text-center p-3 rounded-xl ${m(s,"bg-zinc-50","bg-zinc-800")}`,children:[o.jsx("div",{className:"text-2xl font-bold",children:d}),o.jsx("div",{className:"text-sm opacity-70",children:d===1?"Dispositivo":"Dispositivos"})]}),o.jsx("button",{onClick:()=>f(Math.min(5,d+1)),className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg font-bold ${m(s,"bg-zinc-200 hover:bg-zinc-300","bg-zinc-700 hover:bg-zinc-600")}`,children:"+"})]}),o.jsx("p",{className:"text-xs text-zinc-500 mt-2 text-center",children:"Máximo 5 dispositivos por compra"})]}),o.jsxs("div",{className:`p-4 md:p-6 rounded-xl ${m(s,"bg-gray-50 border border-gray-200","bg-gray-800 border border-gray-600")}`,children:[o.jsx("h4",{className:"font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"💳 Información de Pago"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[o.jsxs("div",{className:`p-3 md:p-4 rounded-lg ${m(s,"bg-white border border-gray-200","bg-gray-700 border border-gray-600")}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-lg md:text-xl",children:"🏦"}),o.jsx("span",{className:"font-semibold text-sm md:text-base",children:"Banco Pichincha"})]}),o.jsxs("div",{className:"text-xs md:text-sm space-y-1",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Titular:"})," Jeremias Guale Santana"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Cuenta:"})," 2209034638"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tipo:"})," Ahorro Transaccional"]})]})]}),o.jsxs("div",{className:`p-3 md:p-4 rounded-lg ${m(s,"bg-white border border-gray-200","bg-gray-700 border border-gray-600")}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-lg md:text-xl",children:"🏛️"}),o.jsx("span",{className:"font-semibold text-sm md:text-base",children:"Banco Guayaquil"})]}),o.jsxs("div",{className:"text-xs md:text-sm space-y-1",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Titular:"})," Jeremias Joel Guale Santana"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Cuenta:"})," 0122407273"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tipo:"})," Ahorros"]})]})]}),o.jsxs("div",{className:`p-3 md:p-4 rounded-lg ${m(s,"bg-white border border-gray-200","bg-gray-700 border border-gray-600")}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-lg md:text-xl",children:"🌊"}),o.jsx("span",{className:"font-semibold text-sm md:text-base",children:"Banco Pacífico"})]}),o.jsxs("div",{className:"text-xs md:text-sm space-y-1",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Titular:"})," Byron Guale Santana"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Cuenta:"})," 1061220256"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tipo:"})," Ahorros"]})]})]}),o.jsxs("div",{className:`p-3 md:p-4 rounded-lg ${m(s,"bg-white border border-gray-200","bg-gray-700 border border-gray-600")}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-lg md:text-xl",children:"💳"}),o.jsx("span",{className:"font-semibold text-sm md:text-base",children:"PayPal"})]}),o.jsxs("div",{className:"text-xs md:text-sm space-y-1",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Email:"})," guale2023@outlook.com"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Método:"})," PayPal"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tipo:"})," Transferencia"]})]})]})]}),o.jsx("div",{className:`mt-4 p-6 rounded-2xl ${m(s,"bg-gradient-to-br from-orange-50 to-yellow-50 border-2 border-orange-200","bg-gradient-to-br from-orange-900/30 to-yellow-900/30 border-2 border-orange-500")}`,children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:`p-4 rounded-full ${m(s,"bg-orange-100","bg-orange-800/50")}`,children:o.jsx("span",{className:"text-4xl",children:"🚨"})})}),o.jsx("h5",{className:"text-xl font-bold text-orange-800 dark:text-orange-200 mb-3",children:"⚠️ Instrucciones Importantes"}),o.jsxs("div",{className:`p-4 rounded-xl ${m(s,"bg-white/80","bg-black/20")}`,children:[o.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300 mb-4",children:["Una vez que hayas realizado el pago, ",o.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"debes confirmar tu compra"})," enviando una captura del comprobante por WhatsApp a nuestros agentes."]}),o.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[o.jsxs("div",{className:`px-4 py-2 rounded-lg ${m(s,"bg-green-100 text-green-800","bg-green-800/50 text-green-200")}`,children:[o.jsx("span",{className:"text-lg",children:"📱"}),o.jsx("span",{className:"ml-2 font-semibold",children:"WhatsApp"})]}),o.jsxs("div",{className:`px-4 py-2 rounded-lg ${m(s,"bg-blue-100 text-blue-800","bg-blue-800/50 text-blue-200")}`,children:[o.jsx("span",{className:"text-lg",children:"💬"}),o.jsx("span",{className:"ml-2 font-semibold",children:"Agentes"})]})]}),o.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium",children:"⚡ Sin el comprobante, tu servicio NO será activado"})]})]})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notas adicionales (opcional)"}),o.jsx("textarea",{value:v,onChange:g=>w(g.target.value),placeholder:"Comentarios o instrucciones especiales...",className:`w-full rounded-xl border px-4 py-3 text-sm resize-none ${m(s,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,rows:4,style:{minHeight:"80px"}})]}),o.jsx("div",{className:`rounded-2xl p-4 ${m(s,"bg-gradient-to-r from-blue-600 to-purple-600 text-white","bg-gradient-to-r from-blue-500 to-purple-500 text-white")}`,children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsxs("span",{children:["Precio base (",c," ",b?"año(s)":"mes(es)","):"]}),o.jsx("span",{children:ge(y)})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsxs("span",{children:["Dispositivos (",d,"):"]}),o.jsxs("span",{children:["x",d]})]}),o.jsxs("div",{className:"border-t border-white/20 pt-2 flex justify-between items-center",children:[o.jsx("span",{className:"text-lg font-semibold",children:"Total a pagar:"}),o.jsx("span",{className:"text-2xl font-bold",children:ge(_)})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:`flex-1 rounded-xl px-4 py-3 font-medium ${m(s,"bg-zinc-100 text-zinc-700 hover:bg-zinc-200","bg-zinc-700 text-zinc-200 hover:bg-zinc-600")}`,children:"Cancelar"}),o.jsx("button",{onClick:p,className:"flex-1 rounded-xl px-4 py-3 font-medium bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 transition-all",children:"Completar Compra"})]})]})]})})}function Ix({open:t,onClose:e,onRegister:n,isDark:r}){const[s,i]=N.useState({name:"",phone:"",email:"",service:"",price:"",duration:1,isAnnual:!1,startDate:new Date().toISOString().slice(0,10),notes:""});if(!t)return null;const a=l=>{l.preventDefault();const c=new Date(s.startDate),u=s.isAnnual?s.duration*12:s.duration;c.setMonth(c.getMonth()+u),n({...s,price:parseFloat(s.price),endDate:c.toISOString()}),i({name:"",phone:"",email:"",service:"",price:"",duration:1,isAnnual:!1,startDate:new Date().toISOString().slice(0,10),notes:""})};return o.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/50 p-4",onClick:e,children:o.jsxs("div",{className:`w-full max-w-2xl rounded-2xl p-6 shadow-2xl max-h-[90vh] overflow-y-auto ${m(r,"bg-white","bg-zinc-900")}`,onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[o.jsx("h3",{className:"text-2xl font-bold",children:"Registrar Compra Manual"}),o.jsx("button",{onClick:e,className:`w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold transition-colors ${m(r,"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-100","text-zinc-300 hover:text-zinc-100 hover:bg-zinc-800")}`,children:"×"})]}),o.jsxs("form",{onSubmit:a,className:"space-y-6",children:[o.jsxs("div",{className:`p-4 rounded-xl ${m(r,"bg-zinc-50","bg-zinc-800")}`,children:[o.jsx("h4",{className:"font-semibold mb-4",children:"👤 Información del Cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nombre completo *"}),o.jsx("input",{required:!0,value:s.name,onChange:l=>i({...s,name:l.target.value}),className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,placeholder:"Juan Pérez"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"WhatsApp *"}),o.jsx("input",{required:!0,value:s.phone,onChange:l=>i({...s,phone:l.target.value}),className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,placeholder:"+593987654321"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email (opcional)"}),o.jsx("input",{type:"email",value:s.email,onChange:l=>i({...s,email:l.target.value}),className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,placeholder:"juan@correo.com"})]})]})]}),o.jsxs("div",{className:`p-4 rounded-xl ${m(r,"bg-zinc-50","bg-zinc-800")}`,children:[o.jsx("h4",{className:"font-semibold mb-4",children:"🛍️ Información del Servicio"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Servicio *"}),o.jsxs("select",{required:!0,value:s.service,onChange:l=>i({...s,service:l.target.value}),className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,children:[o.jsx("option",{value:"",children:"Seleccionar servicio"}),Kt.map(l=>o.jsxs("option",{value:l.name,children:[l.name," - ",ge(l.price),"/",l.billing==="annual"?"año":"mes"]},l.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Precio (USD) *"}),o.jsx("input",{required:!0,type:"number",step:"0.01",min:"0",value:s.price,onChange:l=>i({...s,price:l.target.value}),className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,placeholder:"4.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Duración *"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{required:!0,type:"number",min:"1",value:s.duration,onChange:l=>i({...s,duration:parseInt(l.target.value)||1}),className:`flex-1 rounded-xl border px-3 py-2 ${m(r,"border-zinc-300","border-zinc-700 bg-zinc-800 text-zinc-100")}`}),o.jsxs("select",{value:s.isAnnual?"annual":"monthly",onChange:l=>i({...s,isAnnual:l.target.value==="annual"}),className:`rounded-xl border px-3 py-2 ${m(r,"border-zinc-300","border-zinc-700 bg-zinc-800 text-zinc-100")}`,children:[o.jsx("option",{value:"monthly",children:"Meses"}),o.jsx("option",{value:"annual",children:"Años"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fecha de inicio *"}),o.jsx("input",{required:!0,type:"date",value:s.startDate,onChange:l=>i({...s,startDate:l.target.value}),className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notas adicionales"}),o.jsx("textarea",{value:s.notes,onChange:l=>i({...s,notes:l.target.value}),className:`w-full rounded-xl border px-3 py-2 ${m(r,"border-zinc-300 bg-white text-zinc-800","border-zinc-700 bg-zinc-800 text-zinc-100")}`,rows:3,placeholder:"Comentarios o instrucciones especiales..."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:e,className:`flex-1 rounded-xl px-4 py-3 font-medium ${m(r,"bg-zinc-100 text-zinc-700 hover:bg-zinc-200","bg-zinc-700 text-zinc-200 hover:bg-zinc-600")}`,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 rounded-xl px-4 py-3 font-medium bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 transition-all",children:"Registrar Compra"})]})]})]})})}(function(){try{console.assert(ge(3.5)&&typeof ge(3.5)=="string","fmt string");const e="2025-01-01",n="2025-01-04",r="2024-12-28";console.assert(Go(e,n)===3,"daysBetween 3 dias"),console.assert(Go(n,n)===0,"daysBetween 0 dias");const s=Go(n,r);console.assert(typeof s=="number"&&!isNaN(s),`daysBetween debe ser un número válido: ${s}`),console.assert(Df("123","hola")==="https://wa.me/123?text=hola","wa link"),console.log("✅ Todas las pruebas pasaron correctamente")}catch(e){console.warn("Self-tests failed:",e)}})();Qo.createRoot(document.getElementById("root")).render(o.jsx(jm.StrictMode,{children:o.jsx(Sx,{})}));

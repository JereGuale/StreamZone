import{r as N}from"./react-vendor-B6114-rA.js";import{c as W}from"./supabase-C8p_czby.js";var q={exports:{}},A={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F=N,J=Symbol.for("react.element"),X=Symbol.for("react.fragment"),Z=Object.prototype.hasOwnProperty,H=F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y={key:!0,ref:!0,__self:!0,__source:!0};function V(a,o,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),o.key!==void 0&&(i=""+o.key),o.ref!==void 0&&(l=o.ref);for(r in o)Z.call(o,r)&&!Y.hasOwnProperty(r)&&(s[r]=o[r]);if(a&&a.defaultProps)for(r in o=a.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:J,type:a,key:i,ref:l,props:s,_owner:H.current}}A.Fragment=X;A.jsx=V;A.jsxs=V;q.exports=A;var e=q.exports;const O=a=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"USD"}).format(a),me={load(a,o){try{return JSON.parse(localStorage.getItem(a)||JSON.stringify(o))}catch{return o}},save(a,o){localStorage.setItem(a,JSON.stringify(o))},del(a){localStorage.removeItem(a)}};function ge(a,o){const n=new Date(a),s=new Date(o).getTime()-n.getTime();return Math.ceil(s/(1e3*60*60*24))}function t(a,o,n){return a?n:o}const K=a=>{const o=new Date,r=new Date(a).getTime()-o.getTime();return Math.round(r/(1e3*60*60*24))},xe=(a,o)=>{const n=new Date(a);n.setHours(0,0,0,0);const r=new Date(o);r.setHours(0,0,0,0);const s=r.getTime()-n.getTime();return Math.ceil(s/(1e3*60*60*24))},be=a=>{const o=K(a);return o<0?{status:"expired",color:"text-red-600",icon:"❌",message:"Servicio Caducado"}:o===0?{status:"expires-today",color:"text-red-600",icon:"⚠️",message:"Caduca Hoy"}:{status:"active",color:"text-red-600",icon:"⏰",message:`${o} ${o===1?"día":"días"} restantes`}};function pe(a){return a.replace(/[^\d]/g,"")}function he(a){return{netflix:"Series originales, thrillers, documentales",disney:"Marvel, Star Wars, Pixar, familias",max:"HBO premium, series épicas, películas",prime:"Exclusivas, blockbusters, Amazon",spotify:"Música, podcasts, audiolibros",paramount:"Paramount, Nickelodeon, MTV",apple:"Originales Apple, 4K premium"}[a]||"Contenido premium de entretenimiento"}const R=[{id:"netflix",name:"Netflix",price:4,billing:"monthly",color:"bg-red-600",logo:"N"},{id:"disney_premium",name:"Disney+ Premium",price:3.75,billing:"monthly",color:"bg-blue-600",logo:"D+"},{id:"disney_standard",name:"Disney+ Standard",price:3.25,billing:"monthly",color:"bg-blue-500",logo:"D+"},{id:"max",name:"Max",price:3,billing:"monthly",color:"bg-purple-700",logo:"MAX"},{id:"vix",name:"ViX",price:2.5,billing:"monthly",color:"bg-orange-500",logo:"ViX"},{id:"prime",name:"Prime Video",price:3,billing:"monthly",color:"bg-sky-700",logo:"PV"},{id:"youtube_premium",name:"YouTube Premium",price:3.35,billing:"monthly",color:"bg-red-700",logo:"YT"},{id:"paramount",name:"Paramount+",price:2.75,billing:"monthly",color:"bg-indigo-600",logo:"P+"},{id:"chatgpt",name:"ChatGPT",price:4,billing:"monthly",color:"bg-zinc-800",logo:"GPT"},{id:"crunchy",name:"Crunchyroll",price:2.5,billing:"monthly",color:"bg-orange-600",logo:"CR"},{id:"spotify",name:"Spotify",price:3.5,billing:"monthly",color:"bg-emerald-600",logo:"SP"},{id:"deezer",name:"Deezer",price:3,billing:"monthly",color:"bg-blue-700",logo:"DZ"},{id:"apple_tv",name:"Apple TV+",price:3.5,billing:"monthly",color:"bg-neutral-900",logo:"ATV"},{id:"canva_pro",name:"Canva Pro",price:2,billing:"monthly",color:"bg-indigo-500",logo:"C"},{id:"canva_pro_annual",name:"Canva Pro (1 año)",price:17.5,billing:"annual",color:"bg-indigo-600",logo:"C"},{id:"microsoft365",name:"Microsoft 365 (1 año)",price:15,billing:"annual",color:"bg-blue-500",logo:"M365"},{id:"autodesk",name:"Autodesk (1 año)",price:12.5,billing:"annual",color:"bg-zinc-700",logo:"AD"},{id:"office365",name:"Office 365 (1 año)",price:15,billing:"annual",color:"bg-blue-600",logo:"O365"}],fe=[{id:"netflix_disney_std",name:"Netflix + Disney Estándar",price:6,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-blue-500",logo:"N+D"},{id:"netflix_disney_premium",name:"Netflix + Disney Premium",price:6.5,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-blue-600",logo:"N+D+"},{id:"netflix_max",name:"Netflix + Max",price:6,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-purple-700",logo:"N+MAX"},{id:"disney_max",name:"Disney + Max",price:5.5,billing:"monthly",color:"bg-gradient-to-r from-blue-600 to-purple-700",logo:"D+MAX"},{id:"spotify_disney",name:"Spotify + Disney",price:5,billing:"monthly",color:"bg-gradient-to-r from-emerald-600 to-blue-500",logo:"SP+D+"}],T="https://gfjwebngyzfftakbbmji.supabase.co",M="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmandlYm5neXpmZnRha2JibWppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzMjI1MzEsImV4cCI6MjA3Mzg5ODUzMX0.niC_FqHiHZ4EMNW86VpXX_ouIVsxftfXV8JgZxuCBGE";console.log("🔍 Debug - Variables hardcodeadas:");console.log("URL:",T);console.log("ANON_KEY:",M.substring(0,20)+"...");console.log("✅ Variables configuradas correctamente");const U=T.includes("supabase.co")&&M.startsWith("eyJ")&&!T.includes("tu-proyecto")&&!M.includes("tu_clave_anonima");let g=null;if(U)try{g=W(T,M),console.log("[StreamZone] Supabase configurado correctamente")}catch(a){console.error("[StreamZone] Error configurando Supabase:",a),g=null}else console.warn("[StreamZone] Supabase no configurado. Para habilitar el guardado en la nube, crea .env.local con VITE_SUPABASE_URL y VITE_SUPABASE_ANON_KEY");const Q=async a=>{if(!g)return console.warn("Supabase no configurado, no se puede crear usuario"),{data:null,error:new Error("Supabase no configurado")};try{if(console.log("📝 Creando usuario en Supabase:",a),!a.name||!a.phone||!a.email)throw new Error("Datos de usuario incompletos");const o={name:a.name.trim(),phone:a.phone.trim(),email:a.email.trim().toLowerCase()};console.log("📝 Datos limpios para insertar:",o);const{data:n,error:r}=await g.from("users").insert([o]).select().single();if(r)throw console.error("❌ Error de Supabase al crear usuario:",r),console.error("❌ Detalles del error:",{code:r.code,message:r.message,details:r.details,hint:r.hint}),r;return console.log("✅ Usuario creado exitosamente:",n),{data:n,error:null}}catch(o){return console.error("❌ Error creating user:",o),{data:null,error:o}}},D=async a=>{if(!g)return console.warn("Supabase no configurado, no se puede obtener usuario"),{data:null,error:new Error("Supabase no configurado")};try{console.log("🔍 Buscando usuario con teléfono:",a);const o=a.trim(),{data:n,error:r}=await g.from("users").select("*").eq("phone",o).single();if(r&&r.code!=="PGRST116")throw console.error("❌ Error de Supabase al buscar usuario:",r),console.error("❌ Detalles del error:",{code:r.code,message:r.message,details:r.details,hint:r.hint}),r;return r&&r.code==="PGRST116"?(console.log("ℹ️ Usuario no encontrado (esto es normal para nuevos usuarios)"),{data:null,error:null}):(console.log("✅ Usuario encontrado:",n),{data:n,error:null})}catch(o){return console.error("❌ Error getting user by phone:",o),{data:null,error:o}}},k=async a=>{if(!g)return console.warn("Supabase no configurado, no se puede crear compra"),{data:null,error:new Error("Supabase no configurado")};try{console.log("💾 createPurchase: Creando compra en Supabase:",a),console.log("💾 createPurchase: validated =",a.validated);const o={customer:a.customer||"",phone:a.phone||"",service:a.service||"",start:a.start||new Date().toISOString().split("T")[0],end:a.end||new Date().toISOString().split("T")[0],months:a.months||1,validated:a.validated!==void 0?a.validated:!1,service_email:a.service_email||null,service_password:a.service_password||null,admin_notes:a.admin_notes||null,approved_by:a.approved_by||null,approved_at:a.approved_at||null,auto_renewal:a.auto_renewal||!1,renewal_reminder_sent:a.renewal_reminder_sent||!1,renewal_attempts:a.renewal_attempts||0,last_renewal_attempt:a.last_renewal_attempt||null,renewal_status:a.renewal_status||"none",original_purchase_id:a.original_purchase_id||null,is_renewal:a.is_renewal||!1};console.log("💾 createPurchase: Datos limpios:",o);const{data:n,error:r}=await g.from("purchases").insert([o]).select().maybeSingle();if(r)throw console.error("❌ Error de Supabase al crear compra:",r),console.error("❌ Detalles del error:",{code:r.code,message:r.message,details:r.details,hint:r.hint}),console.error("❌ Datos que causaron el error:",o),console.error("❌ Stack trace completo:",r.stack),r;return console.log("✅ createPurchase: Compra creada exitosamente:",n),{data:(n==null?void 0:n[0])||n,error:null}}catch(o){return console.error("❌ Error creating purchase:",o),{data:null,error:o}}},ee=async(a,o)=>{console.log("🔧 ===== updatePurchase INICIADO ====="),console.log("🆔 ID recibido:",a),console.log("📝 updateData recibido:",o),console.log("📊 Tipo de ID:",typeof a),console.log("📊 Tipo de updateData:",typeof o);try{if(!g)throw console.error("❌ Supabase no configurado"),new Error("Supabase no configurado");console.log("💾 Ejecutando update en Supabase..."),console.log("📤 Query:",{table:"purchases",id:a,updateData:o});const{data:n,error:r}=await g.from("purchases").update(o).eq("id",a).select().single();if(console.log("📥 Respuesta de Supabase:",{data:n,error:r}),r)throw console.error("❌ Error de Supabase:",r),console.error("❌ Detalles del error:",{code:r.code,message:r.message,details:r.details,hint:r.hint}),r;return console.log("✅ Update exitoso en Supabase:",n),console.log("🎉 ===== updatePurchase COMPLETADO ====="),{data:n,error:null}}catch(n){return console.error("❌ ===== ERROR EN updatePurchase ====="),console.error("❌ Error updating purchase:",n),console.error("❌ Stack trace:",n.stack),{data:null,error:n}}},re=async a=>{if(!g)return console.warn("Supabase no configurado, saltando sincronización de servicios"),{data:[],error:null};try{const{data:o,error:n}=await g.from("services").select("*");if(n)throw n;const r=new Map((o==null?void 0:o.map(i=>[i.name,i]))||[]),s=a.filter(i=>!r.has(i.name));if(s.length>0){const{data:i,error:l}=await g.from("services").insert(s.map(p=>({id:p.id,name:p.name,price:p.price,billing:p.billing,color:p.color,logo:p.logo}))).select();if(l)throw l;console.log(`Sincronizados ${s.length} servicios nuevos`)}return{data:s,error:null}}catch(o){return console.error("Error syncing services:",o),{data:[],error:o}}},te=async()=>{if(!g)return console.warn("Supabase no configurado, no se pueden obtener todas las compras"),{data:null,error:new Error("Supabase no configurado")};try{console.log("🔍 getAllPurchases: Obteniendo todas las compras...");const{data:a,error:o}=await g.from("purchases").select("*").order("created_at",{ascending:!1});if(o)throw console.error("❌ Error en getAllPurchases:",o),o;return console.log("✅ getAllPurchases: Obtenidas",(a==null?void 0:a.length)||0,"compras totales"),{data:a,error:null}}catch(a){return console.error("❌ Error getting all purchases:",a),{data:null,error:a}}},B=async(a,o,n,r,s)=>{if(console.log("🔍 approvePurchase: Verificando configuración de Supabase..."),console.log("🔍 supabase client:",g),console.log("🔍 isSupabaseConfigured:",U),!g)return console.error("❌ Supabase no configurado, no se puede aprobar compra"),{data:null,error:new Error("Supabase no configurado")};try{console.log("🔄 Supabase: Aprobando compra...",{purchaseId:a,serviceEmail:o,servicePassword:n?"***":"undefined",adminNotes:r,approvedBy:s});const{data:i,error:l}=await g.from("purchases").update({validated:!0,service_email:o,service_password:n,admin_notes:r,approved_by:s}).eq("id",a).select().single();if(l)throw console.error("❌ Supabase Error:",l),l;return console.log("✅ Supabase: Compra aprobada exitosamente:",i),{data:i,error:null}}catch(i){return console.error("❌ Error approving purchase:",i),{data:null,error:i}}},oe=async()=>{if(!g)return console.warn("Supabase no configurado, no se puede obtener compras pendientes"),{data:null,error:new Error("Supabase no configurado")};try{console.log("🔍 getPendingPurchases: DIAGNÓSTICO COMPLETO...");const{count:a,error:o}=await g.from("purchases").select("*",{count:"exact",head:!0});console.log("📊 Total compras en BD:",a);const{count:n,error:r}=await g.from("purchases").select("*",{count:"exact",head:!0}).eq("validated",!1);console.log("⏳ Compras pendientes en BD:",n);const{data:s,error:i}=await g.from("purchases").select("id, customer, validated, created_at").order("created_at",{ascending:!1}).limit(10);console.log("📋 Últimas 10 compras:",s==null?void 0:s.map(m=>({id:m.id,customer:m.customer,validated:m.validated,created_at:m.created_at})));let{data:l,error:p}=await g.from("purchases").select("*").eq("validated",!1).order("created_at",{ascending:!1});if(p){console.warn("⚠️ Error en consulta principal, intentando consulta básica:",p);const{data:m,error:d}=await g.from("purchases").select("id, customer, phone, service, validated, created_at, start, end, months").eq("validated",!1).order("created_at",{ascending:!1});if(d)throw console.error("❌ Error también en consulta básica:",d),d;l=m,p=null}return console.log("✅ getPendingPurchases: RESULTADO FINAL - Encontradas",(l==null?void 0:l.length)||0,"compras pendientes"),l&&l.length>0?console.log("📋 Compras pendientes encontradas:",l.map(m=>({id:m.id,customer:m.customer,validated:m.validated,created_at:m.created_at}))):console.log("❌ NO SE ENCONTRARON COMPRAS PENDIENTES"),{data:l,error:null}}catch(a){return console.error("❌ Error getting pending purchases:",a),{data:null,error:a}}},se=async a=>{if(!g)return console.warn("Supabase no configurado, no se puede obtener compras del usuario"),{data:null,error:new Error("Supabase no configurado")};try{console.log("🔍 Buscando compras activas para teléfono:",a);let o=a.trim();o.startsWith("+")||(o="+593"+o.replace(/[^\d]/g,"")),console.log("📞 Teléfono normalizado:",o);let{data:n,error:r}=await g.from("purchases").select("*").eq("phone",o).eq("validated",!0).gte("end",new Date().toISOString().split("T")[0]).order("end",{ascending:!0});if(r)throw r;if(console.log("✅ Compras encontradas con teléfono exacto:",(n==null?void 0:n.length)||0),!n||n.length===0){console.log("🔍 No se encontraron compras, intentando otros formatos...");const s=a.replace(/[^\d]/g,"");console.log("📞 Intentando sin código de país:",s);const{data:i,error:l}=await g.from("purchases").select("*").eq("phone",s).eq("validated",!0).gte("end",new Date().toISOString().split("T")[0]).order("end",{ascending:!0});if(!l&&i&&i.length>0&&(console.log("✅ Compras encontradas sin código de país:",i.length),n=i),!n||n.length===0){const p="+593"+s;console.log("📞 Intentando con +593:",p);const{data:m,error:d}=await g.from("purchases").select("*").eq("phone",p).eq("validated",!0).gte("end",new Date().toISOString().split("T")[0]).order("end",{ascending:!0});!d&&m&&m.length>0&&(console.log("✅ Compras encontradas con +593:",m.length),n=m)}}return console.log("📊 Total de compras activas encontradas:",(n==null?void 0:n.length)||0),n&&n.length>0&&console.log("📋 Compras encontradas:",n.map(s=>({id:s.id,customer:s.customer,service:s.service,phone:s.phone,end:s.end}))),{data:n,error:null}}catch(o){return console.error("❌ Error getting user active purchases:",o),{data:null,error:o}}},ae=async(a=7)=>{if(!g)return console.warn("Supabase no configurado, no se puede obtener servicios próximos a vencer"),{data:null,error:new Error("Supabase no configurado")};try{const{data:o,error:n}=await g.rpc("get_expiring_services",{days_ahead:a});if(n)throw n;return{data:o,error:null}}catch(o){return console.error("Error getting expiring services:",o),{data:null,error:o}}},ne=async()=>{if(!g)return console.warn("Supabase no configurado, no se pueden obtener estadísticas"),{data:null,error:new Error("Supabase no configurado")};try{const{data:a,error:o}=await g.from("purchases").select("auto_renewal, is_renewal, end, validated");if(o)throw o;return{data:{totalPurchases:a.length,autoRenewalEnabled:a.filter(r=>r.auto_renewal).length,renewalPurchases:a.filter(r=>r.is_renewal).length,expiringThisWeek:a.filter(r=>{const s=new Date(r.end),i=new Date,l=new Date(i.getTime()+7*24*60*60*1e3);return s>=i&&s<=l&&r.validated}).length,expiredServices:a.filter(r=>new Date(r.end)<new Date&&r.validated).length},error:null}}catch(a){return console.error("Error getting renewal stats:",a),{data:null,error:a}}},L=async a=>{if(!g)return console.warn("Supabase no configurado, no se puede buscar usuario"),{data:null,error:new Error("Supabase no configurado")};try{const{data:o,error:n}=await g.from("users").select("*").eq("email",a.toLowerCase().trim()).single();if(n&&n.code!=="PGRST116")throw n;return{data:o,error:null}}catch(o){return console.error("Error buscando usuario por email:",o),{data:null,error:o}}},le=async a=>{if(!g)return console.warn("Supabase no configurado, no se puede generar token"),{data:null,error:new Error("Supabase no configurado")};try{if(!(await L(a)).data)return{data:null,error:{message:`No existe un usuario con el email: ${a}. Verifica que el email sea correcto o crea una cuenta primero.`}};const n=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),r=new Date(Date.now()+30*60*1e3),{data:s,error:i}=await g.from("users").update({reset_token:n,reset_token_expires:r.toISOString()}).eq("email",a.toLowerCase().trim()).select().single();if(i)throw i;return{data:{token:n,user:s},error:null}}catch(o){return console.error("Error generando token de recuperación:",o),{data:null,error:o}}},G=async a=>{if(!g)return console.warn("Supabase no configurado, no se puede verificar token"),{data:null,error:new Error("Supabase no configurado")};try{const{data:o,error:n}=await g.from("users").select("*").eq("reset_token",a).gt("reset_token_expires",new Date().toISOString()).single();if(n&&n.code!=="PGRST116")throw n;return{data:o,error:null}}catch(o){return console.error("Error verificando token:",o),{data:null,error:o}}},ie=async(a,o)=>{if(!g)return console.warn("Supabase no configurado, no se puede restablecer contraseña"),{data:null,error:new Error("Supabase no configurado")};try{if(!(await G(a)).data)return{data:null,error:{message:"Token inválido o expirado"}};const{data:r,error:s}=await g.from("users").update({password:o,reset_token:null,reset_token_expires:null}).eq("reset_token",a).select().single();if(s)throw s;return{data:r,error:null}}catch(n){return console.error("Error restableciendo contraseña:",n),{data:null,error:n}}},de=async(a,o)=>{if(!g)return console.warn("Supabase no configurado, no se puede hacer login"),{data:null,error:new Error("Supabase no configurado")};try{const{data:n,error:r}=await g.from("users").select("*").eq("email",a.toLowerCase().trim()).eq("password",o).single();if(r&&r.code!=="PGRST116")throw r;return{data:n,error:null}}catch(n){return console.error("Error en login:",n),{data:null,error:n}}},ye=Object.freeze(Object.defineProperty({__proto__:null,approvePurchase:B,createPurchase:k,createUser:Q,generateResetToken:le,getAllPurchases:te,getExpiringServices:ae,getPendingPurchases:oe,getRenewalStats:ne,getUserActivePurchases:se,getUserByEmail:L,getUserByPhone:D,loginUser:de,resetPassword:ie,get supabase(){return g},syncServices:re,updatePurchase:ee,verifyResetToken:G},Symbol.toStringTag,{value:"Module"}));function we({open:a,onClose:o,service:n,user:r,isDark:s,onPurchase:i}){const[l,p]=N.useState(""),[m,d]=N.useState(1),[x,h]=N.useState(1),[$,S]=N.useState("");if(!a||!n)return null;const C=n.billing==="annual",P=n.price*m*x,I=()=>{if(console.log("🛒 Iniciando compra para usuario registrado..."),!r){console.warn("⚠️ Usuario no registrado - compra bloqueada");return}const u={name:r.name||"Cliente",phone:r.phone||"+593000000000",email:r.email||"cliente@streamzone.com"};let b=u.phone;b.startsWith("+")||(b="+593"+b.replace(/[^\d]/g,""));const w=(n==null?void 0:n.name)||"Servicio Premium",c=(n==null?void 0:n.price)||10,f=m>0?m:1,v=x>0?x:1,y={service:w,price:c,duration:f,devices:v,total:c*f*v,paymentMethod:"pichincha",notes:$||"",customer:u.name,phone:b,email:u.email,start:new Date().toISOString().slice(0,10),end:new Date(Date.now()+(C?f*365:f*30)*24*60*60*1e3).toISOString().slice(0,10)};console.log("✅ Datos de compra garantizados:",y);try{i(y),console.log("🎉 Compra procesada exitosamente"),o()}catch(j){console.warn("⚠️ Error en onPurchase, pero continuando con panel de agentes:",j),o()}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-2 sm:p-4",onClick:o,children:e.jsxs("div",{className:`w-full max-w-xs sm:max-w-md md:max-w-lg max-h-[95vh] sm:max-h-[90vh] rounded-xl sm:rounded-2xl p-3 sm:p-4 md:p-6 shadow-2xl overflow-y-auto border-2 ${t(s,"bg-white border-gray-200","bg-zinc-900 border-zinc-700 text-zinc-100")}`,onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"mb-3 sm:mb-4 md:mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:`text-lg sm:text-xl md:text-2xl font-bold ${t(s,"text-gray-900","text-white")}`,children:"Completar Compra"}),e.jsx("button",{onClick:o,className:`w-8 h-8 sm:w-9 sm:h-9 rounded-full flex items-center justify-center text-lg font-bold transition-colors shadow-md ${t(s,"text-gray-600 hover:text-gray-800 hover:bg-gray-100 border border-gray-300","text-zinc-200 hover:text-white hover:bg-zinc-800 border border-zinc-600")}`,children:"×"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`rounded-xl sm:rounded-2xl p-3 sm:p-4 border ${t(s,"bg-gray-50 border-gray-200","bg-zinc-800 border-zinc-600")}`,children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:`h-12 w-12 sm:h-16 sm:w-16 ${n.color} rounded-xl text-white grid place-content-center text-lg sm:text-2xl font-bold shadow-lg`,children:n.logo}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`text-base sm:text-lg font-bold truncate ${t(s,"text-gray-900","text-white")}`,children:n.name}),e.jsxs("p",{className:`text-xs sm:text-sm font-semibold ${t(s,"text-gray-800","text-gray-200")}`,children:[O(n.price)," por ",C?"año":"mes"]})]})]})}),!r&&e.jsx("div",{className:`rounded-xl sm:rounded-2xl p-4 border ${t(s,"bg-red-50 border-red-200","bg-red-900/20 border-red-600")}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"🔐"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-semibold ${t(s,"text-red-900","text-red-200")}`,children:"Registro Requerido"}),e.jsx("p",{className:`text-xs ${t(s,"text-red-700","text-red-300")}`,children:"Debes iniciar sesión para realizar compras"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm sm:text-base font-semibold mb-3 ${t(s,"text-gray-900","text-white")}`,children:"Duración"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[1,2,3,6].map(u=>e.jsxs("button",{type:"button",onClick:()=>d(u),className:`px-3 py-2 sm:px-4 sm:py-3 rounded-lg sm:rounded-xl text-xs sm:text-sm font-semibold transition-all duration-200 border-2 shadow-md ${m===u?"bg-blue-600 text-white border-blue-700 shadow-lg transform scale-105":t(s,"bg-gray-100 text-gray-800 border-gray-400 hover:bg-gray-200 hover:border-gray-600 hover:shadow-lg","bg-gray-700 text-gray-200 border-gray-500 hover:bg-gray-600 hover:border-gray-400 hover:shadow-lg")}`,children:[u," ",C?u===1?"año":"años":u===1?"mes":"meses"]},u))})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:`block text-sm sm:text-base font-semibold mb-3 ${t(s,"text-gray-900","text-white")}`,children:"Número de Dispositivos"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[e.jsx("button",{type:"button",onClick:()=>x>1&&h(x-1),disabled:x<=1,className:`w-9 h-9 sm:w-11 sm:h-11 rounded-full flex items-center justify-center text-lg sm:text-xl font-bold transition-all border-2 shadow-md ${x<=1?t(s,"bg-gray-200 text-gray-400 cursor-not-allowed border-gray-300","bg-gray-600 text-gray-500 cursor-not-allowed border-gray-500"):t(s,"bg-blue-600 text-white hover:bg-blue-700 border-blue-700 shadow-lg","bg-blue-600 text-white hover:bg-blue-700 border-blue-700 shadow-lg")}`,children:"−"}),e.jsxs("div",{className:`border-2 rounded-xl px-4 sm:px-6 py-2 sm:py-3 min-w-[100px] sm:min-w-[120px] text-center shadow-lg ${t(s,"bg-blue-100 border-blue-700","bg-blue-900 border-blue-500")}`,children:[e.jsx("div",{className:`text-2xl sm:text-3xl font-bold ${t(s,"text-blue-900","text-blue-100")}`,children:x}),e.jsx("div",{className:`text-xs sm:text-sm font-bold ${t(s,"text-blue-800","text-blue-200")}`,children:x===1?"Dispositivo":"Dispositivos"})]}),e.jsx("button",{type:"button",onClick:()=>x<5&&h(x+1),disabled:x>=5,className:`w-9 h-9 sm:w-11 sm:h-11 rounded-full flex items-center justify-center text-lg sm:text-xl font-bold transition-all border-2 shadow-md ${x>=5?t(s,"bg-gray-200 text-gray-400 cursor-not-allowed border-gray-300","bg-gray-600 text-gray-500 cursor-not-allowed border-gray-500"):t(s,"bg-blue-600 text-white hover:bg-blue-700 border-blue-700 shadow-lg","bg-blue-600 text-white hover:bg-blue-700 border-blue-700 shadow-lg")}`,children:"+"})]}),e.jsx("div",{className:`mt-2 text-xs ${t(s,"text-gray-600","text-gray-300")}`,children:"Máximo 5 dispositivos por compra"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold mb-3 sm:mb-4 text-sm sm:text-base ${t(s,"text-gray-800","text-gray-200")}`,children:"💳 Información de Pago"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl p-3 sm:p-4 text-white shadow-lg border-2 border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"🏦"}),e.jsx("span",{className:"font-bold text-sm sm:text-base text-white",children:"Banco Pichincha"})]}),e.jsxs("div",{className:"text-xs sm:text-sm space-y-1 text-white",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Titular:"})," Jeremias Guale Santana"]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Cuenta:"})," 2209034638"]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Tipo:"})," Ahorro Transaccional"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-700 to-purple-700 rounded-xl p-3 sm:p-4 text-white shadow-lg border-2 border-purple-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"🏛️"}),e.jsx("span",{className:"font-bold text-sm sm:text-base text-white",children:"Banco Guayaquil"})]}),e.jsxs("div",{className:"text-xs sm:text-sm space-y-1 text-white",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Titular:"})," Jeremias Joel Guale Santana"]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Cuenta:"})," 0122407273"]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Tipo:"})," Ahorros"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg p-3 sm:p-4 text-white shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[e.jsx("span",{className:"text-base sm:text-lg",children:"🌊"}),e.jsx("span",{className:"font-semibold text-xs sm:text-sm text-white",children:"Banco Pacífico"})]}),e.jsxs("div",{className:"text-xs space-y-1 text-purple-100",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Titular:"})," Byron Guale Santana"]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Cuenta:"})," 1061220256"]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Tipo:"})," Ahorros"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg p-3 sm:p-4 text-white shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[e.jsx("span",{className:"text-base sm:text-lg",children:"💳"}),e.jsx("span",{className:"font-semibold text-xs sm:text-sm text-white",children:"PayPal"})]}),e.jsxs("div",{className:"text-xs space-y-1 text-blue-100",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Email:"})," guale2023@outlook.com"]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Método:"})," PayPal"]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-white",children:"Tipo:"})," Transferencia"]})]})]})]}),e.jsx("div",{className:`mt-3 sm:mt-4 p-4 sm:p-6 rounded-2xl ${t(s,"bg-gradient-to-br from-orange-50 to-yellow-50 border-2 border-orange-200","bg-gradient-to-br from-orange-900/30 to-yellow-900/30 border-2 border-orange-500")}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-3 sm:mb-4",children:e.jsx("div",{className:`p-3 sm:p-4 rounded-full ${t(s,"bg-orange-100","bg-orange-800/50")}`,children:e.jsx("span",{className:"text-3xl sm:text-4xl",children:"🚨"})})}),e.jsx("h5",{className:"text-lg sm:text-xl font-bold text-orange-800 dark:text-orange-200 mb-2 sm:mb-3",children:"⚠️ Instrucciones Importantes"}),e.jsxs("div",{className:`p-3 sm:p-4 rounded-xl ${t(s,"bg-white/80","bg-black/20")}`,children:[e.jsxs("p",{className:"text-xs sm:text-sm text-orange-700 dark:text-orange-300 mb-3 sm:mb-4",children:["Una vez que hayas realizado el pago, ",e.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"debes confirmar tu compra"})," enviando una captura del comprobante por WhatsApp a nuestros agentes."]}),e.jsxs("div",{className:"flex justify-center gap-2 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{className:`px-3 sm:px-4 py-2 rounded-lg ${t(s,"bg-green-100 text-green-800","bg-green-800/50 text-green-200")}`,children:[e.jsx("span",{className:"text-base sm:text-lg",children:"📱"}),e.jsx("span",{className:"ml-1 sm:ml-2 font-semibold text-xs sm:text-sm",children:"WhatsApp"})]}),e.jsxs("div",{className:`px-3 sm:px-4 py-2 rounded-lg ${t(s,"bg-blue-100 text-blue-800","bg-blue-800/50 text-blue-200")}`,children:[e.jsx("span",{className:"text-base sm:text-lg",children:"💬"}),e.jsx("span",{className:"ml-1 sm:ml-2 font-semibold text-xs sm:text-sm",children:"Agentes"})]})]}),e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium",children:"⚡ Sin el comprobante, tu servicio NO será activado"})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm sm:text-base font-semibold mb-2 ${t(s,"text-gray-900","text-white")}`,children:"Notas adicionales (opcional)"}),e.jsx("textarea",{value:$,onChange:u=>S(u.target.value),placeholder:"Comentarios o instrucciones especiales...",className:`w-full rounded-lg border-2 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm resize-none shadow-md ${t(s,"border-gray-400 bg-white text-gray-900 focus:border-blue-500","border-gray-500 bg-gray-700 text-gray-100 focus:border-blue-400")}`,rows:2})]}),e.jsx("div",{className:`bg-gradient-to-r border-2 rounded-xl p-4 sm:p-6 shadow-lg ${t(s,"from-blue-100 to-purple-100 border-blue-600","from-blue-900 to-purple-900 border-blue-500")}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-lg sm:text-xl font-bold ${t(s,"text-gray-900","text-white")}`,children:"Total a pagar:"}),e.jsx("span",{className:`text-2xl sm:text-3xl font-black ${t(s,"text-blue-800","text-blue-200")}`,children:O(P)})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 pt-2",children:[e.jsx("button",{onClick:o,className:`flex-1 rounded-lg sm:rounded-xl px-4 sm:px-6 py-3 sm:py-4 font-bold transition-all text-sm sm:text-base border-2 shadow-md ${t(s,"bg-gray-100 text-gray-800 hover:bg-gray-200 border-gray-400","bg-gray-700 text-gray-200 hover:bg-gray-600 border-gray-500")}`,children:"Cancelar"}),e.jsx("button",{onClick:I,disabled:!r,className:`flex-1 rounded-lg sm:rounded-xl px-4 sm:px-6 py-3 sm:py-4 font-bold transition-all shadow-lg text-sm sm:text-base border-2 transform ${r?"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-xl border-blue-700 hover:scale-105":"bg-gray-400 text-gray-600 cursor-not-allowed border-gray-500"}`,children:r?"🛒 Completar Compra":"🔐 Registro Requerido"})]})]})]})})}function ve({open:a,onClose:o,onRegister:n,isDark:r,systemPrefersDark:s}){const[i,l]=N.useState({name:"",phone:"",email:"",service:"",price:"",duration:1,isAnnual:!1,startDate:new Date().toISOString().slice(0,10),service_email:"",service_password:"",admin_notes:""});if(N.useEffect(()=>{if(i.service){const d=R.find(x=>x.name===i.service);if(d){const x=d.price*i.duration;l(h=>({...h,price:x.toString()}))}}},[i.service,i.duration]),!a)return null;const p=d=>{d.preventDefault();const x=new Date(i.startDate),h=i.isAnnual?i.duration*12:i.duration;x.setMonth(x.getMonth()+h),n({...i,price:parseFloat(i.price),endDate:x.toISOString().slice(0,10),months:h}),l({name:"",phone:"",email:"",service:"",price:"",duration:1,isAnnual:!1,startDate:new Date().toISOString().slice(0,10),service_email:"",service_password:"",admin_notes:""}),o()},m=()=>{if(!i.phone||!i.service_email||!i.service_password){alert("⚠️ Por favor completa todos los campos requeridos antes de enviar por WhatsApp");return}const d=new Date(i.startDate),x=i.isAnnual?i.duration*12:i.duration;d.setMonth(d.getMonth()+x);const h=d.toISOString().slice(0,10),$=`🎉 ¡Hola ${i.name}! 🎉

✨ Aquí tienes tus credenciales de ${i.service}:

🔑 *CREDENCIALES DEL SERVICIO* 🔑
📧 *Email:* ${i.service_email}
🔐 *Contraseña:* ${i.service_password}

⏰ *Duración:* ${x} ${x===1?"mes":"meses"}
📅 *Válido hasta:* ${h}

🎬 ¡Disfruta tu servicio! 🎬

💬 Si tienes alguna pregunta, no dudes en contactarnos.

🙏 ¡Gracias por confiar en nosotros!`,S=`https://wa.me/${i.phone.replace(/[^0-9]/g,"")}?text=${encodeURIComponent($)}`;window.open(S,"_blank")};return e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 backdrop-blur-sm p-4",onClick:o,children:e.jsxs("div",{className:`w-full max-w-2xl rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto ${t(r,"bg-white","bg-gray-900")}`,onClick:d=>d.stopPropagation(),children:[e.jsx("div",{className:`relative p-6 border-b-2 ${t(r,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-700")}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-2xl font-bold ${t(r,"text-gray-900","text-white")}`,children:"Registrar Compra Manual"}),e.jsx("button",{onClick:o,className:`w-8 h-8 rounded-full flex items-center justify-center text-xl font-bold transition-all ${t(r,"text-gray-500 hover:bg-gray-100","text-gray-400 hover:bg-gray-700")}`,children:"×"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl border-2 ${t(r,"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200","bg-gradient-to-br from-blue-900/20 to-indigo-900/20 border-blue-700")}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t(r,"bg-blue-100","bg-blue-900/30")}`,children:"👤"}),e.jsx("h4",{className:`text-xl font-bold ${t(r,"text-gray-900","text-white")}`,children:"Información del Cliente"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(r,"text-gray-700","text-gray-300")}`,children:"👤 Nombre del Cliente *"}),e.jsx("input",{type:"text",value:i.name,onChange:d=>l({...i,name:d.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-600 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/30")}`,placeholder:"Nombre completo del cliente",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(r,"text-gray-700","text-gray-300")}`,children:"📱 Teléfono *"}),e.jsx("input",{type:"tel",value:i.phone,onChange:d=>l({...i,phone:d.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-600 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/30")}`,placeholder:"+593 99 999 9999",required:!0})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl border-2 ${t(r,"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200","bg-gradient-to-br from-green-900/20 to-emerald-900/20 border-green-700")}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t(r,"bg-green-100","bg-green-900/30")}`,children:"🎬"}),e.jsx("h4",{className:`text-xl font-bold ${t(r,"text-gray-900","text-white")}`,children:"Servicio y Duración"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(r,"text-gray-700","text-gray-300")}`,children:"🎬 Servicio *"}),e.jsxs("select",{value:i.service,onChange:d=>l({...i,service:d.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-green-500 focus:ring-green-200","border-gray-600 bg-gray-700 text-white focus:border-green-400 focus:ring-green-800/30")}`,required:!0,children:[e.jsx("option",{value:"",children:"Selecciona un servicio"}),R.map(d=>e.jsxs("option",{value:d.name,children:[d.name," - $",d.price,"/mes"]},d.name))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(r,"text-gray-700","text-gray-300")}`,children:"⏱️ Duración (meses) *"}),e.jsxs("select",{value:i.duration,onChange:d=>l({...i,duration:Number(d.target.value)}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-green-500 focus:ring-green-200","border-gray-600 bg-gray-700 text-white focus:border-green-400 focus:ring-green-800/30")}`,required:!0,children:[e.jsx("option",{value:1,children:"1 mes"}),e.jsx("option",{value:3,children:"3 meses"}),e.jsx("option",{value:6,children:"6 meses"}),e.jsx("option",{value:12,children:"12 meses"})]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(r,"text-gray-700","text-gray-300")}`,children:"💰 Precio Total"}),e.jsxs("div",{className:`p-3 rounded-lg ${t(r,"bg-green-100 border border-green-200","bg-green-900/20 border border-green-600")}`,children:[e.jsxs("p",{className:`text-lg font-bold ${t(r,"text-green-800","text-green-300")}`,children:["$",i.price||"0.00"," USD"]}),e.jsxs("p",{className:`text-sm ${t(r,"text-green-700","text-green-400")}`,children:[i.duration," ",i.duration===1?"mes":"meses"," de ",i.service||"servicio"]})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl border-2 ${t(r,"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200","bg-gradient-to-br from-purple-900/20 to-pink-900/20 border-purple-700")}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t(r,"bg-yellow-100","bg-yellow-900/30")}`,children:"🔑"}),e.jsx("h4",{className:`text-xl font-bold ${t(r,"text-gray-900","text-white")}`,children:"Credenciales del Servicio"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(r,"text-gray-700","text-gray-300")}`,children:"📧 Email del servicio *"}),e.jsx("input",{type:"email",value:i.service_email,onChange:d=>l({...i,service_email:d.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,placeholder:"usuario@servicio.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(r,"text-gray-700","text-gray-300")}`,children:"🔐 Contraseña del servicio *"}),e.jsx("input",{type:"text",value:i.service_password,onChange:d=>l({...i,service_password:d.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,placeholder:"••••••••",required:!0})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl border-2 ${t(r,"bg-gradient-to-br from-amber-50 to-orange-50 border-amber-200","bg-gradient-to-br from-amber-900/20 to-orange-900/20 border-amber-700")}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t(r,"bg-amber-100","bg-amber-900/30")}`,children:"📝"}),e.jsx("h4",{className:`text-xl font-bold ${t(r,"text-gray-900","text-white")}`,children:"Notas del Administrador"})]}),e.jsx("textarea",{value:i.admin_notes,onChange:d=>l({...i,admin_notes:d.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 resize-none ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-amber-500 focus:ring-amber-200","border-gray-600 bg-gray-700 text-white focus:border-amber-400 focus:ring-amber-800/30")}`,rows:4,placeholder:"Escribe información importante para el cliente (puedes usar saltos de línea)..."}),e.jsx("div",{className:`mt-3 p-3 rounded-lg ${t(r,"bg-amber-100 border border-amber-200","bg-amber-900/20 border border-amber-600")}`,children:e.jsxs("p",{className:`text-sm font-semibold ${t(r,"text-amber-800","text-amber-300")}`,children:["💡 ",e.jsx("strong",{children:"Nota:"})," Esta información será visible para el cliente y puede incluir instrucciones especiales, detalles de renovación, o cualquier información relevante."]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6",children:[e.jsx("button",{type:"button",onClick:o,className:`w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 ${t(r,"bg-gray-200 text-gray-800 hover:bg-gray-300","bg-gray-700 text-gray-200 hover:bg-gray-600")}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"❌"}),e.jsx("span",{children:"Cancelar"})]})}),e.jsxs("button",{type:"button",onClick:m,className:`w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2 ${t(r,"bg-green-500 text-white hover:bg-green-600 shadow-lg hover:shadow-xl","bg-green-600 text-white hover:bg-green-700 shadow-lg hover:shadow-xl")}`,children:[e.jsx("span",{className:"text-lg",children:"📱"}),e.jsx("span",{className:"truncate",children:"Enviar por WhatsApp"})]}),e.jsxs("button",{type:"submit",className:"w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 shadow-lg hover:shadow-xl",children:[e.jsx("span",{className:"text-lg",children:"💾"}),e.jsx("span",{className:"truncate",children:"Registrar Compra"})]})]})]})})]})})}function je({open:a,onClose:o,onUpdate:n,purchase:r,isDark:s,systemPrefersDark:i}){const l=(r==null?void 0:r.service)||"",p=l.includes("+")||l.includes("Netflix")&&l.includes("Disney");let m=[l];p&&(l.includes("Netflix")&&l.includes("Disney")?m=["Netflix",l.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:l.includes("Max")&&l.includes("Prime")?m=["Max","Prime Video"]:l.includes("Netflix")&&l.includes("Max")?m=["Netflix","Max"]:l.includes("Netflix")&&l.includes("Prime")?m=["Netflix","Prime Video"]:l.includes("Prime")&&l.includes("Disney")?m=["Prime Video",l.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:l.includes("Disney")&&l.includes("Max")?m=[l.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Max"]:l.includes("Spotify")&&l.includes("Netflix")?m=["Spotify","Netflix"]:l.includes("Spotify")&&l.includes("Disney")?m=["Spotify",l.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:l.includes("Spotify")&&l.includes("Prime")?m=["Spotify","Prime Video"]:l.includes("Paramount")&&l.includes("Max")&&l.includes("Prime")?m=["Paramount+","Max","Prime Video"]:l.includes("Netflix")&&l.includes("Max")&&l.includes("Disney")?m=["Netflix","Max",l.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Prime Video","Paramount+"]:m=l.split(/\s*\+\s*/).map(c=>c.trim()).filter(c=>c.length>0));const[d,x]=N.useState({customer:"",phone:"",service:"",start:"",end:"",months:1,service_email:"",service_password:"",admin_notes:""}),[h,$]=N.useState(!1),[S,C]=N.useState({}),P=(c,f)=>{if(!c)return"";const v=new Date(c),y=new Date(v);return y.setMonth(y.getMonth()+f),y.toISOString().split("T")[0]},I=c=>{x(f=>({...f,start:c,end:P(c,f.months)}))},u=c=>{x(f=>({...f,months:c,end:P(f.start,c)}))};if(N.useEffect(()=>{if(r&&(x({customer:r.customer||"",phone:r.phone||"",service:r.service||"",start:r.start||"",end:r.end||"",months:r.months||1,service_email:r.service_email||"",service_password:r.service_password||"",admin_notes:r.admin_notes||""}),p&&r.service_password)){const c={};r.service_password.split(`

`).forEach(v=>{const y=v.split(`
`);if(y.length>=3){const j=y[0].replace(":","").trim(),_=y[1].replace("Email: ","").trim(),E=y[2].replace("Contraseña: ","").trim();j&&_&&E&&(c[j]={email:_,password:E})}}),C(c),console.log("📋 Credenciales parseadas:",c)}},[r,p]),!a||!r)return null;const b=c=>{c.preventDefault();let f={...d};if(p){const v=m.map(y=>{const j=S[y];return j!=null&&j.email&&(j!=null&&j.password)?`${y}:
Email: ${j.email}
Contraseña: ${j.password}`:""}).filter(y=>y.length>0).join(`

`);f.service_email=`COMBO: ${m.join(" + ")}`,f.service_password=v}n(f),o()},w=()=>{const c=`🎉 ¡Hola ${d.customer}! 🎉

✨ Aquí tienes tus credenciales de ${d.service}:

🔑 *CREDENCIALES DEL SERVICIO* 🔑
📧 *Email:* ${d.service_email}
🔐 *Contraseña:* ${d.service_password}

⏰ *Duración:* ${d.months} ${d.months===1?"mes":"meses"}
📅 *Válido hasta:* ${d.end}

🎬 ¡Disfruta tu servicio! 🎬

💬 Si tienes alguna pregunta, no dudes en contactarnos.

🙏 ¡Gracias por confiar en nosotros!`,f=`https://wa.me/${d.phone.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(c)}`;window.open(f,"_blank")};return e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 backdrop-blur-sm p-4",onClick:o,children:e.jsxs("div",{className:`w-full max-w-2xl rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto ${t(s,"bg-white","bg-gray-900")}`,onClick:c=>c.stopPropagation(),children:[e.jsx("div",{className:`relative p-6 border-b-2 ${t(s,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-700")}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-2xl font-bold ${t(s,"text-gray-900","text-white")}`,children:"Editar Compra"}),e.jsx("button",{onClick:o,className:`w-8 h-8 rounded-full flex items-center justify-center text-xl font-bold transition-all ${t(s,"text-gray-500 hover:bg-gray-100","text-gray-400 hover:bg-gray-700")}`,children:"×"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl border-2 ${t(s,"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200","bg-gradient-to-br from-blue-900/20 to-indigo-900/20 border-blue-700")}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t(s,"bg-blue-100","bg-blue-900/30")}`,children:"👤"}),e.jsx("h4",{className:`text-xl font-bold ${t(s,"text-gray-900","text-white")}`,children:"Información del Cliente"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(s,"text-gray-700","text-gray-300")}`,children:"👤 Nombre del Cliente *"}),e.jsx("input",{type:"text",value:d.customer,onChange:c=>x({...d,customer:c.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(s,"border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-600 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/30")}`,placeholder:"Nombre completo del cliente",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(s,"text-gray-700","text-gray-300")}`,children:"📱 Teléfono *"}),e.jsx("input",{type:"tel",value:d.phone,onChange:c=>x({...d,phone:c.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(s,"border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-600 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/30")}`,placeholder:"+593 99 999 9999",required:!0})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl border-2 ${t(s,"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200","bg-gradient-to-br from-green-900/20 to-emerald-900/20 border-green-700")}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t(s,"bg-green-100","bg-green-900/30")}`,children:"📅"}),e.jsx("h4",{className:`text-xl font-bold ${t(s,"text-gray-900","text-white")}`,children:"Fechas y Duración"})]}),e.jsx("button",{type:"button",onClick:()=>$(!h),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${t(s,"bg-green-100 text-green-800 hover:bg-green-200","bg-green-900/30 text-green-200 hover:bg-green-800/40")}`,children:h?"🔒 Bloquear":"✏️ Editar Fechas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(s,"text-gray-700","text-gray-300")}`,children:"📅 Fecha de Inicio *"}),e.jsx("input",{type:"date",value:d.start,onChange:c=>I(c.target.value),disabled:!h,className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(s,"border-gray-300 bg-white text-gray-900 focus:border-green-500 focus:ring-green-200","border-gray-600 bg-gray-700 text-white focus:border-green-400 focus:ring-green-800/30")} ${h?"":"opacity-60 cursor-not-allowed"}`,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(s,"text-gray-700","text-gray-300")}`,children:"⏱️ Duración (meses) *"}),e.jsxs("select",{value:d.months,onChange:c=>u(Number(c.target.value)),disabled:!h,className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(s,"border-gray-300 bg-white text-gray-900 focus:border-green-500 focus:ring-green-200","border-gray-600 bg-gray-700 text-white focus:border-green-400 focus:ring-green-800/30")} ${h?"":"opacity-60 cursor-not-allowed"}`,required:!0,children:[e.jsx("option",{value:1,children:"1 mes"}),e.jsx("option",{value:3,children:"3 meses"}),e.jsx("option",{value:6,children:"6 meses"}),e.jsx("option",{value:12,children:"12 meses"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(s,"text-gray-700","text-gray-300")}`,children:"🏁 Fecha de Fin"}),e.jsx("input",{type:"date",value:d.end,onChange:c=>x({...d,end:c.target.value}),disabled:!h,className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(s,"border-gray-300 bg-white text-gray-900 focus:border-green-500 focus:ring-green-200","border-gray-600 bg-gray-700 text-white focus:border-green-400 focus:ring-green-800/30")} ${h?"":"opacity-60 cursor-not-allowed"}`})]})]}),h&&e.jsx("div",{className:`mt-4 p-3 rounded-lg ${t(s,"bg-green-100 border border-green-200","bg-green-900/20 border border-green-600")}`,children:e.jsxs("p",{className:`text-sm font-semibold ${t(s,"text-green-800","text-green-300")}`,children:["💡 ",e.jsx("strong",{children:"Tip:"})," La fecha de fin se calcula automáticamente basada en la fecha de inicio y duración. Útil para renovaciones o ajustes de fechas."]})})]}),e.jsxs("div",{className:`p-6 rounded-xl border-2 ${t(s,"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200","bg-gradient-to-br from-purple-900/20 to-pink-900/20 border-purple-700")}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t(s,"bg-yellow-100","bg-yellow-900/30")}`,children:"🔑"}),e.jsx("h4",{className:`text-xl font-bold ${t(s,"text-gray-900","text-white")}`,children:"Credenciales del Servicio"})]}),p?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${t(s,"bg-orange-50 border border-orange-200","bg-orange-900/20 border border-orange-600")}`,children:e.jsx("p",{className:`text-sm font-semibold ${t(s,"text-orange-800","text-orange-300")}`,children:"🎁 Combo detectado: Edita las credenciales para cada servicio"})}),m.map((c,f)=>{var v,y;return e.jsxs("div",{className:`p-4 rounded-lg border ${t(s,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-600")}`,children:[e.jsxs("h5",{className:`text-lg font-bold mb-3 ${t(s,"text-gray-800","text-white")}`,children:[c," ",f===0?"🎬":f===1?"🎭":f===2?"🎪":"🎯"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-bold mb-2 ${t(s,"text-gray-700","text-gray-300")}`,children:["📧 Email del ",c]}),e.jsx("input",{type:"email",value:((v=S[c])==null?void 0:v.email)||"",onChange:j=>C(_=>{var E;return{..._,[c]:{..._[c],email:j.target.value,password:((E=_[c])==null?void 0:E.password)||""}}}),className:`w-full rounded-lg border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${t(s,"border-gray-300 bg-white text-gray-900 focus:border-blue-500","border-gray-600 bg-gray-700 text-white focus:border-blue-400")}`,placeholder:`usuario@${c.toLowerCase().replace(/[^a-z]/g,"")}.com`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-bold mb-2 ${t(s,"text-gray-700","text-gray-300")}`,children:["🔑 Contraseña del ",c]}),e.jsx("input",{type:"password",value:((y=S[c])==null?void 0:y.password)||"",onChange:j=>C(_=>{var E;return{..._,[c]:{..._[c],password:j.target.value,email:((E=_[c])==null?void 0:E.email)||""}}}),className:`w-full rounded-lg border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-amber-500/20 ${t(s,"border-gray-300 bg-white text-gray-900 focus:border-amber-500","border-gray-600 bg-gray-700 text-white focus:border-amber-400")}`,placeholder:"••••••••"})]})]})]},c)})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(s,"text-gray-700","text-gray-300")}`,children:"Email del servicio *"}),e.jsx("input",{type:"email",value:d.service_email,onChange:c=>x({...d,service_email:c.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(s,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(s,"text-gray-700","text-gray-300")}`,children:"Contraseña del servicio *"}),e.jsx("input",{type:"text",value:d.service_password,onChange:c=>x({...d,service_password:c.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(s,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,required:!0})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl border-2 ${t(s,"bg-gradient-to-br from-amber-50 to-orange-50 border-amber-200","bg-gradient-to-br from-amber-900/20 to-orange-900/20 border-amber-700")}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t(s,"bg-amber-100","bg-amber-900/30")}`,children:"📝"}),e.jsx("h4",{className:`text-xl font-bold ${t(s,"text-gray-900","text-white")}`,children:"Notas del Administrador"})]}),e.jsx("textarea",{value:d.admin_notes,onChange:c=>x({...d,admin_notes:c.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 resize-none ${t(s,"border-gray-300 bg-white text-gray-900 focus:border-amber-500 focus:ring-amber-200","border-gray-600 bg-gray-700 text-white focus:border-amber-400 focus:ring-amber-800/30")}`,rows:4,placeholder:"Escribe información importante para el cliente (puedes usar saltos de línea)..."}),e.jsx("div",{className:`mt-3 p-3 rounded-lg ${t(s,"bg-amber-100 border border-amber-200","bg-amber-900/20 border border-amber-600")}`,children:e.jsxs("p",{className:`text-sm font-semibold ${t(s,"text-amber-800","text-amber-300")}`,children:["💡 ",e.jsx("strong",{children:"Nota:"})," Esta información será visible para el cliente y puede incluir instrucciones especiales, detalles de renovación, o cualquier información relevante."]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6",children:[e.jsx("button",{type:"button",onClick:o,className:`w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 ${t(s,"bg-gray-200 text-gray-800 hover:bg-gray-300","bg-gray-700 text-gray-200 hover:bg-gray-600")}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"❌"}),e.jsx("span",{children:"Cancelar"})]})}),e.jsxs("button",{type:"button",onClick:w,className:`w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2 ${t(s,"bg-green-500 text-white hover:bg-green-600 shadow-lg hover:shadow-xl","bg-green-600 text-white hover:bg-green-700 shadow-lg hover:shadow-xl")}`,children:[e.jsx("span",{className:"text-lg",children:"📱"}),e.jsx("span",{className:"truncate",children:"Enviar por WhatsApp"})]}),e.jsxs("button",{type:"submit",className:"w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 shadow-lg hover:shadow-xl",children:[e.jsx("span",{className:"text-lg",children:"💾"}),e.jsx("span",{className:"truncate",children:"Guardar Cambios"})]})]})]})})]})})}function z(a,o,n){return a?n:o}function Ne({open:a,onClose:o,children:n,title:r,isDark:s,className:i}){return a?e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/50 p-4",onClick:o,children:e.jsxs("div",{className:`w-full max-w-lg rounded-2xl p-6 shadow-2xl ${z(s,"bg-white","bg-zinc-900")} ${i||""}`,onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold",children:r}),e.jsx("button",{onClick:o,className:`w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold transition-colors ${z(s,"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-100","text-zinc-300 hover:text-zinc-100 hover:bg-zinc-800")}`,children:"×"})]}),n]})}):null}function Se({isOpen:a,onClose:o,purchase:n,isDark:r,onApprove:s,onUpdatePurchase:i}){const l=(n==null?void 0:n.service)||"";console.log("🔍 DEBUGGING - Servicio completo:",l);const p=l.includes("+")||l.includes("Netflix")&&l.includes("Disney");console.log("🔍 DEBUGGING - Es combo?:",p);let m=[l];p&&(l.includes("Netflix")&&l.includes("Disney")?m=["Netflix",l.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:l.includes("Max")&&l.includes("Prime")?m=["Max","Prime Video"]:l.includes("Netflix")&&l.includes("Max")?m=["Netflix","Max"]:l.includes("Netflix")&&l.includes("Prime")?m=["Netflix","Prime Video"]:l.includes("Prime")&&l.includes("Disney")?m=["Prime Video",l.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:l.includes("Disney")&&l.includes("Max")?m=[l.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Max"]:l.includes("Spotify")&&l.includes("Netflix")?m=["Spotify","Netflix"]:l.includes("Spotify")&&l.includes("Disney")?m=["Spotify",l.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:l.includes("Spotify")&&l.includes("Prime")?m=["Spotify","Prime Video"]:l.includes("Paramount")&&l.includes("Max")&&l.includes("Prime")?m=["Paramount+","Max","Prime Video"]:l.includes("Netflix")&&l.includes("Max")&&l.includes("Disney")?m=["Netflix","Max",l.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Prime Video","Paramount+"]:m=l.split(/\s*\+\s*/).map(u=>u.trim()).filter(u=>u.length>0),console.log("🎯 COMBO DETECTADO - Servicios separados:",m)),console.log("🎯 FINAL - isCombo:",p,"services:",m);const[d,x]=N.useState({email:"",password:"",notes:""}),[h,$]=N.useState({}),[S,C]=N.useState(!1);if(!a||!n)return null;const P=()=>{const u=`🎬 *StreamZone* - Compra Aprobada ✅

¡Hola ${n.customer}! 

Tu compra de *${n.service}* ha sido aprobada exitosamente 🎉

Ve los datos completos de tu compra en nuestra página web 💻

🌟 No olvides que tu recomendación me ayuda a seguir creciendo.

¡Muchas gracias por confiar en mí! 🙏✨`,b=`https://wa.me/${n.phone.replace(/\D/g,"")}?text=${encodeURIComponent(u)}`;window.open(b,"_blank")},I=async()=>{if(console.log("🚀 ===== INICIANDO APROBACIÓN DE COMPRA ====="),console.log("📋 purchase:",n),console.log("📋 isCombo:",p),console.log("📋 services:",m),console.log("📋 serviceCredentials:",d),console.log("📋 multiCredentials:",h),console.log("📋 onApprove function:",s),console.log("📋 onUpdatePurchase function:",i),p){if(m.some(b=>{var w,c;return!((w=h[b])!=null&&w.email)||!((c=h[b])!=null&&c.password)})){alert("Por favor completa el email y contraseña para todos los servicios del combo");return}}else if(!d.email||!d.password){alert("Por favor completa el email y contraseña del servicio");return}C(!0);try{let u,b,w;if(p){const f=m.map(v=>{const y=h[v];return`${v}:
Email: ${y.email}
Contraseña: ${y.password}`}).join(`

`);u=`COMBO: ${m.join(" + ")}`,b=f,w=d.notes}else u=d.email,b=d.password,w=d.notes;console.log("🔄 Modal: Iniciando aprobación...",{purchaseId:n.id,isCombo:p,emailToSave:u,passwordToSave:b?"***":"undefined",notesToSave:w});const c=await B(n.id,u,b,w,"admin");if(console.log("📋 Modal: Resultado de approvePurchase:",c),c.data)console.log("✅ Modal: Compra aprobada en Supabase, actualizando estado local..."),i&&i(n.id,{validated:!0,service_email:u,service_password:b,admin_notes:w}),console.log("✅ Compra guardada en la base de datos exitosamente"),console.log("🔄 Actualizando estado local inmediatamente..."),i&&i(n.id,{validated:!0,service_email:u,service_password:b,admin_notes:w}),console.log("🔄 Llamando a onApprove para recargar datos..."),await s(),setTimeout(()=>{console.log("🔄 Cerrando modal después de actualización..."),o(),x({email:"",password:"",notes:""}),$({})},500),alert("✅ Compra aprobada y actualizada correctamente");else throw new Error("No se pudo guardar en la base de datos")}catch(u){console.error("Error aprobando compra:",u),alert("❌ Error al guardar en la base de datos")}finally{C(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 backdrop-blur-sm p-4",onClick:o,children:e.jsxs("div",{className:`w-full max-w-2xl rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto ${t(r,"bg-white","bg-gray-900")}`,onClick:u=>u.stopPropagation(),children:[e.jsx("div",{className:`relative p-6 border-b-2 ${t(r,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-700")}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-2xl font-bold ${t(r,"text-gray-900","text-white")}`,children:"Aprobar Compra"}),e.jsx("button",{onClick:o,className:`w-8 h-8 rounded-full flex items-center justify-center text-xl font-bold transition-all ${t(r,"text-gray-500 hover:bg-gray-100","text-gray-400 hover:bg-gray-700")}`,children:"×"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{className:"space-y-6",children:[e.jsx("div",{className:`p-6 rounded-xl border-2 ${t(r,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-700")}`,children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-xl font-bold ${t(r,"text-gray-900","text-white")}`,children:n.customer}),e.jsxs("p",{className:`text-lg font-semibold ${t(r,"text-gray-700","text-gray-300")}`,children:[n.service," • ",n.months," ",n.months===1?"mes":"meses"]})]}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${t(r,"bg-blue-100","bg-blue-900/30")}`,children:[e.jsx("span",{className:"text-lg",children:"📱"}),e.jsx("span",{className:`font-semibold ${t(r,"text-blue-800","text-blue-200")}`,children:n.phone})]})]})}),e.jsxs("div",{className:`p-6 rounded-xl border-2 ${t(r,"bg-purple-50 border-purple-200","bg-purple-900/20 border-purple-700")}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t(r,"bg-yellow-100","bg-yellow-900/30")}`,children:"🔑"}),e.jsx("h4",{className:`text-xl font-bold ${t(r,"text-gray-900","text-white")}`,children:"Credenciales del Servicio"})]}),p?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${t(r,"bg-orange-50 border border-orange-200","bg-orange-900/20 border border-orange-600")}`,children:e.jsx("p",{className:`text-sm font-semibold ${t(r,"text-orange-800","text-orange-300")}`,children:"🎁 Combo detectado: Ingresa las credenciales para cada servicio"})}),m.map((u,b)=>{var w,c;return e.jsxs("div",{className:`p-4 rounded-lg border ${t(r,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-600")}`,children:[e.jsxs("h5",{className:`text-lg font-bold mb-3 ${t(r,"text-gray-800","text-white")}`,children:[u," ",b===0?"🎬":b===1?"🎭":b===2?"🎪":"🎯"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-bold mb-2 ${t(r,"text-gray-700","text-gray-300")}`,children:["📧 Email del ",u]}),e.jsx("input",{type:"email",value:((w=h[u])==null?void 0:w.email)||"",onChange:f=>$(v=>{var y;return{...v,[u]:{...v[u],email:f.target.value,password:((y=v[u])==null?void 0:y.password)||""}}}),className:`w-full rounded-lg border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-blue-500","border-gray-600 bg-gray-700 text-white focus:border-blue-400")}`,placeholder:`usuario@${u.toLowerCase().replace(/[^a-z]/g,"")}.com`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-bold mb-2 ${t(r,"text-gray-700","text-gray-300")}`,children:["🔑 Contraseña del ",u]}),e.jsx("input",{type:"password",value:((c=h[u])==null?void 0:c.password)||"",onChange:f=>$(v=>{var y;return{...v,[u]:{...v[u],password:f.target.value,email:((y=v[u])==null?void 0:y.email)||""}}}),className:`w-full rounded-lg border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-amber-500/20 ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-amber-500","border-gray-600 bg-gray-700 text-white focus:border-amber-400")}`,placeholder:"••••••••"})]})]})]},u)})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(r,"text-gray-700","text-gray-300")}`,children:"Email del servicio *"}),e.jsx("input",{type:"email",value:d.email,onChange:u=>x(b=>({...b,email:u.target.value})),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-bold ${t(r,"text-gray-700","text-gray-300")}`,children:"Contraseña del servicio *"}),e.jsx("input",{type:"text",value:d.password,onChange:u=>x(b=>({...b,password:u.target.value})),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,required:!0})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl border-2 ${t(r,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-700")}`,children:[e.jsx("h4",{className:`text-lg font-bold mb-4 ${t(r,"text-gray-900","text-white")}`,children:"Información Importante"}),e.jsx("textarea",{value:d.notes,onChange:u=>x(b=>({...b,notes:u.target.value})),placeholder:"Notas adicionales sobre esta compra...",className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 resize-none ${t(r,"border-gray-300 bg-white text-gray-900 focus:border-gray-500 focus:ring-gray-200","border-gray-600 bg-gray-700 text-white focus:border-gray-400 focus:ring-gray-800/30")}`,rows:3})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[e.jsx("button",{onClick:o,className:`w-full sm:flex-1 px-6 py-3 rounded-xl font-bold transition-all duration-200 hover:scale-105 ${t(r,"bg-gray-200 text-gray-700 hover:bg-gray-300","bg-gray-700 text-gray-200 hover:bg-gray-600")}`,children:"Cancelar"}),e.jsxs("button",{onClick:P,disabled:p?m.some(u=>{var b,w;return!((b=h[u])!=null&&b.email)||!((w=h[u])!=null&&w.password)}):!d.email||!d.password,className:`w-full sm:flex-1 px-6 py-3 rounded-xl font-bold transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${t(r,"bg-green-500 text-white hover:bg-green-600","bg-green-600 text-white hover:bg-green-700")}`,children:[e.jsx("span",{className:"text-lg",children:"📱"}),e.jsx("span",{className:"truncate",children:"Enviar por WhatsApp"})]}),e.jsx("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),console.log("🚀 BOTÓN APROBAR CLICKEADO"),console.log("🔍 loading:",S),console.log("🔍 serviceCredentials:",d),I()},disabled:S||(p?m.some(u=>{var b,w;return!((b=h[u])!=null&&b.email)||!((w=h[u])!=null&&w.password)}):!d.email||!d.password),className:`w-full sm:flex-1 px-6 py-3 rounded-xl font-bold transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 ${t(r,"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 shadow-lg hover:shadow-xl","bg-gradient-to-r from-blue-600 to-purple-700 text-white hover:from-blue-700 hover:to-purple-800 shadow-lg hover:shadow-xl")}`,children:S?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{className:"truncate",children:"Aprobando..."})]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"✅"}),e.jsx("span",{className:"truncate",children:"Aprobar Compra"})]})})]})]})})]})})}export{ve as A,re as B,fe as C,ye as D,je as E,Ne as M,we as P,R as S,D as a,Q as b,pe as c,ge as d,k as e,O as f,L as g,oe as h,ne as i,e as j,ae as k,de as l,se as m,te as n,me as o,K as p,be as q,xe as r,g as s,t,ee as u,le as v,G as w,ie as x,he as y,Se as z};

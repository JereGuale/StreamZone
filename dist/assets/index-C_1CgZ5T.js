(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var We=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Jc={exports:{}},io={},Qc={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hn=Symbol.for("react.element"),Zh=Symbol.for("react.portal"),e0=Symbol.for("react.fragment"),t0=Symbol.for("react.strict_mode"),r0=Symbol.for("react.profiler"),n0=Symbol.for("react.provider"),s0=Symbol.for("react.context"),o0=Symbol.for("react.forward_ref"),a0=Symbol.for("react.suspense"),i0=Symbol.for("react.memo"),l0=Symbol.for("react.lazy"),bl=Symbol.iterator;function c0(e){return e===null||typeof e!="object"?null:(e=bl&&e[bl]||e["@@iterator"],typeof e=="function"?e:null)}var Yc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xc=Object.assign,Zc={};function Kr(e,t,r){this.props=e,this.context=t,this.refs=Zc,this.updater=r||Yc}Kr.prototype.isReactComponent={};Kr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function eu(){}eu.prototype=Kr.prototype;function pi(e,t,r){this.props=e,this.context=t,this.refs=Zc,this.updater=r||Yc}var xi=pi.prototype=new eu;xi.constructor=pi;Xc(xi,Kr.prototype);xi.isPureReactComponent=!0;var vl=Array.isArray,tu=Object.prototype.hasOwnProperty,bi={current:null},ru={key:!0,ref:!0,__self:!0,__source:!0};function nu(e,t,r){var n,s={},a=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)tu.call(t,n)&&!ru.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Hn,type:e,key:a,ref:i,props:s,_owner:bi.current}}function u0(e,t){return{$$typeof:Hn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vi(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hn}function d0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var yl=/\/+/g;function $o(e,t){return typeof e=="object"&&e!==null&&e.key!=null?d0(""+e.key):t.toString(36)}function ys(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Hn:case Zh:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+$o(i,0):n,vl(s)?(r="",e!=null&&(r=e.replace(yl,"$&/")+"/"),ys(s,t,r,"",function(u){return u})):s!=null&&(vi(s)&&(s=u0(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(yl,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",vl(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+$o(a,l);i+=ys(a,t,r,c,s)}else if(c=c0(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+$o(a,l++),i+=ys(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Xn(e,t,r){if(e==null)return e;var n=[],s=0;return ys(e,n,"","",function(a){return t.call(r,a,s++)}),n}function h0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var je={current:null},ws={transition:null},m0={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:ws,ReactCurrentOwner:bi};function su(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:Xn,forEach:function(e,t,r){Xn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Xn(e,function(){t++}),t},toArray:function(e){return Xn(e,function(t){return t})||[]},only:function(e){if(!vi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};F.Component=Kr;F.Fragment=e0;F.Profiler=r0;F.PureComponent=pi;F.StrictMode=t0;F.Suspense=a0;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m0;F.act=su;F.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Xc({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=bi.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)tu.call(t,c)&&!ru.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Hn,type:e.type,key:s,ref:a,props:n,_owner:i}};F.createContext=function(e){return e={$$typeof:s0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:n0,_context:e},e.Consumer=e};F.createElement=nu;F.createFactory=function(e){var t=nu.bind(null,e);return t.type=e,t};F.createRef=function(){return{current:null}};F.forwardRef=function(e){return{$$typeof:o0,render:e}};F.isValidElement=vi;F.lazy=function(e){return{$$typeof:l0,_payload:{_status:-1,_result:e},_init:h0}};F.memo=function(e,t){return{$$typeof:i0,type:e,compare:t===void 0?null:t}};F.startTransition=function(e){var t=ws.transition;ws.transition={};try{e()}finally{ws.transition=t}};F.unstable_act=su;F.useCallback=function(e,t){return je.current.useCallback(e,t)};F.useContext=function(e){return je.current.useContext(e)};F.useDebugValue=function(){};F.useDeferredValue=function(e){return je.current.useDeferredValue(e)};F.useEffect=function(e,t){return je.current.useEffect(e,t)};F.useId=function(){return je.current.useId()};F.useImperativeHandle=function(e,t,r){return je.current.useImperativeHandle(e,t,r)};F.useInsertionEffect=function(e,t){return je.current.useInsertionEffect(e,t)};F.useLayoutEffect=function(e,t){return je.current.useLayoutEffect(e,t)};F.useMemo=function(e,t){return je.current.useMemo(e,t)};F.useReducer=function(e,t,r){return je.current.useReducer(e,t,r)};F.useRef=function(e){return je.current.useRef(e)};F.useState=function(e){return je.current.useState(e)};F.useSyncExternalStore=function(e,t,r){return je.current.useSyncExternalStore(e,t,r)};F.useTransition=function(){return je.current.useTransition()};F.version="18.3.1";Qc.exports=F;var E=Qc.exports;const ou=Yh(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0=E,g0=Symbol.for("react.element"),p0=Symbol.for("react.fragment"),x0=Object.prototype.hasOwnProperty,b0=f0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v0={key:!0,ref:!0,__self:!0,__source:!0};function au(e,t,r){var n,s={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)x0.call(t,n)&&!v0.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:g0,type:e,key:a,ref:i,props:s,_owner:b0.current}}io.Fragment=p0;io.jsx=au;io.jsxs=au;Jc.exports=io;var o=Jc.exports,ua={},iu={exports:{}},ze={},lu={exports:{}},cu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,O){var k=C.length;C.push(O);e:for(;0<k;){var L=k-1>>>1,V=C[L];if(0<s(V,O))C[L]=O,C[k]=V,k=L;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var O=C[0],k=C.pop();if(k!==O){C[0]=k;e:for(var L=0,V=C.length,_e=V>>>1;L<_e;){var Me=2*(L+1)-1,mr=C[Me],re=Me+1,ut=C[re];if(0>s(mr,k))re<V&&0>s(ut,mr)?(C[L]=ut,C[re]=k,L=re):(C[L]=mr,C[Me]=k,L=Me);else if(re<V&&0>s(ut,k))C[L]=ut,C[re]=k,L=re;else break e}}return O}function s(C,O){var k=C.sortIndex-O.sortIndex;return k!==0?k:C.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],h=1,m=null,f=3,b=!1,y=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(C){for(var O=r(u);O!==null;){if(O.callback===null)n(u);else if(O.startTime<=C)n(u),O.sortIndex=O.expirationTime,t(c,O);else break;O=r(u)}}function v(C){if(w=!1,x(C),!y)if(r(c)!==null)y=!0,me(S);else{var O=r(u);O!==null&&T(v,O.startTime-C)}}function S(C,O){y=!1,w&&(w=!1,g(P),P=-1),b=!0;var k=f;try{for(x(O),m=r(c);m!==null&&(!(m.expirationTime>O)||C&&!G());){var L=m.callback;if(typeof L=="function"){m.callback=null,f=m.priorityLevel;var V=L(m.expirationTime<=O);O=e.unstable_now(),typeof V=="function"?m.callback=V:m===r(c)&&n(c),x(O)}else n(c);m=r(c)}if(m!==null)var _e=!0;else{var Me=r(u);Me!==null&&T(v,Me.startTime-O),_e=!1}return _e}finally{m=null,f=k,b=!1}}var N=!1,_=null,P=-1,z=5,R=-1;function G(){return!(e.unstable_now()-R<z)}function be(){if(_!==null){var C=e.unstable_now();R=C;var O=!0;try{O=_(!0,C)}finally{O?ke():(N=!1,_=null)}}else N=!1}var ke;if(typeof p=="function")ke=function(){p(be)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,De=q.port2;q.port1.onmessage=be,ke=function(){De.postMessage(null)}}else ke=function(){j(be,0)};function me(C){_=C,N||(N=!0,ke())}function T(C,O){P=j(function(){C(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){y||b||(y=!0,me(S))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(C){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var k=f;f=O;try{return C()}finally{f=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,O){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var k=f;f=C;try{return O()}finally{f=k}},e.unstable_scheduleCallback=function(C,O,k){var L=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?L+k:L):k=L,C){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=k+V,C={id:h++,callback:O,priorityLevel:C,startTime:k,expirationTime:V,sortIndex:-1},k>L?(C.sortIndex=k,t(u,C),r(c)===null&&C===r(u)&&(w?(g(P),P=-1):w=!0,T(v,k-L))):(C.sortIndex=V,t(c,C),y||b||(y=!0,me(S))),C},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(C){var O=f;return function(){var k=f;f=O;try{return C.apply(this,arguments)}finally{f=k}}}})(cu);lu.exports=cu;var y0=lu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0=E,Ie=y0;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uu=new Set,Cn={};function ur(e,t){Fr(e,t),Fr(e+"Capture",t)}function Fr(e,t){for(Cn[e]=t,e=0;e<t.length;e++)uu.add(t[e])}var bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),da=Object.prototype.hasOwnProperty,j0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wl={},jl={};function N0(e){return da.call(jl,e)?!0:da.call(wl,e)?!1:j0.test(e)?jl[e]=!0:(wl[e]=!0,!1)}function _0(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S0(e,t,r,n){if(t===null||typeof t>"u"||_0(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ne(e,t,r,n,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){he[e]=new Ne(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];he[t]=new Ne(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){he[e]=new Ne(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){he[e]=new Ne(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){he[e]=new Ne(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){he[e]=new Ne(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){he[e]=new Ne(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){he[e]=new Ne(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){he[e]=new Ne(e,5,!1,e.toLowerCase(),null,!1,!1)});var yi=/[\-:]([a-z])/g;function wi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yi,wi);he[t]=new Ne(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yi,wi);he[t]=new Ne(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yi,wi);he[t]=new Ne(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){he[e]=new Ne(e,1,!1,e.toLowerCase(),null,!1,!1)});he.xlinkHref=new Ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){he[e]=new Ne(e,1,!1,e.toLowerCase(),null,!0,!0)});function ji(e,t,r,n){var s=he.hasOwnProperty(t)?he[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S0(t,r,s,n)&&(r=null),n||s===null?N0(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var jt=w0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zn=Symbol.for("react.element"),jr=Symbol.for("react.portal"),Nr=Symbol.for("react.fragment"),Ni=Symbol.for("react.strict_mode"),ha=Symbol.for("react.profiler"),du=Symbol.for("react.provider"),hu=Symbol.for("react.context"),_i=Symbol.for("react.forward_ref"),ma=Symbol.for("react.suspense"),fa=Symbol.for("react.suspense_list"),Si=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),mu=Symbol.for("react.offscreen"),Nl=Symbol.iterator;function en(e){return e===null||typeof e!="object"?null:(e=Nl&&e[Nl]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Object.assign,To;function un(e){if(To===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);To=t&&t[1]||""}return`
`+To+e}var ko=!1;function Ao(e,t){if(!e||ko)return"";ko=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{ko=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?un(e):""}function E0(e){switch(e.tag){case 5:return un(e.type);case 16:return un("Lazy");case 13:return un("Suspense");case 19:return un("SuspenseList");case 0:case 2:case 15:return e=Ao(e.type,!1),e;case 11:return e=Ao(e.type.render,!1),e;case 1:return e=Ao(e.type,!0),e;default:return""}}function ga(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nr:return"Fragment";case jr:return"Portal";case ha:return"Profiler";case Ni:return"StrictMode";case ma:return"Suspense";case fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hu:return(e.displayName||"Context")+".Consumer";case du:return(e._context.displayName||"Context")+".Provider";case _i:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Si:return t=e.displayName||null,t!==null?t:ga(e.type)||"Memo";case Ct:t=e._payload,e=e._init;try{return ga(e(t))}catch{}}return null}function C0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ga(t);case 8:return t===Ni?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function P0(e){var t=fu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function es(e){e._valueTracker||(e._valueTracker=P0(e))}function gu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=fu(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function As(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pa(e,t){var r=t.checked;return Z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function _l(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Vt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function pu(e,t){t=t.checked,t!=null&&ji(e,"checked",t,!1)}function xa(e,t){pu(e,t);var r=Vt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ba(e,t.type,r):t.hasOwnProperty("defaultValue")&&ba(e,t.type,Vt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ba(e,t,r){(t!=="number"||As(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var dn=Array.isArray;function Rr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Vt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function va(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function El(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error($(92));if(dn(r)){if(1<r.length)throw Error($(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vt(r)}}function xu(e,t){var r=Vt(t.value),n=Vt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Cl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ya(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ts,vu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ts=ts||document.createElement("div"),ts.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ts.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var gn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$0=["Webkit","ms","Moz","O"];Object.keys(gn).forEach(function(e){$0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gn[t]=gn[e]})});function yu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||gn.hasOwnProperty(e)&&gn[e]?(""+t).trim():t+"px"}function wu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=yu(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var T0=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wa(e,t){if(t){if(T0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function ja(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Na=null;function Ei(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _a=null,Ir=null,zr=null;function Pl(e){if(e=Kn(e)){if(typeof _a!="function")throw Error($(280));var t=e.stateNode;t&&(t=mo(t),_a(e.stateNode,e.type,t))}}function ju(e){Ir?zr?zr.push(e):zr=[e]:Ir=e}function Nu(){if(Ir){var e=Ir,t=zr;if(zr=Ir=null,Pl(e),t)for(e=0;e<t.length;e++)Pl(t[e])}}function _u(e,t){return e(t)}function Su(){}var Oo=!1;function Eu(e,t,r){if(Oo)return e(t,r);Oo=!0;try{return _u(e,t,r)}finally{Oo=!1,(Ir!==null||zr!==null)&&(Su(),Nu())}}function $n(e,t){var r=e.stateNode;if(r===null)return null;var n=mo(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error($(231,t,typeof r));return r}var Sa=!1;if(bt)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){Sa=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{Sa=!1}function k0(e,t,r,n,s,a,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(h){this.onError(h)}}var pn=!1,Os=null,Rs=!1,Ea=null,A0={onError:function(e){pn=!0,Os=e}};function O0(e,t,r,n,s,a,i,l,c){pn=!1,Os=null,k0.apply(A0,arguments)}function R0(e,t,r,n,s,a,i,l,c){if(O0.apply(this,arguments),pn){if(pn){var u=Os;pn=!1,Os=null}else throw Error($(198));Rs||(Rs=!0,Ea=u)}}function dr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Cu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $l(e){if(dr(e)!==e)throw Error($(188))}function I0(e){var t=e.alternate;if(!t){if(t=dr(e),t===null)throw Error($(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return $l(s),e;if(a===n)return $l(s),t;a=a.sibling}throw Error($(188))}if(r.return!==n.return)r=s,n=a;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i)throw Error($(189))}}if(r.alternate!==n)throw Error($(190))}if(r.tag!==3)throw Error($(188));return r.stateNode.current===r?e:t}function Pu(e){return e=I0(e),e!==null?$u(e):null}function $u(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$u(e);if(t!==null)return t;e=e.sibling}return null}var Tu=Ie.unstable_scheduleCallback,Tl=Ie.unstable_cancelCallback,z0=Ie.unstable_shouldYield,L0=Ie.unstable_requestPaint,te=Ie.unstable_now,M0=Ie.unstable_getCurrentPriorityLevel,Ci=Ie.unstable_ImmediatePriority,ku=Ie.unstable_UserBlockingPriority,Is=Ie.unstable_NormalPriority,U0=Ie.unstable_LowPriority,Au=Ie.unstable_IdlePriority,lo=null,it=null;function F0(e){if(it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(lo,e,void 0,(e.current.flags&128)===128)}catch{}}var et=Math.clz32?Math.clz32:W0,B0=Math.log,V0=Math.LN2;function W0(e){return e>>>=0,e===0?32:31-(B0(e)/V0|0)|0}var rs=64,ns=4194304;function hn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zs(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=hn(l):(a&=i,a!==0&&(n=hn(a)))}else i=r&~s,i!==0?n=hn(i):a!==0&&(n=hn(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-et(t),s=1<<r,n|=e[r],t&=~s;return n}function q0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H0(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-et(a),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=q0(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Ca(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ou(){var e=rs;return rs<<=1,!(rs&4194240)&&(rs=64),e}function Ro(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Dn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-et(t),e[t]=r}function D0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-et(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function Pi(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-et(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var W=0;function Ru(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Iu,$i,zu,Lu,Mu,Pa=!1,ss=[],Rt=null,It=null,zt=null,Tn=new Map,kn=new Map,$t=[],G0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kl(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":zt=null;break;case"pointerover":case"pointerout":Tn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kn.delete(t.pointerId)}}function rn(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Kn(t),t!==null&&$i(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function K0(e,t,r,n,s){switch(t){case"focusin":return Rt=rn(Rt,e,t,r,n,s),!0;case"dragenter":return It=rn(It,e,t,r,n,s),!0;case"mouseover":return zt=rn(zt,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Tn.set(a,rn(Tn.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,kn.set(a,rn(kn.get(a)||null,e,t,r,n,s)),!0}return!1}function Uu(e){var t=er(e.target);if(t!==null){var r=dr(t);if(r!==null){if(t=r.tag,t===13){if(t=Cu(r),t!==null){e.blockedOn=t,Mu(e.priority,function(){zu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function js(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=$a(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Na=n,r.target.dispatchEvent(n),Na=null}else return t=Kn(r),t!==null&&$i(t),e.blockedOn=r,!1;t.shift()}return!0}function Al(e,t,r){js(e)&&r.delete(t)}function J0(){Pa=!1,Rt!==null&&js(Rt)&&(Rt=null),It!==null&&js(It)&&(It=null),zt!==null&&js(zt)&&(zt=null),Tn.forEach(Al),kn.forEach(Al)}function nn(e,t){e.blockedOn===t&&(e.blockedOn=null,Pa||(Pa=!0,Ie.unstable_scheduleCallback(Ie.unstable_NormalPriority,J0)))}function An(e){function t(s){return nn(s,e)}if(0<ss.length){nn(ss[0],e);for(var r=1;r<ss.length;r++){var n=ss[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Rt!==null&&nn(Rt,e),It!==null&&nn(It,e),zt!==null&&nn(zt,e),Tn.forEach(t),kn.forEach(t),r=0;r<$t.length;r++)n=$t[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$t.length&&(r=$t[0],r.blockedOn===null);)Uu(r),r.blockedOn===null&&$t.shift()}var Lr=jt.ReactCurrentBatchConfig,Ls=!0;function Q0(e,t,r,n){var s=W,a=Lr.transition;Lr.transition=null;try{W=1,Ti(e,t,r,n)}finally{W=s,Lr.transition=a}}function Y0(e,t,r,n){var s=W,a=Lr.transition;Lr.transition=null;try{W=4,Ti(e,t,r,n)}finally{W=s,Lr.transition=a}}function Ti(e,t,r,n){if(Ls){var s=$a(e,t,r,n);if(s===null)qo(e,t,n,Ms,r),kl(e,n);else if(K0(s,e,t,r,n))n.stopPropagation();else if(kl(e,n),t&4&&-1<G0.indexOf(e)){for(;s!==null;){var a=Kn(s);if(a!==null&&Iu(a),a=$a(e,t,r,n),a===null&&qo(e,t,n,Ms,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else qo(e,t,n,null,r)}}var Ms=null;function $a(e,t,r,n){if(Ms=null,e=Ei(n),e=er(e),e!==null)if(t=dr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Cu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ms=e,null}function Fu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M0()){case Ci:return 1;case ku:return 4;case Is:case U0:return 16;case Au:return 536870912;default:return 16}default:return 16}}var At=null,ki=null,Ns=null;function Bu(){if(Ns)return Ns;var e,t=ki,r=t.length,n,s="value"in At?At.value:At.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[a-n];n++);return Ns=s.slice(e,1<n?1-n:void 0)}function _s(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function os(){return!0}function Ol(){return!1}function Le(e){function t(r,n,s,a,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?os:Ol,this.isPropagationStopped=Ol,this}return Z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),t}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=Le(Jr),Gn=Z({},Jr,{view:0,detail:0}),X0=Le(Gn),Io,zo,sn,co=Z({},Gn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&e.type==="mousemove"?(Io=e.screenX-sn.screenX,zo=e.screenY-sn.screenY):zo=Io=0,sn=e),Io)},movementY:function(e){return"movementY"in e?e.movementY:zo}}),Rl=Le(co),Z0=Z({},co,{dataTransfer:0}),em=Le(Z0),tm=Z({},Gn,{relatedTarget:0}),Lo=Le(tm),rm=Z({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),nm=Le(rm),sm=Z({},Jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),om=Le(sm),am=Z({},Jr,{data:0}),Il=Le(am),im={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function um(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cm[e])?!!t[e]:!1}function Oi(){return um}var dm=Z({},Gn,{key:function(e){if(e.key){var t=im[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_s(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oi,charCode:function(e){return e.type==="keypress"?_s(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_s(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hm=Le(dm),mm=Z({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zl=Le(mm),fm=Z({},Gn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oi}),gm=Le(fm),pm=Z({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xm=Le(pm),bm=Z({},co,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vm=Le(bm),ym=[9,13,27,32],Ri=bt&&"CompositionEvent"in window,xn=null;bt&&"documentMode"in document&&(xn=document.documentMode);var wm=bt&&"TextEvent"in window&&!xn,Vu=bt&&(!Ri||xn&&8<xn&&11>=xn),Ll=" ",Ml=!1;function Wu(e,t){switch(e){case"keyup":return ym.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function jm(e,t){switch(e){case"compositionend":return qu(t);case"keypress":return t.which!==32?null:(Ml=!0,Ll);case"textInput":return e=t.data,e===Ll&&Ml?null:e;default:return null}}function Nm(e,t){if(_r)return e==="compositionend"||!Ri&&Wu(e,t)?(e=Bu(),Ns=ki=At=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vu&&t.locale!=="ko"?null:t.data;default:return null}}var _m={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ul(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_m[e.type]:t==="textarea"}function Hu(e,t,r,n){ju(n),t=Us(t,"onChange"),0<t.length&&(r=new Ai("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var bn=null,On=null;function Sm(e){rd(e,0)}function uo(e){var t=Cr(e);if(gu(t))return e}function Em(e,t){if(e==="change")return t}var Du=!1;if(bt){var Mo;if(bt){var Uo="oninput"in document;if(!Uo){var Fl=document.createElement("div");Fl.setAttribute("oninput","return;"),Uo=typeof Fl.oninput=="function"}Mo=Uo}else Mo=!1;Du=Mo&&(!document.documentMode||9<document.documentMode)}function Bl(){bn&&(bn.detachEvent("onpropertychange",Gu),On=bn=null)}function Gu(e){if(e.propertyName==="value"&&uo(On)){var t=[];Hu(t,On,e,Ei(e)),Eu(Sm,t)}}function Cm(e,t,r){e==="focusin"?(Bl(),bn=t,On=r,bn.attachEvent("onpropertychange",Gu)):e==="focusout"&&Bl()}function Pm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uo(On)}function $m(e,t){if(e==="click")return uo(t)}function Tm(e,t){if(e==="input"||e==="change")return uo(t)}function km(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rt=typeof Object.is=="function"?Object.is:km;function Rn(e,t){if(rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!da.call(t,s)||!rt(e[s],t[s]))return!1}return!0}function Vl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wl(e,t){var r=Vl(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vl(r)}}function Ku(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ku(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ju(){for(var e=window,t=As();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=As(e.document)}return t}function Ii(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Am(e){var t=Ju(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Ku(r.ownerDocument.documentElement,r)){if(n!==null&&Ii(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=Wl(r,a);var i=Wl(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Om=bt&&"documentMode"in document&&11>=document.documentMode,Sr=null,Ta=null,vn=null,ka=!1;function ql(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ka||Sr==null||Sr!==As(n)||(n=Sr,"selectionStart"in n&&Ii(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),vn&&Rn(vn,n)||(vn=n,n=Us(Ta,"onSelect"),0<n.length&&(t=new Ai("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Sr)))}function as(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Er={animationend:as("Animation","AnimationEnd"),animationiteration:as("Animation","AnimationIteration"),animationstart:as("Animation","AnimationStart"),transitionend:as("Transition","TransitionEnd")},Fo={},Qu={};bt&&(Qu=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function ho(e){if(Fo[e])return Fo[e];if(!Er[e])return e;var t=Er[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Qu)return Fo[e]=t[r];return e}var Yu=ho("animationend"),Xu=ho("animationiteration"),Zu=ho("animationstart"),ed=ho("transitionend"),td=new Map,Hl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qt(e,t){td.set(e,t),ur(t,[e])}for(var Bo=0;Bo<Hl.length;Bo++){var Vo=Hl[Bo],Rm=Vo.toLowerCase(),Im=Vo[0].toUpperCase()+Vo.slice(1);qt(Rm,"on"+Im)}qt(Yu,"onAnimationEnd");qt(Xu,"onAnimationIteration");qt(Zu,"onAnimationStart");qt("dblclick","onDoubleClick");qt("focusin","onFocus");qt("focusout","onBlur");qt(ed,"onTransitionEnd");Fr("onMouseEnter",["mouseout","mouseover"]);Fr("onMouseLeave",["mouseout","mouseover"]);Fr("onPointerEnter",["pointerout","pointerover"]);Fr("onPointerLeave",["pointerout","pointerover"]);ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zm=new Set("cancel close invalid load scroll toggle".split(" ").concat(mn));function Dl(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,R0(n,t,void 0,e),e.currentTarget=null}function rd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;Dl(s,l,u),a=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;Dl(s,l,u),a=c}}}if(Rs)throw e=Ea,Rs=!1,Ea=null,e}function K(e,t){var r=t[za];r===void 0&&(r=t[za]=new Set);var n=e+"__bubble";r.has(n)||(nd(t,e,2,!1),r.add(n))}function Wo(e,t,r){var n=0;t&&(n|=4),nd(r,e,n,t)}var is="_reactListening"+Math.random().toString(36).slice(2);function In(e){if(!e[is]){e[is]=!0,uu.forEach(function(r){r!=="selectionchange"&&(zm.has(r)||Wo(r,!1,e),Wo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[is]||(t[is]=!0,Wo("selectionchange",!1,t))}}function nd(e,t,r,n){switch(Fu(t)){case 1:var s=Q0;break;case 4:s=Y0;break;default:s=Ti}r=s.bind(null,t,r,e),s=void 0,!Sa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function qo(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=er(l),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}l=l.parentNode}}n=n.return}Eu(function(){var u=a,h=Ei(r),m=[];e:{var f=td.get(e);if(f!==void 0){var b=Ai,y=e;switch(e){case"keypress":if(_s(r)===0)break e;case"keydown":case"keyup":b=hm;break;case"focusin":y="focus",b=Lo;break;case"focusout":y="blur",b=Lo;break;case"beforeblur":case"afterblur":b=Lo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=em;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=gm;break;case Yu:case Xu:case Zu:b=nm;break;case ed:b=xm;break;case"scroll":b=X0;break;case"wheel":b=vm;break;case"copy":case"cut":case"paste":b=om;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=zl}var w=(t&4)!==0,j=!w&&e==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var p=u,x;p!==null;){x=p;var v=x.stateNode;if(x.tag===5&&v!==null&&(x=v,g!==null&&(v=$n(p,g),v!=null&&w.push(zn(p,v,x)))),j)break;p=p.return}0<w.length&&(f=new b(f,y,null,r,h),m.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",f&&r!==Na&&(y=r.relatedTarget||r.fromElement)&&(er(y)||y[vt]))break e;if((b||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,b?(y=r.relatedTarget||r.toElement,b=u,y=y?er(y):null,y!==null&&(j=dr(y),y!==j||y.tag!==5&&y.tag!==6)&&(y=null)):(b=null,y=u),b!==y)){if(w=Rl,v="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(w=zl,v="onPointerLeave",g="onPointerEnter",p="pointer"),j=b==null?f:Cr(b),x=y==null?f:Cr(y),f=new w(v,p+"leave",b,r,h),f.target=j,f.relatedTarget=x,v=null,er(h)===u&&(w=new w(g,p+"enter",y,r,h),w.target=x,w.relatedTarget=j,v=w),j=v,b&&y)t:{for(w=b,g=y,p=0,x=w;x;x=fr(x))p++;for(x=0,v=g;v;v=fr(v))x++;for(;0<p-x;)w=fr(w),p--;for(;0<x-p;)g=fr(g),x--;for(;p--;){if(w===g||g!==null&&w===g.alternate)break t;w=fr(w),g=fr(g)}w=null}else w=null;b!==null&&Gl(m,f,b,w,!1),y!==null&&j!==null&&Gl(m,j,y,w,!0)}}e:{if(f=u?Cr(u):window,b=f.nodeName&&f.nodeName.toLowerCase(),b==="select"||b==="input"&&f.type==="file")var S=Em;else if(Ul(f))if(Du)S=Tm;else{S=Pm;var N=Cm}else(b=f.nodeName)&&b.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=$m);if(S&&(S=S(e,u))){Hu(m,S,r,h);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&ba(f,"number",f.value)}switch(N=u?Cr(u):window,e){case"focusin":(Ul(N)||N.contentEditable==="true")&&(Sr=N,Ta=u,vn=null);break;case"focusout":vn=Ta=Sr=null;break;case"mousedown":ka=!0;break;case"contextmenu":case"mouseup":case"dragend":ka=!1,ql(m,r,h);break;case"selectionchange":if(Om)break;case"keydown":case"keyup":ql(m,r,h)}var _;if(Ri)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else _r?Wu(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Vu&&r.locale!=="ko"&&(_r||P!=="onCompositionStart"?P==="onCompositionEnd"&&_r&&(_=Bu()):(At=h,ki="value"in At?At.value:At.textContent,_r=!0)),N=Us(u,P),0<N.length&&(P=new Il(P,e,null,r,h),m.push({event:P,listeners:N}),_?P.data=_:(_=qu(r),_!==null&&(P.data=_)))),(_=wm?jm(e,r):Nm(e,r))&&(u=Us(u,"onBeforeInput"),0<u.length&&(h=new Il("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:u}),h.data=_))}rd(m,t)})}function zn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Us(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=$n(e,r),a!=null&&n.unshift(zn(e,a,s)),a=$n(e,t),a!=null&&n.push(zn(e,a,s))),e=e.return}return n}function fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gl(e,t,r,n,s){for(var a=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=$n(r,a),c!=null&&i.unshift(zn(r,c,l))):s||(c=$n(r,a),c!=null&&i.push(zn(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Lm=/\r\n?/g,Mm=/\u0000|\uFFFD/g;function Kl(e){return(typeof e=="string"?e:""+e).replace(Lm,`
`).replace(Mm,"")}function ls(e,t,r){if(t=Kl(t),Kl(e)!==t&&r)throw Error($(425))}function Fs(){}var Aa=null,Oa=null;function Ra(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ia=typeof setTimeout=="function"?setTimeout:void 0,Um=typeof clearTimeout=="function"?clearTimeout:void 0,Jl=typeof Promise=="function"?Promise:void 0,Fm=typeof queueMicrotask=="function"?queueMicrotask:typeof Jl<"u"?function(e){return Jl.resolve(null).then(e).catch(Bm)}:Ia;function Bm(e){setTimeout(function(){throw e})}function Ho(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),An(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);An(t)}function Lt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ql(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Qr=Math.random().toString(36).slice(2),at="__reactFiber$"+Qr,Ln="__reactProps$"+Qr,vt="__reactContainer$"+Qr,za="__reactEvents$"+Qr,Vm="__reactListeners$"+Qr,Wm="__reactHandles$"+Qr;function er(e){var t=e[at];if(t)return t;for(var r=e.parentNode;r;){if(t=r[vt]||r[at]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ql(e);e!==null;){if(r=e[at])return r;e=Ql(e)}return t}e=r,r=e.parentNode}return null}function Kn(e){return e=e[at]||e[vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function mo(e){return e[Ln]||null}var La=[],Pr=-1;function Ht(e){return{current:e}}function J(e){0>Pr||(e.current=La[Pr],La[Pr]=null,Pr--)}function D(e,t){Pr++,La[Pr]=e.current,e.current=t}var Wt={},xe=Ht(Wt),Pe=Ht(!1),or=Wt;function Br(e,t){var r=e.type.contextTypes;if(!r)return Wt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function $e(e){return e=e.childContextTypes,e!=null}function Bs(){J(Pe),J(xe)}function Yl(e,t,r){if(xe.current!==Wt)throw Error($(168));D(xe,t),D(Pe,r)}function sd(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error($(108,C0(e)||"Unknown",s));return Z({},r,n)}function Vs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wt,or=xe.current,D(xe,e),D(Pe,Pe.current),!0}function Xl(e,t,r){var n=e.stateNode;if(!n)throw Error($(169));r?(e=sd(e,t,or),n.__reactInternalMemoizedMergedChildContext=e,J(Pe),J(xe),D(xe,e)):J(Pe),D(Pe,r)}var ft=null,fo=!1,Do=!1;function od(e){ft===null?ft=[e]:ft.push(e)}function qm(e){fo=!0,od(e)}function Dt(){if(!Do&&ft!==null){Do=!0;var e=0,t=W;try{var r=ft;for(W=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ft=null,fo=!1}catch(s){throw ft!==null&&(ft=ft.slice(e+1)),Tu(Ci,Dt),s}finally{W=t,Do=!1}}return null}var $r=[],Tr=0,Ws=null,qs=0,Ue=[],Fe=0,ar=null,gt=1,pt="";function Qt(e,t){$r[Tr++]=qs,$r[Tr++]=Ws,Ws=e,qs=t}function ad(e,t,r){Ue[Fe++]=gt,Ue[Fe++]=pt,Ue[Fe++]=ar,ar=e;var n=gt;e=pt;var s=32-et(n)-1;n&=~(1<<s),r+=1;var a=32-et(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,gt=1<<32-et(t)+s|r<<s|n,pt=a+e}else gt=1<<a|r<<s|n,pt=e}function zi(e){e.return!==null&&(Qt(e,1),ad(e,1,0))}function Li(e){for(;e===Ws;)Ws=$r[--Tr],$r[Tr]=null,qs=$r[--Tr],$r[Tr]=null;for(;e===ar;)ar=Ue[--Fe],Ue[Fe]=null,pt=Ue[--Fe],Ue[Fe]=null,gt=Ue[--Fe],Ue[Fe]=null}var Re=null,Oe=null,Q=!1,Ze=null;function id(e,t){var r=Be(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Zl(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Re=e,Oe=Lt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Re=e,Oe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ar!==null?{id:gt,overflow:pt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Be(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Re=e,Oe=null,!0):!1;default:return!1}}function Ma(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ua(e){if(Q){var t=Oe;if(t){var r=t;if(!Zl(e,t)){if(Ma(e))throw Error($(418));t=Lt(r.nextSibling);var n=Re;t&&Zl(e,t)?id(n,r):(e.flags=e.flags&-4097|2,Q=!1,Re=e)}}else{if(Ma(e))throw Error($(418));e.flags=e.flags&-4097|2,Q=!1,Re=e}}}function ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Re=e}function cs(e){if(e!==Re)return!1;if(!Q)return ec(e),Q=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ra(e.type,e.memoizedProps)),t&&(t=Oe)){if(Ma(e))throw ld(),Error($(418));for(;t;)id(e,t),t=Lt(t.nextSibling)}if(ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Oe=Lt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Oe=null}}else Oe=Re?Lt(e.stateNode.nextSibling):null;return!0}function ld(){for(var e=Oe;e;)e=Lt(e.nextSibling)}function Vr(){Oe=Re=null,Q=!1}function Mi(e){Ze===null?Ze=[e]:Ze.push(e)}var Hm=jt.ReactCurrentBatchConfig;function on(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error($(309));var n=r.stateNode}if(!n)throw Error($(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error($(284));if(!r._owner)throw Error($(290,e))}return e}function us(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tc(e){var t=e._init;return t(e._payload)}function cd(e){function t(g,p){if(e){var x=g.deletions;x===null?(g.deletions=[p],g.flags|=16):x.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=Bt(g,p),g.index=0,g.sibling=null,g}function a(g,p,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<p?(g.flags|=2,p):x):(g.flags|=2,p)):(g.flags|=1048576,p)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,p,x,v){return p===null||p.tag!==6?(p=Zo(x,g.mode,v),p.return=g,p):(p=s(p,x),p.return=g,p)}function c(g,p,x,v){var S=x.type;return S===Nr?h(g,p,x.props.children,v,x.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ct&&tc(S)===p.type)?(v=s(p,x.props),v.ref=on(g,p,x),v.return=g,v):(v=ks(x.type,x.key,x.props,null,g.mode,v),v.ref=on(g,p,x),v.return=g,v)}function u(g,p,x,v){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=ea(x,g.mode,v),p.return=g,p):(p=s(p,x.children||[]),p.return=g,p)}function h(g,p,x,v,S){return p===null||p.tag!==7?(p=sr(x,g.mode,v,S),p.return=g,p):(p=s(p,x),p.return=g,p)}function m(g,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Zo(""+p,g.mode,x),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Zn:return x=ks(p.type,p.key,p.props,null,g.mode,x),x.ref=on(g,null,p),x.return=g,x;case jr:return p=ea(p,g.mode,x),p.return=g,p;case Ct:var v=p._init;return m(g,v(p._payload),x)}if(dn(p)||en(p))return p=sr(p,g.mode,x,null),p.return=g,p;us(g,p)}return null}function f(g,p,x,v){var S=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:l(g,p,""+x,v);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zn:return x.key===S?c(g,p,x,v):null;case jr:return x.key===S?u(g,p,x,v):null;case Ct:return S=x._init,f(g,p,S(x._payload),v)}if(dn(x)||en(x))return S!==null?null:h(g,p,x,v,null);us(g,x)}return null}function b(g,p,x,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return g=g.get(x)||null,l(p,g,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zn:return g=g.get(v.key===null?x:v.key)||null,c(p,g,v,S);case jr:return g=g.get(v.key===null?x:v.key)||null,u(p,g,v,S);case Ct:var N=v._init;return b(g,p,x,N(v._payload),S)}if(dn(v)||en(v))return g=g.get(x)||null,h(p,g,v,S,null);us(p,v)}return null}function y(g,p,x,v){for(var S=null,N=null,_=p,P=p=0,z=null;_!==null&&P<x.length;P++){_.index>P?(z=_,_=null):z=_.sibling;var R=f(g,_,x[P],v);if(R===null){_===null&&(_=z);break}e&&_&&R.alternate===null&&t(g,_),p=a(R,p,P),N===null?S=R:N.sibling=R,N=R,_=z}if(P===x.length)return r(g,_),Q&&Qt(g,P),S;if(_===null){for(;P<x.length;P++)_=m(g,x[P],v),_!==null&&(p=a(_,p,P),N===null?S=_:N.sibling=_,N=_);return Q&&Qt(g,P),S}for(_=n(g,_);P<x.length;P++)z=b(_,g,P,x[P],v),z!==null&&(e&&z.alternate!==null&&_.delete(z.key===null?P:z.key),p=a(z,p,P),N===null?S=z:N.sibling=z,N=z);return e&&_.forEach(function(G){return t(g,G)}),Q&&Qt(g,P),S}function w(g,p,x,v){var S=en(x);if(typeof S!="function")throw Error($(150));if(x=S.call(x),x==null)throw Error($(151));for(var N=S=null,_=p,P=p=0,z=null,R=x.next();_!==null&&!R.done;P++,R=x.next()){_.index>P?(z=_,_=null):z=_.sibling;var G=f(g,_,R.value,v);if(G===null){_===null&&(_=z);break}e&&_&&G.alternate===null&&t(g,_),p=a(G,p,P),N===null?S=G:N.sibling=G,N=G,_=z}if(R.done)return r(g,_),Q&&Qt(g,P),S;if(_===null){for(;!R.done;P++,R=x.next())R=m(g,R.value,v),R!==null&&(p=a(R,p,P),N===null?S=R:N.sibling=R,N=R);return Q&&Qt(g,P),S}for(_=n(g,_);!R.done;P++,R=x.next())R=b(_,g,P,R.value,v),R!==null&&(e&&R.alternate!==null&&_.delete(R.key===null?P:R.key),p=a(R,p,P),N===null?S=R:N.sibling=R,N=R);return e&&_.forEach(function(be){return t(g,be)}),Q&&Qt(g,P),S}function j(g,p,x,v){if(typeof x=="object"&&x!==null&&x.type===Nr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Zn:e:{for(var S=x.key,N=p;N!==null;){if(N.key===S){if(S=x.type,S===Nr){if(N.tag===7){r(g,N.sibling),p=s(N,x.props.children),p.return=g,g=p;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ct&&tc(S)===N.type){r(g,N.sibling),p=s(N,x.props),p.ref=on(g,N,x),p.return=g,g=p;break e}r(g,N);break}else t(g,N);N=N.sibling}x.type===Nr?(p=sr(x.props.children,g.mode,v,x.key),p.return=g,g=p):(v=ks(x.type,x.key,x.props,null,g.mode,v),v.ref=on(g,p,x),v.return=g,g=v)}return i(g);case jr:e:{for(N=x.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){r(g,p.sibling),p=s(p,x.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=ea(x,g.mode,v),p.return=g,g=p}return i(g);case Ct:return N=x._init,j(g,p,N(x._payload),v)}if(dn(x))return y(g,p,x,v);if(en(x))return w(g,p,x,v);us(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(r(g,p.sibling),p=s(p,x),p.return=g,g=p):(r(g,p),p=Zo(x,g.mode,v),p.return=g,g=p),i(g)):r(g,p)}return j}var Wr=cd(!0),ud=cd(!1),Hs=Ht(null),Ds=null,kr=null,Ui=null;function Fi(){Ui=kr=Ds=null}function Bi(e){var t=Hs.current;J(Hs),e._currentValue=t}function Fa(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Mr(e,t){Ds=e,Ui=kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ce=!0),e.firstContext=null)}function qe(e){var t=e._currentValue;if(Ui!==e)if(e={context:e,memoizedValue:t,next:null},kr===null){if(Ds===null)throw Error($(308));kr=e,Ds.dependencies={lanes:0,firstContext:e}}else kr=kr.next=e;return t}var tr=null;function Vi(e){tr===null?tr=[e]:tr.push(e)}function dd(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Vi(t)):(r.next=s.next,s.next=r),t.interleaved=r,yt(e,n)}function yt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Pt=!1;function Wi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,B&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,yt(e,r)}return s=n.interleaved,s===null?(t.next=t,Vi(n)):(t.next=s.next,s.next=t),n.interleaved=t,yt(e,r)}function Ss(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Pi(e,r)}}function rc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Gs(e,t,r,n){var s=e.updateQueue;Pt=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var m=s.baseState;i=0,h=u=c=null,l=a;do{var f=l.lane,b=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,w=l;switch(f=t,b=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){m=y.call(b,m,f);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(b,m,f):y,f==null)break e;m=Z({},m,f);break e;case 2:Pt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else b={eventTime:b,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=b,c=m):h=h.next=b,i|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);lr|=i,e.lanes=i,e.memoizedState=m}}function nc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error($(191,s));s.call(n)}}}var Jn={},lt=Ht(Jn),Mn=Ht(Jn),Un=Ht(Jn);function rr(e){if(e===Jn)throw Error($(174));return e}function qi(e,t){switch(D(Un,t),D(Mn,e),D(lt,Jn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ya(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ya(t,e)}J(lt),D(lt,t)}function qr(){J(lt),J(Mn),J(Un)}function md(e){rr(Un.current);var t=rr(lt.current),r=ya(t,e.type);t!==r&&(D(Mn,e),D(lt,r))}function Hi(e){Mn.current===e&&(J(lt),J(Mn))}var Y=Ht(0);function Ks(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Go=[];function Di(){for(var e=0;e<Go.length;e++)Go[e]._workInProgressVersionPrimary=null;Go.length=0}var Es=jt.ReactCurrentDispatcher,Ko=jt.ReactCurrentBatchConfig,ir=0,X=null,ae=null,le=null,Js=!1,yn=!1,Fn=0,Dm=0;function fe(){throw Error($(321))}function Gi(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rt(e[r],t[r]))return!1;return!0}function Ki(e,t,r,n,s,a){if(ir=a,X=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Es.current=e===null||e.memoizedState===null?Qm:Ym,e=r(n,s),yn){a=0;do{if(yn=!1,Fn=0,25<=a)throw Error($(301));a+=1,le=ae=null,t.updateQueue=null,Es.current=Xm,e=r(n,s)}while(yn)}if(Es.current=Qs,t=ae!==null&&ae.next!==null,ir=0,le=ae=X=null,Js=!1,t)throw Error($(300));return e}function Ji(){var e=Fn!==0;return Fn=0,e}function st(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return le===null?X.memoizedState=le=e:le=le.next=e,le}function He(){if(ae===null){var e=X.alternate;e=e!==null?e.memoizedState:null}else e=ae.next;var t=le===null?X.memoizedState:le.next;if(t!==null)le=t,ae=e;else{if(e===null)throw Error($(310));ae=e,e={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},le===null?X.memoizedState=le=e:le=le.next=e}return le}function Bn(e,t){return typeof t=="function"?t(e):t}function Jo(e){var t=He(),r=t.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=e;var n=ae,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=i=null,c=null,u=a;do{var h=u.lane;if((ir&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var m={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,i=n):c=c.next=m,X.lanes|=h,lr|=h}u=u.next}while(u!==null&&u!==a);c===null?i=n:c.next=l,rt(n,t.memoizedState)||(Ce=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,X.lanes|=a,lr|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Qo(e){var t=He(),r=t.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);rt(a,t.memoizedState)||(Ce=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function fd(){}function gd(e,t){var r=X,n=He(),s=t(),a=!rt(n.memoizedState,s);if(a&&(n.memoizedState=s,Ce=!0),n=n.queue,Qi(bd.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||le!==null&&le.memoizedState.tag&1){if(r.flags|=2048,Vn(9,xd.bind(null,r,n,s,t),void 0,null),ce===null)throw Error($(349));ir&30||pd(r,t,s)}return s}function pd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=X.updateQueue,t===null?(t={lastEffect:null,stores:null},X.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function xd(e,t,r,n){t.value=r,t.getSnapshot=n,vd(t)&&yd(e)}function bd(e,t,r){return r(function(){vd(t)&&yd(e)})}function vd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rt(e,r)}catch{return!0}}function yd(e){var t=yt(e,1);t!==null&&tt(t,e,1,-1)}function sc(e){var t=st();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:e},t.queue=e,e=e.dispatch=Jm.bind(null,X,e),[t.memoizedState,e]}function Vn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=X.updateQueue,t===null?(t={lastEffect:null,stores:null},X.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function wd(){return He().memoizedState}function Cs(e,t,r,n){var s=st();X.flags|=e,s.memoizedState=Vn(1|t,r,void 0,n===void 0?null:n)}function go(e,t,r,n){var s=He();n=n===void 0?null:n;var a=void 0;if(ae!==null){var i=ae.memoizedState;if(a=i.destroy,n!==null&&Gi(n,i.deps)){s.memoizedState=Vn(t,r,a,n);return}}X.flags|=e,s.memoizedState=Vn(1|t,r,a,n)}function oc(e,t){return Cs(8390656,8,e,t)}function Qi(e,t){return go(2048,8,e,t)}function jd(e,t){return go(4,2,e,t)}function Nd(e,t){return go(4,4,e,t)}function _d(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sd(e,t,r){return r=r!=null?r.concat([e]):null,go(4,4,_d.bind(null,t,e),r)}function Yi(){}function Ed(e,t){var r=He();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Gi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Cd(e,t){var r=He();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Gi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Pd(e,t,r){return ir&21?(rt(r,t)||(r=Ou(),X.lanes|=r,lr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ce=!0),e.memoizedState=r)}function Gm(e,t){var r=W;W=r!==0&&4>r?r:4,e(!0);var n=Ko.transition;Ko.transition={};try{e(!1),t()}finally{W=r,Ko.transition=n}}function $d(){return He().memoizedState}function Km(e,t,r){var n=Ft(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Td(e))kd(t,r);else if(r=dd(e,t,r,n),r!==null){var s=we();tt(r,e,n,s),Ad(r,t,n)}}function Jm(e,t,r){var n=Ft(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Td(e))kd(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,rt(l,i)){var c=t.interleaved;c===null?(s.next=s,Vi(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=dd(e,t,s,n),r!==null&&(s=we(),tt(r,e,n,s),Ad(r,t,n))}}function Td(e){var t=e.alternate;return e===X||t!==null&&t===X}function kd(e,t){yn=Js=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ad(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Pi(e,r)}}var Qs={readContext:qe,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useInsertionEffect:fe,useLayoutEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useMutableSource:fe,useSyncExternalStore:fe,useId:fe,unstable_isNewReconciler:!1},Qm={readContext:qe,useCallback:function(e,t){return st().memoizedState=[e,t===void 0?null:t],e},useContext:qe,useEffect:oc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Cs(4194308,4,_d.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Cs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cs(4,2,e,t)},useMemo:function(e,t){var r=st();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=st();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Km.bind(null,X,e),[n.memoizedState,e]},useRef:function(e){var t=st();return e={current:e},t.memoizedState=e},useState:sc,useDebugValue:Yi,useDeferredValue:function(e){return st().memoizedState=e},useTransition:function(){var e=sc(!1),t=e[0];return e=Gm.bind(null,e[1]),st().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=X,s=st();if(Q){if(r===void 0)throw Error($(407));r=r()}else{if(r=t(),ce===null)throw Error($(349));ir&30||pd(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,oc(bd.bind(null,n,a,e),[e]),n.flags|=2048,Vn(9,xd.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=st(),t=ce.identifierPrefix;if(Q){var r=pt,n=gt;r=(n&~(1<<32-et(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Fn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Dm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ym={readContext:qe,useCallback:Ed,useContext:qe,useEffect:Qi,useImperativeHandle:Sd,useInsertionEffect:jd,useLayoutEffect:Nd,useMemo:Cd,useReducer:Jo,useRef:wd,useState:function(){return Jo(Bn)},useDebugValue:Yi,useDeferredValue:function(e){var t=He();return Pd(t,ae.memoizedState,e)},useTransition:function(){var e=Jo(Bn)[0],t=He().memoizedState;return[e,t]},useMutableSource:fd,useSyncExternalStore:gd,useId:$d,unstable_isNewReconciler:!1},Xm={readContext:qe,useCallback:Ed,useContext:qe,useEffect:Qi,useImperativeHandle:Sd,useInsertionEffect:jd,useLayoutEffect:Nd,useMemo:Cd,useReducer:Qo,useRef:wd,useState:function(){return Qo(Bn)},useDebugValue:Yi,useDeferredValue:function(e){var t=He();return ae===null?t.memoizedState=e:Pd(t,ae.memoizedState,e)},useTransition:function(){var e=Qo(Bn)[0],t=He().memoizedState;return[e,t]},useMutableSource:fd,useSyncExternalStore:gd,useId:$d,unstable_isNewReconciler:!1};function Qe(e,t){if(e&&e.defaultProps){t=Z({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ba(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Z({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var po={isMounted:function(e){return(e=e._reactInternals)?dr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=we(),s=Ft(e),a=xt(n,s);a.payload=t,r!=null&&(a.callback=r),t=Mt(e,a,s),t!==null&&(tt(t,e,s,n),Ss(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=we(),s=Ft(e),a=xt(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Mt(e,a,s),t!==null&&(tt(t,e,s,n),Ss(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=we(),n=Ft(e),s=xt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Mt(e,s,n),t!==null&&(tt(t,e,n,r),Ss(t,e,n))}};function ac(e,t,r,n,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,i):t.prototype&&t.prototype.isPureReactComponent?!Rn(r,n)||!Rn(s,a):!0}function Od(e,t,r){var n=!1,s=Wt,a=t.contextType;return typeof a=="object"&&a!==null?a=qe(a):(s=$e(t)?or:xe.current,n=t.contextTypes,a=(n=n!=null)?Br(e,s):Wt),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=po,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function ic(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function Va(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Wi(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=qe(a):(a=$e(t)?or:xe.current,s.context=Br(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Ba(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&po.enqueueReplaceState(s,s.state,null),Gs(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Hr(e,t){try{var r="",n=t;do r+=E0(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Yo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Wa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Zm=typeof WeakMap=="function"?WeakMap:Map;function Rd(e,t,r){r=xt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xs||(Xs=!0,Za=n),Wa(e,t)},r}function Id(e,t,r){r=xt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Wa(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Wa(e,t),typeof n!="function"&&(Ut===null?Ut=new Set([this]):Ut.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function lc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Zm;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=ff.bind(null,e,t,r),t.then(e,e))}function cc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uc(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=xt(-1,1),t.tag=2,Mt(r,t,1))),r.lanes|=1),e)}var ef=jt.ReactCurrentOwner,Ce=!1;function ye(e,t,r,n){t.child=e===null?ud(t,null,r,n):Wr(t,e.child,r,n)}function dc(e,t,r,n,s){r=r.render;var a=t.ref;return Mr(t,s),n=Ki(e,t,r,n,a,s),r=Ji(),e!==null&&!Ce?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wt(e,t,s)):(Q&&r&&zi(t),t.flags|=1,ye(e,t,n,s),t.child)}function hc(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!ol(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,zd(e,t,a,n,s)):(e=ks(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:Rn,r(i,n)&&e.ref===t.ref)return wt(e,t,s)}return t.flags|=1,e=Bt(a,n),e.ref=t.ref,e.return=t,t.child=e}function zd(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(Rn(a,n)&&e.ref===t.ref)if(Ce=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(Ce=!0);else return t.lanes=e.lanes,wt(e,t,s)}return qa(e,t,r,n,s)}function Ld(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},D(Or,Ae),Ae|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,D(Or,Ae),Ae|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,D(Or,Ae),Ae|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,D(Or,Ae),Ae|=n;return ye(e,t,s,r),t.child}function Md(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function qa(e,t,r,n,s){var a=$e(r)?or:xe.current;return a=Br(t,a),Mr(t,s),r=Ki(e,t,r,n,a,s),n=Ji(),e!==null&&!Ce?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wt(e,t,s)):(Q&&n&&zi(t),t.flags|=1,ye(e,t,r,s),t.child)}function mc(e,t,r,n,s){if($e(r)){var a=!0;Vs(t)}else a=!1;if(Mr(t,s),t.stateNode===null)Ps(e,t),Od(t,r,n),Va(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=qe(u):(u=$e(r)?or:xe.current,u=Br(t,u));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&ic(t,i,n,u),Pt=!1;var f=t.memoizedState;i.state=f,Gs(t,n,i,s),c=t.memoizedState,l!==n||f!==c||Pe.current||Pt?(typeof h=="function"&&(Ba(t,r,h,n),c=t.memoizedState),(l=Pt||ac(t,r,l,n,f,c,u))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,hd(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Qe(t.type,l),i.props=u,m=t.pendingProps,f=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=qe(c):(c=$e(r)?or:xe.current,c=Br(t,c));var b=r.getDerivedStateFromProps;(h=typeof b=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||f!==c)&&ic(t,i,n,c),Pt=!1,f=t.memoizedState,i.state=f,Gs(t,n,i,s);var y=t.memoizedState;l!==m||f!==y||Pe.current||Pt?(typeof b=="function"&&(Ba(t,r,b,n),y=t.memoizedState),(u=Pt||ac(t,r,u,n,f,y,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),i.props=n,i.state=y,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Ha(e,t,r,n,a,s)}function Ha(e,t,r,n,s,a){Md(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&Xl(t,r,!1),wt(e,t,a);n=t.stateNode,ef.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Wr(t,e.child,null,a),t.child=Wr(t,null,l,a)):ye(e,t,l,a),t.memoizedState=n.state,s&&Xl(t,r,!0),t.child}function Ud(e){var t=e.stateNode;t.pendingContext?Yl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yl(e,t.context,!1),qi(e,t.containerInfo)}function fc(e,t,r,n,s){return Vr(),Mi(s),t.flags|=256,ye(e,t,r,n),t.child}var Da={dehydrated:null,treeContext:null,retryLane:0};function Ga(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fd(e,t,r){var n=t.pendingProps,s=Y.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),D(Y,s&1),e===null)return Ua(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,a?(n=t.mode,a=t.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=vo(i,n,0,null),e=sr(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ga(r),t.memoizedState=Da,e):Xi(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return tf(e,t,i,n,l,s,r);if(a){a=n.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Bt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Bt(l,a):(a=sr(a,i,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,i=e.child.memoizedState,i=i===null?Ga(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=Da,n}return a=e.child,e=a.sibling,n=Bt(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Xi(e,t){return t=vo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ds(e,t,r,n){return n!==null&&Mi(n),Wr(t,e.child,null,r),e=Xi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tf(e,t,r,n,s,a,i){if(r)return t.flags&256?(t.flags&=-257,n=Yo(Error($(422))),ds(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=vo({mode:"visible",children:n.children},s,0,null),a=sr(a,s,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Wr(t,e.child,null,i),t.child.memoizedState=Ga(i),t.memoizedState=Da,a);if(!(t.mode&1))return ds(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error($(419)),n=Yo(a,n,void 0),ds(e,t,i,n)}if(l=(i&e.childLanes)!==0,Ce||l){if(n=ce,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,yt(e,s),tt(n,e,s,-1))}return sl(),n=Yo(Error($(421))),ds(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=gf.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Oe=Lt(s.nextSibling),Re=t,Q=!0,Ze=null,e!==null&&(Ue[Fe++]=gt,Ue[Fe++]=pt,Ue[Fe++]=ar,gt=e.id,pt=e.overflow,ar=t),t=Xi(t,n.children),t.flags|=4096,t)}function gc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Fa(e.return,t,r)}function Xo(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Bd(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(ye(e,t,n.children,r),n=Y.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gc(e,r,t);else if(e.tag===19)gc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(D(Y,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ks(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Xo(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ks(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Xo(t,!0,r,null,a);break;case"together":Xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ps(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),lr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,r=Bt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Bt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function rf(e,t,r){switch(t.tag){case 3:Ud(t),Vr();break;case 5:md(t);break;case 1:$e(t.type)&&Vs(t);break;case 4:qi(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;D(Hs,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(D(Y,Y.current&1),t.flags|=128,null):r&t.child.childLanes?Fd(e,t,r):(D(Y,Y.current&1),e=wt(e,t,r),e!==null?e.sibling:null);D(Y,Y.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Bd(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),D(Y,Y.current),n)break;return null;case 22:case 23:return t.lanes=0,Ld(e,t,r)}return wt(e,t,r)}var Vd,Ka,Wd,qd;Vd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ka=function(){};Wd=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,rr(lt.current);var a=null;switch(r){case"input":s=pa(e,s),n=pa(e,n),a=[];break;case"select":s=Z({},s,{value:void 0}),n=Z({},n,{value:void 0}),a=[];break;case"textarea":s=va(e,s),n=va(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Fs)}wa(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&K("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};qd=function(e,t,r,n){r!==n&&(t.flags|=4)};function an(e,t){if(!Q)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function nf(e,t,r){var n=t.pendingProps;switch(Li(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(t),null;case 1:return $e(t.type)&&Bs(),ge(t),null;case 3:return n=t.stateNode,qr(),J(Pe),J(xe),Di(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(cs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ze!==null&&(ri(Ze),Ze=null))),Ka(e,t),ge(t),null;case 5:Hi(t);var s=rr(Un.current);if(r=t.type,e!==null&&t.stateNode!=null)Wd(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error($(166));return ge(t),null}if(e=rr(lt.current),cs(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[at]=t,n[Ln]=a,e=(t.mode&1)!==0,r){case"dialog":K("cancel",n),K("close",n);break;case"iframe":case"object":case"embed":K("load",n);break;case"video":case"audio":for(s=0;s<mn.length;s++)K(mn[s],n);break;case"source":K("error",n);break;case"img":case"image":case"link":K("error",n),K("load",n);break;case"details":K("toggle",n);break;case"input":_l(n,a),K("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},K("invalid",n);break;case"textarea":El(n,a),K("invalid",n)}wa(r,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&ls(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&ls(n.textContent,l,e),s=["children",""+l]):Cn.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&K("scroll",n)}switch(r){case"input":es(n),Sl(n,a,!0);break;case"textarea":es(n),Cl(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Fs)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[at]=t,e[Ln]=n,Vd(e,t,!1,!1),t.stateNode=e;e:{switch(i=ja(r,n),r){case"dialog":K("cancel",e),K("close",e),s=n;break;case"iframe":case"object":case"embed":K("load",e),s=n;break;case"video":case"audio":for(s=0;s<mn.length;s++)K(mn[s],e);s=n;break;case"source":K("error",e),s=n;break;case"img":case"image":case"link":K("error",e),K("load",e),s=n;break;case"details":K("toggle",e),s=n;break;case"input":_l(e,n),s=pa(e,n),K("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Z({},n,{value:void 0}),K("invalid",e);break;case"textarea":El(e,n),s=va(e,n),K("invalid",e);break;default:s=n}wa(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?wu(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vu(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Pn(e,c):typeof c=="number"&&Pn(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Cn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&K("scroll",e):c!=null&&ji(e,a,c,i))}switch(r){case"input":es(e),Sl(e,n,!1);break;case"textarea":es(e),Cl(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Vt(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Rr(e,!!n.multiple,a,!1):n.defaultValue!=null&&Rr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Fs)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ge(t),null;case 6:if(e&&t.stateNode!=null)qd(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error($(166));if(r=rr(Un.current),rr(lt.current),cs(t)){if(n=t.stateNode,r=t.memoizedProps,n[at]=t,(a=n.nodeValue!==r)&&(e=Re,e!==null))switch(e.tag){case 3:ls(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ls(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[at]=t,t.stateNode=n}return ge(t),null;case 13:if(J(Y),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Q&&Oe!==null&&t.mode&1&&!(t.flags&128))ld(),Vr(),t.flags|=98560,a=!1;else if(a=cs(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error($(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error($(317));a[at]=t}else Vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ge(t),a=!1}else Ze!==null&&(ri(Ze),Ze=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Y.current&1?ie===0&&(ie=3):sl())),t.updateQueue!==null&&(t.flags|=4),ge(t),null);case 4:return qr(),Ka(e,t),e===null&&In(t.stateNode.containerInfo),ge(t),null;case 10:return Bi(t.type._context),ge(t),null;case 17:return $e(t.type)&&Bs(),ge(t),null;case 19:if(J(Y),a=t.memoizedState,a===null)return ge(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)an(a,!1);else{if(ie!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ks(e),i!==null){for(t.flags|=128,an(a,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return D(Y,Y.current&1|2),t.child}e=e.sibling}a.tail!==null&&te()>Dr&&(t.flags|=128,n=!0,an(a,!1),t.lanes=4194304)}else{if(!n)if(e=Ks(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),an(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Q)return ge(t),null}else 2*te()-a.renderingStartTime>Dr&&r!==1073741824&&(t.flags|=128,n=!0,an(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,r=Y.current,D(Y,n?r&1|2:r&1),t):(ge(t),null);case 22:case 23:return nl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ae&1073741824&&(ge(t),t.subtreeFlags&6&&(t.flags|=8192)):ge(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function sf(e,t){switch(Li(t),t.tag){case 1:return $e(t.type)&&Bs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qr(),J(Pe),J(xe),Di(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hi(t),null;case 13:if(J(Y),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));Vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(Y),null;case 4:return qr(),null;case 10:return Bi(t.type._context),null;case 22:case 23:return nl(),null;case 24:return null;default:return null}}var hs=!1,pe=!1,of=typeof WeakSet=="function"?WeakSet:Set,A=null;function Ar(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ee(e,t,n)}else r.current=null}function Ja(e,t,r){try{r()}catch(n){ee(e,t,n)}}var pc=!1;function af(e,t){if(Aa=Ls,e=Ju(),Ii(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,h=0,m=e,f=null;t:for(;;){for(var b;m!==r||s!==0&&m.nodeType!==3||(l=i+s),m!==a||n!==0&&m.nodeType!==3||(c=i+n),m.nodeType===3&&(i+=m.nodeValue.length),(b=m.firstChild)!==null;)f=m,m=b;for(;;){if(m===e)break t;if(f===r&&++u===s&&(l=i),f===a&&++h===n&&(c=i),(b=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=b}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Oa={focusedElem:e,selectionRange:r},Ls=!1,A=t;A!==null;)if(t=A,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,A=e;else for(;A!==null;){t=A;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,j=y.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:Qe(t.type,w),j);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(v){ee(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,A=e;break}A=t.return}return y=pc,pc=!1,y}function wn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Ja(t,r,a)}s=s.next}while(s!==n)}}function xo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Qa(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Hd(e){var t=e.alternate;t!==null&&(e.alternate=null,Hd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[at],delete t[Ln],delete t[za],delete t[Vm],delete t[Wm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dd(e){return e.tag===5||e.tag===3||e.tag===4}function xc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ya(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Fs));else if(n!==4&&(e=e.child,e!==null))for(Ya(e,t,r),e=e.sibling;e!==null;)Ya(e,t,r),e=e.sibling}function Xa(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Xa(e,t,r),e=e.sibling;e!==null;)Xa(e,t,r),e=e.sibling}var ue=null,Ye=!1;function Nt(e,t,r){for(r=r.child;r!==null;)Gd(e,t,r),r=r.sibling}function Gd(e,t,r){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(lo,r)}catch{}switch(r.tag){case 5:pe||Ar(r,t);case 6:var n=ue,s=Ye;ue=null,Nt(e,t,r),ue=n,Ye=s,ue!==null&&(Ye?(e=ue,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ue.removeChild(r.stateNode));break;case 18:ue!==null&&(Ye?(e=ue,r=r.stateNode,e.nodeType===8?Ho(e.parentNode,r):e.nodeType===1&&Ho(e,r),An(e)):Ho(ue,r.stateNode));break;case 4:n=ue,s=Ye,ue=r.stateNode.containerInfo,Ye=!0,Nt(e,t,r),ue=n,Ye=s;break;case 0:case 11:case 14:case 15:if(!pe&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&Ja(r,t,i),s=s.next}while(s!==n)}Nt(e,t,r);break;case 1:if(!pe&&(Ar(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ee(r,t,l)}Nt(e,t,r);break;case 21:Nt(e,t,r);break;case 22:r.mode&1?(pe=(n=pe)||r.memoizedState!==null,Nt(e,t,r),pe=n):Nt(e,t,r);break;default:Nt(e,t,r)}}function bc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new of),t.forEach(function(n){var s=pf.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ke(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:ue=l.stateNode,Ye=!1;break e;case 3:ue=l.stateNode.containerInfo,Ye=!0;break e;case 4:ue=l.stateNode.containerInfo,Ye=!0;break e}l=l.return}if(ue===null)throw Error($(160));Gd(a,i,s),ue=null,Ye=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ee(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Kd(t,e),t=t.sibling}function Kd(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ke(t,e),nt(e),n&4){try{wn(3,e,e.return),xo(3,e)}catch(w){ee(e,e.return,w)}try{wn(5,e,e.return)}catch(w){ee(e,e.return,w)}}break;case 1:Ke(t,e),nt(e),n&512&&r!==null&&Ar(r,r.return);break;case 5:if(Ke(t,e),nt(e),n&512&&r!==null&&Ar(r,r.return),e.flags&32){var s=e.stateNode;try{Pn(s,"")}catch(w){ee(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&pu(s,a),ja(l,i);var u=ja(l,a);for(i=0;i<c.length;i+=2){var h=c[i],m=c[i+1];h==="style"?wu(s,m):h==="dangerouslySetInnerHTML"?vu(s,m):h==="children"?Pn(s,m):ji(s,h,m,u)}switch(l){case"input":xa(s,a);break;case"textarea":xu(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?Rr(s,!!a.multiple,b,!1):f!==!!a.multiple&&(a.defaultValue!=null?Rr(s,!!a.multiple,a.defaultValue,!0):Rr(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ln]=a}catch(w){ee(e,e.return,w)}}break;case 6:if(Ke(t,e),nt(e),n&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(w){ee(e,e.return,w)}}break;case 3:if(Ke(t,e),nt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{An(t.containerInfo)}catch(w){ee(e,e.return,w)}break;case 4:Ke(t,e),nt(e);break;case 13:Ke(t,e),nt(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(tl=te())),n&4&&bc(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(pe=(u=pe)||h,Ke(t,e),pe=u):Ke(t,e),nt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(A=e,h=e.child;h!==null;){for(m=A=h;A!==null;){switch(f=A,b=f.child,f.tag){case 0:case 11:case 14:case 15:wn(4,f,f.return);break;case 1:Ar(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){ee(n,r,w)}}break;case 5:Ar(f,f.return);break;case 22:if(f.memoizedState!==null){yc(m);continue}}b!==null?(b.return=f,A=b):yc(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=yu("display",i))}catch(w){ee(e,e.return,w)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(w){ee(e,e.return,w)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ke(t,e),nt(e),n&4&&bc(e);break;case 21:break;default:Ke(t,e),nt(e)}}function nt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Dd(r)){var n=r;break e}r=r.return}throw Error($(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Pn(s,""),n.flags&=-33);var a=xc(e);Xa(e,a,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=xc(e);Ya(e,l,i);break;default:throw Error($(161))}}catch(c){ee(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lf(e,t,r){A=e,Jd(e)}function Jd(e,t,r){for(var n=(e.mode&1)!==0;A!==null;){var s=A,a=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||hs;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||pe;l=hs;var u=pe;if(hs=i,(pe=c)&&!u)for(A=s;A!==null;)i=A,c=i.child,i.tag===22&&i.memoizedState!==null?wc(s):c!==null?(c.return=i,A=c):wc(s);for(;a!==null;)A=a,Jd(a),a=a.sibling;A=s,hs=l,pe=u}vc(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,A=a):vc(e)}}function vc(e){for(;A!==null;){var t=A;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pe||xo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!pe)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Qe(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&nc(t,a,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}nc(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&An(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}pe||t.flags&512&&Qa(t)}catch(f){ee(t,t.return,f)}}if(t===e){A=null;break}if(r=t.sibling,r!==null){r.return=t.return,A=r;break}A=t.return}}function yc(e){for(;A!==null;){var t=A;if(t===e){A=null;break}var r=t.sibling;if(r!==null){r.return=t.return,A=r;break}A=t.return}}function wc(e){for(;A!==null;){var t=A;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{xo(4,t)}catch(c){ee(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ee(t,s,c)}}var a=t.return;try{Qa(t)}catch(c){ee(t,a,c)}break;case 5:var i=t.return;try{Qa(t)}catch(c){ee(t,i,c)}}}catch(c){ee(t,t.return,c)}if(t===e){A=null;break}var l=t.sibling;if(l!==null){l.return=t.return,A=l;break}A=t.return}}var cf=Math.ceil,Ys=jt.ReactCurrentDispatcher,Zi=jt.ReactCurrentOwner,Ve=jt.ReactCurrentBatchConfig,B=0,ce=null,ne=null,de=0,Ae=0,Or=Ht(0),ie=0,Wn=null,lr=0,bo=0,el=0,jn=null,Se=null,tl=0,Dr=1/0,ht=null,Xs=!1,Za=null,Ut=null,ms=!1,Ot=null,Zs=0,Nn=0,ei=null,$s=-1,Ts=0;function we(){return B&6?te():$s!==-1?$s:$s=te()}function Ft(e){return e.mode&1?B&2&&de!==0?de&-de:Hm.transition!==null?(Ts===0&&(Ts=Ou()),Ts):(e=W,e!==0||(e=window.event,e=e===void 0?16:Fu(e.type)),e):1}function tt(e,t,r,n){if(50<Nn)throw Nn=0,ei=null,Error($(185));Dn(e,r,n),(!(B&2)||e!==ce)&&(e===ce&&(!(B&2)&&(bo|=r),ie===4&&Tt(e,de)),Te(e,n),r===1&&B===0&&!(t.mode&1)&&(Dr=te()+500,fo&&Dt()))}function Te(e,t){var r=e.callbackNode;H0(e,t);var n=zs(e,e===ce?de:0);if(n===0)r!==null&&Tl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Tl(r),t===1)e.tag===0?qm(jc.bind(null,e)):od(jc.bind(null,e)),Fm(function(){!(B&6)&&Dt()}),r=null;else{switch(Ru(n)){case 1:r=Ci;break;case 4:r=ku;break;case 16:r=Is;break;case 536870912:r=Au;break;default:r=Is}r=nh(r,Qd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Qd(e,t){if($s=-1,Ts=0,B&6)throw Error($(327));var r=e.callbackNode;if(Ur()&&e.callbackNode!==r)return null;var n=zs(e,e===ce?de:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=eo(e,n);else{t=n;var s=B;B|=2;var a=Xd();(ce!==e||de!==t)&&(ht=null,Dr=te()+500,nr(e,t));do try{hf();break}catch(l){Yd(e,l)}while(!0);Fi(),Ys.current=a,B=s,ne!==null?t=0:(ce=null,de=0,t=ie)}if(t!==0){if(t===2&&(s=Ca(e),s!==0&&(n=s,t=ti(e,s))),t===1)throw r=Wn,nr(e,0),Tt(e,n),Te(e,te()),r;if(t===6)Tt(e,n);else{if(s=e.current.alternate,!(n&30)&&!uf(s)&&(t=eo(e,n),t===2&&(a=Ca(e),a!==0&&(n=a,t=ti(e,a))),t===1))throw r=Wn,nr(e,0),Tt(e,n),Te(e,te()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error($(345));case 2:Yt(e,Se,ht);break;case 3:if(Tt(e,n),(n&130023424)===n&&(t=tl+500-te(),10<t)){if(zs(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){we(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ia(Yt.bind(null,e,Se,ht),t);break}Yt(e,Se,ht);break;case 4:if(Tt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-et(n);a=1<<i,i=t[i],i>s&&(s=i),n&=~a}if(n=s,n=te()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*cf(n/1960))-n,10<n){e.timeoutHandle=Ia(Yt.bind(null,e,Se,ht),n);break}Yt(e,Se,ht);break;case 5:Yt(e,Se,ht);break;default:throw Error($(329))}}}return Te(e,te()),e.callbackNode===r?Qd.bind(null,e):null}function ti(e,t){var r=jn;return e.current.memoizedState.isDehydrated&&(nr(e,t).flags|=256),e=eo(e,t),e!==2&&(t=Se,Se=r,t!==null&&ri(t)),e}function ri(e){Se===null?Se=e:Se.push.apply(Se,e)}function uf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!rt(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tt(e,t){for(t&=~el,t&=~bo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-et(t),n=1<<r;e[r]=-1,t&=~n}}function jc(e){if(B&6)throw Error($(327));Ur();var t=zs(e,0);if(!(t&1))return Te(e,te()),null;var r=eo(e,t);if(e.tag!==0&&r===2){var n=Ca(e);n!==0&&(t=n,r=ti(e,n))}if(r===1)throw r=Wn,nr(e,0),Tt(e,t),Te(e,te()),r;if(r===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yt(e,Se,ht),Te(e,te()),null}function rl(e,t){var r=B;B|=1;try{return e(t)}finally{B=r,B===0&&(Dr=te()+500,fo&&Dt())}}function cr(e){Ot!==null&&Ot.tag===0&&!(B&6)&&Ur();var t=B;B|=1;var r=Ve.transition,n=W;try{if(Ve.transition=null,W=1,e)return e()}finally{W=n,Ve.transition=r,B=t,!(B&6)&&Dt()}}function nl(){Ae=Or.current,J(Or)}function nr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Um(r)),ne!==null)for(r=ne.return;r!==null;){var n=r;switch(Li(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bs();break;case 3:qr(),J(Pe),J(xe),Di();break;case 5:Hi(n);break;case 4:qr();break;case 13:J(Y);break;case 19:J(Y);break;case 10:Bi(n.type._context);break;case 22:case 23:nl()}r=r.return}if(ce=e,ne=e=Bt(e.current,null),de=Ae=t,ie=0,Wn=null,el=bo=lr=0,Se=jn=null,tr!==null){for(t=0;t<tr.length;t++)if(r=tr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=s,n.next=i}r.pending=n}tr=null}return e}function Yd(e,t){do{var r=ne;try{if(Fi(),Es.current=Qs,Js){for(var n=X.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Js=!1}if(ir=0,le=ae=X=null,yn=!1,Fn=0,Zi.current=null,r===null||r.return===null){ie=1,Wn=t,ne=null;break}e:{var a=e,i=r.return,l=r,c=t;if(t=de,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var b=cc(i);if(b!==null){b.flags&=-257,uc(b,i,l,a,t),b.mode&1&&lc(a,u,t),t=b,c=u;var y=t.updateQueue;if(y===null){var w=new Set;w.add(c),t.updateQueue=w}else y.add(c);break e}else{if(!(t&1)){lc(a,u,t),sl();break e}c=Error($(426))}}else if(Q&&l.mode&1){var j=cc(i);if(j!==null){!(j.flags&65536)&&(j.flags|=256),uc(j,i,l,a,t),Mi(Hr(c,l));break e}}a=c=Hr(c,l),ie!==4&&(ie=2),jn===null?jn=[a]:jn.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=Rd(a,c,t);rc(a,g);break e;case 1:l=c;var p=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ut===null||!Ut.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t;var v=Id(a,l,t);rc(a,v);break e}}a=a.return}while(a!==null)}eh(r)}catch(S){t=S,ne===r&&r!==null&&(ne=r=r.return);continue}break}while(!0)}function Xd(){var e=Ys.current;return Ys.current=Qs,e===null?Qs:e}function sl(){(ie===0||ie===3||ie===2)&&(ie=4),ce===null||!(lr&268435455)&&!(bo&268435455)||Tt(ce,de)}function eo(e,t){var r=B;B|=2;var n=Xd();(ce!==e||de!==t)&&(ht=null,nr(e,t));do try{df();break}catch(s){Yd(e,s)}while(!0);if(Fi(),B=r,Ys.current=n,ne!==null)throw Error($(261));return ce=null,de=0,ie}function df(){for(;ne!==null;)Zd(ne)}function hf(){for(;ne!==null&&!z0();)Zd(ne)}function Zd(e){var t=rh(e.alternate,e,Ae);e.memoizedProps=e.pendingProps,t===null?eh(e):ne=t,Zi.current=null}function eh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=sf(r,t),r!==null){r.flags&=32767,ne=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ie=6,ne=null;return}}else if(r=nf(r,t,Ae),r!==null){ne=r;return}if(t=t.sibling,t!==null){ne=t;return}ne=t=e}while(t!==null);ie===0&&(ie=5)}function Yt(e,t,r){var n=W,s=Ve.transition;try{Ve.transition=null,W=1,mf(e,t,r,n)}finally{Ve.transition=s,W=n}return null}function mf(e,t,r,n){do Ur();while(Ot!==null);if(B&6)throw Error($(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(D0(e,a),e===ce&&(ne=ce=null,de=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ms||(ms=!0,nh(Is,function(){return Ur(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ve.transition,Ve.transition=null;var i=W;W=1;var l=B;B|=4,Zi.current=null,af(e,r),Kd(r,e),Am(Oa),Ls=!!Aa,Oa=Aa=null,e.current=r,lf(r),L0(),B=l,W=i,Ve.transition=a}else e.current=r;if(ms&&(ms=!1,Ot=e,Zs=s),a=e.pendingLanes,a===0&&(Ut=null),F0(r.stateNode),Te(e,te()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Xs)throw Xs=!1,e=Za,Za=null,e;return Zs&1&&e.tag!==0&&Ur(),a=e.pendingLanes,a&1?e===ei?Nn++:(Nn=0,ei=e):Nn=0,Dt(),null}function Ur(){if(Ot!==null){var e=Ru(Zs),t=Ve.transition,r=W;try{if(Ve.transition=null,W=16>e?16:e,Ot===null)var n=!1;else{if(e=Ot,Ot=null,Zs=0,B&6)throw Error($(331));var s=B;for(B|=4,A=e.current;A!==null;){var a=A,i=a.child;if(A.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(A=u;A!==null;){var h=A;switch(h.tag){case 0:case 11:case 15:wn(8,h,a)}var m=h.child;if(m!==null)m.return=h,A=m;else for(;A!==null;){h=A;var f=h.sibling,b=h.return;if(Hd(h),h===u){A=null;break}if(f!==null){f.return=b,A=f;break}A=b}}}var y=a.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var j=w.sibling;w.sibling=null,w=j}while(w!==null)}}A=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,A=i;else e:for(;A!==null;){if(a=A,a.flags&2048)switch(a.tag){case 0:case 11:case 15:wn(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,A=g;break e}A=a.return}}var p=e.current;for(A=p;A!==null;){i=A;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,A=x;else e:for(i=p;A!==null;){if(l=A,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xo(9,l)}}catch(S){ee(l,l.return,S)}if(l===i){A=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,A=v;break e}A=l.return}}if(B=s,Dt(),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(lo,e)}catch{}n=!0}return n}finally{W=r,Ve.transition=t}}return!1}function Nc(e,t,r){t=Hr(r,t),t=Rd(e,t,1),e=Mt(e,t,1),t=we(),e!==null&&(Dn(e,1,t),Te(e,t))}function ee(e,t,r){if(e.tag===3)Nc(e,e,r);else for(;t!==null;){if(t.tag===3){Nc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ut===null||!Ut.has(n))){e=Hr(r,e),e=Id(t,e,1),t=Mt(t,e,1),e=we(),t!==null&&(Dn(t,1,e),Te(t,e));break}}t=t.return}}function ff(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=we(),e.pingedLanes|=e.suspendedLanes&r,ce===e&&(de&r)===r&&(ie===4||ie===3&&(de&130023424)===de&&500>te()-tl?nr(e,0):el|=r),Te(e,t)}function th(e,t){t===0&&(e.mode&1?(t=ns,ns<<=1,!(ns&130023424)&&(ns=4194304)):t=1);var r=we();e=yt(e,t),e!==null&&(Dn(e,t,r),Te(e,r))}function gf(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),th(e,r)}function pf(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error($(314))}n!==null&&n.delete(t),th(e,r)}var rh;rh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pe.current)Ce=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ce=!1,rf(e,t,r);Ce=!!(e.flags&131072)}else Ce=!1,Q&&t.flags&1048576&&ad(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ps(e,t),e=t.pendingProps;var s=Br(t,xe.current);Mr(t,r),s=Ki(null,t,n,e,s,r);var a=Ji();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$e(n)?(a=!0,Vs(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wi(t),s.updater=po,t.stateNode=s,s._reactInternals=t,Va(t,n,e,r),t=Ha(null,t,n,!0,a,r)):(t.tag=0,Q&&a&&zi(t),ye(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ps(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=bf(n),e=Qe(n,e),s){case 0:t=qa(null,t,n,e,r);break e;case 1:t=mc(null,t,n,e,r);break e;case 11:t=dc(null,t,n,e,r);break e;case 14:t=hc(null,t,n,Qe(n.type,e),r);break e}throw Error($(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qe(n,s),qa(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qe(n,s),mc(e,t,n,s,r);case 3:e:{if(Ud(t),e===null)throw Error($(387));n=t.pendingProps,a=t.memoizedState,s=a.element,hd(e,t),Gs(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Hr(Error($(423)),t),t=fc(e,t,n,r,s);break e}else if(n!==s){s=Hr(Error($(424)),t),t=fc(e,t,n,r,s);break e}else for(Oe=Lt(t.stateNode.containerInfo.firstChild),Re=t,Q=!0,Ze=null,r=ud(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Vr(),n===s){t=wt(e,t,r);break e}ye(e,t,n,r)}t=t.child}return t;case 5:return md(t),e===null&&Ua(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Ra(n,s)?i=null:a!==null&&Ra(n,a)&&(t.flags|=32),Md(e,t),ye(e,t,i,r),t.child;case 6:return e===null&&Ua(t),null;case 13:return Fd(e,t,r);case 4:return qi(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Wr(t,null,n,r):ye(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qe(n,s),dc(e,t,n,s,r);case 7:return ye(e,t,t.pendingProps,r),t.child;case 8:return ye(e,t,t.pendingProps.children,r),t.child;case 12:return ye(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,D(Hs,n._currentValue),n._currentValue=i,a!==null)if(rt(a.value,i)){if(a.children===s.children&&!Pe.current){t=wt(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=xt(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Fa(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error($(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Fa(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}ye(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Mr(t,r),s=qe(s),n=n(s),t.flags|=1,ye(e,t,n,r),t.child;case 14:return n=t.type,s=Qe(n,t.pendingProps),s=Qe(n.type,s),hc(e,t,n,s,r);case 15:return zd(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qe(n,s),Ps(e,t),t.tag=1,$e(n)?(e=!0,Vs(t)):e=!1,Mr(t,r),Od(t,n,s),Va(t,n,s,r),Ha(null,t,n,!0,e,r);case 19:return Bd(e,t,r);case 22:return Ld(e,t,r)}throw Error($(156,t.tag))};function nh(e,t){return Tu(e,t)}function xf(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Be(e,t,r,n){return new xf(e,t,r,n)}function ol(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bf(e){if(typeof e=="function")return ol(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_i)return 11;if(e===Si)return 14}return 2}function Bt(e,t){var r=e.alternate;return r===null?(r=Be(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ks(e,t,r,n,s,a){var i=2;if(n=e,typeof e=="function")ol(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Nr:return sr(r.children,s,a,t);case Ni:i=8,s|=8;break;case ha:return e=Be(12,r,t,s|2),e.elementType=ha,e.lanes=a,e;case ma:return e=Be(13,r,t,s),e.elementType=ma,e.lanes=a,e;case fa:return e=Be(19,r,t,s),e.elementType=fa,e.lanes=a,e;case mu:return vo(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case du:i=10;break e;case hu:i=9;break e;case _i:i=11;break e;case Si:i=14;break e;case Ct:i=16,n=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=Be(i,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function sr(e,t,r,n){return e=Be(7,e,n,t),e.lanes=r,e}function vo(e,t,r,n){return e=Be(22,e,n,t),e.elementType=mu,e.lanes=r,e.stateNode={isHidden:!1},e}function Zo(e,t,r){return e=Be(6,e,null,t),e.lanes=r,e}function ea(e,t,r){return t=Be(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vf(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ro(0),this.expirationTimes=Ro(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ro(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function al(e,t,r,n,s,a,i,l,c){return e=new vf(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Be(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wi(a),e}function yf(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function sh(e){if(!e)return Wt;e=e._reactInternals;e:{if(dr(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($e(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var r=e.type;if($e(r))return sd(e,r,t)}return t}function oh(e,t,r,n,s,a,i,l,c){return e=al(r,n,!0,e,s,a,i,l,c),e.context=sh(null),r=e.current,n=we(),s=Ft(r),a=xt(n,s),a.callback=t??null,Mt(r,a,s),e.current.lanes=s,Dn(e,s,n),Te(e,n),e}function yo(e,t,r,n){var s=t.current,a=we(),i=Ft(s);return r=sh(r),t.context===null?t.context=r:t.pendingContext=r,t=xt(a,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Mt(s,t,i),e!==null&&(tt(e,s,i,a),Ss(e,s,i)),i}function to(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _c(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function il(e,t){_c(e,t),(e=e.alternate)&&_c(e,t)}function wf(){return null}var ah=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}wo.prototype.render=ll.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));yo(e,t,null,null)};wo.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cr(function(){yo(null,e,null,null)}),t[vt]=null}};function wo(e){this._internalRoot=e}wo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$t.length&&t!==0&&t<$t[r].priority;r++);$t.splice(r,0,e),r===0&&Uu(e)}};function cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sc(){}function jf(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=to(i);a.call(u)}}var i=oh(t,n,e,0,null,!1,!1,"",Sc);return e._reactRootContainer=i,e[vt]=i.current,In(e.nodeType===8?e.parentNode:e),cr(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=to(c);l.call(u)}}var c=al(e,0,!1,null,null,!1,!1,"",Sc);return e._reactRootContainer=c,e[vt]=c.current,In(e.nodeType===8?e.parentNode:e),cr(function(){yo(t,c,r,n)}),c}function No(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=to(i);l.call(c)}}yo(t,i,e,s)}else i=jf(r,t,e,s,n);return to(i)}Iu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=hn(t.pendingLanes);r!==0&&(Pi(t,r|1),Te(t,te()),!(B&6)&&(Dr=te()+500,Dt()))}break;case 13:cr(function(){var n=yt(e,1);if(n!==null){var s=we();tt(n,e,1,s)}}),il(e,1)}};$i=function(e){if(e.tag===13){var t=yt(e,134217728);if(t!==null){var r=we();tt(t,e,134217728,r)}il(e,134217728)}};zu=function(e){if(e.tag===13){var t=Ft(e),r=yt(e,t);if(r!==null){var n=we();tt(r,e,t,n)}il(e,t)}};Lu=function(){return W};Mu=function(e,t){var r=W;try{return W=e,t()}finally{W=r}};_a=function(e,t,r){switch(t){case"input":if(xa(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=mo(n);if(!s)throw Error($(90));gu(n),xa(n,s)}}}break;case"textarea":xu(e,r);break;case"select":t=r.value,t!=null&&Rr(e,!!r.multiple,t,!1)}};_u=rl;Su=cr;var Nf={usingClientEntryPoint:!1,Events:[Kn,Cr,mo,ju,Nu,rl]},ln={findFiberByHostInstance:er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_f={bundleType:ln.bundleType,version:ln.version,rendererPackageName:ln.rendererPackageName,rendererConfig:ln.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pu(e),e===null?null:e.stateNode},findFiberByHostInstance:ln.findFiberByHostInstance||wf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fs.isDisabled&&fs.supportsFiber)try{lo=fs.inject(_f),it=fs}catch{}}ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nf;ze.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cl(t))throw Error($(200));return yf(e,t,null,r)};ze.createRoot=function(e,t){if(!cl(e))throw Error($(299));var r=!1,n="",s=ah;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=al(e,1,!1,null,null,r,!1,n,s),e[vt]=t.current,In(e.nodeType===8?e.parentNode:e),new ll(t)};ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=Pu(t),e=e===null?null:e.stateNode,e};ze.flushSync=function(e){return cr(e)};ze.hydrate=function(e,t,r){if(!jo(t))throw Error($(200));return No(null,e,t,!0,r)};ze.hydrateRoot=function(e,t,r){if(!cl(e))throw Error($(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",i=ah;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=oh(t,null,e,1,r??null,s,!1,a,i),e[vt]=t.current,In(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new wo(t)};ze.render=function(e,t,r){if(!jo(t))throw Error($(200));return No(null,e,t,!1,r)};ze.unmountComponentAtNode=function(e){if(!jo(e))throw Error($(40));return e._reactRootContainer?(cr(function(){No(null,null,e,!1,function(){e._reactRootContainer=null,e[vt]=null})}),!0):!1};ze.unstable_batchedUpdates=rl;ze.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!jo(r))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return No(e,t,r,!1,n)};ze.version="18.3.1-next-f1338f8080-20240426";function ih(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ih)}catch(e){console.error(e)}}ih(),iu.exports=ze;var Sf=iu.exports,Ec=Sf;ua.createRoot=Ec.createRoot,ua.hydrateRoot=Ec.hydrateRoot;const ct=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"USD"}).format(e),_t={load(e,t){try{return JSON.parse(localStorage.getItem(e)||JSON.stringify(t))}catch{return t}},save(e,t){localStorage.setItem(e,JSON.stringify(t))},del(e){localStorage.removeItem(e)}};function Ef(e,t){const r=new Date(e),s=new Date(t).getTime()-r.getTime();return Math.ceil(s/(1e3*60*60*24))}function d(e,t,r){return e?r:t}const ni=e=>{const t=new Date,n=new Date(e).getTime()-t.getTime();return Math.round(n/(1e3*60*60*24))},Cf=(e,t)=>{const r=new Date(e);r.setHours(0,0,0,0);const n=new Date(t);n.setHours(0,0,0,0);const s=n.getTime()-r.getTime();return Math.ceil(s/(1e3*60*60*24))},Pf=e=>{const t=ni(e);return t<0?{status:"expired",color:"text-red-600",icon:"❌",message:"Servicio Caducado"}:t===0?{status:"expires-today",color:"text-red-600",icon:"⚠️",message:"Caduca Hoy"}:{status:"active",color:"text-red-600",icon:"⏰",message:`${t} ${t===1?"día":"días"} restantes`}};function $f(e){return e.replace(/[^\d]/g,"")}function Tf(e){return{netflix:"Series originales, thrillers, documentales",disney:"Marvel, Star Wars, Pixar, familias",max:"HBO premium, series épicas, películas",prime:"Exclusivas, blockbusters, Amazon",spotify:"Música, podcasts, audiolibros",paramount:"Paramount, Nickelodeon, MTV",apple:"Originales Apple, 4K premium"}[e]||"Contenido premium de entretenimiento"}const ro=[{id:"netflix",name:"Netflix",price:4,billing:"monthly",color:"bg-red-600",logo:"N"},{id:"disney_premium",name:"Disney+ Premium",price:3.75,billing:"monthly",color:"bg-blue-600",logo:"D+"},{id:"disney_standard",name:"Disney+ Standard",price:3.25,billing:"monthly",color:"bg-blue-500",logo:"D+"},{id:"max",name:"Max",price:3,billing:"monthly",color:"bg-purple-700",logo:"MAX"},{id:"vix",name:"ViX",price:2.5,billing:"monthly",color:"bg-orange-500",logo:"ViX"},{id:"prime",name:"Prime Video",price:3,billing:"monthly",color:"bg-sky-700",logo:"PV"},{id:"youtube_premium",name:"YouTube Premium",price:3.35,billing:"monthly",color:"bg-red-700",logo:"YT"},{id:"paramount",name:"Paramount+",price:2.75,billing:"monthly",color:"bg-indigo-600",logo:"P+"},{id:"chatgpt",name:"ChatGPT",price:4,billing:"monthly",color:"bg-zinc-800",logo:"GPT"},{id:"crunchy",name:"Crunchyroll",price:2.5,billing:"monthly",color:"bg-orange-600",logo:"CR"},{id:"spotify",name:"Spotify",price:3.5,billing:"monthly",color:"bg-emerald-600",logo:"SP"},{id:"deezer",name:"Deezer",price:3,billing:"monthly",color:"bg-blue-700",logo:"DZ"},{id:"apple_tv",name:"Apple TV+",price:3.5,billing:"monthly",color:"bg-neutral-900",logo:"ATV"},{id:"canva_pro",name:"Canva Pro",price:2,billing:"monthly",color:"bg-indigo-500",logo:"C"},{id:"canva_pro_annual",name:"Canva Pro (1 año)",price:17.5,billing:"annual",color:"bg-indigo-600",logo:"C"},{id:"microsoft365",name:"Microsoft 365 (1 año)",price:15,billing:"annual",color:"bg-blue-500",logo:"M365"},{id:"autodesk",name:"Autodesk (1 año)",price:12.5,billing:"annual",color:"bg-zinc-700",logo:"AD"},{id:"office365",name:"Office 365 (1 año)",price:15,billing:"annual",color:"bg-blue-600",logo:"O365"}],Cc=[{id:"netflix_disney_std",name:"Netflix + Disney Estándar",price:6,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-blue-500",logo:"N+D"},{id:"netflix_disney_premium",name:"Netflix + Disney Premium",price:6.5,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-blue-600",logo:"N+D+"},{id:"netflix_max",name:"Netflix + Max",price:6,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-purple-700",logo:"N+MAX"},{id:"disney_max",name:"Disney + Max",price:5.5,billing:"monthly",color:"bg-gradient-to-r from-blue-600 to-purple-700",logo:"D+MAX"},{id:"spotify_disney",name:"Spotify + Disney",price:5,billing:"monthly",color:"bg-gradient-to-r from-emerald-600 to-blue-500",logo:"SP+D+"}];function kf({className:e="h-9 w-9"}){return o.jsxs("svg",{viewBox:"0 0 64 64",className:e,"aria-label":"StreamZone logo",role:"img",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"szg",x1:"0",y1:"0",x2:"1",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"#ef4444"}),o.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]})}),o.jsx("rect",{x:"0",y:"0",width:"64",height:"64",rx:"14",fill:"url(#szg)"}),o.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",fontFamily:"Inter,system-ui,Arial",fontSize:"26",fontWeight:"700",fill:"#ffffff",children:"SZ"})]})}function Af({isDark:e,view:t,user:r,adminLogged:n,setView:s,handleLogout:a}){return o.jsxs("header",{className:`sticky top-0 z-50 backdrop-blur-xl border-b transition-all duration-500 ${d(e,"bg-white/95 border-gray-200/50 shadow-lg","bg-zinc-900/95 border-zinc-700/50 shadow-2xl")}`,children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 via-purple-600/5 to-pink-600/5"}),o.jsx("div",{className:"relative mx-auto max-w-7xl px-2 sm:px-4 lg:px-8",children:o.jsxs("div",{className:"flex h-14 sm:h-16 items-center justify-between",children:[o.jsxs("div",{className:"flex items-center group cursor-pointer",onClick:()=>s("home"),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl blur-sm opacity-75 group-hover:opacity-100 transition-opacity duration-300"}),o.jsx(kf,{className:"relative h-6 w-6 sm:h-8 sm:w-8 drop-shadow-lg"})]}),o.jsxs("div",{className:"ml-2 sm:ml-3",children:[o.jsx("span",{className:"text-lg sm:text-xl font-black bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent group-hover:from-blue-500 group-hover:via-purple-500 group-hover:to-pink-500 transition-all duration-300",children:"StreamZone"}),o.jsx("div",{className:`text-xs font-medium hidden sm:block ${d(e,"text-gray-500","text-gray-400")} group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors duration-300`,children:"Premium Streaming"})]})]}),o.jsxs("nav",{className:"flex items-center gap-0.5 sm:gap-2 lg:gap-3",children:[o.jsxs("button",{onClick:()=>s("home"),className:`group relative min-w-[36px] sm:min-w-[70px] px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg font-medium sm:font-semibold transition-all duration-300 text-xs overflow-hidden ${t==="home"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/25":d(e,"text-gray-700 hover:text-gray-900 hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 border border-gray-200 hover:border-blue-300","text-gray-300 hover:text-white hover:bg-gradient-to-r hover:from-blue-900/20 hover:to-purple-900/20 border border-gray-600 hover:border-blue-500/50")}`,title:"Inicio",children:[o.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-0.5 sm:gap-1",children:[o.jsx("span",{className:"text-xs sm:text-sm",children:"🏠"}),o.jsx("span",{className:"hidden sm:inline",children:"Inicio"})]}),t==="home"&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),o.jsxs("button",{onClick:()=>s("combos"),className:`group relative min-w-[36px] sm:min-w-[70px] px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg font-medium sm:font-semibold transition-all duration-300 text-xs overflow-hidden ${t==="combos"?"bg-gradient-to-r from-green-600 to-emerald-600 text-white shadow-lg shadow-green-500/25":d(e,"text-gray-700 hover:text-gray-900 hover:bg-gradient-to-r hover:from-green-50 hover:to-emerald-50 border border-gray-200 hover:border-green-300","text-gray-300 hover:text-white hover:bg-gradient-to-r hover:from-green-900/20 hover:to-emerald-900/20 border border-gray-600 hover:border-green-500/50")}`,title:"Combos",children:[o.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-0.5 sm:gap-1",children:[o.jsx("span",{className:"text-xs sm:text-sm",children:"🎁"}),o.jsx("span",{className:"hidden sm:inline",children:"Combos"})]}),t==="combos"&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-600 to-emerald-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),r?o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>s("profile"),className:`group relative min-w-[36px] sm:min-w-[70px] px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg font-medium sm:font-semibold transition-all duration-300 text-xs overflow-hidden ${t==="profile"?"bg-gradient-to-r from-indigo-600 to-blue-600 text-white shadow-lg shadow-indigo-500/25":d(e,"text-gray-700 hover:text-gray-900 hover:bg-gradient-to-r hover:from-indigo-50 hover:to-blue-50 border border-gray-200 hover:border-indigo-300","text-gray-300 hover:text-white hover:bg-gradient-to-r hover:from-indigo-900/20 hover:to-blue-900/20 border border-gray-600 hover:border-indigo-500/50")}`,title:"Mi Perfil",children:[o.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-0.5 sm:gap-1",children:[o.jsx("span",{className:"text-xs sm:text-sm",children:"👤"}),o.jsx("span",{className:"hidden sm:inline",children:"Perfil"})]}),t==="profile"&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-600 to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),o.jsx("button",{onClick:a,className:`group relative min-w-[36px] sm:min-w-[70px] px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg font-medium sm:font-semibold transition-all duration-300 text-xs overflow-hidden ${d(e,"text-red-600 hover:text-red-700 hover:bg-gradient-to-r hover:from-red-50 hover:to-pink-50 border border-red-200 hover:border-red-300","text-red-400 hover:text-red-300 hover:bg-gradient-to-r hover:from-red-900/20 hover:to-pink-900/20 border border-red-600 hover:border-red-500/50")}`,title:"Salir",children:o.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-0.5 sm:gap-1",children:[o.jsx("span",{className:"text-xs sm:text-sm",children:"🚪"}),o.jsx("span",{className:"hidden sm:inline",children:"Salir"})]})})]}):o.jsxs("button",{onClick:()=>s("auth"),className:"group relative min-w-[36px] sm:min-w-[70px] px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg font-medium sm:font-semibold transition-all duration-300 text-xs overflow-hidden bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 hover:scale-105",title:"Iniciar Sesión",children:[o.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-0.5 sm:gap-1",children:[o.jsx("span",{className:"text-xs sm:text-sm",children:"🔐"}),o.jsx("span",{className:"hidden sm:inline",children:"Login"})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),n?o.jsxs("button",{onClick:()=>s("admin"),className:`group relative min-w-[36px] sm:min-w-[70px] px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg font-medium sm:font-semibold transition-all duration-300 text-xs overflow-hidden ${t==="admin"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg shadow-purple-500/25":d(e,"text-gray-700 hover:text-gray-900 hover:bg-gradient-to-r hover:from-purple-50 hover:to-pink-50 border border-gray-200 hover:border-purple-300","text-gray-300 hover:text-white hover:bg-gradient-to-r hover:from-purple-900/20 hover:to-pink-900/20 border border-gray-600 hover:border-purple-500/50")}`,title:"Admin",children:[o.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-0.5 sm:gap-1",children:[o.jsx("span",{className:"text-xs sm:text-sm",children:"🔧"}),o.jsx("span",{className:"hidden sm:inline",children:"Admin"})]}),t==="admin"&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}):o.jsxs("button",{onClick:()=>s("admin"),className:"group relative min-w-[36px] sm:min-w-[70px] px-1.5 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg font-medium sm:font-semibold transition-all duration-300 text-xs overflow-hidden bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 hover:scale-105",title:"Login Admin",children:[o.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-0.5 sm:gap-1",children:[o.jsx("span",{className:"text-xs sm:text-sm",children:"🔧"}),o.jsx("span",{className:"hidden sm:inline",children:"Admin"})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]})]})})]})}function Of({s:e,onReserve:t,isDark:r}){return o.jsxs("div",{className:`group relative overflow-hidden rounded-2xl sm:rounded-3xl border transition-all duration-500 hover:scale-105 hover:-translate-y-3 hover:rotate-1 ${d(r,"border-white/20 bg-white/10 backdrop-blur-xl shadow-2xl shadow-blue-500/10 hover:shadow-blue-500/20","border-white/10 bg-zinc-900/40 backdrop-blur-xl shadow-2xl shadow-purple-500/10 hover:shadow-purple-500/20")}`,children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-500"}),o.jsx("div",{className:"absolute inset-0 -top-2 -left-2 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-all duration-1000"}),o.jsxs("div",{className:"relative z-10 text-center p-4 sm:p-6",children:[o.jsx("div",{className:"relative mb-6 sm:mb-8",children:o.jsxs("div",{className:"relative mx-auto w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 mb-4 sm:mb-6",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-2xl sm:rounded-3xl blur-sm"}),o.jsx("div",{className:`relative h-12 w-12 sm:h-16 sm:w-16 md:h-20 md:w-20 ${e.color} rounded-2xl sm:rounded-3xl text-white grid place-content-center text-xl sm:text-2xl md:text-3xl font-bold mx-auto shadow-2xl group-hover:scale-110 group-hover:rotate-12 transition-all duration-500`,children:e.logo}),o.jsx("div",{className:`absolute -top-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 rounded-full ${d(r,"bg-gradient-to-r from-green-500 to-emerald-500","bg-gradient-to-r from-green-400 to-emerald-400")} flex items-center justify-center text-white text-xs sm:text-sm font-bold shadow-lg animate-bounce`,children:"✓"})]})}),o.jsxs("div",{className:"mb-6 sm:mb-8 space-y-3 sm:space-y-4",children:[o.jsx("div",{className:`font-black text-lg sm:text-xl md:text-2xl mb-2 sm:mb-3 ${d(r,"text-gray-900 bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent","text-white bg-gradient-to-r from-white to-gray-200 bg-clip-text text-transparent")}`,children:e.name}),o.jsx("div",{className:"flex items-center justify-center gap-2 mb-3 sm:mb-4",children:o.jsxs("div",{className:`px-3 sm:px-4 py-2 rounded-xl sm:rounded-2xl ${d(r,"bg-gradient-to-r from-blue-50 to-purple-50","bg-gradient-to-r from-blue-900/20 to-purple-900/20")} border ${d(r,"border-blue-200","border-blue-500/30")}`,children:[o.jsx("span",{className:`text-2xl sm:text-3xl md:text-4xl font-black ${d(r,"text-gray-800","text-white")}`,children:ct(e.price)}),o.jsxs("span",{className:`text-xs sm:text-sm font-semibold ml-1 sm:ml-2 ${d(r,"text-gray-600","text-gray-300")}`,children:["/",e.billing==="annual"?"año":"mes"]})]})}),o.jsxs("div",{className:`inline-flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-full text-xs sm:text-sm font-bold ${d(r,"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200","bg-gradient-to-r from-green-900/40 to-emerald-900/40 text-green-200 border border-green-500/30")} shadow-lg`,children:[o.jsx("span",{className:"text-sm sm:text-lg animate-pulse",children:"⚡"}),o.jsx("span",{children:"Acceso inmediato"})]})]}),o.jsxs("button",{onClick:()=>t(e),className:`group relative w-full rounded-xl sm:rounded-2xl px-4 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm font-bold transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105 overflow-hidden ${d(r,"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white hover:from-blue-500 hover:via-purple-500 hover:to-pink-500","bg-gradient-to-r from-blue-700 via-purple-700 to-pink-700 text-white hover:from-blue-600 hover:via-purple-600 hover:to-pink-600")}`,children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-all duration-500"}),o.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2 sm:gap-3",children:[o.jsx("span",{className:"text-sm sm:text-lg group-hover:scale-110 transition-transform duration-300",children:"🚀"}),o.jsx("span",{className:"font-black",children:"Comprar Ahora"}),o.jsx("span",{className:"text-sm sm:text-lg group-hover:scale-110 transition-transform duration-300",children:"✨"})]})]})]})]})}const Rf=[{id:"netflix",name:"Netflix",price:4,billing:"monthly",color:"bg-red-600",logo:"N"},{id:"disney_premium",name:"Disney+ Premium",price:3.75,billing:"monthly",color:"bg-blue-600",logo:"D+"},{id:"disney_standard",name:"Disney+ Standard",price:3.25,billing:"monthly",color:"bg-blue-500",logo:"D+"},{id:"max",name:"Max",price:3,billing:"monthly",color:"bg-purple-700",logo:"MAX"},{id:"vix",name:"ViX",price:2.5,billing:"monthly",color:"bg-orange-500",logo:"ViX"},{id:"prime",name:"Prime Video",price:3,billing:"monthly",color:"bg-sky-700",logo:"PV"},{id:"youtube_premium",name:"YouTube Premium",price:3.35,billing:"monthly",color:"bg-red-700",logo:"YT"},{id:"paramount",name:"Paramount+",price:2.75,billing:"monthly",color:"bg-indigo-600",logo:"P+"},{id:"chatgpt",name:"ChatGPT",price:4,billing:"monthly",color:"bg-zinc-800",logo:"GPT"},{id:"crunchy",name:"Crunchyroll",price:2.5,billing:"monthly",color:"bg-orange-600",logo:"CR"},{id:"spotify",name:"Spotify",price:3.5,billing:"monthly",color:"bg-emerald-600",logo:"SP"},{id:"deezer",name:"Deezer",price:3,billing:"monthly",color:"bg-blue-700",logo:"DZ"},{id:"apple_tv",name:"Apple TV+",price:3.5,billing:"monthly",color:"bg-neutral-900",logo:"ATV"},{id:"canva_pro",name:"Canva Pro",price:2,billing:"monthly",color:"bg-indigo-500",logo:"C"},{id:"canva_pro_annual",name:"Canva Pro (1 año)",price:17.5,billing:"annual",color:"bg-indigo-600",logo:"C"},{id:"microsoft365",name:"Microsoft 365 (1 año)",price:15,billing:"annual",color:"bg-blue-500",logo:"M365"},{id:"autodesk",name:"Autodesk (1 año)",price:12.5,billing:"annual",color:"bg-zinc-700",logo:"AD"},{id:"office365",name:"Office 365 (1 año)",price:15,billing:"annual",color:"bg-blue-600",logo:"O365"}],If=[{id:"netflix_disney_std",name:"Netflix + Disney Estándar",price:6,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-blue-500",logo:"N+D"},{id:"netflix_disney_premium",name:"Netflix + Disney Premium",price:6.5,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-blue-600",logo:"N+D+"},{id:"netflix_max",name:"Netflix + Max",price:5.5,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-purple-700",logo:"N+MAX"},{id:"netflix_prime",name:"Netflix + Prime Video",price:5.5,billing:"monthly",color:"bg-gradient-to-r from-red-600 to-sky-700",logo:"N+PV"},{id:"prime_disney_std",name:"Prime Video + Disney Estándar",price:5.75,billing:"monthly",color:"bg-gradient-to-r from-sky-700 to-blue-500",logo:"PV+D"},{id:"disney_premium_max",name:"Disney Premium + Max",price:6,billing:"monthly",color:"bg-gradient-to-r from-blue-600 to-purple-700",logo:"D++MAX"},{id:"max_prime",name:"Max + Prime Video",price:5.5,billing:"monthly",color:"bg-gradient-to-r from-purple-700 to-sky-700",logo:"MAX+PV"},{id:"paramount_max_prime",name:"Paramount + Max + Prime Video",price:7,billing:"monthly",color:"bg-gradient-to-r from-indigo-600 via-purple-700 to-sky-700",logo:"P+MAX+PV"},{id:"mega_combo",name:"Netflix + Max + Disney + Prime + Paramount",price:11.5,billing:"monthly",color:"bg-gradient-to-r from-red-600 via-purple-700 via-blue-500 via-sky-700 to-indigo-600",logo:"MEGA"},{id:"spotify_netflix",name:"Spotify + Netflix",price:6.5,billing:"monthly",color:"bg-gradient-to-r from-emerald-600 to-red-600",logo:"SP+N"},{id:"spotify_disney_premium",name:"Spotify + Disney Premium",price:6.5,billing:"monthly",color:"bg-gradient-to-r from-emerald-600 to-blue-600",logo:"SP+D+"},{id:"spotify_prime",name:"Spotify + Prime Video",price:6,billing:"monthly",color:"bg-gradient-to-r from-emerald-600 to-sky-700",logo:"SP+PV"}],Pc=({isDark:e,onReserve:t,user:r,setView:n})=>(console.log("Home component rendering with props:",{isDark:e,user:r,setView:n}),o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 via-purple-600/10 to-pink-600/10"}),o.jsx("div",{className:"absolute top-0 left-1/4 w-72 h-72 bg-blue-500/20 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse"}),o.jsx("div",{className:"absolute top-0 right-1/4 w-72 h-72 bg-purple-500/20 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse animation-delay-2000"}),o.jsx("div",{className:"relative mx-auto max-w-7xl px-3 sm:px-4 py-8 sm:py-12 md:py-16 lg:py-24",children:o.jsxs("div",{className:"grid items-center gap-4 sm:gap-6 md:gap-8 lg:grid-cols-2",children:[o.jsxs("div",{className:"relative z-10 space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-full bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/20",children:[o.jsx("span",{className:"text-lg sm:text-xl",children:"🎬"}),o.jsx("span",{className:`text-xs sm:text-sm font-semibold ${e?"text-blue-400":"text-blue-600"}`,children:"Entretenimiento Premium"})]}),o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold tracking-tight",children:o.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"StreamZone"})}),o.jsx("p",{className:`text-base sm:text-lg md:text-xl font-semibold ${e?"text-gray-200":"text-gray-700"}`,children:"Tus plataformas favoritas, al mejor precio"}),o.jsxs("p",{className:`text-sm sm:text-base ${e?"text-gray-300":"text-gray-600"}`,children:["Reserva por WhatsApp, recibe acceso con soporte inmediato y renueva sin complicaciones.",o.jsx("span",{className:"font-semibold text-blue-600",children:" Administra tus servicios desde tu cuenta."})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r?o.jsxs("a",{href:"#catalogo",className:`inline-flex items-center justify-center px-4 sm:px-6 py-3 rounded-2xl font-semibold text-sm sm:text-base transition-all duration-200 hover:scale-105 shadow-lg ${e?"bg-gradient-to-r from-blue-600 to-purple-700 text-white hover:from-blue-700 hover:to-purple-800":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[o.jsx("span",{className:"mr-2",children:"✨"}),"Ver Catálogo",o.jsx("span",{className:"ml-2",children:"🚀"})]}):o.jsxs("button",{onClick:()=>n("auth"),className:`inline-flex items-center justify-center px-4 sm:px-6 py-3 rounded-2xl font-semibold text-sm sm:text-base transition-all duration-200 hover:scale-105 shadow-lg ${e?"bg-gradient-to-r from-blue-600 to-purple-700 text-white hover:from-blue-700 hover:to-purple-800":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[o.jsx("span",{className:"mr-2",children:"🔐"}),"Iniciar Sesión",o.jsx("span",{className:"ml-2",children:"✨"})]}),o.jsxs("button",{onClick:()=>n("combos"),className:`inline-flex items-center justify-center px-4 sm:px-6 py-3 rounded-2xl font-semibold text-sm sm:text-base transition-all duration-200 hover:scale-105 ${e?"bg-zinc-800 text-purple-400 border-2 border-purple-600 hover:bg-purple-900/20":"bg-white text-purple-600 border-2 border-purple-200 hover:bg-purple-50"}`,children:[o.jsx("span",{className:"mr-2",children:"📦"}),"Ver Combos"]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 sm:gap-4 pt-4 sm:pt-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`text-lg sm:text-xl font-bold ${e?"text-blue-400":"text-blue-600"}`,children:"500+"}),o.jsx("div",{className:`text-xs ${e?"text-gray-400":"text-gray-600"}`,children:"Clientes felices"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`text-lg sm:text-xl font-bold ${e?"text-purple-400":"text-purple-600"}`,children:"24/7"}),o.jsx("div",{className:`text-xs ${e?"text-gray-400":"text-gray-600"}`,children:"Soporte"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`text-lg sm:text-xl font-bold ${e?"text-green-400":"text-green-600"}`,children:"100%"}),o.jsx("div",{className:`text-xs ${e?"text-gray-400":"text-gray-600"}`,children:"Garantía"})]})]})]}),o.jsx("div",{className:"relative z-10",children:o.jsxs("div",{className:`relative rounded-2xl sm:rounded-3xl p-4 sm:p-6 md:p-8 shadow-2xl backdrop-blur-md border-2 ${e?"bg-gradient-to-br from-zinc-900/80 to-blue-900/80 border-blue-700/50":"bg-gradient-to-br from-white/80 to-blue-50/80 border-blue-200/50"}`,children:[o.jsxs("div",{className:"relative h-60 sm:h-80 flex items-center justify-center",children:[o.jsx("div",{className:"absolute top-2 sm:top-4 left-2 sm:left-4 w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl sm:rounded-2xl shadow-lg flex items-center justify-center text-white text-lg sm:text-2xl animate-float",children:"🎬"}),o.jsx("div",{className:"absolute top-4 sm:top-8 right-4 sm:right-8 w-10 h-10 sm:w-14 sm:h-14 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg sm:rounded-xl shadow-lg flex items-center justify-center text-white text-base sm:text-xl animate-float animation-delay-1000",children:"🎧"}),o.jsx("div",{className:"absolute bottom-4 sm:bottom-8 left-4 sm:left-8 w-8 h-8 sm:w-12 sm:h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-lg sm:rounded-xl shadow-lg flex items-center justify-center text-white text-sm sm:text-lg animate-float animation-delay-2000",children:"📺"}),o.jsx("div",{className:"absolute bottom-2 sm:bottom-4 right-2 sm:right-4 w-14 h-14 sm:w-18 sm:h-18 bg-gradient-to-r from-pink-500 to-pink-600 rounded-xl sm:rounded-2xl shadow-lg flex items-center justify-center text-white text-xl sm:text-2xl animate-float animation-delay-3000",children:"🏰"}),o.jsx("div",{className:`w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-2xl sm:rounded-3xl shadow-2xl flex items-center justify-center text-white text-2xl sm:text-3xl md:text-4xl ${e?"bg-gradient-to-r from-blue-700 to-purple-700":"bg-gradient-to-r from-blue-600 to-purple-600"}`,children:"✨"})]}),o.jsxs("div",{className:"mt-4 sm:mt-6 space-y-3 sm:space-y-4",children:[o.jsx("div",{className:`text-center font-bold text-sm sm:text-base ${e?"text-gray-200":"text-gray-800"}`,children:"💳 Métodos de Pago"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[o.jsxs("div",{className:`p-2 sm:p-3 rounded-lg sm:rounded-xl text-center ${e?"bg-blue-900/30 border border-blue-700":"bg-blue-50 border border-blue-200"}`,children:[o.jsx("div",{className:"text-lg sm:text-xl mb-1",children:"🏦"}),o.jsx("div",{className:`text-xs font-semibold ${e?"text-blue-300":"text-blue-700"}`,children:"Bancos"})]}),o.jsxs("div",{className:`p-2 sm:p-3 rounded-lg sm:rounded-xl text-center ${e?"bg-green-900/30 border border-green-700":"bg-green-50 border border-green-200"}`,children:[o.jsx("div",{className:"text-lg sm:text-xl mb-1",children:"💚"}),o.jsx("div",{className:`text-xs font-semibold ${e?"text-green-300":"text-green-700"}`,children:"PayPal"})]}),o.jsxs("div",{className:`p-2 sm:p-3 rounded-lg sm:rounded-xl text-center ${e?"bg-purple-900/30 border border-purple-700":"bg-purple-50 border border-purple-200"}`,children:[o.jsx("div",{className:"text-lg sm:text-xl mb-1",children:"📱"}),o.jsx("div",{className:`text-xs font-semibold ${e?"text-purple-300":"text-purple-700"}`,children:"Pago Móvil"})]})]}),o.jsxs("div",{className:"mt-3 sm:mt-4 grid grid-cols-2 gap-2",children:[o.jsx("span",{className:`text-xs px-2 sm:px-3 py-1 sm:py-2 rounded-lg text-center ${e?"bg-green-800 text-green-200":"bg-green-100 text-green-700"}`,children:"🏦 Pichincha"}),o.jsx("span",{className:`text-xs px-2 sm:px-3 py-1 sm:py-2 rounded-lg text-center ${e?"bg-blue-800 text-blue-200":"bg-blue-100 text-blue-700"}`,children:"🏛️ Guayaquil"}),o.jsx("span",{className:`text-xs px-2 sm:px-3 py-1 sm:py-2 rounded-lg text-center ${e?"bg-purple-800 text-purple-200":"bg-purple-100 text-purple-700"}`,children:"🌊 Pacífico"}),o.jsx("span",{className:`text-xs px-2 sm:px-3 py-1 sm:py-2 rounded-lg text-center ${e?"bg-orange-800 text-orange-200":"bg-orange-100 text-orange-700"}`,children:"💳 PayPal"})]})]})]})})]})}),o.jsx("div",{className:"absolute inset-0 -z-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),o.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-700"})]}),o.jsxs("section",{id:"catalogo",className:"relative py-8 sm:py-12 md:py-16",children:[o.jsx("div",{className:`absolute inset-0 ${e?"bg-gradient-to-br from-blue-950/50 via-purple-950/50 to-pink-950/50":"bg-gradient-to-br from-blue-50/50 via-purple-50/50 to-pink-50/50"}`}),o.jsxs("div",{className:"relative mx-auto max-w-7xl px-3 sm:px-4",children:[o.jsxs("div",{className:"text-center mb-6 sm:mb-8 md:mb-12",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-full bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/20 mb-3 sm:mb-4",children:[o.jsx("span",{className:"text-lg",children:"✨"}),o.jsx("span",{className:`text-xs sm:text-sm font-semibold ${e?"text-blue-400":"text-blue-600"}`,children:"Plataformas Premium"})]}),o.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold mb-3 sm:mb-4",children:o.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Nuestro Catálogo"})}),o.jsx("p",{className:`text-sm sm:text-base md:text-lg max-w-3xl mx-auto ${e?"text-gray-300":"text-gray-600"}`,children:"Descubre todas las plataformas de streaming disponibles con acceso inmediato y soporte 24/7"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:Rf.map((s,a)=>o.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:`${a*100}ms`},children:o.jsx(Of,{s,onReserve:t,isDark:e})},s.id))}),o.jsx("div",{className:"text-center mt-8 sm:mt-12",children:o.jsxs("div",{className:`inline-flex items-center gap-2 sm:gap-3 px-4 sm:px-6 md:px-8 py-3 sm:py-4 rounded-xl sm:rounded-2xl shadow-lg ${e?"bg-gradient-to-r from-blue-600 to-purple-700 text-white":"bg-gradient-to-r from-blue-500 to-purple-600 text-white"}`,children:[o.jsx("span",{className:"text-lg sm:text-xl",children:"🎯"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-sm sm:text-base",children:"¿No encuentras lo que buscas?"}),o.jsx("div",{className:"text-xs sm:text-sm opacity-90",children:"Contáctanos por WhatsApp para más opciones"})]})]})})]})]}),o.jsx("footer",{className:`relative py-8 sm:py-12 md:py-16 ${e?"bg-gradient-to-r from-zinc-900 to-zinc-800":"bg-gradient-to-r from-gray-900 to-gray-800"}`,children:o.jsxs("div",{className:"mx-auto max-w-7xl px-3 sm:px-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8",children:[o.jsxs("div",{className:"sm:col-span-2",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"h-10 w-10 sm:h-12 sm:w-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg sm:rounded-xl flex items-center justify-center text-white text-lg sm:text-xl font-bold",children:"SZ"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-lg sm:text-xl bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"StreamZone"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Tu entretenimiento digital"})]})]}),o.jsx("p",{className:"text-gray-300 mb-4 sm:mb-6 max-w-md text-sm sm:text-base",children:"La mejor plataforma para acceder a todos tus servicios de streaming favoritos con precios increíbles y soporte 24/7."}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white text-sm sm:text-base hover:scale-110 transition-transform cursor-pointer",children:"📱"}),o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-green-500 to-green-600 rounded-full flex items-center justify-center text-white text-sm sm:text-base hover:scale-110 transition-transform cursor-pointer",children:"💬"}),o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-purple-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm sm:text-base hover:scale-110 transition-transform cursor-pointer",children:"✨"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white mb-3 sm:mb-4",children:"Enlaces Rápidos"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx("a",{href:"#catalogo",className:"text-gray-300 hover:text-blue-400 transition-colors text-sm sm:text-base",children:"Catálogo"})}),o.jsx("li",{children:o.jsx("a",{href:"#combos",className:"text-gray-300 hover:text-blue-400 transition-colors text-sm sm:text-base",children:"Combos"})}),o.jsx("li",{children:o.jsx("a",{href:"#contacto",className:"text-gray-300 hover:text-blue-400 transition-colors text-sm sm:text-base",children:"Contacto"})}),o.jsx("li",{children:o.jsx("a",{href:"#soporte",className:"text-gray-300 hover:text-blue-400 transition-colors text-sm sm:text-base",children:"Soporte"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white mb-3 sm:mb-4",children:"Contacto"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[o.jsx("span",{children:"📱"}),o.jsx("span",{className:"text-sm sm:text-base",children:"+593 99 999 9999"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[o.jsx("span",{children:"💬"}),o.jsx("span",{className:"text-sm sm:text-base",children:"WhatsApp"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[o.jsx("span",{children:"✉️"}),o.jsx("span",{className:"text-sm sm:text-base",children:"info@streamzone.com"})]})]})]})]}),o.jsx("div",{className:"border-t border-gray-700 mt-8 sm:mt-12 pt-6 sm:pt-8 text-center",children:o.jsxs("p",{className:"text-gray-400 text-xs sm:text-sm",children:["© 2024 StreamZone. Todos los derechos reservados. |",o.jsx("a",{href:"#",className:"hover:text-blue-400 transition-colors ml-1",children:"Términos de Servicio"})," |",o.jsx("a",{href:"#",className:"hover:text-blue-400 transition-colors ml-1",children:"Política de Privacidad"})]})})]})})]}));function zf({isDark:e,onReserve:t}){return o.jsxs("section",{className:"mx-auto max-w-6xl px-3 sm:px-4 pb-12 sm:pb-16",children:[o.jsxs("div",{className:`mb-6 sm:mb-8 p-4 sm:p-6 rounded-2xl ${d(e,"bg-white/90 shadow-lg","bg-gray-800/90 shadow-lg")}`,children:[o.jsx("h3",{className:`text-2xl sm:text-3xl font-bold mb-2 ${d(e,"text-gray-800","text-white")}`,children:"🎯 Combos Especiales"}),o.jsx("p",{className:`text-sm sm:text-base ${d(e,"text-gray-600","text-gray-300")}`,children:"Ahorra más con nuestras combinaciones exclusivas"})]}),o.jsx("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2 lg:grid-cols-3",children:If.map(r=>o.jsxs("div",{className:`${r.color} rounded-2xl p-4 sm:p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[o.jsx("div",{className:"h-12 w-12 sm:h-16 sm:w-16 rounded-xl bg-white/20 flex items-center justify-center text-white font-bold text-xl sm:text-2xl",children:r.logo}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-bold",children:r.price.toLocaleString("es-CO",{style:"currency",currency:"USD"})}),o.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:"por mes"})]})]}),o.jsx("h4",{className:"text-lg sm:text-xl font-semibold mb-3",children:r.name}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-xs sm:text-sm opacity-90 mb-1",children:"💰 Ahorro significativo vs compras individuales"}),o.jsx("div",{className:"text-xs sm:text-sm opacity-90 mb-1",children:"🎬 Acceso completo a todas las plataformas"}),o.jsx("div",{className:"text-xs sm:text-sm opacity-90",children:"⚡ Activación inmediata"})]}),o.jsx("button",{onClick:()=>t(r),className:`w-full rounded-xl px-4 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-bold transition-all duration-200 shadow-lg hover:shadow-xl ${d(e,"bg-white/20 text-white hover:bg-white/30","bg-white/20 text-white hover:bg-white/30")}`,children:o.jsxs("span",{className:"flex items-center justify-center gap-2",children:[o.jsx("span",{children:"🚀"}),"Comprar Combo",o.jsx("span",{children:"✨"})]})})]},r.id))})]})}function $c({item:e,isDark:t,onToggleValidate:r,onDelete:n,onEdit:s,onReminder:a}){const[i,l]=E.useState(new Date().toISOString().slice(0,10)),[c,u]=E.useState(!1),[h,m]=E.useState({}),f=(e==null?void 0:e.service)||"",b=f.includes("+")||f.includes("Netflix")&&f.includes("Disney");let y=[f];b&&(f.includes("Netflix")&&f.includes("Disney")?y=["Netflix",f.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:f.includes("Max")&&f.includes("Prime")?y=["Max","Prime Video"]:f.includes("Netflix")&&f.includes("Max")?y=["Netflix","Max"]:f.includes("Netflix")&&f.includes("Prime")?y=["Netflix","Prime Video"]:f.includes("Prime")&&f.includes("Disney")?y=["Prime Video",f.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:f.includes("Disney")&&f.includes("Max")?y=[f.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Max"]:f.includes("Spotify")&&f.includes("Netflix")?y=["Spotify","Netflix"]:f.includes("Spotify")&&f.includes("Disney")?y=["Spotify",f.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:f.includes("Spotify")&&f.includes("Prime")?y=["Spotify","Prime Video"]:f.includes("Paramount")&&f.includes("Max")&&f.includes("Prime")?y=["Paramount+","Max","Prime Video"]:f.includes("Netflix")&&f.includes("Max")&&f.includes("Disney")?y=["Netflix","Max",f.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Prime Video","Paramount+"]:y=f.split(/\s*\+\s*/).map(g=>g.trim()).filter(g=>g.length>0));let w={};b&&e.service_password&&e.service_password.split(`

`).forEach(p=>{const x=p.split(`
`);if(x.length>=3){const v=x[0].replace(":","").trim(),S=x[1].replace("Email: ","").trim(),N=x[2].replace("Contraseña: ","").trim();v&&S&&N&&(w[v]={email:S,password:N})}}),E.useEffect(()=>{const g=()=>{const x=new Date().toISOString().slice(0,10);l(x),console.log("🔄 PurchaseCard: Fecha actualizada para días restantes:",x)};g();const p=setInterval(g,36e5);return()=>clearInterval(p)},[]);const j=Ef(i,e.end);return e.validated?o.jsxs("details",{className:`relative group rounded-xl border-2 shadow-sm hover:shadow-md transition-all duration-200 ${d(t,"border-gray-200 bg-white hover:border-gray-300","border-gray-700 bg-gray-800 hover:border-gray-600")}`,children:[o.jsx("summary",{className:"cursor-pointer list-none p-3 sm:p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[o.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-white font-semibold text-xs sm:text-sm ${d(t,"bg-gradient-to-r from-blue-500 to-purple-600","bg-gradient-to-r from-blue-600 to-purple-700")}`,children:e.customer.charAt(0).toUpperCase()}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:`font-semibold text-base sm:text-lg ${d(t,"text-gray-900","text-white")}`,children:e.customer}),o.jsxs("p",{className:`text-xs sm:text-sm ${d(t,"text-gray-600","text-gray-400")}`,children:["📱 ",e.phone]})]})]}),o.jsxs("div",{className:`text-sm sm:text-base font-medium mb-2 ${d(t,"text-gray-800","text-gray-200")}`,children:["🎬 ",e.service]}),o.jsxs("div",{className:`text-xs sm:text-sm ${d(t,"text-gray-600","text-gray-400")}`,children:["📅 ",e.start," → ",e.end," • ",e.months," ",e.months===1?"mes":"meses"]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-end gap-2 sm:gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:`w-8 h-8 rounded-full shadow-sm hover:shadow-md transition-all duration-200 flex items-center justify-center group ${d(t,"bg-gray-100 hover:bg-gray-200 text-gray-600","bg-gray-700 hover:bg-gray-600 text-gray-300")}`,onClick:g=>{g.preventDefault(),g.stopPropagation();const p=g.currentTarget.closest("details");p&&(p.open=!p.open,setTimeout(()=>{var v;const x=(v=g.currentTarget)==null?void 0:v.querySelector("span");x&&p.open?x.textContent="▲":x&&(x.textContent="▼")},10))},title:"Ver detalles",children:o.jsx("span",{className:"text-sm group-hover:scale-110 transition-transform duration-200",children:"▼"})}),o.jsx("button",{className:`w-10 h-10 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-110 flex items-center justify-center group ${d(t,"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white","bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white")}`,onClick:g=>{g.preventDefault(),g.stopPropagation(),s()},title:"Editar compra",children:o.jsx("span",{className:"text-lg group-hover:scale-110 transition-transform duration-200",children:"✏️"})})]}),o.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${d(t,"bg-green-100 text-green-800 border border-green-200","bg-green-800 text-green-100 border border-green-500")}`,children:"✅ Validada"}),o.jsx("span",{className:`px-3 py-2 text-sm font-bold rounded-full border-2 shadow-lg ${j<=0?d(t,"bg-red-200 text-red-900 border-red-400 shadow-red-300/50","bg-red-900 text-red-100 border-red-500 shadow-red-900/50"):j<=3?d(t,"bg-orange-200 text-orange-900 border-orange-400 shadow-orange-300/50","bg-orange-900 text-orange-100 border-orange-500 shadow-orange-900/50"):j<=7?d(t,"bg-yellow-200 text-yellow-900 border-yellow-400 shadow-yellow-300/50","bg-yellow-900 text-yellow-100 border-yellow-500 shadow-yellow-900/50"):d(t,"bg-blue-200 text-blue-900 border-blue-400 shadow-blue-300/50","bg-blue-900 text-blue-100 border-blue-500 shadow-blue-900/50")}`,children:j<=0?"⚠️ VENCIDO":j===1?"🔥 VENCE MAÑANA":j===0?"🔥 VENCE HOY":`📅 ${j} días`})]})]})}),o.jsxs("div",{className:`mx-2 sm:mx-4 mb-3 sm:mb-4 p-3 sm:p-6 rounded-xl border-2 ${d(t,"bg-green-50 border-green-200","bg-green-900/20 border-green-700")}`,children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[o.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-sm sm:text-base ${d(t,"bg-yellow-100","bg-yellow-900/30")}`,children:"🔑"}),o.jsx("h5",{className:`font-bold text-base sm:text-lg ${d(t,"text-gray-800","text-white")}`,children:b?"Credenciales del Combo":"Credenciales del Servicio"})]}),b?o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsx("div",{className:`p-2 rounded-lg ${d(t,"bg-orange-50 border border-orange-200","bg-orange-900/20 border border-orange-600")}`,children:o.jsx("p",{className:`text-xs font-semibold ${d(t,"text-orange-800","text-orange-300")}`,children:"🎁 Combo: Credenciales separadas por servicio"})}),y.map((g,p)=>{const x=w[g];return x?o.jsxs("div",{className:`p-3 rounded-lg border ${d(t,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-600")}`,children:[o.jsxs("h6",{className:`text-sm font-bold mb-2 ${d(t,"text-gray-800","text-white")}`,children:[g," ",p===0?"🎬":p===1?"🎭":p===2?"🎪":"🎯"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[o.jsx("span",{className:`text-xs font-semibold w-16 sm:w-20 ${d(t,"text-gray-700","text-gray-300")}`,children:"📧 Email:"}),o.jsx("input",{type:"text",value:x.email,readOnly:!0,className:`text-xs font-mono px-3 py-2 rounded-lg border flex-1 ${d(t,"bg-white text-gray-800 border-gray-300","bg-gray-700 text-gray-200 border-gray-600")}`})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[o.jsx("span",{className:`text-xs font-semibold w-16 sm:w-20 ${d(t,"text-gray-700","text-gray-300")}`,children:"🔑 Pass:"}),o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("input",{type:h[g]?"text":"password",value:x.password,readOnly:!0,className:`text-xs font-mono px-3 py-2 rounded-lg border flex-1 ${d(t,"bg-white text-gray-800 border-gray-300","bg-gray-700 text-gray-200 border-gray-600")}`}),o.jsx("button",{onClick:()=>m(v=>({...v,[g]:!v[g]})),className:`px-2 py-2 rounded-lg text-xs font-medium transition-colors ${d(t,"bg-blue-100 text-blue-700 hover:bg-blue-200","bg-blue-900 text-blue-300 hover:bg-blue-800")}`,title:h[g]?"Ocultar contraseña":"Mostrar contraseña",children:h[g]?"👁️":"🔒"})]})]})]})]},g):null})]}):o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[o.jsx("span",{className:`text-xs sm:text-sm font-semibold w-16 sm:w-20 ${d(t,"text-gray-700","text-gray-300")}`,children:"Email:"}),o.jsx("input",{type:"text",value:e.service_email||"No disponible",readOnly:!0,className:`text-xs sm:text-sm font-mono px-3 sm:px-4 py-2 sm:py-3 rounded-lg border-2 flex-1 ${d(t,"bg-white text-gray-800 border-gray-300","bg-gray-800 text-gray-200 border-gray-600")}`})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[o.jsx("span",{className:`text-xs sm:text-sm font-semibold w-16 sm:w-20 ${d(t,"text-gray-700","text-gray-300")}`,children:"Password:"}),o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("input",{type:c?"text":"password",value:e.service_password||"No disponible",readOnly:!0,className:`text-xs sm:text-sm font-mono px-3 sm:px-4 py-2 sm:py-3 rounded-lg border-2 flex-1 ${d(t,"bg-white text-gray-800 border-gray-300","bg-gray-800 text-gray-200 border-gray-600")}`}),o.jsx("button",{onClick:()=>u(!c),className:`px-2 sm:px-3 py-2 sm:py-3 rounded-lg text-xs sm:text-sm font-medium transition-colors ${d(t,"bg-blue-100 text-blue-700 hover:bg-blue-200","bg-blue-900 text-blue-300 hover:bg-blue-800")}`,title:c?"Ocultar contraseña":"Mostrar contraseña",children:c?"👁️":"🔒"})]})]})]})]}),o.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4 p-3 sm:p-4 rounded-b-xl ${d(t,"bg-gray-800","bg-gray-900")}`,children:[o.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[o.jsx("button",{onClick:r,className:`px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold transition-all ${d(t,"bg-blue-500 text-white hover:bg-blue-600","bg-blue-600 text-white hover:bg-blue-700")}`,children:"✅ Validada"}),o.jsx("button",{onClick:s,className:`px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold transition-all ${d(t,"bg-orange-500 text-white hover:bg-orange-600","bg-orange-600 text-white hover:bg-orange-700")}`,children:"✏️ Editar"}),o.jsx("button",{onClick:a,className:`px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold transition-all ${d(t,"bg-green-500 text-white hover:bg-green-600","bg-green-600 text-white hover:bg-green-700")}`,children:"📅 Recordatorio"}),o.jsx("button",{onClick:n,className:`px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm font-semibold transition-all ${d(t,"bg-red-500 text-white hover:bg-red-600","bg-red-600 text-white hover:bg-red-700")}`,children:"🗑️ Eliminar"})]}),o.jsx("div",{className:`px-3 py-2 text-sm font-bold rounded-full border-2 shadow-lg ${j<=0?d(t,"bg-red-200 text-red-900 border-red-400 shadow-red-300/50","bg-red-900 text-red-100 border-red-500 shadow-red-900/50"):j<=3?d(t,"bg-orange-200 text-orange-900 border-orange-400 shadow-orange-300/50","bg-orange-900 text-orange-100 border-orange-500 shadow-orange-900/50"):j<=7?d(t,"bg-yellow-200 text-yellow-900 border-yellow-400 shadow-yellow-300/50","bg-yellow-900 text-yellow-100 border-yellow-500 shadow-yellow-900/50"):d(t,"bg-blue-200 text-blue-900 border-blue-400 shadow-blue-300/50","bg-blue-900 text-blue-100 border-blue-500 shadow-blue-900/50")}`,children:j<=0?"⚠️ VENCIDO":j===1?"🔥 VENCE MAÑANA":j===0?"🔥 VENCE HOY":`📅 ${j} días`})]})]}):o.jsx("div",{className:`p-3 sm:p-4 rounded-xl border-2 transition-all hover:shadow-lg ${d(t,"bg-white border-gray-200 hover:border-gray-300","bg-gray-800 border-gray-700 hover:border-gray-600")}`,children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[o.jsx("h3",{className:`font-bold text-lg sm:text-xl ${d(t,"text-gray-900","text-white")}`,children:e.customer}),o.jsx("span",{className:`px-2 sm:px-3 py-1 text-xs sm:text-sm font-medium rounded-full ${d(t,"bg-blue-100 text-blue-800","bg-blue-800 text-blue-100")}`,children:e.service})]}),o.jsxs("div",{className:`text-xs sm:text-sm ${d(t,"text-gray-600","text-gray-400")} mb-2`,children:["📱 ",e.phone," • 📅 ",e.start]}),o.jsxs("div",{className:`text-xs sm:text-sm ${d(t,"text-gray-700","text-gray-300")}`,children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("strong",{children:"Duración:"})," ",e.months," ",e.months===1?"mes":"meses"]}),o.jsxs("div",{className:"mb-1",children:[o.jsx("strong",{children:"Inicio:"})," ",e.start]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Fin:"})," ",e.end]})]})]}),o.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 sm:gap-2",children:[o.jsx("button",{onClick:r,className:`flex-1 sm:flex-none px-3 sm:px-4 py-2 sm:py-2 rounded-lg text-xs sm:text-sm font-semibold transition-all ${d(t,"bg-green-500 text-white hover:bg-green-600","bg-green-600 text-white hover:bg-green-700")}`,children:"✅ Aprobar"}),o.jsx("button",{onClick:n,className:`flex-1 sm:flex-none px-3 sm:px-4 py-2 sm:py-2 rounded-lg text-xs sm:text-sm font-semibold transition-all ${d(t,"bg-red-500 text-white hover:bg-red-600","bg-red-600 text-white hover:bg-red-700")}`,children:"❌ Rechazar"})]})]})})}function lh({open:e,onClose:t,isDark:r,adminUsers:n,setAdminUsers:s}){const[a,i]=E.useState(""),[l,c]=E.useState("secundario"),[u,h]=E.useState(!1),[m,f]=E.useState("");if(!e)return null;const b=p=>{const x=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);navigator.clipboard.writeText(x),f(`Clave copiada: ${x}`),setTimeout(()=>f(""),3e3)},y=()=>{if(!a){f("Email requerido");return}if(n.some(x=>x.email===a)){f("Este administrador ya existe");return}const p={email:a,role:l,canGenerateKeys:l==="principal",canDeleteOthers:l==="principal",isProtected:l==="principal"};s([...n,p]),i(""),f("✅ Administrador agregado"),setTimeout(()=>f(""),3e3)},w=p=>{if(p.isProtected){f("No se puede eliminar el administrador principal");return}s(n.filter(x=>x.email!==p.email)),f("✅ Administrador eliminado"),setTimeout(()=>f(""),3e3)},j=n.find(p=>p.role==="principal"),g=n.filter(p=>p.role==="secundario");return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-end",onClick:t,children:[o.jsx("div",{className:"absolute inset-0 bg-black/50"}),o.jsxs("aside",{className:`absolute right-0 top-0 h-full w-full sm:w-[450px] p-3 sm:p-6 shadow-2xl ${d(r,"bg-white","bg-zinc-900 text-zinc-100")}`,onClick:p=>p.stopPropagation(),children:[o.jsxs("div",{className:"mb-4 sm:mb-6 flex items-center justify-between",children:[o.jsx("h4",{className:"text-lg sm:text-xl font-bold",children:"👥 Gestión de Administradores"}),o.jsx("button",{onClick:t,className:`w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold transition-colors ${d(r,"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-100","text-zinc-300 hover:text-zinc-100 hover:bg-zinc-800")}`,children:"×"})]}),o.jsx("div",{className:`p-3 sm:p-4 rounded-xl mb-4 sm:mb-6 ${d(r,"bg-blue-50 border border-blue-200","bg-blue-900/20 border border-blue-700")}`,children:o.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[o.jsx("div",{className:"text-xl sm:text-2xl",children:"🔒"}),o.jsxs("div",{children:[o.jsx("h5",{className:`font-semibold text-xs sm:text-sm mb-1 ${d(r,"text-blue-800","text-blue-200")}`,children:"Sistema de Roles"}),o.jsxs("p",{className:`text-xs ${d(r,"text-blue-600","text-blue-300")}`,children:[o.jsx("strong",{children:"Principal:"})," Acceso completo, protegido. ",o.jsx("strong",{children:"Secundarios:"})," Pueden generar claves, limitados."]})]})]})}),j&&o.jsxs("div",{className:"mb-4 sm:mb-6",children:[o.jsx("h5",{className:"font-semibold mb-3 text-sm sm:text-base",children:"👑 Administrador Principal"}),o.jsxs("div",{className:`p-3 sm:p-4 rounded-xl ${d(r,"bg-yellow-50 border border-yellow-200","bg-yellow-900/20 border border-yellow-700")}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-medium text-sm sm:text-base",children:j.email}),o.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-200 text-yellow-800",children:"Principal"})]}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{onClick:()=>b(),className:`px-3 py-1 rounded-lg text-xs font-medium transition-all ${d(r,"bg-blue-100 text-blue-700 hover:bg-blue-200","bg-blue-900/30 text-blue-300 hover:bg-blue-900/50")}`,children:"🔑 Generar Clave"})})]})]}),o.jsxs("div",{className:"mb-4 sm:mb-6",children:[o.jsx("h5",{className:"font-semibold mb-3 text-sm sm:text-base",children:"➕ Agregar Administrador"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{children:o.jsx("input",{type:"email",placeholder:"admin@correo.com",className:`w-full rounded-xl border-2 px-3 py-2 text-sm ${d(r,"border-gray-300 bg-white text-gray-900","border-gray-600 bg-gray-700 text-white")}`,value:a,onChange:p=>i(p.target.value)})}),o.jsx("div",{children:o.jsxs("select",{className:`w-full rounded-xl border-2 px-3 py-2 text-sm ${d(r,"border-gray-300 bg-white text-gray-900","border-gray-600 bg-gray-700 text-white")}`,value:l,onChange:p=>c(p.target.value),children:[o.jsx("option",{value:"secundario",children:"Secundario"}),o.jsx("option",{value:"principal",children:"Principal"})]})}),o.jsx("button",{onClick:y,className:`w-full px-4 py-2 rounded-xl font-medium transition-all ${d(r,"bg-green-600 text-white hover:bg-green-700","bg-green-500 text-white hover:bg-green-600")}`,children:"➕ Agregar"})]})]}),o.jsxs("div",{className:"mb-4 sm:mb-6",children:[o.jsx("h5",{className:"font-semibold mb-3 text-sm sm:text-base",children:"👥 Administradores Secundarios"}),o.jsx("div",{className:"space-y-2",children:g.map((p,x)=>o.jsxs("div",{className:`p-3 rounded-xl ${d(r,"bg-gray-50 border border-gray-200","bg-gray-800 border border-gray-700")}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-medium text-sm",children:p.email}),o.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-200 text-gray-700",children:"Secundario"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>b(),className:`px-2 py-1 rounded-lg text-xs font-medium transition-all ${d(r,"bg-blue-100 text-blue-700 hover:bg-blue-200","bg-blue-900/30 text-blue-300 hover:bg-blue-900/50")}`,children:"🔑 Clave"}),o.jsx("button",{onClick:()=>w(p),className:`px-2 py-1 rounded-lg text-xs font-medium transition-all ${d(r,"bg-red-100 text-red-700 hover:bg-red-200","bg-red-900/30 text-red-300 hover:bg-red-900/50")}`,children:"🗑️ Eliminar"})]})]},x))})]}),m&&o.jsx("div",{className:`p-3 rounded-xl text-sm ${m.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:m})]})]})}function ch({open:e,onClose:t,isDark:r,setSubView:n,openAdmins:s,onExportCSV:a,onLogout:i,onRegisterPurchase:l}){return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-start",onClick:t,children:[o.jsx("div",{className:"absolute inset-0 bg-black/50"}),o.jsxs("aside",{className:`absolute left-0 top-0 h-full w-full sm:w-[380px] p-4 sm:p-8 shadow-2xl backdrop-blur-sm border-r-2 ${d(r,"bg-gradient-to-br from-white to-gray-50 border-gray-300","bg-gradient-to-br from-gray-900 to-black border-gray-600")}`,onClick:c=>c.stopPropagation(),children:[o.jsxs("div",{className:"mb-6 sm:mb-8 flex items-center justify-between",children:[o.jsx("h4",{className:`text-xl sm:text-2xl font-black ${d(r,"text-gray-900","text-white")}`,children:"🔧 MENÚ ADMINISTRADOR"}),o.jsx("button",{onClick:t,className:`w-10 h-10 rounded-2xl flex items-center justify-center text-xl font-bold transition-all hover:scale-110 ${d(r,"text-gray-600 hover:text-gray-800 hover:bg-gray-200 shadow-lg","text-gray-300 hover:text-white hover:bg-gray-700 shadow-lg")}`,children:"×"})]}),o.jsxs("nav",{className:"space-y-4",children:[o.jsx("button",{onClick:()=>{n("dashboard"),t()},className:`w-full rounded-2xl p-5 text-left transition-all hover:scale-105 shadow-lg border-2 ${d(r,"bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-400 hover:from-blue-600 hover:to-blue-700","bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-500 hover:from-blue-700 hover:to-blue-800")}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"text-2xl",children:"📊"}),o.jsx("span",{className:"font-bold text-lg",children:"DASHBOARD"})]})}),o.jsx("button",{onClick:()=>{n("purchases"),t()},className:`w-full rounded-2xl p-5 text-left transition-all hover:scale-105 shadow-lg border-2 ${d(r,"bg-gradient-to-r from-purple-500 to-purple-600 text-white border-purple-400 hover:from-purple-600 hover:to-purple-700","bg-gradient-to-r from-purple-600 to-purple-700 text-white border-purple-500 hover:from-purple-700 hover:to-purple-800")}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"text-2xl",children:"🛒"}),o.jsx("span",{className:"font-bold text-lg",children:"GESTIONAR COMPRAS"})]})}),o.jsx("button",{onClick:()=>{l(),t()},className:`w-full rounded-2xl p-5 text-left transition-all hover:scale-105 shadow-lg border-2 ${d(r,"bg-gradient-to-r from-green-500 to-green-600 text-white border-green-400 hover:from-green-600 hover:to-green-700","bg-gradient-to-r from-green-600 to-green-700 text-white border-green-500 hover:from-green-700 hover:to-green-800")}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"text-2xl",children:"➕"}),o.jsx("span",{className:"font-bold text-lg",children:"REGISTRAR COMPRA"})]})}),o.jsx("button",{onClick:()=>{s(),t()},className:`w-full rounded-2xl p-5 text-left transition-all hover:scale-105 shadow-lg border-2 ${d(r,"bg-gradient-to-r from-orange-500 to-orange-600 text-white border-orange-400 hover:from-orange-600 hover:to-orange-700","bg-gradient-to-r from-orange-600 to-orange-700 text-white border-orange-500 hover:from-orange-700 hover:to-orange-800")}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"text-2xl",children:"👥"}),o.jsx("span",{className:"font-bold text-lg",children:"ADMINISTRADORES"})]})}),o.jsx("button",{onClick:()=>{a(),t()},className:`w-full rounded-2xl p-5 text-left transition-all hover:scale-105 shadow-lg border-2 ${d(r,"bg-gradient-to-r from-teal-500 to-teal-600 text-white border-teal-400 hover:from-teal-600 hover:to-teal-700","bg-gradient-to-r from-teal-600 to-teal-700 text-white border-teal-500 hover:from-teal-700 hover:to-teal-800")}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"text-2xl",children:"📊"}),o.jsx("span",{className:"font-bold text-lg",children:"EXPORTAR CSV"})]})}),o.jsx("div",{className:`border-2 my-6 ${d(r,"border-gray-300","border-gray-600")}`}),o.jsx("button",{onClick:()=>{i(),t()},className:`w-full rounded-2xl p-5 text-left transition-all hover:scale-105 shadow-lg border-2 ${d(r,"bg-gradient-to-r from-red-500 to-red-600 text-white border-red-400 hover:from-red-600 hover:to-red-700","bg-gradient-to-r from-red-600 to-red-700 text-white border-red-500 hover:from-red-700 hover:to-red-800")}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"text-2xl",children:"🚪"}),o.jsx("span",{className:"font-bold text-lg",children:"CERRAR SESIÓN"})]})})]}),o.jsx("div",{className:`mt-8 p-5 rounded-2xl shadow-lg border-2 ${d(r,"bg-gradient-to-br from-yellow-50 to-amber-50 border-yellow-300","bg-gradient-to-br from-yellow-900 to-amber-900 border-yellow-600")}`,children:o.jsxs("p",{className:`text-sm font-medium ${d(r,"text-amber-800","text-amber-200")}`,children:["💡 ",o.jsx("strong",{children:"TIP:"})," Usa el dashboard para ver estadísticas y el menú de compras para gestionar pedidos."]})})]})]}):null}function Lf({isDark:e,purchases:t,pendingPurchases:r=[],expiringServices:n=[],renewalStats:s,loading:a=!1,error:i=null,adminUsers:l,setAdminUsers:c,onToggleValidate:u,onDeletePurchase:h,onEditPurchase:m,onReminderPurchase:f,onRegisterPurchase:b,onExportCSV:y,refreshAllStats:w,onGoToHome:j,onSetAdminUserRegisterFormPurchaseOpen:g,onSetDrawerOpen:p,onLogout:x,onSetView:v}){const[S,N]=E.useState("dashboard"),[_,P]=E.useState(!1),[z,R]=E.useState(!1),[G,be]=E.useState("pending"),[ke,q]=E.useState(!1),De=t.length,me=t.filter(T=>T.validated);return me.reduce((T,C)=>T+(C.price||0),0),o.jsxs("section",{className:"mx-auto max-w-6xl px-3 sm:px-4 pb-8 sm:pb-16",children:[o.jsx("div",{className:"mb-3 sm:mb-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-3 gap-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl sm:text-2xl font-bold",children:"🔧 Panel Administrador"}),o.jsx("p",{className:`text-xs sm:text-sm ${d(e,"text-zinc-600","text-zinc-300")}`,children:"Gestiona compras, administradores y configuración"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3",children:[o.jsx("button",{onClick:()=>R(!0),className:`rounded-xl px-3 sm:px-4 py-2 text-xs sm:text-sm hover:scale-105 transition-transform ${d(e,"bg-zinc-200 text-zinc-800 hover:bg-zinc-300","bg-zinc-700 text-zinc-200 hover:bg-zinc-600")}`,children:"☰ Menú"}),o.jsx("button",{onClick:w,disabled:a,className:`rounded-xl px-3 sm:px-4 py-2 text-xs sm:text-sm hover:scale-105 transition-transform disabled:opacity-50 ${d(e,"bg-blue-600 text-white hover:bg-blue-700","bg-blue-500 text-white hover:bg-blue-600")}`,children:a?"⏳ Cargando...":"🔄 Actualizar Todo"}),o.jsx("button",{onClick:()=>v("home"),className:`rounded-xl px-3 sm:px-4 py-2 text-xs sm:text-sm hover:scale-105 transition-transform ${d(e,"bg-zinc-100 text-zinc-700 hover:bg-zinc-200","bg-zinc-800 text-zinc-200 hover:bg-zinc-700")}`,children:"← Inicio"})]})]})}),o.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4 mb-6 sm:mb-8",children:[o.jsx("div",{className:`rounded-xl p-3 sm:p-4 shadow-lg border ${d(e,"bg-gradient-to-br from-white to-gray-50 border-gray-300 shadow-gray-200/50","bg-gradient-to-br from-gray-800 to-gray-900 border-gray-600 shadow-gray-900/50")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:`text-xs font-bold mb-1 ${d(e,"text-gray-800","text-gray-200")}`,children:"TOTAL COMPRAS"}),o.jsx("div",{className:`text-xl sm:text-2xl font-black ${d(e,"text-gray-900","text-white")}`,children:De})]}),o.jsx("div",{className:`text-2xl sm:text-3xl p-2 rounded-lg ${d(e,"bg-blue-100 text-blue-600","bg-blue-900 text-blue-300")}`,children:"📊"})]})}),o.jsx("div",{className:`rounded-xl p-3 sm:p-4 shadow-lg border ${d(e,"bg-gradient-to-br from-amber-50 to-orange-50 border-amber-300 shadow-amber-200/50","bg-gradient-to-br from-amber-900 to-orange-900 border-amber-600 shadow-amber-900/50")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:`text-xs font-bold mb-1 ${d(e,"text-amber-800","text-amber-200")}`,children:"PENDIENTES"}),o.jsx("div",{className:`text-xl sm:text-2xl font-black ${d(e,"text-amber-900","text-amber-100")}`,children:r.length})]}),o.jsx("div",{className:`text-2xl sm:text-3xl p-2 rounded-lg ${d(e,"bg-amber-200 text-amber-700","bg-amber-800 text-amber-300")}`,children:"⏳"})]})}),o.jsx("div",{className:`rounded-xl p-3 sm:p-4 shadow-lg border ${d(e,"bg-gradient-to-br from-green-50 to-emerald-50 border-green-300 shadow-green-200/50","bg-gradient-to-br from-green-900 to-emerald-900 border-green-600 shadow-green-900/50")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:`text-xs font-bold mb-1 ${d(e,"text-green-800","text-green-200")}`,children:"VALIDADAS"}),o.jsx("div",{className:`text-xl sm:text-2xl font-black ${d(e,"text-green-900","text-green-100")}`,children:me.length})]}),o.jsx("div",{className:`text-2xl sm:text-3xl p-2 rounded-lg ${d(e,"bg-green-200 text-green-700","bg-green-800 text-green-300")}`,children:"✅"})]})}),o.jsx("div",{className:`rounded-xl p-3 sm:p-4 shadow-lg border ${d(e,"bg-gradient-to-br from-red-50 to-rose-50 border-red-300 shadow-red-200/50","bg-gradient-to-br from-red-900 to-rose-900 border-red-600 shadow-red-900/50")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:`text-xs font-bold mb-1 ${d(e,"text-red-800","text-red-200")}`,children:"VENCEN HOY"}),o.jsx("div",{className:`text-xl sm:text-2xl font-black ${d(e,"text-red-900","text-red-100")}`,children:n.filter(T=>T.days_remaining===0).length})]}),o.jsx("div",{className:`text-2xl sm:text-3xl p-2 rounded-lg ${d(e,"bg-red-200 text-red-700","bg-red-800 text-red-300")}`,children:"⚠️"})]})})]}),o.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 mb-6 sm:mb-8",children:[o.jsxs("button",{onClick:()=>N("purchases"),className:`rounded-xl p-3 sm:p-4 text-left transition-all hover:scale-105 shadow-lg border ${d(e,"bg-gradient-to-br from-blue-600 to-blue-700 text-white border-blue-500 shadow-blue-600/30","bg-gradient-to-br from-blue-600 to-blue-700 text-white border-blue-400 shadow-blue-600/30")}`,children:[o.jsx("div",{className:"text-xl sm:text-2xl mb-2",children:"🛒"}),o.jsx("div",{className:"text-sm sm:text-base font-bold mb-1",children:"GESTIONAR COMPRAS"}),o.jsx("div",{className:"text-xs opacity-90",children:"Revisa, valida y notifica por WhatsApp"})]}),o.jsxs("button",{onClick:b,className:`rounded-xl p-3 sm:p-4 text-left transition-all hover:scale-105 shadow-lg border ${d(e,"bg-gradient-to-br from-green-600 to-green-700 text-white border-green-500 shadow-green-600/30","bg-gradient-to-br from-green-600 to-green-700 text-white border-green-400 shadow-green-600/30")}`,children:[o.jsx("div",{className:"text-xl sm:text-2xl mb-2",children:"➕"}),o.jsx("div",{className:"text-sm sm:text-base font-bold mb-1",children:"REGISTRAR COMPRA"}),o.jsx("div",{className:"text-xs opacity-90",children:"Crear compra manual para un usuario"})]}),o.jsxs("button",{onClick:()=>P(!0),className:`rounded-xl p-3 sm:p-4 text-left transition-all hover:scale-105 shadow-lg border ${d(e,"bg-gradient-to-br from-purple-600 to-purple-700 text-white border-purple-500 shadow-purple-600/30","bg-gradient-to-br from-purple-600 to-purple-700 text-white border-purple-400 shadow-purple-600/30")}`,children:[o.jsx("div",{className:"text-xl sm:text-2xl mb-2",children:"👥"}),o.jsx("div",{className:"text-sm sm:text-base font-bold mb-1",children:"ADMINISTRADORES"}),o.jsx("div",{className:"text-xs opacity-90",children:"Agregar o quitar correos con acceso"})]}),o.jsxs("button",{onClick:y,className:`rounded-xl p-3 sm:p-4 text-left transition-all hover:scale-105 shadow-lg border ${d(e,"bg-gradient-to-br from-orange-600 to-orange-700 text-white border-orange-500 shadow-orange-600/30","bg-gradient-to-br from-orange-600 to-orange-700 text-white border-orange-400 shadow-orange-600/30")}`,children:[o.jsx("div",{className:"text-xl sm:text-2xl mb-2",children:"📊"}),o.jsx("div",{className:"text-sm sm:text-base font-bold mb-1",children:"EXPORTAR DATOS"}),o.jsx("div",{className:"text-xs opacity-90",children:"Descargar reporte en formato CSV"})]})]}),o.jsxs("div",{className:`rounded-xl p-4 sm:p-6 shadow-lg mb-4 sm:mb-6 border backdrop-blur-sm ${d(e,"bg-gradient-to-br from-white to-gray-50 border-gray-300 shadow-gray-200/50","bg-gradient-to-br from-gray-800 to-gray-900 border-gray-600 shadow-gray-900/50")}`,children:[o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 sm:mb-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsxs("button",{onClick:()=>be("pending"),className:`px-4 py-2 rounded-xl font-bold transition-all text-xs border shadow-md ${G==="pending"?d(e,"bg-gradient-to-r from-amber-400 to-orange-500 text-amber-900 border-amber-500 shadow-amber-400/30","bg-gradient-to-r from-amber-600 to-orange-600 text-amber-100 border-amber-500 shadow-amber-600/30"):d(e,"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 hover:from-gray-200 hover:to-gray-300 border-gray-300 shadow-gray-200/30","bg-gradient-to-r from-gray-700 to-gray-600 text-gray-300 hover:from-gray-600 hover:to-gray-500 border-gray-500 shadow-gray-700/30")}`,children:["⏳ PENDIENTES (",r.length,")"]}),o.jsxs("button",{onClick:()=>be("active"),className:`px-4 py-2 rounded-xl font-bold transition-all text-xs border shadow-md ${G==="active"?d(e,"bg-gradient-to-r from-green-400 to-emerald-500 text-green-900 border-green-500 shadow-green-400/30","bg-gradient-to-r from-green-600 to-emerald-600 text-green-100 border-green-500 shadow-green-600/30"):d(e,"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 hover:from-gray-200 hover:to-gray-300 border-gray-300 shadow-gray-200/30","bg-gradient-to-r from-gray-700 to-gray-600 text-gray-300 hover:from-gray-600 hover:to-gray-500 border-gray-500 shadow-gray-700/30")}`,children:["✅ ACTIVAS (",me.length,")"]})]})}),G==="pending"&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2",children:[o.jsx("h4",{className:`text-lg sm:text-xl font-bold ${d(e,"text-zinc-900","text-white")}`,children:"⏳ Compras Pendientes"}),o.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-semibold border-2 ${d(e,"bg-amber-200 text-amber-900 border-amber-400","bg-amber-800 text-amber-100 border-amber-500")}`,children:[r.length," pendientes"]})]}),a?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-2xl mb-2",children:"⏳"}),o.jsx("p",{className:`text-sm font-medium ${d(e,"text-zinc-700","text-zinc-300")}`,children:"Cargando compras..."})]}):r.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-4xl mb-4",children:"🎉"}),o.jsx("h5",{className:`text-lg font-bold mb-2 ${d(e,"text-zinc-900","text-white")}`,children:"¡No hay compras pendientes!"}),o.jsx("p",{className:`text-sm font-medium ${d(e,"text-zinc-700","text-zinc-300")}`,children:"Todas las compras han sido procesadas"})]}):o.jsx("div",{className:"space-y-3 sm:space-y-4",children:r.map(T=>o.jsx($c,{item:T,isDark:e,onToggleValidate:()=>u(T.id),onDelete:()=>h(T.id),onEdit:()=>m(T),onReminder:()=>f==null?void 0:f(T)},T.id))})]}),G==="active"&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2",children:[o.jsx("h4",{className:`text-lg sm:text-xl font-bold ${d(e,"text-zinc-900","text-white")}`,children:"✅ Compras Activas"}),o.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-semibold border-2 ${d(e,"bg-green-200 text-green-900 border-green-400","bg-green-800 text-green-100 border-green-500")}`,children:[me.length," activas"]})]}),me.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-4xl mb-4",children:"📊"}),o.jsx("h5",{className:`text-lg font-bold mb-2 ${d(e,"text-zinc-900","text-white")}`,children:"No hay compras activas"}),o.jsx("p",{className:`text-sm font-medium ${d(e,"text-zinc-700","text-zinc-300")}`,children:"Las compras activas aparecerán aquí"})]}):o.jsx("div",{className:"space-y-3 sm:space-y-4",children:me.map(T=>o.jsx($c,{item:T,isDark:e,onToggleValidate:()=>u(T.id),onDelete:()=>h(T.id),onEdit:()=>m(T),onReminder:()=>f==null?void 0:f(T)},T.id))})]})]}),o.jsx(lh,{open:_,onClose:()=>P(!1),isDark:e,adminUsers:l,setAdminUsers:c}),o.jsx(ch,{open:z,onClose:()=>R(!1),isDark:e,setSubView:()=>{},openAdmins:()=>P(!0),onExportCSV:y,onLogout:x,onRegisterPurchase:b})]})}function Mf({isDark:e,user:t,purchases:r,onToggleValidate:n,onDeletePurchase:s,onEditPurchase:a,onSetView:i,loading:l=!1}){const[c,u]=E.useState({}),h=r.filter(m=>m.phone===t.phone&&m.validated);return console.log("🔍 UserProfile Debug:",{totalPurchases:r.length,userPhone:t.phone,userActivePurchases:h.length,purchases:r}),o.jsxs("section",{className:"mx-auto max-w-7xl px-2 sm:px-3 pb-6 sm:pb-8",children:[o.jsx("div",{className:`w-full py-2 px-3 sm:px-4 rounded-t-xl sm:rounded-t-2xl ${d(e,"bg-gray-800","bg-gray-900")} mb-0`,children:o.jsx("div",{className:"flex items-center justify-center",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"text-green-400 text-sm",children:"🛡️"}),o.jsx("span",{className:"text-xs font-semibold text-green-300",children:"Seguridad Garantizada"})]})})}),o.jsxs("div",{className:"relative mb-6 sm:mb-8",children:[o.jsx("div",{className:`absolute inset-0 rounded-2xl sm:rounded-3xl ${d(e,"bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10","bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20")} blur-xl`}),o.jsx("div",{className:`relative p-4 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl backdrop-blur-sm border ${d(e,"bg-white/80 border-white/20","bg-zinc-900/80 border-zinc-700/50")} shadow-2xl`,children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1",children:[o.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center text-lg sm:text-2xl md:text-3xl font-bold ${d(e,"bg-gradient-to-br from-blue-500 to-purple-600 text-white","bg-gradient-to-br from-blue-400 to-purple-500 text-white")} shadow-lg`,children:t.name.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg sm:text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-1",children:"👤 Mi Perfil"}),o.jsx("p",{className:`text-xs sm:text-sm md:text-base ${d(e,"text-zinc-600","text-zinc-300")} font-medium`,children:"Gestiona tu cuenta y compras activas"})]})]}),o.jsxs("button",{onClick:()=>i("home"),className:`group relative overflow-hidden rounded-xl sm:rounded-2xl px-4 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-semibold transition-all duration-300 hover:scale-105 ${d(e,"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl","bg-gradient-to-r from-blue-600 to-purple-700 text-white shadow-lg hover:shadow-xl")}`,children:[o.jsx("span",{className:"relative z-10 flex items-center gap-1 sm:gap-2",children:"← Inicio"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]})})]}),o.jsxs("div",{className:"grid gap-6 sm:gap-8",children:[o.jsxs("div",{className:`relative overflow-hidden rounded-2xl sm:rounded-3xl border ${d(e,"bg-white/90 border-white/20","bg-zinc-900/90 border-zinc-700/50")} shadow-2xl backdrop-blur-sm`,children:[o.jsx("div",{className:`absolute inset-0 ${d(e,"bg-gradient-to-br from-blue-50/50 to-purple-50/50","bg-gradient-to-br from-blue-900/20 to-purple-900/20")}`}),o.jsxs("div",{className:"relative p-4 sm:p-6 md:p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[o.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl flex items-center justify-center ${d(e,"bg-gradient-to-br from-blue-500 to-purple-600","bg-gradient-to-br from-blue-400 to-purple-500")} shadow-lg`,children:o.jsx("span",{className:"text-white text-sm sm:text-lg",children:"👤"})}),o.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Información Personal"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[o.jsxs("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl ${d(e,"bg-white/60 border border-white/30","bg-zinc-800/60 border border-zinc-700/30")} backdrop-blur-sm`,children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[o.jsx("span",{className:"text-lg sm:text-xl",children:"👤"}),o.jsx("label",{className:`text-xs sm:text-sm font-semibold ${d(e,"text-zinc-700","text-zinc-300")}`,children:"Nombre"})]}),o.jsx("p",{className:`font-bold text-sm sm:text-base md:text-lg ${d(e,"text-zinc-900","text-zinc-100")}`,children:t.name})]}),o.jsxs("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl ${d(e,"bg-white/60 border border-white/30","bg-zinc-800/60 border border-zinc-700/30")} backdrop-blur-sm`,children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[o.jsx("span",{className:"text-lg sm:text-xl",children:"📱"}),o.jsx("label",{className:`text-xs sm:text-sm font-semibold ${d(e,"text-zinc-700","text-zinc-300")}`,children:"WhatsApp"})]}),o.jsx("p",{className:`font-bold text-sm sm:text-base md:text-lg ${d(e,"text-zinc-900","text-zinc-100")}`,children:t.phone})]}),o.jsxs("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl ${d(e,"bg-white/60 border border-white/30","bg-zinc-800/60 border border-zinc-700/30")} backdrop-blur-sm`,children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[o.jsx("span",{className:"text-lg sm:text-xl",children:"📧"}),o.jsx("label",{className:`text-xs sm:text-sm font-semibold ${d(e,"text-zinc-700","text-zinc-300")}`,children:"Email"})]}),o.jsx("p",{className:`font-bold text-sm sm:text-base md:text-lg ${d(e,"text-zinc-900","text-zinc-100")}`,children:t.email||"No proporcionado"})]}),o.jsxs("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl ${d(e,"bg-white/60 border border-white/30","bg-zinc-800/60 border border-zinc-700/30")} backdrop-blur-sm`,children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[o.jsx("span",{className:"text-lg sm:text-xl",children:"📅"}),o.jsx("label",{className:`text-xs sm:text-sm font-semibold ${d(e,"text-zinc-700","text-zinc-300")}`,children:"Miembro desde"})]}),o.jsx("p",{className:`font-bold text-sm sm:text-base md:text-lg ${d(e,"text-zinc-900","text-zinc-100")}`,children:new Date().toLocaleDateString("es-ES")})]})]})]})]}),o.jsxs("div",{className:`relative overflow-hidden rounded-2xl sm:rounded-3xl border ${d(e,"bg-white/90 border-white/20","bg-zinc-900/90 border-zinc-700/50")} shadow-2xl backdrop-blur-sm`,children:[o.jsx("div",{className:`absolute inset-0 ${d(e,"bg-gradient-to-br from-green-50/50 to-blue-50/50","bg-gradient-to-br from-green-900/20 to-blue-900/20")}`}),o.jsxs("div",{className:"relative p-4 sm:p-6 md:p-8",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 gap-3 sm:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl flex items-center justify-center ${d(e,"bg-gradient-to-br from-green-500 to-blue-600","bg-gradient-to-br from-green-400 to-blue-500")} shadow-lg`,children:o.jsx("span",{className:"text-white text-sm sm:text-lg",children:"🛍️"})}),o.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"Mis Compras Activas"})]}),o.jsxs("button",{onClick:()=>window.location.reload(),className:`group relative overflow-hidden rounded-xl sm:rounded-2xl px-3 sm:px-4 py-2 text-xs sm:text-sm font-semibold transition-all duration-300 hover:scale-105 ${d(e,"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl","bg-gradient-to-r from-blue-600 to-purple-700 text-white shadow-lg hover:shadow-xl")}`,children:[o.jsx("span",{className:"relative z-10 flex items-center gap-1 sm:gap-2",children:"🔄 Actualizar"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]}),h.length===0?o.jsxs("div",{className:"text-center py-8 sm:py-12",children:[o.jsx("div",{className:`w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 mx-auto mb-4 sm:mb-6 rounded-full flex items-center justify-center ${d(e,"bg-gradient-to-br from-blue-100 to-purple-100","bg-gradient-to-br from-blue-900/30 to-purple-900/30")} shadow-lg`,children:o.jsx("span",{className:"text-2xl sm:text-3xl md:text-4xl",children:"📺"})}),o.jsx("h4",{className:`text-lg sm:text-xl font-bold mb-2 ${d(e,"text-zinc-800","text-zinc-200")}`,children:"No tienes compras activas"}),o.jsx("p",{className:`text-xs sm:text-sm mb-4 sm:mb-6 ${d(e,"text-zinc-600","text-zinc-400")}`,children:"Explora nuestro catálogo y encuentra el servicio perfecto para ti"}),o.jsxs("button",{onClick:()=>i("home"),className:`group relative overflow-hidden rounded-xl sm:rounded-2xl px-4 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-semibold transition-all duration-300 hover:scale-105 ${d(e,"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl","bg-gradient-to-r from-blue-600 to-purple-700 text-white shadow-lg hover:shadow-xl")}`,children:[o.jsx("span",{className:"relative z-10 flex items-center gap-1 sm:gap-2",children:"🛍️ Ver Catálogo"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]}):l?o.jsxs("div",{className:`text-center py-8 sm:py-12 ${d(e,"text-gray-500","text-gray-400")}`,children:[o.jsx("div",{className:"text-4xl sm:text-6xl mb-4 animate-spin",children:"⏳"}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",children:"Cargando tus suscripciones..."}),o.jsx("p",{className:"text-xs sm:text-sm",children:"Por favor espera un momento"})]}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4",children:h.filter(m=>ni(m.end)>=0).map(m=>{Pf(m.end);const f=ni(m.end);return Cf(m.start,m.end),o.jsxs("div",{className:`group relative overflow-hidden rounded-xl sm:rounded-2xl border-2 shadow-lg hover:shadow-xl transition-all duration-300 ${d(e,"bg-gradient-to-br from-white to-gray-50 border-gray-200 hover:border-blue-300","bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-blue-500")}`,children:[o.jsx("div",{className:`relative p-3 sm:p-4 md:p-5 ${d(e,"bg-gradient-to-r from-blue-50 to-purple-50","bg-gradient-to-r from-blue-900/30 to-purple-900/30")}`,children:o.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[o.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 rounded-xl sm:rounded-2xl flex items-center justify-center text-lg sm:text-xl md:text-2xl shadow-lg ${d(e,"bg-gradient-to-br from-blue-500 to-purple-600 text-white","bg-gradient-to-br from-blue-600 to-purple-700 text-white")}`,children:m.service==="Netflix"?"🎬":m.service==="Disney+"?"🏰":m.service==="Max"?"🎭":m.service==="Prime Video"?"📺":m.service==="Spotify"?"🎧":"📱"}),o.jsxs("div",{children:[o.jsx("h4",{className:`font-bold text-sm sm:text-base md:text-lg ${d(e,"text-gray-900","text-white")}`,children:m.service}),o.jsxs("p",{className:`text-xs sm:text-sm ${d(e,"text-gray-600","text-gray-300")}`,children:[m.months," meses • Activo"]})]})]})}),o.jsxs("div",{className:`p-3 sm:p-4 md:p-5 text-center ${d(e,"bg-white","bg-gray-800")}`,children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl sm:text-3xl md:text-4xl font-black text-red-600",children:f}),o.jsx("p",{className:"text-sm sm:text-base md:text-lg font-bold text-red-600",children:"días restantes"})]}),o.jsx("p",{className:`text-xs sm:text-sm font-medium mt-2 ${d(e,"text-gray-600","text-gray-400")}`,children:f<=7?"Vence muy pronto":f<=30?"Vence en menos de un mes":"Tiempo suficiente"})]}),o.jsx("div",{className:`px-3 sm:px-4 md:px-5 py-3 sm:py-4 ${d(e,"bg-gray-50","bg-gray-700")}`,children:o.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-lg sm:rounded-xl flex items-center justify-center mx-auto mb-2 ${d(e,"bg-blue-100","bg-blue-900/30")}`,children:o.jsx("span",{className:"text-blue-600 text-sm sm:text-base md:text-lg",children:"📅"})}),o.jsx("p",{className:`text-xs font-medium ${d(e,"text-gray-500","text-gray-400")}`,children:"Inicio"}),o.jsx("p",{className:`text-xs sm:text-sm font-bold ${d(e,"text-gray-900","text-white")}`,children:new Date(m.start).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit"})})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-lg sm:rounded-xl flex items-center justify-center mx-auto mb-2 ${d(e,"bg-orange-100","bg-orange-900/30")}`,children:o.jsx("span",{className:"text-orange-600 text-sm sm:text-base md:text-lg",children:"⏰"})}),o.jsx("p",{className:`text-xs font-medium ${d(e,"text-gray-500","text-gray-400")}`,children:"Vence"}),o.jsx("p",{className:`text-xs sm:text-sm font-bold ${d(e,"text-gray-900","text-white")}`,children:new Date(m.end).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit"})})]})]})}),m.service_email&&m.service_password&&(()=>{const b=m.service||"",y=b.includes("+")||b.includes("Netflix")&&b.includes("Disney");let w=[b];y&&(b.includes("Netflix")&&b.includes("Disney")?w=["Netflix",b.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:b.includes("Max")&&b.includes("Prime")?w=["Max","Prime Video"]:b.includes("Netflix")&&b.includes("Max")?w=["Netflix","Max"]:b.includes("Netflix")&&b.includes("Prime")?w=["Netflix","Prime Video"]:b.includes("Prime")&&b.includes("Disney")?w=["Prime Video",b.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:b.includes("Disney")&&b.includes("Max")?w=[b.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Max"]:b.includes("Spotify")&&b.includes("Netflix")?w=["Spotify","Netflix"]:b.includes("Spotify")&&b.includes("Disney")?w=["Spotify",b.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:b.includes("Spotify")&&b.includes("Prime")?w=["Spotify","Prime Video"]:b.includes("Paramount")&&b.includes("Max")&&b.includes("Prime")?w=["Paramount+","Max","Prime Video"]:b.includes("Netflix")&&b.includes("Max")&&b.includes("Disney")?w=["Netflix","Max",b.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Prime Video","Paramount+"]:w=b.split(/\s*\+\s*/).map(g=>g.trim()).filter(g=>g.length>0));let j={};return y&&m.service_password&&m.service_password.split(`

`).forEach(p=>{const x=p.split(`
`);if(x.length>=3){const v=x[0].replace(":","").trim(),S=x[1].replace("Email: ","").trim(),N=x[2].replace("Contraseña: ","").trim();v&&S&&N&&(j[v]={email:S,password:N})}}),o.jsxs("div",{className:`p-3 sm:p-4 md:p-5 ${d(e,"bg-gradient-to-r from-blue-50 to-indigo-50","bg-gradient-to-r from-blue-900/20 to-indigo-900/20")}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[o.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-md sm:rounded-lg flex items-center justify-center ${d(e,"bg-blue-100","bg-blue-900/30")}`,children:o.jsx("span",{className:"text-blue-600 text-xs sm:text-sm",children:"🔑"})}),o.jsx("h5",{className:`font-bold text-sm sm:text-base ${d(e,"text-blue-900","text-blue-200")}`,children:y?"Credenciales del Combo":"Credenciales"})]}),y?o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsx("div",{className:`p-2 rounded-lg ${d(e,"bg-orange-50 border border-orange-200","bg-orange-900/20 border border-orange-600")}`,children:o.jsx("p",{className:`text-xs font-semibold ${d(e,"text-orange-800","text-orange-300")}`,children:"🎁 Combo: Credenciales separadas por servicio"})}),w.map((g,p)=>{const x=j[g];return x?o.jsxs("div",{className:`p-3 rounded-lg border ${d(e,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-600")}`,children:[o.jsxs("h6",{className:`text-sm font-bold mb-2 ${d(e,"text-gray-800","text-white")}`,children:[g," ",p===0?"🎬":p===1?"🎭":p===2?"🎪":"🎯"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:`text-xs font-semibold mb-1 ${d(e,"text-blue-700","text-blue-300")}`,children:"📧 Email"}),o.jsx("div",{className:`p-2 rounded-lg border ${d(e,"bg-white border-blue-200","bg-gray-700 border-blue-600")}`,children:o.jsx("p",{className:`text-xs font-mono ${d(e,"text-gray-900","text-white")}`,children:x.email})})]}),o.jsxs("div",{children:[o.jsx("p",{className:`text-xs font-semibold mb-1 ${d(e,"text-blue-700","text-blue-300")}`,children:"🔑 Contraseña"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`p-2 rounded-lg border flex-1 ${d(e,"bg-white border-blue-200","bg-gray-700 border-blue-600")}`,children:o.jsx("p",{className:`text-xs font-mono ${d(e,"text-gray-900","text-white")}`,children:c[`${m.id}_${g}`]?x.password:"•".repeat(12)})}),o.jsx("button",{onClick:()=>u(v=>({...v,[`${m.id}_${g}`]:!v[`${m.id}_${g}`]})),className:`px-2 py-2 rounded-lg text-xs font-bold border transition-all ${d(e,"border-blue-500 text-blue-600 hover:bg-blue-50","border-blue-500 text-blue-400 hover:bg-blue-900/20")}`,children:(c[`${m.id}_${g}`],"👁️")})]})]})]})]},g):null})]}):o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:`text-xs sm:text-sm font-semibold mb-2 ${d(e,"text-blue-700","text-blue-300")}`,children:"Email"}),o.jsx("div",{className:`p-2 sm:p-3 rounded-lg sm:rounded-xl border-2 ${d(e,"bg-white border-blue-200","bg-gray-800 border-blue-600")}`,children:o.jsx("p",{className:`text-xs sm:text-sm font-mono ${d(e,"text-gray-900","text-white")}`,children:m.service_email})})]}),o.jsxs("div",{children:[o.jsx("p",{className:`text-xs sm:text-sm font-semibold mb-2 ${d(e,"text-blue-700","text-blue-300")}`,children:"Contraseña"}),o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("div",{className:`p-2 sm:p-3 rounded-lg sm:rounded-xl border-2 flex-1 ${d(e,"bg-white border-blue-200","bg-gray-800 border-blue-600")}`,children:o.jsx("p",{className:`text-xs sm:text-sm font-mono ${d(e,"text-gray-900","text-white")}`,children:c[m.id]?m.service_password:"•".repeat(16)})}),o.jsx("button",{onClick:()=>u(g=>({...g,[m.id]:!g[m.id]})),className:`px-2 sm:px-3 md:px-4 py-2 sm:py-3 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border-2 transition-all hover:scale-105 ${d(e,"border-blue-500 text-blue-600 hover:bg-blue-50","border-blue-500 text-blue-400 hover:bg-blue-900/20")}`,children:c[m.id]?"👁️ Ocultar":"👁️ Mostrar"})]})]})]})]})})(),m.admin_notes&&m.admin_notes.trim()&&o.jsxs("div",{className:`p-3 sm:p-4 md:p-5 ${d(e,"bg-gradient-to-r from-yellow-50 to-orange-50","bg-gradient-to-r from-yellow-900/20 to-orange-900/20")}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[o.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-md sm:rounded-lg flex items-center justify-center ${d(e,"bg-yellow-100","bg-yellow-900/30")}`,children:o.jsx("span",{className:"text-yellow-600 text-xs sm:text-sm",children:"ℹ️"})}),o.jsx("h5",{className:`font-bold text-sm sm:text-base ${d(e,"text-yellow-800","text-yellow-200")}`,children:"Información Importante"})]}),o.jsx("div",{className:`p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 ${d(e,"bg-white border-yellow-200","bg-gray-800 border-yellow-600")}`,children:o.jsx("div",{className:`text-xs sm:text-sm leading-relaxed whitespace-pre-line ${d(e,"text-gray-800","text-gray-200")}`,dangerouslySetInnerHTML:{__html:m.admin_notes.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>")}})})]}),o.jsx("div",{className:`px-3 py-2 sm:px-4 sm:py-3 ${d(e,"bg-gradient-to-r from-gray-50 to-gray-100","bg-gradient-to-r from-gray-700 to-gray-800")}`,children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:`font-medium text-xs sm:text-sm ${d(e,"text-gray-700","text-gray-300")}`,children:"Estado:"}),o.jsx("span",{className:`font-bold text-xs sm:text-sm ${f<=5?"text-red-600":"text-green-600"}`,children:f<=5?"Por vencer":"Activa"})]})})]},m.id)})})]})]})]})]})}const Uf="modulepreload",Ff=function(e){return"/"+e},Tc={},Yr=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Ff(c),c in Tc)return;Tc[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Uf,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((f,b)=>{m.addEventListener("load",f),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},Bf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Yr(async()=>{const{default:n}=await Promise.resolve().then(()=>Xr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class ul extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Vf extends ul{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class kc extends ul{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ac extends ul{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var si;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(si||(si={}));var Wf=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{u(n.next(h))}catch(m){i(m)}}function c(h){try{u(n.throw(h))}catch(m){i(m)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class qf{constructor(t,{headers:r={},customFetch:n,region:s=si.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Bf(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Wf(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:i}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let h;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=i):typeof i=="string"?(l["Content-Type"]="text/plain",h=i):typeof FormData<"u"&&i instanceof FormData?h=i:(l["Content-Type"]="application/json",h=JSON.stringify(i)));const m=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:h}).catch(w=>{throw new Vf(w)}),f=m.headers.get("x-relay-error");if(f&&f==="true")throw new kc(m);if(!m.ok)throw new Ac(m);let b=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return b==="application/json"?y=yield m.json():b==="application/octet-stream"?y=yield m.blob():b==="text/event-stream"?y=m:b==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(s){return{data:null,error:s,response:s instanceof Ac||s instanceof kc?s.context:void 0}}})}}var Ee={},dl={},_o={},Qn={},So={},Eo={},Hf=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Gr=Hf();const Df=Gr.fetch,uh=Gr.fetch.bind(Gr),dh=Gr.Headers,Gf=Gr.Request,Kf=Gr.Response,Xr=Object.freeze(Object.defineProperty({__proto__:null,Headers:dh,Request:Gf,Response:Kf,default:uh,fetch:Df},Symbol.toStringTag,{value:"Module"})),Jf=Xh(Xr);var Co={};Object.defineProperty(Co,"__esModule",{value:!0});let Qf=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Co.default=Qf;var hh=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eo,"__esModule",{value:!0});const Yf=hh(Jf),Xf=hh(Co);let Zf=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Yf.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c,u;let h=null,m=null,f=null,b=a.status,y=a.statusText;if(a.ok){if(this.method!=="HEAD"){const p=await a.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?m=p:m=JSON.parse(p))}const j=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");j&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(h={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,f=null,b=406,y="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const j=await a.text();try{h=JSON.parse(j),Array.isArray(h)&&a.status===404&&(m=[],h=null,b=200,y="OK")}catch{a.status===404&&j===""?(b=204,y="No Content"):h={message:j}}if(h&&this.isMaybeSingle&&(!((u=h==null?void 0:h.details)===null||u===void 0)&&u.includes("0 rows"))&&(h=null,b=200,y="OK"),h&&this.shouldThrowOnError)throw new Xf.default(h)}return{error:h,data:m,count:f,status:b,statusText:y}});return this.shouldThrowOnError||(s=s.catch(a=>{var i,l,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Eo.default=Zf;var eg=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(So,"__esModule",{value:!0});const tg=eg(Eo);let rg=class extends tg.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(i,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};So.default=rg;var ng=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qn,"__esModule",{value:!0});const sg=ng(So);let og=class extends sg.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${i}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Qn.default=og;var ag=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_o,"__esModule",{value:!0});const cn=ag(Qn);let ig=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),n&&this.headers.append("Prefer",`count=${n}`),new cn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new cn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new cn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new cn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new cn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};_o.default=ig;var mh=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dl,"__esModule",{value:!0});const lg=mh(_o),cg=mh(Qn);let ug=class fh{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new lg.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new fh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:a}={}){var i;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,f])=>f!==void 0).map(([m,f])=>[m,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([m,f])=>{c.searchParams.append(m,f)})):(l="POST",u=r);const h=new Headers(this.headers);return a&&h.set("Prefer",`count=${a}`),new cg.default({method:l,url:c,headers:h,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};dl.default=ug;var Zr=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.PostgrestError=Ee.PostgrestBuilder=Ee.PostgrestTransformBuilder=Ee.PostgrestFilterBuilder=Ee.PostgrestQueryBuilder=Ee.PostgrestClient=void 0;const gh=Zr(dl);Ee.PostgrestClient=gh.default;const ph=Zr(_o);Ee.PostgrestQueryBuilder=ph.default;const xh=Zr(Qn);Ee.PostgrestFilterBuilder=xh.default;const bh=Zr(So);Ee.PostgrestTransformBuilder=bh.default;const vh=Zr(Eo);Ee.PostgrestBuilder=vh.default;const yh=Zr(Co);Ee.PostgrestError=yh.default;var dg=Ee.default={PostgrestClient:gh.default,PostgrestQueryBuilder:ph.default,PostgrestFilterBuilder:xh.default,PostgrestTransformBuilder:bh.default,PostgrestBuilder:vh.default,PostgrestError:yh.default};const{PostgrestClient:hg,PostgrestQueryBuilder:Lx,PostgrestFilterBuilder:Mx,PostgrestTransformBuilder:Ux,PostgrestBuilder:Fx,PostgrestError:Bx}=dg;class mg{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const fg="2.15.5",gg=`realtime-js/${fg}`,pg="1.0.0",oi=1e4,xg=1e3,bg=100;var _n;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(_n||(_n={}));var se;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(se||(se={}));var Xe;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Xe||(Xe={}));var ai;(function(e){e.websocket="websocket"})(ai||(ai={}));var Zt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Zt||(Zt={}));class vg{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(t.slice(i,i+s));i=i+s;const c=n.decode(t.slice(i,i+a));i=i+a;const u=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class wh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var H;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(H||(H={}));const Oc=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,i)=>(a[i]=yg(i,e,t,s),a),{})},yg=(e,t,r,n)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,i=r[e];return a&&!n.includes(a)?jh(a,i):ii(i)},jh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return _g(t,r)}switch(e){case H.bool:return wg(t);case H.float4:case H.float8:case H.int2:case H.int4:case H.int8:case H.numeric:case H.oid:return jg(t);case H.json:case H.jsonb:return Ng(t);case H.timestamp:return Sg(t);case H.abstime:case H.date:case H.daterange:case H.int4range:case H.int8range:case H.money:case H.reltime:case H.text:case H.time:case H.timestamptz:case H.timetz:case H.tsrange:case H.tstzrange:return ii(t);default:return ii(t)}},ii=e=>e,wg=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},jg=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ng=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_g=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const i=e.slice(1,r);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>jh(t,l))}return e},Sg=e=>typeof e=="string"?e.replace(" ","T"):e,Nh=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ta{constructor(t,r,n={},s=oi){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Rc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Rc||(Rc={}));class Sn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sn.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=Sn.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Sn.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(a,(u,h)=>{i[u]||(c[u]=h)}),this.map(i,(u,h)=>{const m=a[u];if(m){const f=h.map(j=>j.presence_ref),b=m.map(j=>j.presence_ref),y=h.filter(j=>b.indexOf(j.presence_ref)<0),w=m.filter(j=>f.indexOf(j.presence_ref)<0);y.length>0&&(l[u]=y),w.length>0&&(c[u]=w)}else l[u]=h}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const m=t[l].map(b=>b.presence_ref),f=h.filter(b=>m.indexOf(b.presence_ref)<0);t[l].unshift(...f)}n(l,h,c)}),this.map(i,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(m=>m.presence_ref);u=u.filter(m=>h.indexOf(m.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ic;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ic||(Ic={}));var En;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(En||(En={}));var mt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(mt||(mt={}));class hl{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ta(this,Xe.join,this.params,this.timeout),this.rejoinTimer=new wh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=se.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xe.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Sn(this),this.broadcastEndpointURL=Nh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==se.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[En.PRESENCE]&&this.bindings[En.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(b=>t==null?void 0:t(mt.CHANNEL_ERROR,b)),this._onClose(()=>t==null?void 0:t(mt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var y;if(this.socket.setAuth(),b===void 0){t==null||t(mt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,j=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,g=[];for(let p=0;p<j;p++){const x=w[p],{filter:{event:v,schema:S,table:N,filter:_}}=x,P=b&&b[p];if(P&&P.event===v&&P.schema===S&&P.table===N&&P.filter===_)g.push(Object.assign(Object.assign({},x),{id:P.id}));else{this.unsubscribe(),this.state=se.errored,t==null||t(mt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(mt.SUBSCRIBED);return}}).receive("error",b=>{this.state=se.errored,t==null||t(mt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===se.joined&&t===En.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=se.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xe.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ta(this,Xe.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=se.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ta(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>bg){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=Xe;if(n&&[l,c,u,h].indexOf(i)>=0&&n!==this._joinRef())return;let f=this._onMessage(i,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var y,w,j;return((y=b.filter)===null||y===void 0?void 0:y.event)==="*"||((j=(w=b.filter)===null||w===void 0?void 0:w.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===i}).map(b=>b.callback(f,n)):(a=this.bindings[i])===null||a===void 0||a.filter(b=>{var y,w,j,g,p,x;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in b){const v=b.id,S=(y=b.filter)===null||y===void 0?void 0:y.event;return v&&((w=r.ids)===null||w===void 0?void 0:w.includes(v))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const v=(p=(g=b==null?void 0:b.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return v==="*"||v===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===i}).map(b=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:w,table:j,commit_timestamp:g,type:p,errors:x}=y;f=Object.assign(Object.assign({},{schema:w,table:j,commit_timestamp:g,eventType:p,new:{},old:{},errors:x}),this._getPayloadRecords(y))}b.callback(f,n)})}_isClosed(){return this.state===se.closed}_isJoined(){return this.state===se.joined}_isJoining(){return this.state===se.joining}_isLeaving(){return this.state===se.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&hl.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Xe.close,{},t)}_onError(t){this._on(Xe.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Oc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Oc(t.columns,t.old_record)),r}}const ra=()=>{},gs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Eg=[1e3,2e3,5e3,1e4],Cg=1e4,Pg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $g{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=oi,this.transport=null,this.heartbeatIntervalMs=gs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ra,this.ref=0,this.reconnectTimer=null,this.logger=ra,this.conn=null,this.sendBuffer=[],this.serializer=new vg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...i)=>Yr(async()=>{const{default:l}=await Promise.resolve().then(()=>Xr);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...i)=>a(...i)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${ai.websocket}`,this.httpEndpoint=Nh(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mg.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:pg}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _n.connecting:return Zt.Connecting;case _n.open:return Zt.Open;case _n.closing:return Zt.Closing;default:return Zt.Closed}}isConnected(){return this.connectionState()===Zt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new hl(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(xg,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},gs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:i}=r,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Xe.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Pg],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:gg};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Xe.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new wh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,i,l,c,u,h;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:oi,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:gs.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:ra,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>Eg[m-1]||Cg,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(m,f)=>f(JSON.stringify(m)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class ml extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function oe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Tg extends ml{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class li extends ml{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var kg=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{u(n.next(h))}catch(m){i(m)}}function c(h){try{u(n.throw(h))}catch(m){i(m)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const _h=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Yr(async()=>{const{default:n}=await Promise.resolve().then(()=>Xr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Ag=()=>kg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yr(()=>Promise.resolve().then(()=>Xr),void 0)).Response:Response}),ci=e=>{if(Array.isArray(e))return e.map(r=>ci(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=ci(n)}),t},Og=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var hr=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{u(n.next(h))}catch(m){i(m)}}function c(h){try{u(n.throw(h))}catch(m){i(m)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const na=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Rg=(e,t,r)=>hr(void 0,void 0,void 0,function*(){const n=yield Ag();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";t(new Tg(na(s),a,i))}).catch(s=>{t(new li(na(s),s))}):t(new li(na(e),e))}),Ig=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(Og(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Yn(e,t,r,n,s,a){return hr(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,Ig(t,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Rg(c,l,n))})})}function no(e,t,r,n){return hr(this,void 0,void 0,function*(){return Yn(e,"GET",t,r,n)})}function ot(e,t,r,n,s){return hr(this,void 0,void 0,function*(){return Yn(e,"POST",t,n,s,r)})}function ui(e,t,r,n,s){return hr(this,void 0,void 0,function*(){return Yn(e,"PUT",t,n,s,r)})}function zg(e,t,r,n){return hr(this,void 0,void 0,function*(){return Yn(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Sh(e,t,r,n,s){return hr(this,void 0,void 0,function*(){return Yn(e,"DELETE",t,n,s,r)})}var ve=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{u(n.next(h))}catch(m){i(m)}}function c(h){try{u(n.throw(h))}catch(m){i(m)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Lg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Mg{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=_h(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return ve(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},zc),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),m=yield(t=="PUT"?ui:ot)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(oe(a))return{data:null,error:a};throw a}})}upload(t,r,n){return ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ve(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:zc.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const m=yield ui(this.fetch,l.toString(),c,{headers:h});return{data:{path:a,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(oe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ve(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield ot(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new ml("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(oe(n))return{data:null,error:n};throw n}})}update(t,r,n){return ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ve(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(oe(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ve(this,void 0,void 0,function*(){try{return{data:{path:(yield ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(oe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ve(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield ot(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(oe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ve(this,void 0,void 0,function*(){try{const s=yield ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(oe(s))return{data:null,error:s};throw s}})}download(t,r){return ve(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield no(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(oe(l))return{data:null,error:l};throw l}})}info(t){return ve(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield no(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ci(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(oe(n))return{data:null,error:n};throw n}})}exists(t){return ve(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield zg(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(oe(n)&&n instanceof li){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ve(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oe(r))return{data:null,error:r};throw r}})}list(t,r,n){return ve(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Lg),r),{prefix:t||""});return{data:yield ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(oe(s))return{data:null,error:s};throw s}})}listV2(t,r){return ve(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ot(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(oe(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Ug="2.12.1",Fg={"X-Client-Info":`storage-js/${Ug}`};var gr=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{u(n.next(h))}catch(m){i(m)}}function c(h){try{u(n.throw(h))}catch(m){i(m)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Bg{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Fg),r),this.fetch=_h(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return gr(this,void 0,void 0,function*(){try{return{data:yield no(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oe(t))return{data:null,error:t};throw t}})}getBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield no(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oe(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return gr(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(oe(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return gr(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(oe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oe(r))return{data:null,error:r};throw r}})}}class Vg extends Bg{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new Mg(this.url,this.headers,t,this.fetch)}}const Wg="2.57.4";let fn="";typeof Deno<"u"?fn="deno":typeof document<"u"?fn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fn="react-native":fn="node";const qg={"X-Client-Info":`supabase-js-${fn}/${Wg}`},Hg={headers:qg},Dg={schema:"public"},Gg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Kg={};var Jg=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{u(n.next(h))}catch(m){i(m)}}function c(h){try{u(n.throw(h))}catch(m){i(m)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Qg=e=>{let t;return e?t=e:typeof fetch>"u"?t=uh:t=fetch,(...r)=>t(...r)},Yg=()=>typeof Headers>"u"?dh:Headers,Xg=(e,t,r)=>{const n=Qg(r),s=Yg();return(a,i)=>Jg(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},i),{headers:u}))})};var Zg=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{u(n.next(h))}catch(m){i(m)}}function c(h){try{u(n.throw(h))}catch(m){i(m)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function ep(e){return e.endsWith("/")?e:e+"/"}function tp(e,t){var r,n;const{db:s,auth:a,realtime:i,global:l}=e,{db:c,auth:u,realtime:h,global:m}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},h),i),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Zg(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function rp(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ep(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Eh="2.71.1",yr=30*1e3,di=3,sa=di*yr,np="http://localhost:9999",sp="supabase.auth.token",op={"X-Client-Info":`gotrue-js/${Eh}`},hi="X-Supabase-Api-Version",Ch={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ap=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ip=10*60*1e3;class fl extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function M(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lp extends fl{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function cp(e){return M(e)&&e.name==="AuthApiError"}class Ph extends fl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Gt extends fl{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Et extends Gt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function up(e){return M(e)&&e.name==="AuthSessionMissingError"}class ps extends Gt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xs extends Gt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class bs extends Gt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dp(e){return M(e)&&e.name==="AuthImplicitGrantRedirectError"}class Lc extends Gt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mi extends Gt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function oa(e){return M(e)&&e.name==="AuthRetryableFetchError"}class Mc extends Gt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class fi extends Gt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const so="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Uc=` 	
\r=`.split(""),hp=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Uc.length;t+=1)e[Uc[t].charCodeAt(0)]=-2;for(let t=0;t<so.length;t+=1)e[so[t].charCodeAt(0)]=t;return e})();function Fc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(so[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(so[n]),t.queuedBits-=6}}function $h(e,t,r){const n=hp[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Bc(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{gp(i,n,r)};for(let i=0;i<e.length;i+=1)$h(e.charCodeAt(i),s,a);return t.join("")}function mp(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function fp(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}mp(n,t)}}function gp(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function pp(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)$h(e.charCodeAt(s),r,n);return new Uint8Array(t)}function xp(e){const t=[];return fp(e,r=>t.push(r)),new Uint8Array(t)}function bp(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Fc(s,r,n)),Fc(null,r,n),t.join("")}function vp(e){return Math.round(Date.now()/1e3)+e}function yp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Je=()=>typeof window<"u"&&typeof document<"u",Kt={tested:!1,writable:!1},Th=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kt.tested)return Kt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Kt.tested=!0,Kt.writable=!0}catch{Kt.tested=!0,Kt.writable=!1}return Kt.writable};function wp(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const kh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Yr(async()=>{const{default:n}=await Promise.resolve().then(()=>Xr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},jp=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",wr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Jt=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},St=async(e,t)=>{await e.removeItem(t)};class Po{constructor(){this.promise=new Po.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Po.promiseConstructor=Promise;function aa(e){const t=e.split(".");if(t.length!==3)throw new fi("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!ap.test(t[n]))throw new fi("JWT not in base64url format");return{header:JSON.parse(Bc(t[0])),payload:JSON.parse(Bc(t[1])),signature:pp(t[2]),raw:{header:t[0],payload:t[1]}}}async function Np(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function _p(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){n(i);return}}catch(i){if(!t(a,i)){s(i);return}}})()})}function Sp(e){return("0"+e.toString(16)).substr(-2)}function Ep(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Sp).join("")}async function Cp(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function Pp(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Cp(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pr(e,t,r=!1){const n=Ep();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await wr(e,`${t}-code-verifier`,s);const a=await Pp(n);return[a,n===a?"plain":"s256"]}const $p=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tp(e){const t=e.headers.get(hi);if(!t||!t.match($p))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function kp(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Ap(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Op=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xr(e){if(!Op.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ia(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vc(e){return JSON.parse(JSON.stringify(e))}var Rp=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Xt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ip=[502,503,504];async function Wc(e){var t;if(!jp(e))throw new mi(Xt(e),0);if(Ip.includes(e.status))throw new mi(Xt(e),e.status);let r;try{r=await e.json()}catch(a){throw new Ph(Xt(a),a)}let n;const s=Tp(e);if(s&&s.getTime()>=Ch["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Mc(Xt(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Et}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Mc(Xt(r),e.status,r.weak_password.reasons);throw new lp(Xt(r),e.status||500,n)}const zp=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function U(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[hi]||(a[hi]=Ch["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Lp(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Lp(e,t,r,n,s,a){const i=zp(t,n,s,a);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new mi(Xt(c),0)}if(l.ok||await Wc(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Wc(c)}}function dt(e){var t;let r=null;Bp(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=vp(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function qc(e){const t=dt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function kt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Mp(e){return{data:e,error:null}}function Up(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,i=Rp(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Fp(e){return e}function Bp(e){return e.access_token&&e.refresh_token&&e.expires_in}const la=["global","local","others"];var Vp=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Wp{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=kh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=la[0]){if(la.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${la.join(", ")}`);try{return await U(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await U(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:kt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Vp(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await U(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Up,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(M(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await U(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:kt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await U(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Fp});if(h.error)throw h.error;const m=await h.json(),f=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,b=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return b.length>0&&(b.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(y.split(";")[1].split("=")[1]);u[`${j}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(M(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){xr(t);try{return await U(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:kt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){xr(t);try{return await U(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:kt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){xr(t);try{return await U(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:kt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){xr(t.userId);try{const{data:r,error:n}=await U(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _deleteFactor(t){xr(t.userId),xr(t.id);try{return{data:await U(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}}function Hc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function qp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const br={debug:!!(globalThis&&Th()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ah extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Hp extends Ah{}async function Dp(e,t,r){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),br.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){br.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{br.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw br.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Hp(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(br.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}qp();const Gp={url:np,storageKey:sp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:op,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dc(e,t,r){return await r()}const vr={};class qn{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qn.nextInstanceID,qn.nextInstanceID+=1,this.instanceID>0&&Je()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Gp),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Wp({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=kh(s.fetch),this.lock=s.lock||Dc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Je()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Dp:this.lock=Dc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Th()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Hc(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Hc(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=vr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){vr[this.storageKey]=Object.assign(Object.assign({},vr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=vr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){vr[this.storageKey]=Object.assign(Object.assign({},vr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Eh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=wp(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Je()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),dp(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return M(r)?{error:r}:{error:new Ph("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:dt}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(M(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:h,password:m,options:f}=t;let b=null,y=null;this.flowType==="pkce"&&([b,y]=await pr(this.storage,this.storageKey)),a=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:m,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:b,code_challenge_method:y},xform:dt})}else if("phone"in t){const{phone:h,password:m,options:f}=t;a=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:m,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:dt})}else throw new xs("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(M(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:i,options:l}=t;r=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:qc})}else if("phone"in t){const{phone:a,password:i,options:l}=t;r=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:qc})}else throw new xs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ps}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(M(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,a,i,l,c,u,h,m,f,b;let y,w;if("message"in t)y=t.message,w=t.signature;else{const{chain:j,wallet:g,statement:p,options:x}=t;let v;if(Je())if(typeof g=="object")v=g;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))v=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=g}const S=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const N=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),p?{statement:p}:null));let _;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")_=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)_=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)y=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),w=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((m=(h=x==null?void 0:x.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||m===void 0)&&m.length?["Resources",...x.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const N=await v.signMessage(new TextEncoder().encode(y),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=N}}try{const{data:j,error:g}=await U(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:bp(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:dt});if(g)throw g;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new ps}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:g})}catch(j){if(M(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const r=await Jt(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:i}=await U(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:dt});if(await St(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new ps}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(M(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:i}=t,l=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:dt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ps}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(M(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,i;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await pr(this.storage,this.storageKey));const{error:m}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new xs("You must provide either an email or phone number.")}catch(l){if(M(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await U(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:dt});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(M(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await pr(this.storage,this.storageKey)),await U(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:Mp})}catch(a){if(M(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Et;const{error:s}=await U(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:i}=await U(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:i,error:l}=await U(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new xs("You must provide either an email or phone number and a type")}catch(r){if(M(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Jt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<sa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await Jt(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=ia()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,h)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:t},error:null}}const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:kt}):await this._useSession(async r=>{var n,s,a;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Et}:await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:kt})})}catch(r){if(M(r))return up(r)&&(await this._removeSession(),await St(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Et;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await pr(this.storage,this.storageKey));const{data:u,error:h}=await U(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:kt});if(h)throw h;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Et;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:i}=aa(t.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(M(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Et;const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(M(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Je())throw new bs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new bs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Lc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Lc("No code detected.");const{data:p,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!i||!u)throw new bs("No session defined in URL");const h=Math.round(Date.now()/1e3),m=parseInt(l);let f=h+m;c&&(f=parseInt(c));const b=f-h;b*1e3<=yr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const y=f-m;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,h);const{data:w,error:j}=await this._getUser(a);if(j)throw j;const g={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:m,expires_at:f,refresh_token:i,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(n){if(M(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Jt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(cp(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await St(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=yp(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await pr(this.storage,this.storageKey,!0));try{return await U(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(M(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var i,l,c,u,h;const{data:m,error:f}=a;if(f)throw f;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await U(this.fetch,"GET",b,{headers:this.headers,jwt:(h=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Je()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(M(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)throw i;return await U(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await _p(async s=>(s>0&&await Np(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await U(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:dt})),(s,a)=>{const i=200*Math.pow(2,s);return a&&oa(a)&&Date.now()+i-n<yr})}catch(n){if(this._debug(r,"error",n),M(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Je()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Jt(this.storage,this.storageKey);if(s&&this.userStorage){let i=await Jt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await wr(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:ia()}else if(s&&!s.user&&!s.user){const i=await Jt(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await St(this.storage,this.storageKey+"-user"),await wr(this.storage,this.storageKey,s)):s.user=ia()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<sa;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${sa}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),oa(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Po;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new Et;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),M(a)){const i={session:null,error:a};return oa(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await wr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=Vc(s);await wr(this.storage,this.storageKey,a)}else{const s=Vc(r);await wr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await St(this.storage,this.storageKey),await St(this.storage,this.storageKey+"-code-verifier"),await St(this.storage,this.storageKey+"-user"),this.userStorage&&await St(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Je()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),yr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/yr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${yr}ms, refresh threshold is ${di} ticks`),s<=di&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ah)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Je()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,i]=await pr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await U(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await U(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:i,error:l}=await U(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if(M(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await U(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(M(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=aa(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+ip>s)return n;const{data:a,error:i}=await U(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:b,error:y}=await this.getSession();if(y||!b.session)return{data:null,error:y};n=b.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=aa(n);r!=null&&r.allowExpired||kp(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:a,header:s,signature:i},error:null}}const h=Ap(s.alg),m=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,i,xp(`${l}.${c}`)))throw new fi("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}}qn.nextInstanceID=0;const Kp=qn;class Jp extends Kp{constructor(t){super(t)}}var Qp=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{u(n.next(h))}catch(m){i(m)}}function c(h){try{u(n.throw(h))}catch(m){i(m)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Yp{constructor(t,r,n){var s,a,i;this.supabaseUrl=t,this.supabaseKey=r;const l=rp(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Dg,realtime:Kg,auth:Object.assign(Object.assign({},Gg),{storageKey:c}),global:Hg},h=tp(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=Xg(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new hg(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Vg(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new qf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Qp(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:i,flowType:l,lock:c,debug:u},h,m){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jp({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),h),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:l,lock:c,debug:u,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new $g(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Xp=(e,t,r)=>new Yp(e,t,r);function Zp(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Zp()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const oo="https://gfjwebngyzfftakbbmji.supabase.co",ao="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmandlYm5neXpmZnRha2JibWppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzMjI1MzEsImV4cCI6MjA3Mzg5ODUzMX0.niC_FqHiHZ4EMNW86VpXX_ouIVsxftfXV8JgZxuCBGE";console.log("🔍 Debug - Variables hardcodeadas:");console.log("URL:",oo);console.log("ANON_KEY:",ao.substring(0,20)+"...");console.log("✅ Variables configuradas correctamente");const Oh=oo.includes("supabase.co")&&ao.startsWith("eyJ")&&!oo.includes("tu-proyecto")&&!ao.includes("tu_clave_anonima");let I=null;if(Oh)try{I=Xp(oo,ao),console.log("[StreamZone] Supabase configurado correctamente")}catch(e){console.error("[StreamZone] Error configurando Supabase:",e),I=null}else console.warn("[StreamZone] Supabase no configurado. Para habilitar el guardado en la nube, crea .env.local con VITE_SUPABASE_URL y VITE_SUPABASE_ANON_KEY");const Rh=async e=>{if(!I)return console.warn("Supabase no configurado, no se puede crear usuario"),{data:null,error:new Error("Supabase no configurado")};try{if(console.log("📝 Creando usuario en Supabase:",e),!e.name||!e.phone||!e.email)throw new Error("Datos de usuario incompletos");const t={name:e.name.trim(),phone:e.phone.trim(),email:e.email.trim().toLowerCase()};console.log("📝 Datos limpios para insertar:",t);const{data:r,error:n}=await I.from("users").insert([t]).select().single();if(n)throw console.error("❌ Error de Supabase al crear usuario:",n),console.error("❌ Detalles del error:",{code:n.code,message:n.message,details:n.details,hint:n.hint}),n;return console.log("✅ Usuario creado exitosamente:",r),{data:r,error:null}}catch(t){return console.error("❌ Error creating user:",t),{data:null,error:t}}},Ih=async e=>{if(!I)return console.warn("Supabase no configurado, no se puede obtener usuario"),{data:null,error:new Error("Supabase no configurado")};try{console.log("🔍 Buscando usuario con teléfono:",e);const t=e.trim(),{data:r,error:n}=await I.from("users").select("*").eq("phone",t).single();if(n&&n.code!=="PGRST116")throw console.error("❌ Error de Supabase al buscar usuario:",n),console.error("❌ Detalles del error:",{code:n.code,message:n.message,details:n.details,hint:n.hint}),n;return n&&n.code==="PGRST116"?(console.log("ℹ️ Usuario no encontrado (esto es normal para nuevos usuarios)"),{data:null,error:null}):(console.log("✅ Usuario encontrado:",r),{data:r,error:null})}catch(t){return console.error("❌ Error getting user by phone:",t),{data:null,error:t}}},zh=async e=>{if(!I)return console.warn("Supabase no configurado, no se puede crear compra"),{data:null,error:new Error("Supabase no configurado")};try{console.log("💾 createPurchase: Creando compra en Supabase:",e),console.log("💾 createPurchase: validated =",e.validated);const{data:t,error:r}=await I.from("purchases").insert([e]).select().single();if(r)throw console.error("❌ Error de Supabase al crear compra:",r),r;return console.log("✅ createPurchase: Compra creada exitosamente con ID:",t==null?void 0:t.id),console.log("✅ createPurchase: Compra validated =",t==null?void 0:t.validated),{data:t,error:null}}catch(t){return console.error("❌ Error creating purchase:",t),{data:null,error:t}}},Lh=async(e,t)=>{console.log("🔧 ===== updatePurchase INICIADO ====="),console.log("🆔 ID recibido:",e),console.log("📝 updateData recibido:",t),console.log("📊 Tipo de ID:",typeof e),console.log("📊 Tipo de updateData:",typeof t);try{if(!I)throw console.error("❌ Supabase no configurado"),new Error("Supabase no configurado");console.log("💾 Ejecutando update en Supabase..."),console.log("📤 Query:",{table:"purchases",id:e,updateData:t});const{data:r,error:n}=await I.from("purchases").update(t).eq("id",e).select().single();if(console.log("📥 Respuesta de Supabase:",{data:r,error:n}),n)throw console.error("❌ Error de Supabase:",n),console.error("❌ Detalles del error:",{code:n.code,message:n.message,details:n.details,hint:n.hint}),n;return console.log("✅ Update exitoso en Supabase:",r),console.log("🎉 ===== updatePurchase COMPLETADO ====="),{data:r,error:null}}catch(r){return console.error("❌ ===== ERROR EN updatePurchase ====="),console.error("❌ Error updating purchase:",r),console.error("❌ Stack trace:",r.stack),{data:null,error:r}}},gi=async e=>{if(!I)return console.warn("Supabase no configurado, saltando sincronización de servicios"),{data:[],error:null};try{const{data:t,error:r}=await I.from("services").select("*");if(r)throw r;const n=new Map((t==null?void 0:t.map(a=>[a.name,a]))||[]),s=e.filter(a=>!n.has(a.name));if(s.length>0){const{data:a,error:i}=await I.from("services").insert(s.map(l=>({id:l.id,name:l.name,price:l.price,billing:l.billing,color:l.color,logo:l.logo}))).select();if(i)throw i;console.log(`Sincronizados ${s.length} servicios nuevos`)}return{data:s,error:null}}catch(t){return console.error("Error syncing services:",t),{data:[],error:t}}},Mh=async()=>{if(!I)return console.warn("Supabase no configurado, no se pueden obtener todas las compras"),{data:null,error:new Error("Supabase no configurado")};try{console.log("🔍 getAllPurchases: Obteniendo todas las compras...");const{data:e,error:t}=await I.from("purchases").select(`
        *,
        users!purchases_phone_fkey (
          name,
          email
        )
      `).order("created_at",{ascending:!1});if(t)throw console.error("❌ Error en getAllPurchases:",t),t;return console.log("✅ getAllPurchases: Obtenidas",(e==null?void 0:e.length)||0,"compras totales"),{data:e,error:null}}catch(e){return console.error("❌ Error getting all purchases:",e),{data:null,error:e}}},Uh=async(e,t,r,n,s)=>{if(console.log("🔍 approvePurchase: Verificando configuración de Supabase..."),console.log("🔍 supabase client:",I),console.log("🔍 isSupabaseConfigured:",Oh),!I)return console.error("❌ Supabase no configurado, no se puede aprobar compra"),{data:null,error:new Error("Supabase no configurado")};try{console.log("🔄 Supabase: Aprobando compra...",{purchaseId:e,serviceEmail:t,servicePassword:r?"***":"undefined",adminNotes:n,approvedBy:s});const{data:a,error:i}=await I.from("purchases").update({validated:!0,service_email:t,service_password:r,admin_notes:n,approved_by:s}).eq("id",e).select().single();if(i)throw console.error("❌ Supabase Error:",i),i;return console.log("✅ Supabase: Compra aprobada exitosamente:",a),{data:a,error:null}}catch(a){return console.error("❌ Error approving purchase:",a),{data:null,error:a}}},Fh=async()=>{if(!I)return console.warn("Supabase no configurado, no se puede obtener compras pendientes"),{data:null,error:new Error("Supabase no configurado")};try{console.log("🔍 getPendingPurchases: DIAGNÓSTICO COMPLETO...");const{count:e,error:t}=await I.from("purchases").select("*",{count:"exact",head:!0});console.log("📊 Total compras en BD:",e);const{count:r,error:n}=await I.from("purchases").select("*",{count:"exact",head:!0}).eq("validated",!1);console.log("⏳ Compras pendientes en BD:",r);const{data:s,error:a}=await I.from("purchases").select("id, customer, validated, created_at").order("created_at",{ascending:!1}).limit(10);console.log("📋 Últimas 10 compras:",s==null?void 0:s.map(c=>({id:c.id,customer:c.customer,validated:c.validated,created_at:c.created_at})));let{data:i,error:l}=await I.from("purchases").select("*").eq("validated",!1).order("created_at",{ascending:!1});if(l){console.warn("⚠️ Error en consulta principal, intentando consulta básica:",l);const{data:c,error:u}=await I.from("purchases").select("id, customer, phone, service, validated, created_at, start, end, months").eq("validated",!1).order("created_at",{ascending:!1});if(u)throw console.error("❌ Error también en consulta básica:",u),u;i=c,l=null}return console.log("✅ getPendingPurchases: RESULTADO FINAL - Encontradas",(i==null?void 0:i.length)||0,"compras pendientes"),i&&i.length>0?console.log("📋 Compras pendientes encontradas:",i.map(c=>({id:c.id,customer:c.customer,validated:c.validated,created_at:c.created_at}))):console.log("❌ NO SE ENCONTRARON COMPRAS PENDIENTES"),{data:i,error:null}}catch(e){return console.error("❌ Error getting pending purchases:",e),{data:null,error:e}}},Bh=async e=>{if(!I)return console.warn("Supabase no configurado, no se puede obtener compras del usuario"),{data:null,error:new Error("Supabase no configurado")};try{console.log("🔍 Buscando compras activas para teléfono:",e);let t=e.trim();t.startsWith("+")||(t="+593"+t.replace(/[^\d]/g,"")),console.log("📞 Teléfono normalizado:",t);let{data:r,error:n}=await I.from("purchases").select("*").eq("phone",t).eq("validated",!0).gte("end",new Date().toISOString().split("T")[0]).order("end",{ascending:!0});if(n)throw n;if(console.log("✅ Compras encontradas con teléfono exacto:",(r==null?void 0:r.length)||0),!r||r.length===0){console.log("🔍 No se encontraron compras, intentando otros formatos...");const s=e.replace(/[^\d]/g,"");console.log("📞 Intentando sin código de país:",s);const{data:a,error:i}=await I.from("purchases").select("*").eq("phone",s).eq("validated",!0).gte("end",new Date().toISOString().split("T")[0]).order("end",{ascending:!0});if(!i&&a&&a.length>0&&(console.log("✅ Compras encontradas sin código de país:",a.length),r=a),!r||r.length===0){const l="+593"+s;console.log("📞 Intentando con +593:",l);const{data:c,error:u}=await I.from("purchases").select("*").eq("phone",l).eq("validated",!0).gte("end",new Date().toISOString().split("T")[0]).order("end",{ascending:!0});!u&&c&&c.length>0&&(console.log("✅ Compras encontradas con +593:",c.length),r=c)}}return console.log("📊 Total de compras activas encontradas:",(r==null?void 0:r.length)||0),r&&r.length>0&&console.log("📋 Compras encontradas:",r.map(s=>({id:s.id,customer:s.customer,service:s.service,phone:s.phone,end:s.end}))),{data:r,error:null}}catch(t){return console.error("❌ Error getting user active purchases:",t),{data:null,error:t}}},Vh=async(e=7)=>{if(!I)return console.warn("Supabase no configurado, no se puede obtener servicios próximos a vencer"),{data:null,error:new Error("Supabase no configurado")};try{const{data:t,error:r}=await I.rpc("get_expiring_services",{days_ahead:e});if(r)throw r;return{data:t,error:null}}catch(t){return console.error("Error getting expiring services:",t),{data:null,error:t}}},Wh=async()=>{if(!I)return console.warn("Supabase no configurado, no se pueden obtener estadísticas"),{data:null,error:new Error("Supabase no configurado")};try{const{data:e,error:t}=await I.from("purchases").select("auto_renewal, is_renewal, end, validated");if(t)throw t;return{data:{totalPurchases:e.length,autoRenewalEnabled:e.filter(n=>n.auto_renewal).length,renewalPurchases:e.filter(n=>n.is_renewal).length,expiringThisWeek:e.filter(n=>{const s=new Date(n.end),a=new Date,i=new Date(a.getTime()+7*24*60*60*1e3);return s>=a&&s<=i&&n.validated}).length,expiredServices:e.filter(n=>new Date(n.end)<new Date&&n.validated).length},error:null}}catch(e){return console.error("Error getting renewal stats:",e),{data:null,error:e}}},gl=async e=>{if(!I)return console.warn("Supabase no configurado, no se puede buscar usuario"),{data:null,error:new Error("Supabase no configurado")};try{const{data:t,error:r}=await I.from("users").select("*").eq("email",e.toLowerCase().trim()).single();if(r&&r.code!=="PGRST116")throw r;return{data:t,error:null}}catch(t){return console.error("Error buscando usuario por email:",t),{data:null,error:t}}},pl=async e=>{if(!I)return console.warn("Supabase no configurado, no se puede generar token"),{data:null,error:new Error("Supabase no configurado")};try{if(!(await gl(e)).data)return{data:null,error:{message:`No existe un usuario con el email: ${e}. Verifica que el email sea correcto o crea una cuenta primero.`}};const r=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n=new Date(Date.now()+30*60*1e3),{data:s,error:a}=await I.from("users").update({reset_token:r,reset_token_expires:n.toISOString()}).eq("email",e.toLowerCase().trim()).select().single();if(a)throw a;return{data:{token:r,user:s},error:null}}catch(t){return console.error("Error generando token de recuperación:",t),{data:null,error:t}}},xl=async e=>{if(!I)return console.warn("Supabase no configurado, no se puede verificar token"),{data:null,error:new Error("Supabase no configurado")};try{const{data:t,error:r}=await I.from("users").select("*").eq("reset_token",e).gt("reset_token_expires",new Date().toISOString()).single();if(r&&r.code!=="PGRST116")throw r;return{data:t,error:null}}catch(t){return console.error("Error verificando token:",t),{data:null,error:t}}},qh=async(e,t)=>{if(!I)return console.warn("Supabase no configurado, no se puede restablecer contraseña"),{data:null,error:new Error("Supabase no configurado")};try{if(!(await xl(e)).data)return{data:null,error:{message:"Token inválido o expirado"}};const{data:n,error:s}=await I.from("users").update({password:t,reset_token:null,reset_token_expires:null}).eq("reset_token",e).select().single();if(s)throw s;return{data:n,error:null}}catch(r){return console.error("Error restableciendo contraseña:",r),{data:null,error:r}}},Hh=async(e,t)=>{if(!I)return console.warn("Supabase no configurado, no se puede hacer login"),{data:null,error:new Error("Supabase no configurado")};try{const{data:r,error:n}=await I.from("users").select("*").eq("email",e.toLowerCase().trim()).eq("password",t).single();if(n&&n.code!=="PGRST116")throw n;return{data:r,error:null}}catch(r){return console.error("Error en login:",r),{data:null,error:r}}},ex=Object.freeze(Object.defineProperty({__proto__:null,approvePurchase:Uh,createPurchase:zh,createUser:Rh,generateResetToken:pl,getAllPurchases:Mh,getExpiringServices:Vh,getPendingPurchases:Fh,getRenewalStats:Wh,getUserActivePurchases:Bh,getUserByEmail:gl,getUserByPhone:Ih,loginUser:Hh,resetPassword:qh,get supabase(){return I},syncServices:gi,updatePurchase:Lh,verifyResetToken:xl},Symbol.toStringTag,{value:"Module"}));function tx({isDark:e,onLogin:t,onForgotPassword:r,setView:n}){const[s,a]=E.useState(""),[i,l]=E.useState(""),[c,u]=E.useState(""),[h,m]=E.useState(!1),[f,b]=E.useState(!1),y=async w=>{w.preventDefault(),b(!0),u("");try{const j=await Hh(s,i);j.data?(u("Login exitoso"),t(j.data),n&&setTimeout(()=>{n("profile")},500)):u("Credenciales incorrectas")}catch{u("Error en el login")}finally{b(!1)}};return o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Correo electrónico"}),o.jsx("input",{required:!0,type:"email",className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:s,onChange:w=>a(w.target.value),placeholder:"tu@correo.com",disabled:f})]}),o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Contraseña"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{required:!0,type:h?"text":"password",className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:i,onChange:w=>l(w.target.value),placeholder:"••••••",disabled:f}),o.jsx("button",{type:"button",onClick:()=>m(w=>!w),className:d(e,"rounded-xl bg-zinc-100 px-4 py-3","rounded-xl bg-zinc-700 px-4 py-3"),disabled:f,children:h?"👁️":"👁️‍🗨️"})]})]}),c&&o.jsx("div",{className:`text-sm ${c.includes("exitoso")?"text-green-600":"text-red-600"}`,children:c}),o.jsx("button",{type:"submit",disabled:f,className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${f?"opacity-50 cursor-not-allowed":""} ${d(e,"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700","bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700")}`,children:f?"⏳ Iniciando sesión...":"🚀 Iniciar Sesión"}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:r,className:`text-sm ${d(e,"text-zinc-600 hover:text-zinc-800","text-zinc-400 hover:text-zinc-200")}`,disabled:f,children:"¿Olvidaste tu contraseña?"})}),o.jsxs("div",{className:"mt-8 text-center space-y-4",children:[o.jsx("div",{className:`text-sm font-medium ${d(e,"text-gray-600","text-gray-400")}`,children:"¿No tienes cuenta?"}),o.jsx("button",{onClick:()=>n&&n("register"),className:`w-full rounded-2xl px-6 py-4 font-bold text-lg transition-all duration-300 hover:scale-105 shadow-xl ${d(e,"bg-gradient-to-r from-green-500 via-blue-500 to-purple-600 text-white hover:from-green-600 hover:via-blue-600 hover:to-purple-700","bg-gradient-to-r from-green-600 via-blue-600 to-purple-700 text-white hover:from-green-700 hover:via-blue-700 hover:to-purple-800")}`,children:o.jsxs("span",{className:"flex items-center justify-center gap-3",children:[o.jsx("span",{className:"text-xl",children:"✨"}),o.jsx("span",{children:"Crear cuenta nueva"}),o.jsx("span",{className:"text-xl",children:"🚀"})]})})]})]})}const ca=[{code:"+593",name:"Ecuador",flag:"🇪🇨"},{code:"+1",name:"Estados Unidos",flag:"🇺🇸"},{code:"+1",name:"Canadá",flag:"🇨🇦"},{code:"+52",name:"México",flag:"🇲🇽"},{code:"+54",name:"Argentina",flag:"🇦🇷"},{code:"+55",name:"Brasil",flag:"🇧🇷"},{code:"+56",name:"Chile",flag:"🇨🇱"},{code:"+57",name:"Colombia",flag:"🇨🇴"},{code:"+51",name:"Perú",flag:"🇵🇪"},{code:"+58",name:"Venezuela",flag:"🇻🇪"},{code:"+34",name:"España",flag:"🇪🇸"},{code:"+49",name:"Alemania",flag:"🇩🇪"},{code:"+33",name:"Francia",flag:"🇫🇷"},{code:"+44",name:"Reino Unido",flag:"🇬🇧"},{code:"+39",name:"Italia",flag:"🇮🇹"},{code:"+86",name:"China",flag:"🇨🇳"},{code:"+81",name:"Japón",flag:"🇯🇵"},{code:"+82",name:"Corea del Sur",flag:"🇰🇷"},{code:"+91",name:"India",flag:"🇮🇳"},{code:"+61",name:"Australia",flag:"🇦🇺"}];function rx({value:e,onChange:t,isDark:r,disabled:n}){const[s,a]=E.useState(!1),[i,l]=E.useState(""),[c,u]=E.useState(ca.find(f=>f.code===e)||ca[0]),h=ca.filter(f=>f.name.toLowerCase().includes(i.toLowerCase())||f.code.includes(i)||f.flag.includes(i)),m=f=>{u(f),t(f.code),a(!1),l("")};return o.jsxs("div",{className:"relative w-32 sm:w-40",children:[o.jsxs("button",{type:"button",onClick:()=>!n&&a(!s),disabled:n,className:`w-full rounded-xl border-2 px-3 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 flex items-center justify-between ${d(r,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200 hover:border-blue-300","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20 hover:border-blue-400")} ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:c.flag}),o.jsx("span",{className:"text-sm font-medium",children:c.code})]}),o.jsx("svg",{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&o.jsxs("div",{className:`absolute top-full left-0 right-0 mt-1 rounded-xl border-2 shadow-lg z-50 max-h-64 overflow-hidden ${d(r,"border-gray-200 bg-white","border-gray-600 bg-gray-800")}`,children:[o.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-600",children:o.jsx("input",{type:"text",placeholder:"Buscar país...",value:i,onChange:f=>l(f.target.value),className:`w-full px-3 py-2 rounded-lg text-sm border ${d(r,"border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-1 focus:ring-blue-800/20")}`,autoFocus:!0})}),o.jsx("div",{className:"max-h-48 overflow-y-auto",children:h.length>0?h.map(f=>o.jsxs("button",{type:"button",onClick:()=>m(f),className:`w-full px-3 py-2 text-left hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center gap-3 ${d(r,"text-gray-900 hover:text-blue-700","text-white hover:text-blue-300")} ${c.code===f.code?"bg-blue-100 dark:bg-blue-900/30":""}`,children:[o.jsx("span",{className:"text-lg",children:f.flag}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-sm",children:f.name}),o.jsx("div",{className:"text-xs opacity-70",children:f.code})]}),c.code===f.code&&o.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},f.code+f.name)):o.jsx("div",{className:`px-3 py-2 text-sm ${d(r,"text-gray-500","text-gray-400")}`,children:"No se encontraron países"})})]}),s&&o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)})]})}function nx({isOpen:e,onClose:t,userName:r,userEmail:n,isDark:s,onContinue:a,onExploreServices:i}){const[l,c]=E.useState(!1),[u,h]=E.useState(!1);return E.useEffect(()=>{e?(setTimeout(()=>c(!0),100),setTimeout(()=>h(!0),300)):(c(!1),h(!1))},[e]),e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),o.jsx("div",{className:`relative w-full max-w-md transform transition-all duration-500 ${l?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}`,children:o.jsxs("div",{className:`rounded-2xl shadow-2xl border-2 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[o.jsxs("div",{className:"relative overflow-hidden rounded-t-2xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 opacity-90"}),o.jsxs("div",{className:"relative p-6 text-center",children:[o.jsx("div",{className:"mx-auto mb-4 w-16 h-16 flex items-center justify-center",children:o.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center transition-all duration-700 ${u?"bg-white scale-100":"bg-white/20 scale-75"}`,children:o.jsx("svg",{className:`w-8 h-8 text-green-600 transition-all duration-500 ${u?"opacity-100 scale-100":"opacity-0 scale-50"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),o.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"¡Bienvenido a StreamZone!"}),o.jsx("p",{className:"text-lg text-white/90",children:"Tu cuenta ha sido creada exitosamente"})]})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsxs("h3",{className:`text-xl font-semibold mb-2 ${s?"text-white":"text-gray-900"}`,children:["¡Hola, ",r,"! 👋"]}),o.jsx("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:"Tu cuenta ha sido creada con éxito. Ahora puedes iniciar sesión."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:a,className:"w-full py-3 px-4 rounded-xl font-semibold transition-all duration-200 transform hover:scale-105 bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700",children:"🔐 Iniciar sesión"}),i&&o.jsx("button",{onClick:i,className:`w-full py-3 px-4 rounded-xl font-semibold transition-all duration-200 transform hover:scale-105 ${s?"bg-gray-700 text-white hover:bg-gray-600 border border-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300"}`,children:"🎬 Explorar servicios"}),o.jsx("button",{onClick:t,className:`w-full py-2 px-4 rounded-xl text-sm transition-all duration-200 ${s?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:"Cerrar"})]})]}),o.jsx("div",{className:`px-6 pb-4 ${s?"bg-gray-800/50":"bg-gray-50/50"}`,children:o.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(5)].map((m,f)=>o.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${s?"bg-green-400":"bg-green-500"}`,style:{animationDelay:`${f*.2}s`,animationDuration:"1.5s"}},f))})})]})})]}):null}function Gc({isDark:e,onSubmit:t,setView:r,setAuthStep:n}){const[s,a]=E.useState(""),[i,l]=E.useState(""),[c,u]=E.useState("+593"),[h,m]=E.useState(""),[f,b]=E.useState(""),[y,w]=E.useState(""),[j,g]=E.useState(!1),[p,x]=E.useState(""),[v,S]=E.useState(!1),[N,_]=E.useState(!1),[P,z]=E.useState({name:"",email:""}),R=async q=>{if(q.preventDefault(),x(""),S(!0),!s||!i||!h||!f){x("Todos los campos son obligatorios"),S(!1);return}if(f!==y){x("Las contraseñas no coinciden"),S(!1);return}if(f.length<6){x("La contraseña debe tener al menos 6 caracteres"),S(!1);return}try{const De=c+i.replace(/[^\d]/g,""),{data:me,error:T}=await I.from("users").insert([{name:s,phone:De,email:h.toLowerCase().trim(),password:f}]).select().single();if(T){T.code==="23505"?x("Ya existe un usuario con este email o teléfono"):x("Error al crear la cuenta"),S(!1);return}z({name:s,email:h}),S(!1),_(!0),t({name:s,phone:$f(i),email:h,password:f})}catch{x("Error al crear la cuenta"),S(!1)}},G=()=>{_(!1),a(""),l(""),m(""),b(""),w("")},be=()=>{_(!1),n&&n("login")},ke=()=>{_(!1),r&&r("home")};return o.jsxs("form",{onSubmit:R,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Nombre completo"}),o.jsx("input",{required:!0,className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:s,onChange:q=>a(q.target.value),placeholder:"Tu nombre completo",disabled:v})]}),o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"WhatsApp"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(rx,{value:c,onChange:u,isDark:e,disabled:v}),o.jsx("input",{required:!0,className:`flex-1 rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:i,onChange:q=>l(q.target.value),placeholder:"99 999 9999",disabled:v})]}),o.jsxs("div",{className:`text-xs mt-1 ${d(e,"text-gray-500","text-gray-400")}`,children:["Número completo: ",c," ",i]})]}),o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Correo electrónico"}),o.jsx("input",{required:!0,type:"email",className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:h,onChange:q=>m(q.target.value),placeholder:"tu@correo.com",disabled:v})]}),o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Contraseña"}),o.jsx("input",{required:!0,type:j?"text":"password",className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:f,onChange:q=>b(q.target.value),placeholder:"••••••••",minLength:6,disabled:v})]}),o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Confirmar contraseña"}),o.jsx("input",{required:!0,type:j?"text":"password",className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:y,onChange:q=>w(q.target.value),placeholder:"••••••••",minLength:6,disabled:v})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"showPassword",checked:j,onChange:q=>g(q.target.checked),className:"rounded",disabled:v}),o.jsx("label",{htmlFor:"showPassword",className:d(e,"text-sm text-zinc-700","text-sm text-zinc-300"),children:"Mostrar contraseña"})]}),p&&o.jsx("div",{className:`text-sm ${p.includes("✅")?"text-green-600":"text-red-600"}`,children:p}),o.jsx("button",{type:"submit",disabled:v,className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${v?"opacity-50 cursor-not-allowed":""} ${d(e,"bg-gradient-to-r from-green-600 to-blue-600 text-white hover:from-green-700 hover:to-blue-700","bg-gradient-to-r from-green-500 to-blue-600 text-white hover:from-green-600 hover:to-blue-700")}`,children:v?"⏳ Creando cuenta...":"🚀 Crear cuenta"}),o.jsx(nx,{isOpen:N,onClose:G,userName:P.name,userEmail:P.email,isDark:e,onContinue:be,onExploreServices:ke})]})}function sx({isDark:e,onBack:t,onTokenSent:r,onRegister:n}){const[s,a]=E.useState(""),[i,l]=E.useState(""),[c,u]=E.useState(!1),h=async m=>{var f;m.preventDefault(),u(!0),l("");try{console.log("🔍 Generando token para:",s);const b=await pl(s);if(console.log("🔍 Resultado:",b),b.data){const y=`✅ Token generado: ${b.data.token}. Usa este código para continuar.`;console.log("🔍 Mensaje:",y),l(y),r(s,b.data.token)}else console.log("🔍 Error:",b.error),l(((f=b.error)==null?void 0:f.message)||"Error generando token")}catch(b){console.log("🔍 Error en catch:",b),l("Error en el proceso")}finally{u(!1)}};return o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold mb-2",children:"🔐 Recuperar Contraseña"}),o.jsx("p",{className:"text-sm opacity-80",children:"Para recuperar tu contraseña, necesitas un código de verificación"})]}),o.jsx("div",{className:`p-4 rounded-xl mb-4 ${d(e,"bg-blue-50 border border-blue-200","bg-blue-900/20 border border-blue-400/30")}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"text-2xl",children:"💬"}),o.jsxs("div",{children:[o.jsx("h4",{className:`font-semibold mb-2 ${d(e,"text-zinc-800","text-zinc-200")}`,children:"📋 Instrucciones:"}),o.jsxs("ol",{className:`text-sm space-y-1 list-decimal list-inside ${d(e,"text-zinc-700","text-zinc-300")}`,children:[o.jsxs("li",{children:["Haz clic en el botón ",o.jsx("span",{className:"font-semibold",children:'"Chat"'})," (esquina inferior derecha)"]}),o.jsxs("li",{children:["Escribe: ",o.jsx("span",{className:`font-mono px-1 rounded ${d(e,"bg-gray-200 text-zinc-800","bg-gray-700 text-zinc-200")}`,children:'"olvidé mi contraseña"'})]}),o.jsxs("li",{children:["Envía tu email: ",o.jsx("span",{className:"font-semibold",children:"ejemplo@gmail.com"})]}),o.jsx("li",{children:"Copia el código que te dé el chatbot"}),o.jsx("li",{children:"Regresa aquí y pega el código"})]})]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Correo electrónico"}),o.jsx("input",{required:!0,type:"email",className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:s,onChange:m=>a(m.target.value),placeholder:"tu@correo.com",disabled:c})]}),i&&o.jsx("div",{className:`text-sm ${i.includes("✅")?"text-green-600":"text-red-600"}`,children:i}),o.jsx("button",{type:"submit",disabled:c,className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${c?"opacity-50 cursor-not-allowed":""} ${d(e,"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700","bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700")}`,children:c?"⏳ Generando código...":"🔑 Generar Código"}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:t,className:`text-sm ${d(e,"text-zinc-600 hover:text-zinc-800","text-zinc-400 hover:text-zinc-200")}`,disabled:c,children:"← Volver a login"})}),i&&i.includes("No existe un usuario")&&o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:n,className:`text-sm ${d(e,"text-blue-600 hover:text-blue-700","text-blue-400 hover:text-blue-300")}`,children:"✨ Crear cuenta nueva"})})]})}function ox({isDark:e,email:t,onBack:r,onCodeVerified:n}){const[s,a]=E.useState(""),[i,l]=E.useState(""),[c,u]=E.useState(!1),h=async m=>{m.preventDefault(),u(!0),l("");try{(await xl(s)).data?(l("✅ Código verificado correctamente"),n(s)):l("❌ Código inválido o expirado")}catch{l("Error verificando código")}finally{u(!1)}};return o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold mb-2",children:"🔐 Verificar Código"}),o.jsxs("p",{className:"text-sm opacity-80",children:["Paso 2: Ingresa el código que enviamos a ",t]})]}),o.jsx("div",{className:`p-4 rounded-xl mb-4 ${d(e,"bg-green-50 border border-green-200","bg-green-900/20 border border-green-400/30")}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"text-2xl",children:"🔑"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"💡 ¿No tienes el código?"}),o.jsx("p",{className:"text-sm mb-2",children:"El código se obtiene del chatbot en el paso anterior."}),o.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:[o.jsx("strong",{children:"Tip:"})," Si no lo tienes, vuelve al paso anterior y sigue las instrucciones."]})]})]})}),o.jsx("div",{className:"text-center mb-4",children:o.jsx("button",{type:"button",onClick:()=>{const m=document.querySelector("[data-chat-button]");m&&m.click()},className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${d(e,"bg-blue-100 text-blue-700 hover:bg-blue-200","bg-blue-900/30 text-blue-300 hover:bg-blue-900/50")}`,children:"💬 Abrir Chatbot"})}),o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Código de verificación"}),o.jsx("input",{required:!0,type:"text",className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:s,onChange:m=>a(m.target.value),placeholder:"Ingresa el código de 6 dígitos",disabled:c,maxLength:6})]}),i&&o.jsx("div",{className:`text-sm ${i.includes("✅")?"text-green-600":"text-red-600"}`,children:i}),o.jsx("button",{type:"submit",disabled:c,className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${c?"opacity-50 cursor-not-allowed":""} ${d(e,"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700","bg-gradient-to-r from-purple-500 to-blue-600 text-white hover:from-purple-600 hover:to-blue-700")}`,children:c?"⏳ Verificando código...":"✅ Verificar Código"}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:r,className:`text-sm ${d(e,"text-zinc-600 hover:text-zinc-800","text-zinc-400 hover:text-zinc-200")}`,disabled:c,children:"← Volver a ingresar email"})})]})}function ax({isDark:e,email:t,token:r,onSuccess:n}){const[s,a]=E.useState(""),[i,l]=E.useState(""),[c,u]=E.useState(!1),[h,m]=E.useState(""),[f,b]=E.useState(!1),y=async w=>{if(w.preventDefault(),b(!0),m(""),!s||!i){m("Todos los campos son obligatorios"),b(!1);return}if(s!==i){m("Las contraseñas no coinciden"),b(!1);return}if(s.length<6){m("La contraseña debe tener al menos 6 caracteres"),b(!1);return}try{(await qh(r,s)).data?(m("✅ Contraseña restablecida exitosamente"),setTimeout(()=>{n()},2e3)):m("❌ Error al restablecer la contraseña")}catch{m("Error al restablecer la contraseña")}finally{b(!1)}};return o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-bold mb-2",children:"🔐 Nueva Contraseña"}),o.jsx("p",{className:"text-sm opacity-80",children:"Paso 3: Crea tu nueva contraseña"})]}),o.jsx("div",{className:`p-4 rounded-xl mb-4 ${d(e,"bg-blue-50 border border-blue-200","bg-blue-900/20 border border-blue-400/30")}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"text-2xl",children:"🔒"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"💡 Requisitos de seguridad:"}),o.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[o.jsx("li",{children:"Mínimo 6 caracteres"}),o.jsx("li",{children:"Usa una combinación de letras y números"}),o.jsx("li",{children:"No uses contraseñas obvias"})]})]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Nueva contraseña"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{required:!0,type:c?"text":"password",className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:s,onChange:w=>a(w.target.value),placeholder:"••••••••",disabled:f}),o.jsx("button",{type:"button",onClick:()=>u(w=>!w),className:d(e,"rounded-xl bg-zinc-100 px-4 py-3","rounded-xl bg-zinc-700 px-4 py-3"),disabled:f,children:c?"👁️":"👁️‍🗨️"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:d(e,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Confirmar contraseña"}),o.jsx("input",{required:!0,type:"password",className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(e,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:i,onChange:w=>l(w.target.value),placeholder:"••••••••",disabled:f})]}),h&&o.jsx("div",{className:`text-sm ${h.includes("✅")?"text-green-600":"text-red-600"}`,children:h}),o.jsx("button",{type:"submit",disabled:f,className:`w-full rounded-xl px-4 py-3 font-semibold transition-all ${f?"opacity-50 cursor-not-allowed":""} ${d(e,"bg-gradient-to-r from-green-500 to-blue-600 text-white hover:from-green-600 hover:to-blue-700","bg-gradient-to-r from-blue-500 to-green-600 text-white hover:from-blue-600 hover:to-green-700")}`,children:f?"⏳ Restableciendo...":"✅ Restablecer Contraseña"}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:n,className:`text-sm ${d(e,"text-zinc-600 hover:text-zinc-800","text-zinc-400 hover:text-zinc-200")}`,disabled:f,children:"← Volver al login"})})]})}function ix({isDark:e,onLogin:t,adminEmails:r}){const[n,s]=E.useState(""),[a,i]=E.useState(""),[l,c]=E.useState(!1),[u,h]=E.useState(""),[m,f]=E.useState(!1),b=async y=>{y.preventDefault(),f(!0),h("");try{await new Promise(g=>setTimeout(g,500));const w=n.trim().toLowerCase(),j=r.map(g=>g.toLowerCase()).includes(w)&&a.trim()==="Jeremias_012.@";h(j?"":"Credenciales incorrectas"),t(j)}catch{h("Error en el login")}finally{f(!1)}};return o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"📧 Correo electrónico"}),o.jsx("div",{className:"relative",children:o.jsx("input",{required:!0,type:"email",className:"w-full rounded-xl border-2 border-gray-200 bg-white text-gray-900 px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200",value:n,onChange:y=>s(y.target.value),placeholder:"admin@correo.com",disabled:m})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"🔑 Contraseña"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{required:!0,type:l?"text":"password",className:"w-full rounded-xl border-2 border-gray-200 bg-white text-gray-900 px-4 py-3 pr-12 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200",value:a,onChange:y=>i(y.target.value),placeholder:"••••••••",disabled:m}),o.jsx("button",{type:"button",onClick:()=>c(y=>!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors duration-200",disabled:m,children:l?"🙈":"👁️"})]})]}),u&&o.jsxs("div",{className:"p-3 rounded-xl bg-red-50 border border-red-200 text-red-700 text-sm flex items-center gap-2",children:[o.jsx("span",{children:"⚠️"}),u]}),o.jsx("button",{type:"submit",disabled:m,className:`w-full rounded-xl px-6 py-4 font-bold text-lg transition-all duration-300 hover:scale-105 shadow-xl ${m?"opacity-50 cursor-not-allowed":""} ${d(e,"bg-gradient-to-r from-purple-600 via-blue-600 to-pink-600 text-white hover:from-purple-700 hover:via-blue-700 hover:to-pink-700","bg-gradient-to-r from-purple-700 via-blue-700 to-pink-700 text-white hover:from-purple-800 hover:via-blue-800 hover:to-pink-800")}`,children:o.jsxs("span",{className:"flex items-center justify-center gap-3",children:[o.jsx("span",{className:"text-xl",children:"🚀"}),o.jsx("span",{children:m?"⏳ Verificando...":"Entrar al Panel"}),o.jsx("span",{className:"text-xl",children:"✨"})]})}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-xs text-gray-500",children:"Solo administradores autorizados pueden acceder"})})]})}function lx({view:e,isDark:t,user:r,adminLogged:n,purchases:s,pendingPurchases:a,userActivePurchases:i,expiringServices:l,renewalStats:c,loading:u,error:h,adminUsers:m,setAdminUsers:f,authStep:b,resetEmail:y,resetToken:w,setView:j,setAuthStep:g,handleReserve:p,handleToggleValidate:x,handleDeletePurchase:v,handleEditPurchase:S,handleReminderPurchase:N,handleLogin:_,handleAdminLogin:P,handleAdminLogout:z,handleForgotPassword:R,handleCodeVerified:G,handlePasswordReset:be,setAdminRegisterPurchaseOpen:ke,handleExportCSV:q,refreshAllStats:De,adminEmails:me}){return(()=>{switch(e){case"home":return o.jsx(Pc,{isDark:t,onReserve:p,user:r,setView:j});case"combos":return o.jsx(zf,{isDark:t,onReserve:p});case"profile":return r?o.jsx(Mf,{isDark:t,user:r,purchases:s||[],onToggleValidate:x,onDeletePurchase:v,onEditPurchase:S,onSetView:j,loading:u}):null;case"admin":return n?o.jsx(Lf,{isDark:t,purchases:s,pendingPurchases:a||[],expiringServices:l||[],renewalStats:c,loading:u,error:h,adminUsers:m,setAdminUsers:f,onToggleValidate:x,onDeletePurchase:v,onEditPurchase:S,onReminderPurchase:N,onRegisterPurchase:()=>ke(!0),onExportCSV:q,refreshAllStats:De,onLogout:z,onSetView:j}):o.jsxs("section",{className:"min-h-[80vh] relative",children:[o.jsx("div",{className:"absolute inset-0 -z-10",style:{backgroundImage:"url(/img/bg-cinema.jpg)",backgroundSize:"cover",backgroundPosition:"center"}}),o.jsx("div",{className:"absolute inset-0 -z-0 bg-black/60"}),o.jsx("div",{className:"relative z-10 min-h-[80vh] grid place-items-center",children:o.jsxs("div",{className:d(t,"w-full max-w-md rounded-3xl bg-white/95 p-8 shadow-2xl border border-gray-200","w-full max-w-md rounded-3xl bg-white/95 p-8 shadow-2xl border border-gray-200"),children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center mb-4",children:o.jsx("span",{className:"text-2xl text-white",children:"🔐"})}),o.jsx("h3",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Acceso Administrador"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Ingresa tus credenciales para acceder al panel"})]}),o.jsx(ix,{isDark:t,onLogin:P,adminEmails:me}),o.jsx("div",{className:"mt-8 text-center",children:o.jsxs("button",{onClick:()=>j("home"),className:"text-gray-600 hover:text-gray-800 text-sm transition-colors duration-200 flex items-center justify-center gap-2",children:[o.jsx("span",{children:"←"})," Volver al inicio"]})})]})})]});case"auth":return o.jsxs("section",{className:"min-h-screen relative flex items-center justify-center",children:[o.jsxs("div",{className:"absolute inset-0 -z-10",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900"}),o.jsx("div",{className:"absolute inset-0 bg-[url('/img/bg-cinema.jpg')] bg-cover bg-center opacity-20"}),o.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),o.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-purple-500/20 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-blue-500/20 rounded-full blur-3xl animate-pulse animation-delay-1000"}),o.jsx("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-pink-500/20 rounded-full blur-2xl animate-pulse animation-delay-2000"}),o.jsx("div",{className:"relative z-10 mx-auto max-w-md px-4 py-8",children:o.jsxs("div",{className:`rounded-3xl p-8 shadow-2xl backdrop-blur-md border ${d(t,"bg-white/95 border-gray-200","bg-gray-900/95 border-gray-700")}`,children:[o.jsxs("div",{className:"text-center mb-8",children:[b==="login"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-gradient-to-r from-purple-600 to-blue-600 flex items-center justify-center text-3xl shadow-xl",children:"🔐"}),o.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-green-400 to-blue-500 rounded-full animate-pulse"})]}),o.jsx("h3",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Iniciar Sesión"}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Accede a tu cuenta de StreamZone"})]}),b==="register"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-gradient-to-r from-green-600 to-blue-600 flex items-center justify-center text-3xl shadow-xl",children:"🚀"}),o.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full animate-pulse"})]}),o.jsx("h3",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"Crear Cuenta"}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Únete a StreamZone y disfruta del mejor entretenimiento"})]}),b==="email"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-gradient-to-r from-blue-600 to-cyan-600 flex items-center justify-center text-3xl shadow-xl",children:"📧"}),o.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-orange-400 to-red-500 rounded-full animate-pulse"})]}),o.jsx("h3",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:"Recuperar Contraseña"}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Paso 1: Ingresa tu email para recibir el código"})]})]}),b==="login"&&o.jsx(tx,{isDark:t,onLogin:_,onForgotPassword:()=>g("email"),setView:j}),b==="register"&&o.jsx(Gc,{isDark:t,onSubmit:_,setView:j,setAuthStep:g}),b==="email"&&o.jsx(sx,{isDark:t,onBack:()=>g("login"),onTokenSent:R,onRegister:()=>g("register")}),b==="code"&&o.jsx(ox,{isDark:t,email:y,onBack:()=>g("email"),onCodeVerified:G}),b==="newpassword"&&o.jsx(ax,{isDark:t,email:y,token:w,onSuccess:be})]})})]});case"register":return o.jsxs("section",{className:"min-h-screen relative flex items-center justify-center",children:[o.jsxs("div",{className:"absolute inset-0 -z-10",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-900 via-blue-900 to-purple-900"}),o.jsx("div",{className:"absolute inset-0 bg-[url('/img/bg-cinema.jpg')] bg-cover bg-center opacity-20"}),o.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),o.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-green-500/20 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-blue-500/20 rounded-full blur-3xl animate-pulse animation-delay-1000"}),o.jsx("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-purple-500/20 rounded-full blur-2xl animate-pulse animation-delay-2000"}),o.jsx("div",{className:"relative z-10 mx-auto max-w-md px-4 py-8",children:o.jsxs("div",{className:`rounded-3xl p-8 shadow-2xl backdrop-blur-md border ${d(t,"bg-white/95 border-gray-200","bg-gray-900/95 border-gray-700")}`,children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-gradient-to-r from-green-600 to-blue-600 flex items-center justify-center text-3xl shadow-xl",children:"🚀"}),o.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full animate-pulse"})]}),o.jsx("h3",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"Crear Cuenta"}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Únete a StreamZone y disfruta del mejor entretenimiento"})]}),o.jsx(Gc,{isDark:t,onSubmit:_}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:()=>j("auth"),className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition-all duration-200 hover:scale-105 ${d(t,"text-gray-600 hover:text-gray-800","text-gray-400 hover:text-gray-200")}`,children:"← Volver a login"})})]})})]});default:return o.jsx(Pc,{isDark:t,onReserve:p,user:r,setView:j})}})()}function cx({answerFn:e,isDark:t}){const[r,n]=E.useState(!1),[s,a]=E.useState([{role:"bot",text:`¡Hola! 👋 ¡Bienvenido a StreamZone! 🎬✨ Soy tu asistente especializado en streaming. ¿En qué puedo ayudarte hoy?

💡 Si necesitas ayuda directa, puedes preguntarme por 'agentes' o 'contacto' para hablar con nuestros especialistas.`}]),[i,l]=E.useState(""),[c,u]=E.useState(!1),[h,m]=E.useState([]),[f,b]=E.useState(!1),y=async()=>{const j=i.trim();if(!j)return;a(p=>[...p,{role:"user",text:j}]),l(""),u(!0),m(p=>[...p.slice(-3),j.toLowerCase()]);const g=j.toLowerCase().includes("agente")||j.toLowerCase().includes("contacto")||j.toLowerCase().includes("whatsapp")||j.toLowerCase().includes("hablar")||j.toLowerCase().includes("humano")||j.toLowerCase().includes("persona");try{const p=await e(j,h);a(x=>[...x,{role:"bot",text:p}]),g&&b(!0)}catch(p){console.error("Error en chatbot:",p),a(x=>[...x,{role:"bot",text:"❌ Lo siento, hubo un error. Por favor intenta de nuevo."}])}finally{u(!1)}},w=j=>j.split(`
`).map((g,p)=>o.jsxs("span",{children:[g,p<j.split(`
`).length-1&&o.jsx("br",{})]},p));return o.jsxs(o.Fragment,{children:[o.jsx("button",{"data-chat-button":!0,onClick:()=>n(!r),className:`fixed bottom-5 right-5 z-40 rounded-full px-6 py-4 shadow-2xl transition-all duration-300 hover:scale-110 animate-pulse ${d(t,"bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 text-white hover:from-purple-700 hover:via-pink-700 hover:to-blue-700","bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white hover:from-blue-600 hover:via-purple-600 hover:to-pink-600")}`,children:o.jsxs("span",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl animate-bounce",children:"💬"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-bold text-sm",children:"¿Necesitas ayuda?"}),o.jsx("div",{className:"text-xs opacity-90",children:"Chat en vivo"})]})]})}),r&&o.jsxs("div",{className:`fixed bottom-20 right-5 z-40 w-96 rounded-2xl border shadow-2xl transition-all duration-300 ${d(t,"border-gray-300 bg-white shadow-gray-200","border-zinc-700 bg-zinc-900")}`,children:[o.jsxs("div",{className:`rounded-t-2xl border-b p-4 font-semibold flex items-center gap-2 ${d(t,"bg-gradient-to-r from-blue-100 to-purple-100 border-gray-300 text-gray-800","bg-gradient-to-r from-purple-900/20 to-blue-900/20 border-zinc-700")}`,children:[o.jsx("span",{className:"text-xl",children:"🤖"}),o.jsx("span",{className:d(t,"text-gray-800","text-white"),children:"Asistente StreamZone"}),o.jsx("div",{className:`ml-auto w-3 h-3 rounded-full ${d(t,"bg-green-500","bg-green-500")}`})]}),o.jsxs("div",{className:"p-4 h-96 overflow-y-auto flex flex-col gap-3",children:[s.map((j,g)=>o.jsx("div",{className:j.role==="bot"?"self-start":"self-end",children:o.jsx("div",{className:`max-w-[90%] rounded-2xl px-4 py-3 text-sm leading-relaxed ${j.role==="bot"?d(t,"bg-gradient-to-br from-blue-100 to-purple-100 text-gray-800 border border-blue-200 shadow-sm","bg-gradient-to-br from-blue-900/30 to-purple-900/30 text-zinc-100 border border-blue-700/30"):d(t,"bg-gradient-to-br from-purple-600 to-blue-600 text-white shadow-md","bg-gradient-to-br from-purple-500 to-blue-600 text-white")}`,children:w(j.text)})},g)),c&&o.jsx("div",{className:"self-start",children:o.jsx("div",{className:`max-w-[90%] rounded-2xl px-4 py-3 text-sm ${d(t,"bg-gray-100 text-gray-700 border border-gray-200","bg-zinc-800 text-zinc-300")}`,children:o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{children:"Escribiendo"}),o.jsx("span",{className:"animate-pulse",children:"..."})]})})}),f&&o.jsxs("div",{className:`mt-4 p-4 rounded-xl border border-dashed ${d(t,"border-blue-300 bg-gradient-to-r from-blue-50 to-purple-50","border-blue-600 bg-gradient-to-r from-blue-900/20 to-purple-900/20")}`,children:[o.jsxs("div",{className:"text-center mb-3",children:[o.jsx("h4",{className:`text-sm font-bold ${d(t,"text-gray-800","text-white")} mb-1`,children:"📞 Nuestros Agentes Especializados"}),o.jsx("p",{className:`text-xs ${d(t,"text-gray-600","text-gray-300")}`,children:"Selecciona un agente para contactar directamente"})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("a",{href:"https://wa.me/593984280334",target:"_blank",rel:"noopener noreferrer",className:`group flex items-center gap-3 p-3 rounded-lg transition-all hover:scale-105 ${d(t,"bg-white border border-green-200 hover:border-green-300 hover:shadow-md","bg-green-900/20 border border-green-600 hover:bg-green-800/30")}`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-md group-hover:shadow-lg transition-all",children:o.jsx("span",{className:"text-white text-lg",children:"👨‍💼"})}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:`text-sm font-semibold ${d(t,"text-gray-800","text-white")}`,children:"Agente Principal"}),o.jsx("div",{className:`text-xs ${d(t,"text-gray-600","text-gray-300")}`,children:"593984280334"})]}),o.jsx("div",{className:"text-green-500 group-hover:scale-110 transition-transform",children:o.jsx("span",{className:"text-lg",children:"💬"})})]}),o.jsxs("a",{href:"https://wa.me/593984280334",target:"_blank",rel:"noopener noreferrer",className:`group flex items-center gap-3 p-3 rounded-lg transition-all hover:scale-105 ${d(t,"bg-white border border-blue-200 hover:border-blue-300 hover:shadow-md","bg-blue-900/20 border border-blue-600 hover:bg-blue-800/30")}`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-md group-hover:shadow-lg transition-all",children:o.jsx("span",{className:"text-white text-lg",children:"👩‍💼"})}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:`text-sm font-semibold ${d(t,"text-gray-800","text-white")}`,children:"Agente Soporte"}),o.jsx("div",{className:`text-xs ${d(t,"text-gray-600","text-gray-300")}`,children:"593984280334"})]}),o.jsx("div",{className:"text-blue-500 group-hover:scale-110 transition-transform",children:o.jsx("span",{className:"text-lg",children:"💬"})})]})]}),o.jsx("div",{className:`mt-3 text-center text-xs ${d(t,"text-gray-500","text-gray-400")}`,children:"⏰ Disponibles 24/7 • Respuesta inmediata"})]}),s.length<=1&&o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["🎯 Recomiéndame algo","💰 Ver precios","📺 ¿Qué hay en Netflix?","🛒 ¿Cómo compro?","👨‍💼 Hablar con agente"].map((j,g)=>o.jsx("button",{onClick:()=>l(j),className:`px-3 py-2 rounded-full text-xs font-medium transition-all hover:scale-105 ${d(t,"bg-zinc-100 text-zinc-700 hover:bg-zinc-200","bg-zinc-700 text-zinc-300 hover:bg-zinc-600")}`,children:j},g))})]}),o.jsxs("div",{className:"p-4 flex gap-2 border-t",children:[o.jsx("input",{value:i,onChange:j=>l(j.target.value),onKeyDown:j=>j.key==="Enter"&&y(),placeholder:"Escribe tu pregunta...",className:`flex-1 rounded-xl border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-all ${d(t,"border-zinc-300 bg-white focus:ring-purple-500 focus:border-purple-500","border-zinc-600 bg-zinc-800 text-zinc-100 focus:ring-blue-500 focus:border-blue-500")}`}),o.jsx("button",{onClick:y,disabled:!i.trim()||c,className:`rounded-xl px-4 py-3 text-sm font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed ${d(t,"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700","bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700")}`,children:c?"⏳":"🚀"})]})]})]})}function ux({isDark:e,onToggle:t}){return o.jsx("button",{title:e?"Cambiar a modo claro":"Cambiar a modo oscuro",onClick:t,className:`fixed bottom-5 left-5 z-40 grid h-11 w-11 place-content-center rounded-full shadow-lg ring-1 ${e?"bg-white text-zinc-900 ring-zinc-200":"bg-zinc-900 text-white ring-zinc-800"}`,children:e?"☀":"☾"})}function dx({service:e,onClose:t,onAddPurchase:r,isDark:n,user:s}){const[a,i]=E.useState(1),[l,c]=E.useState("pichincha"),[u,h]=E.useState(""),[m,f]=E.useState(!1),[b,y]=E.useState(""),w=()=>{if(!s){y("Debes estar registrado para reservar");return}f(!0),y("");try{const j={customer:s.name,phone:s.phone,email:s.email,service:e.name,serviceId:e.id,months:a,price:e.price*a,start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+a*30*24*60*60*1e3).toISOString().split("T")[0],validated:!1,payment_method:l,notes:u};r(j),y("✅ ¡Reserva registrada! Selecciona un agente para enviar tu comprobante"),setTimeout(()=>{t()},3e3)}catch{y("❌ Error al realizar la reserva")}finally{f(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("h3",{className:"text-2xl font-bold mb-2",children:["🛒 Reservar ",e.name]}),o.jsx("p",{className:"text-sm opacity-80",children:"Completa los datos de tu reserva"})]}),o.jsx("div",{className:`p-4 rounded-xl ${d(n,"bg-blue-50 border border-blue-200","bg-blue-900/20 border border-blue-400/30")}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`h-16 w-16 ${e.color} rounded-xl text-white flex items-center justify-center text-2xl font-bold`,children:e.logo}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:e.name}),o.jsxs("p",{className:"text-sm opacity-80",children:[ct(e.price),"/",e.billing==="annual"?"año":"mes"]})]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:d(n,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Duración (meses)"}),o.jsxs("select",{className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:a,onChange:j=>i(Number(j.target.value)),children:[o.jsx("option",{value:1,children:"1 mes"}),o.jsx("option",{value:3,children:"3 meses"}),o.jsx("option",{value:6,children:"6 meses"}),o.jsx("option",{value:12,children:"12 meses"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:d(n,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Método de pago"}),o.jsxs("select",{className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:l,onChange:j=>c(j.target.value),children:[o.jsx("option",{value:"pichincha",children:"Banco Pichincha"}),o.jsx("option",{value:"guayaquil",children:"Banco de Guayaquil"}),o.jsx("option",{value:"pacifico",children:"Banco del Pacífico"}),o.jsx("option",{value:"paypal",children:"PayPal"}),o.jsx("option",{value:"mobile",children:"Pago móvil"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:d(n,"text-sm text-zinc-800","text-sm text-zinc-300"),children:"Notas adicionales (opcional)"}),o.jsx("textarea",{className:`w-full rounded-xl border-2 px-4 py-3 shadow-sm transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-400 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-500 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/20")}`,value:u,onChange:j=>h(j.target.value),placeholder:"Información adicional...",rows:3})]}),o.jsxs("div",{className:`p-4 rounded-xl ${d(n,"bg-green-50 border border-green-200","bg-green-900/20 border border-green-400/30")}`,children:[o.jsx("h4",{className:"font-semibold mb-2",children:"💰 Resumen de la compra"}),o.jsxs("div",{className:"space-y-1 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Servicio:"}),o.jsx("span",{children:e.name})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Duración:"}),o.jsxs("span",{children:[a," ",a===1?"mes":"meses"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Precio unitario:"}),o.jsx("span",{children:ct(e.price)})]}),o.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[o.jsx("span",{children:"Total:"}),o.jsx("span",{children:ct(e.price*a)})]})]})]}),b&&o.jsx("div",{className:`text-sm ${b.includes("✅")?"text-green-600":"text-red-600"}`,children:b}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:t,className:`flex-1 px-4 py-3 rounded-xl font-semibold transition-all ${d(n,"bg-gray-200 text-gray-800 hover:bg-gray-300","bg-gray-700 text-gray-200 hover:bg-gray-600")}`,children:"Cancelar"}),o.jsx("button",{onClick:w,disabled:m,className:`flex-1 px-4 py-3 rounded-xl font-semibold transition-all ${m?"opacity-50 cursor-not-allowed":""} ${d(n,"bg-blue-600 text-white hover:bg-blue-700","bg-blue-500 text-white hover:bg-blue-600")}`,children:m?"⏳ Procesando...":"✅ Confirmar Reserva"})]})]})}function hx({service:e,onClose:t,isDark:r,onGoToAuth:n}){return o.jsxs("div",{className:"space-y-4 sm:space-y-6 p-3 sm:p-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative mb-4 sm:mb-6",children:[o.jsx("div",{className:"text-4xl sm:text-6xl mb-3 animate-bounce",children:"🔐"}),o.jsx("div",{className:"absolute -top-2 -right-2 w-3 h-3 sm:w-4 sm:h-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-pulse"})]}),o.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Registro Requerido"}),o.jsxs("p",{className:`text-sm sm:text-base mb-4 sm:mb-6 ${d(r,"text-gray-700","text-gray-300")}`,children:["Para comprar ",o.jsx("span",{className:"font-bold text-blue-600",children:e.name})," necesitas crear una cuenta en ",o.jsx("span",{className:"font-bold text-purple-600",children:"StreamZone"})]})]}),o.jsxs("div",{className:`rounded-xl p-4 border ${d(r,"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200","bg-gradient-to-br from-blue-900/20 to-purple-900/20 border-blue-600")}`,children:[o.jsx("h4",{className:`text-lg font-bold mb-4 text-center ${d(r,"text-blue-900","text-blue-100")}`,children:"✨ Beneficios de registrarte:"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${d(r,"bg-white/70","bg-blue-800/20")}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:"🎯"}),o.jsx("span",{className:`font-medium text-sm ${d(r,"text-blue-800","text-blue-200")}`,children:"Acceso rápido"})]})}),o.jsx("div",{className:`p-2 rounded-lg ${d(r,"bg-white/70","bg-blue-800/20")}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:"📱"}),o.jsx("span",{className:`font-medium text-sm ${d(r,"text-blue-800","text-blue-200")}`,children:"Notificaciones"})]})}),o.jsx("div",{className:`p-2 rounded-lg ${d(r,"bg-white/70","bg-blue-800/20")}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:"💳"}),o.jsx("span",{className:`font-medium text-sm ${d(r,"text-blue-800","text-blue-200")}`,children:"Pago seguro"})]})}),o.jsx("div",{className:`p-2 rounded-lg ${d(r,"bg-white/70","bg-blue-800/20")}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:"⚡"}),o.jsx("span",{className:`font-medium text-sm ${d(r,"text-blue-800","text-blue-200")}`,children:"Activación"})]})})]})]}),o.jsx("div",{className:`rounded-xl p-4 border ${d(r,"bg-gradient-to-r from-gray-50 to-blue-50 border-gray-200","bg-gradient-to-r from-gray-800 to-blue-900/20 border-gray-600")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`h-16 w-16 ${e.color} rounded-xl text-white flex items-center justify-center text-2xl font-bold shadow-md`,children:e.logo}),o.jsxs("div",{children:[o.jsx("h5",{className:`text-lg font-bold ${d(r,"text-gray-900","text-white")}`,children:e.name}),o.jsxs("p",{className:`text-base ${d(r,"text-gray-600","text-gray-300")}`,children:["Precio: ",o.jsx("span",{className:"font-bold text-green-600",children:ct(e.price)}),"/mes"]})]})]}),o.jsx("div",{className:`px-3 py-1 rounded-full ${d(r,"bg-green-100 text-green-800","bg-green-800/30 text-green-200")}`,children:o.jsx("span",{className:"text-xs font-semibold",children:"Premium"})})]})}),o.jsxs("div",{className:"flex flex-col gap-2 sm:gap-3",children:[o.jsx("button",{onClick:n,className:`w-full rounded-xl px-4 sm:px-6 py-3 sm:py-4 font-bold text-base sm:text-lg transition-all duration-300 hover:scale-105 shadow-xl ${d(r,"bg-gradient-to-r from-purple-600 via-blue-600 to-pink-600 text-white hover:from-purple-700 hover:via-blue-700 hover:to-pink-700","bg-gradient-to-r from-purple-700 via-blue-700 to-pink-700 text-white hover:from-purple-800 hover:via-blue-800 hover:to-pink-800")}`,children:o.jsxs("span",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[o.jsx("span",{className:"text-lg sm:text-xl",children:"🚀"}),o.jsx("span",{children:"Crear Cuenta y Comprar"}),o.jsx("span",{className:"text-lg sm:text-xl",children:"✨"})]})}),o.jsx("button",{onClick:t,className:`w-full rounded-xl px-3 sm:px-4 py-2 sm:py-3 font-semibold transition-all duration-300 hover:scale-105 border text-sm sm:text-base ${d(r,"bg-white text-gray-700 border-gray-300 hover:bg-gray-50 hover:border-gray-400","bg-gray-800 text-gray-300 border-gray-600 hover:bg-gray-700 hover:border-gray-500")}`,children:o.jsxs("span",{className:"flex items-center justify-center gap-2",children:[o.jsx("span",{children:"←"}),o.jsx("span",{children:"Volver al Catálogo"})]})})]}),o.jsx("div",{className:"text-center pt-4",children:o.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full ${d(r,"bg-gray-100","bg-gray-800")}`,children:[o.jsx("span",{className:`text-sm ${d(r,"text-gray-600","text-gray-400")}`,children:"¿Ya tienes cuenta?"}),o.jsx("button",{onClick:n,className:`font-semibold text-sm px-3 py-1 rounded-full transition-all ${d(r,"text-blue-600 hover:text-blue-700 hover:bg-blue-50","text-blue-400 hover:text-blue-300 hover:bg-blue-900/20")}`,children:"Iniciar sesión"})]})})]})}function mx({open:e,onClose:t,service:r,user:n,isDark:s,onPurchase:a}){const[i,l]=E.useState(""),[c,u]=E.useState(1),[h,m]=E.useState(1),[f,b]=E.useState("");if(!e||!r)return null;const y=r.billing==="annual",w=r.price*c*h,j=()=>{if(console.log("🛒 Iniciando compra para usuario registrado..."),!n){console.warn("⚠️ Usuario no registrado - compra bloqueada");return}const g={name:n.name||"Cliente",phone:n.phone||"+593000000000",email:n.email||"cliente@streamzone.com"};let p=g.phone;p.startsWith("+")||(p="+593"+p.replace(/[^\d]/g,""));const x=(r==null?void 0:r.name)||"Servicio Premium",v=(r==null?void 0:r.price)||10,S=c>0?c:1,N=h>0?h:1,_={service:x,price:v,duration:S,devices:N,total:v*S*N,paymentMethod:"pichincha",notes:f||"",customer:g.name,phone:p,email:g.email,start:new Date().toISOString().slice(0,10),end:new Date(Date.now()+(y?S*365:S*30)*24*60*60*1e3).toISOString().slice(0,10)};console.log("✅ Datos de compra garantizados:",_);try{a(_),console.log("🎉 Compra procesada exitosamente"),t()}catch(P){console.warn("⚠️ Error en onPurchase, pero continuando con panel de agentes:",P),t()}};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-2 sm:p-4",onClick:t,children:o.jsxs("div",{className:`w-full max-w-xs sm:max-w-md md:max-w-lg max-h-[95vh] sm:max-h-[90vh] rounded-xl sm:rounded-2xl p-3 sm:p-4 md:p-6 shadow-2xl overflow-y-auto border-2 ${d(s,"bg-white border-gray-200","bg-zinc-900 border-zinc-700 text-zinc-100")}`,onClick:g=>g.stopPropagation(),children:[o.jsxs("div",{className:"mb-3 sm:mb-4 md:mb-6 flex items-center justify-between",children:[o.jsx("h3",{className:`text-lg sm:text-xl md:text-2xl font-bold ${d(s,"text-gray-900","text-white")}`,children:"Completar Compra"}),o.jsx("button",{onClick:t,className:`w-8 h-8 sm:w-9 sm:h-9 rounded-full flex items-center justify-center text-lg font-bold transition-colors shadow-md ${d(s,"text-gray-600 hover:text-gray-800 hover:bg-gray-100 border border-gray-300","text-zinc-200 hover:text-white hover:bg-zinc-800 border border-zinc-600")}`,children:"×"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:`rounded-xl sm:rounded-2xl p-3 sm:p-4 border ${d(s,"bg-gray-50 border-gray-200","bg-zinc-800 border-zinc-600")}`,children:o.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[o.jsx("div",{className:`h-12 w-12 sm:h-16 sm:w-16 ${r.color} rounded-xl text-white grid place-content-center text-lg sm:text-2xl font-bold shadow-lg`,children:r.logo}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:`text-base sm:text-lg font-bold truncate ${d(s,"text-gray-900","text-white")}`,children:r.name}),o.jsxs("p",{className:`text-xs sm:text-sm font-semibold ${d(s,"text-gray-800","text-gray-200")}`,children:[ct(r.price)," por ",y?"año":"mes"]})]})]})}),!n&&o.jsx("div",{className:`rounded-xl sm:rounded-2xl p-4 border ${d(s,"bg-red-50 border-red-200","bg-red-900/20 border-red-600")}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-lg",children:"🔐"})}),o.jsxs("div",{children:[o.jsx("h4",{className:`text-sm font-semibold ${d(s,"text-red-900","text-red-200")}`,children:"Registro Requerido"}),o.jsx("p",{className:`text-xs ${d(s,"text-red-700","text-red-300")}`,children:"Debes iniciar sesión para realizar compras"})]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm sm:text-base font-semibold mb-3 ${d(s,"text-gray-900","text-white")}`,children:"Duración"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[1,2,3,6].map(g=>o.jsxs("button",{type:"button",onClick:()=>u(g),className:`px-3 py-2 sm:px-4 sm:py-3 rounded-lg sm:rounded-xl text-xs sm:text-sm font-semibold transition-all duration-200 border-2 shadow-md ${c===g?"bg-blue-600 text-white border-blue-700 shadow-lg transform scale-105":d(s,"bg-gray-100 text-gray-800 border-gray-400 hover:bg-gray-200 hover:border-gray-600 hover:shadow-lg","bg-gray-700 text-gray-200 border-gray-500 hover:bg-gray-600 hover:border-gray-400 hover:shadow-lg")}`,children:[g," ",y?g===1?"año":"años":g===1?"mes":"meses"]},g))})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("label",{className:`block text-sm sm:text-base font-semibold mb-3 ${d(s,"text-gray-900","text-white")}`,children:"Número de Dispositivos"}),o.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:[o.jsx("button",{type:"button",onClick:()=>h>1&&m(h-1),disabled:h<=1,className:`w-9 h-9 sm:w-11 sm:h-11 rounded-full flex items-center justify-center text-lg sm:text-xl font-bold transition-all border-2 shadow-md ${h<=1?d(s,"bg-gray-200 text-gray-400 cursor-not-allowed border-gray-300","bg-gray-600 text-gray-500 cursor-not-allowed border-gray-500"):d(s,"bg-blue-600 text-white hover:bg-blue-700 border-blue-700 shadow-lg","bg-blue-600 text-white hover:bg-blue-700 border-blue-700 shadow-lg")}`,children:"−"}),o.jsxs("div",{className:`border-2 rounded-xl px-4 sm:px-6 py-2 sm:py-3 min-w-[100px] sm:min-w-[120px] text-center shadow-lg ${d(s,"bg-blue-100 border-blue-700","bg-blue-900 border-blue-500")}`,children:[o.jsx("div",{className:`text-2xl sm:text-3xl font-bold ${d(s,"text-blue-900","text-blue-100")}`,children:h}),o.jsx("div",{className:`text-xs sm:text-sm font-bold ${d(s,"text-blue-800","text-blue-200")}`,children:h===1?"Dispositivo":"Dispositivos"})]}),o.jsx("button",{type:"button",onClick:()=>h<5&&m(h+1),disabled:h>=5,className:`w-9 h-9 sm:w-11 sm:h-11 rounded-full flex items-center justify-center text-lg sm:text-xl font-bold transition-all border-2 shadow-md ${h>=5?d(s,"bg-gray-200 text-gray-400 cursor-not-allowed border-gray-300","bg-gray-600 text-gray-500 cursor-not-allowed border-gray-500"):d(s,"bg-blue-600 text-white hover:bg-blue-700 border-blue-700 shadow-lg","bg-blue-600 text-white hover:bg-blue-700 border-blue-700 shadow-lg")}`,children:"+"})]}),o.jsx("div",{className:`mt-2 text-xs ${d(s,"text-gray-600","text-gray-300")}`,children:"Máximo 5 dispositivos por compra"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:`font-semibold mb-3 sm:mb-4 text-sm sm:text-base ${d(s,"text-gray-800","text-gray-200")}`,children:"💳 Información de Pago"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl p-3 sm:p-4 text-white shadow-lg border-2 border-blue-800",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[o.jsx("span",{className:"text-lg sm:text-xl",children:"🏦"}),o.jsx("span",{className:"font-bold text-sm sm:text-base text-white",children:"Banco Pichincha"})]}),o.jsxs("div",{className:"text-xs sm:text-sm space-y-1 text-white",children:[o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Titular:"})," Jeremias Guale Santana"]}),o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Cuenta:"})," 2209034638"]}),o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Tipo:"})," Ahorro Transaccional"]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-700 to-purple-700 rounded-xl p-3 sm:p-4 text-white shadow-lg border-2 border-purple-800",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[o.jsx("span",{className:"text-lg sm:text-xl",children:"🏛️"}),o.jsx("span",{className:"font-bold text-sm sm:text-base text-white",children:"Banco Guayaquil"})]}),o.jsxs("div",{className:"text-xs sm:text-sm space-y-1 text-white",children:[o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Titular:"})," Jeremias Joel Guale Santana"]}),o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Cuenta:"})," 0122407273"]}),o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Tipo:"})," Ahorros"]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg p-3 sm:p-4 text-white shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[o.jsx("span",{className:"text-base sm:text-lg",children:"🌊"}),o.jsx("span",{className:"font-semibold text-xs sm:text-sm text-white",children:"Banco Pacífico"})]}),o.jsxs("div",{className:"text-xs space-y-1 text-purple-100",children:[o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Titular:"})," Byron Guale Santana"]}),o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Cuenta:"})," 1061220256"]}),o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Tipo:"})," Ahorros"]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg p-3 sm:p-4 text-white shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[o.jsx("span",{className:"text-base sm:text-lg",children:"💳"}),o.jsx("span",{className:"font-semibold text-xs sm:text-sm text-white",children:"PayPal"})]}),o.jsxs("div",{className:"text-xs space-y-1 text-blue-100",children:[o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Email:"})," guale2023@outlook.com"]}),o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Método:"})," PayPal"]}),o.jsxs("div",{children:[o.jsx("strong",{className:"text-white",children:"Tipo:"})," Transferencia"]})]})]})]}),o.jsx("div",{className:`mt-3 sm:mt-4 p-4 sm:p-6 rounded-2xl ${d(s,"bg-gradient-to-br from-orange-50 to-yellow-50 border-2 border-orange-200","bg-gradient-to-br from-orange-900/30 to-yellow-900/30 border-2 border-orange-500")}`,children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"flex justify-center mb-3 sm:mb-4",children:o.jsx("div",{className:`p-3 sm:p-4 rounded-full ${d(s,"bg-orange-100","bg-orange-800/50")}`,children:o.jsx("span",{className:"text-3xl sm:text-4xl",children:"🚨"})})}),o.jsx("h5",{className:"text-lg sm:text-xl font-bold text-orange-800 dark:text-orange-200 mb-2 sm:mb-3",children:"⚠️ Instrucciones Importantes"}),o.jsxs("div",{className:`p-3 sm:p-4 rounded-xl ${d(s,"bg-white/80","bg-black/20")}`,children:[o.jsxs("p",{className:"text-xs sm:text-sm text-orange-700 dark:text-orange-300 mb-3 sm:mb-4",children:["Una vez que hayas realizado el pago, ",o.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"debes confirmar tu compra"})," enviando una captura del comprobante por WhatsApp a nuestros agentes."]}),o.jsxs("div",{className:"flex justify-center gap-2 sm:gap-4 mb-3 sm:mb-4",children:[o.jsxs("div",{className:`px-3 sm:px-4 py-2 rounded-lg ${d(s,"bg-green-100 text-green-800","bg-green-800/50 text-green-200")}`,children:[o.jsx("span",{className:"text-base sm:text-lg",children:"📱"}),o.jsx("span",{className:"ml-1 sm:ml-2 font-semibold text-xs sm:text-sm",children:"WhatsApp"})]}),o.jsxs("div",{className:`px-3 sm:px-4 py-2 rounded-lg ${d(s,"bg-blue-100 text-blue-800","bg-blue-800/50 text-blue-200")}`,children:[o.jsx("span",{className:"text-base sm:text-lg",children:"💬"}),o.jsx("span",{className:"ml-1 sm:ml-2 font-semibold text-xs sm:text-sm",children:"Agentes"})]})]}),o.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium",children:"⚡ Sin el comprobante, tu servicio NO será activado"})]})]})})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm sm:text-base font-semibold mb-2 ${d(s,"text-gray-900","text-white")}`,children:"Notas adicionales (opcional)"}),o.jsx("textarea",{value:f,onChange:g=>b(g.target.value),placeholder:"Comentarios o instrucciones especiales...",className:`w-full rounded-lg border-2 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm resize-none shadow-md ${d(s,"border-gray-400 bg-white text-gray-900 focus:border-blue-500","border-gray-500 bg-gray-700 text-gray-100 focus:border-blue-400")}`,rows:2})]}),o.jsx("div",{className:`bg-gradient-to-r border-2 rounded-xl p-4 sm:p-6 shadow-lg ${d(s,"from-blue-100 to-purple-100 border-blue-600","from-blue-900 to-purple-900 border-blue-500")}`,children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:`text-lg sm:text-xl font-bold ${d(s,"text-gray-900","text-white")}`,children:"Total a pagar:"}),o.jsx("span",{className:`text-2xl sm:text-3xl font-black ${d(s,"text-blue-800","text-blue-200")}`,children:ct(w)})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 pt-2",children:[o.jsx("button",{onClick:t,className:`flex-1 rounded-lg sm:rounded-xl px-4 sm:px-6 py-3 sm:py-4 font-bold transition-all text-sm sm:text-base border-2 shadow-md ${d(s,"bg-gray-100 text-gray-800 hover:bg-gray-200 border-gray-400","bg-gray-700 text-gray-200 hover:bg-gray-600 border-gray-500")}`,children:"Cancelar"}),o.jsx("button",{onClick:j,disabled:!n,className:`flex-1 rounded-lg sm:rounded-xl px-4 sm:px-6 py-3 sm:py-4 font-bold transition-all shadow-lg text-sm sm:text-base border-2 transform ${n?"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-xl border-blue-700 hover:scale-105":"bg-gray-400 text-gray-600 cursor-not-allowed border-gray-500"}`,children:n?"🛒 Completar Compra":"🔐 Registro Requerido"})]})]})]})})}function fx({open:e,onClose:t,onRegister:r,isDark:n,systemPrefersDark:s}){const[a,i]=E.useState({name:"",phone:"",email:"",service:"",price:"",duration:1,isAnnual:!1,startDate:new Date().toISOString().slice(0,10),service_email:"",service_password:"",admin_notes:""});if(E.useEffect(()=>{if(a.service){const u=ro.find(h=>h.name===a.service);if(u){const h=u.price*a.duration;i(m=>({...m,price:h.toString()}))}}},[a.service,a.duration]),!e)return null;const l=u=>{u.preventDefault();const h=new Date(a.startDate),m=a.isAnnual?a.duration*12:a.duration;h.setMonth(h.getMonth()+m),r({...a,price:parseFloat(a.price),endDate:h.toISOString().slice(0,10),months:m}),i({name:"",phone:"",email:"",service:"",price:"",duration:1,isAnnual:!1,startDate:new Date().toISOString().slice(0,10),service_email:"",service_password:"",admin_notes:""}),t()},c=()=>{if(!a.phone||!a.service_email||!a.service_password){alert("⚠️ Por favor completa todos los campos requeridos antes de enviar por WhatsApp");return}const u=new Date(a.startDate),h=a.isAnnual?a.duration*12:a.duration;u.setMonth(u.getMonth()+h);const m=u.toISOString().slice(0,10),f=`🎉 ¡Hola ${a.name}! 🎉

✨ Aquí tienes tus credenciales de ${a.service}:

🔑 *CREDENCIALES DEL SERVICIO* 🔑
📧 *Email:* ${a.service_email}
🔐 *Contraseña:* ${a.service_password}

⏰ *Duración:* ${h} ${h===1?"mes":"meses"}
📅 *Válido hasta:* ${m}

🎬 ¡Disfruta tu servicio! 🎬

💬 Si tienes alguna pregunta, no dudes en contactarnos.

🙏 ¡Gracias por confiar en nosotros!`,b=`https://wa.me/${a.phone.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(f)}`;window.open(b,"_blank")};return o.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 backdrop-blur-sm p-4",onClick:t,children:o.jsxs("div",{className:`w-full max-w-2xl rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto ${d(n,"bg-white","bg-gray-900")}`,onClick:u=>u.stopPropagation(),children:[o.jsx("div",{className:`relative p-6 border-b-2 ${d(n,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-700")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:`text-2xl font-bold ${d(n,"text-gray-900","text-white")}`,children:"Registrar Compra Manual"}),o.jsx("button",{onClick:t,className:`w-8 h-8 rounded-full flex items-center justify-center text-xl font-bold transition-all ${d(n,"text-gray-500 hover:bg-gray-100","text-gray-400 hover:bg-gray-700")}`,children:"×"})]})}),o.jsx("div",{className:"p-6",children:o.jsxs("form",{onSubmit:l,className:"space-y-6",children:[o.jsxs("div",{className:`p-6 rounded-xl border-2 ${d(n,"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200","bg-gradient-to-br from-blue-900/20 to-indigo-900/20 border-blue-700")}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${d(n,"bg-blue-100","bg-blue-900/30")}`,children:"👤"}),o.jsx("h4",{className:`text-xl font-bold ${d(n,"text-gray-900","text-white")}`,children:"Información del Cliente"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(n,"text-gray-700","text-gray-300")}`,children:"👤 Nombre del Cliente *"}),o.jsx("input",{type:"text",value:a.name,onChange:u=>i({...a,name:u.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-600 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/30")}`,placeholder:"Nombre completo del cliente",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(n,"text-gray-700","text-gray-300")}`,children:"📱 Teléfono *"}),o.jsx("input",{type:"tel",value:a.phone,onChange:u=>i({...a,phone:u.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-600 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/30")}`,placeholder:"+593 99 999 9999",required:!0})]})]})]}),o.jsxs("div",{className:`p-6 rounded-xl border-2 ${d(n,"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200","bg-gradient-to-br from-green-900/20 to-emerald-900/20 border-green-700")}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${d(n,"bg-green-100","bg-green-900/30")}`,children:"🎬"}),o.jsx("h4",{className:`text-xl font-bold ${d(n,"text-gray-900","text-white")}`,children:"Servicio y Duración"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(n,"text-gray-700","text-gray-300")}`,children:"🎬 Servicio *"}),o.jsxs("select",{value:a.service,onChange:u=>i({...a,service:u.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-green-500 focus:ring-green-200","border-gray-600 bg-gray-700 text-white focus:border-green-400 focus:ring-green-800/30")}`,required:!0,children:[o.jsx("option",{value:"",children:"Selecciona un servicio"}),ro.map(u=>o.jsxs("option",{value:u.name,children:[u.name," - $",u.price,"/mes"]},u.name))]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(n,"text-gray-700","text-gray-300")}`,children:"⏱️ Duración (meses) *"}),o.jsxs("select",{value:a.duration,onChange:u=>i({...a,duration:Number(u.target.value)}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-green-500 focus:ring-green-200","border-gray-600 bg-gray-700 text-white focus:border-green-400 focus:ring-green-800/30")}`,required:!0,children:[o.jsx("option",{value:1,children:"1 mes"}),o.jsx("option",{value:3,children:"3 meses"}),o.jsx("option",{value:6,children:"6 meses"}),o.jsx("option",{value:12,children:"12 meses"})]})]})]}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(n,"text-gray-700","text-gray-300")}`,children:"💰 Precio Total"}),o.jsxs("div",{className:`p-3 rounded-lg ${d(n,"bg-green-100 border border-green-200","bg-green-900/20 border border-green-600")}`,children:[o.jsxs("p",{className:`text-lg font-bold ${d(n,"text-green-800","text-green-300")}`,children:["$",a.price||"0.00"," USD"]}),o.jsxs("p",{className:`text-sm ${d(n,"text-green-700","text-green-400")}`,children:[a.duration," ",a.duration===1?"mes":"meses"," de ",a.service||"servicio"]})]})]})]}),o.jsxs("div",{className:`p-6 rounded-xl border-2 ${d(n,"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200","bg-gradient-to-br from-purple-900/20 to-pink-900/20 border-purple-700")}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${d(n,"bg-yellow-100","bg-yellow-900/30")}`,children:"🔑"}),o.jsx("h4",{className:`text-xl font-bold ${d(n,"text-gray-900","text-white")}`,children:"Credenciales del Servicio"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(n,"text-gray-700","text-gray-300")}`,children:"📧 Email del servicio *"}),o.jsx("input",{type:"email",value:a.service_email,onChange:u=>i({...a,service_email:u.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,placeholder:"usuario@servicio.com",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(n,"text-gray-700","text-gray-300")}`,children:"🔐 Contraseña del servicio *"}),o.jsx("input",{type:"text",value:a.service_password,onChange:u=>i({...a,service_password:u.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,placeholder:"••••••••",required:!0})]})]})]}),o.jsxs("div",{className:`p-6 rounded-xl border-2 ${d(n,"bg-gradient-to-br from-amber-50 to-orange-50 border-amber-200","bg-gradient-to-br from-amber-900/20 to-orange-900/20 border-amber-700")}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${d(n,"bg-amber-100","bg-amber-900/30")}`,children:"📝"}),o.jsx("h4",{className:`text-xl font-bold ${d(n,"text-gray-900","text-white")}`,children:"Notas del Administrador"})]}),o.jsx("textarea",{value:a.admin_notes,onChange:u=>i({...a,admin_notes:u.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 resize-none ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-amber-500 focus:ring-amber-200","border-gray-600 bg-gray-700 text-white focus:border-amber-400 focus:ring-amber-800/30")}`,rows:4,placeholder:"Escribe información importante para el cliente (puedes usar saltos de línea)..."}),o.jsx("div",{className:`mt-3 p-3 rounded-lg ${d(n,"bg-amber-100 border border-amber-200","bg-amber-900/20 border border-amber-600")}`,children:o.jsxs("p",{className:`text-sm font-semibold ${d(n,"text-amber-800","text-amber-300")}`,children:["💡 ",o.jsx("strong",{children:"Nota:"})," Esta información será visible para el cliente y puede incluir instrucciones especiales, detalles de renovación, o cualquier información relevante."]})})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6",children:[o.jsx("button",{type:"button",onClick:t,className:`w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 ${d(n,"bg-gray-200 text-gray-800 hover:bg-gray-300","bg-gray-700 text-gray-200 hover:bg-gray-600")}`,children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("span",{children:"❌"}),o.jsx("span",{children:"Cancelar"})]})}),o.jsxs("button",{type:"button",onClick:c,className:`w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2 ${d(n,"bg-green-500 text-white hover:bg-green-600 shadow-lg hover:shadow-xl","bg-green-600 text-white hover:bg-green-700 shadow-lg hover:shadow-xl")}`,children:[o.jsx("span",{className:"text-lg",children:"📱"}),o.jsx("span",{className:"truncate",children:"Enviar por WhatsApp"})]}),o.jsxs("button",{type:"submit",className:"w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 shadow-lg hover:shadow-xl",children:[o.jsx("span",{className:"text-lg",children:"💾"}),o.jsx("span",{className:"truncate",children:"Registrar Compra"})]})]})]})})]})})}function gx({open:e,onClose:t,onUpdate:r,purchase:n,isDark:s,systemPrefersDark:a}){const i=(n==null?void 0:n.service)||"",l=i.includes("+")||i.includes("Netflix")&&i.includes("Disney");let c=[i];l&&(i.includes("Netflix")&&i.includes("Disney")?c=["Netflix",i.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:i.includes("Max")&&i.includes("Prime")?c=["Max","Prime Video"]:i.includes("Netflix")&&i.includes("Max")?c=["Netflix","Max"]:i.includes("Netflix")&&i.includes("Prime")?c=["Netflix","Prime Video"]:i.includes("Prime")&&i.includes("Disney")?c=["Prime Video",i.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:i.includes("Disney")&&i.includes("Max")?c=[i.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Max"]:i.includes("Spotify")&&i.includes("Netflix")?c=["Spotify","Netflix"]:i.includes("Spotify")&&i.includes("Disney")?c=["Spotify",i.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:i.includes("Spotify")&&i.includes("Prime")?c=["Spotify","Prime Video"]:i.includes("Paramount")&&i.includes("Max")&&i.includes("Prime")?c=["Paramount+","Max","Prime Video"]:i.includes("Netflix")&&i.includes("Max")&&i.includes("Disney")?c=["Netflix","Max",i.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Prime Video","Paramount+"]:c=i.split(/\s*\+\s*/).map(v=>v.trim()).filter(v=>v.length>0));const[u,h]=E.useState({customer:"",phone:"",service:"",start:"",end:"",months:1,service_email:"",service_password:"",admin_notes:""}),[m,f]=E.useState(!1),[b,y]=E.useState({}),w=(v,S)=>{if(!v)return"";const N=new Date(v),_=new Date(N);return _.setMonth(_.getMonth()+S),_.toISOString().split("T")[0]},j=v=>{h(S=>({...S,start:v,end:w(v,S.months)}))},g=v=>{h(S=>({...S,months:v,end:w(S.start,v)}))};if(E.useEffect(()=>{if(n&&(h({customer:n.customer||"",phone:n.phone||"",service:n.service||"",start:n.start||"",end:n.end||"",months:n.months||1,service_email:n.service_email||"",service_password:n.service_password||"",admin_notes:n.admin_notes||""}),l&&n.service_password)){const v={};n.service_password.split(`

`).forEach(N=>{const _=N.split(`
`);if(_.length>=3){const P=_[0].replace(":","").trim(),z=_[1].replace("Email: ","").trim(),R=_[2].replace("Contraseña: ","").trim();P&&z&&R&&(v[P]={email:z,password:R})}}),y(v),console.log("📋 Credenciales parseadas:",v)}},[n,l]),!e||!n)return null;const p=v=>{v.preventDefault();let S={...u};if(l){const N=c.map(_=>{const P=b[_];return P!=null&&P.email&&(P!=null&&P.password)?`${_}:
Email: ${P.email}
Contraseña: ${P.password}`:""}).filter(_=>_.length>0).join(`

`);S.service_email=`COMBO: ${c.join(" + ")}`,S.service_password=N}r(S),t()},x=()=>{const v=`🎉 ¡Hola ${u.customer}! 🎉

✨ Aquí tienes tus credenciales de ${u.service}:

🔑 *CREDENCIALES DEL SERVICIO* 🔑
📧 *Email:* ${u.service_email}
🔐 *Contraseña:* ${u.service_password}

⏰ *Duración:* ${u.months} ${u.months===1?"mes":"meses"}
📅 *Válido hasta:* ${u.end}

🎬 ¡Disfruta tu servicio! 🎬

💬 Si tienes alguna pregunta, no dudes en contactarnos.

🙏 ¡Gracias por confiar en nosotros!`,S=`https://wa.me/${u.phone.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(v)}`;window.open(S,"_blank")};return o.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 backdrop-blur-sm p-4",onClick:t,children:o.jsxs("div",{className:`w-full max-w-2xl rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto ${d(s,"bg-white","bg-gray-900")}`,onClick:v=>v.stopPropagation(),children:[o.jsx("div",{className:`relative p-6 border-b-2 ${d(s,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-700")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:`text-2xl font-bold ${d(s,"text-gray-900","text-white")}`,children:"Editar Compra"}),o.jsx("button",{onClick:t,className:`w-8 h-8 rounded-full flex items-center justify-center text-xl font-bold transition-all ${d(s,"text-gray-500 hover:bg-gray-100","text-gray-400 hover:bg-gray-700")}`,children:"×"})]})}),o.jsx("div",{className:"p-6",children:o.jsxs("form",{onSubmit:p,className:"space-y-6",children:[o.jsxs("div",{className:`p-6 rounded-xl border-2 ${d(s,"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200","bg-gradient-to-br from-blue-900/20 to-indigo-900/20 border-blue-700")}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${d(s,"bg-blue-100","bg-blue-900/30")}`,children:"👤"}),o.jsx("h4",{className:`text-xl font-bold ${d(s,"text-gray-900","text-white")}`,children:"Información del Cliente"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(s,"text-gray-700","text-gray-300")}`,children:"👤 Nombre del Cliente *"}),o.jsx("input",{type:"text",value:u.customer,onChange:v=>h({...u,customer:v.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(s,"border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-600 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/30")}`,placeholder:"Nombre completo del cliente",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(s,"text-gray-700","text-gray-300")}`,children:"📱 Teléfono *"}),o.jsx("input",{type:"tel",value:u.phone,onChange:v=>h({...u,phone:v.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(s,"border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-blue-200","border-gray-600 bg-gray-700 text-white focus:border-blue-400 focus:ring-blue-800/30")}`,placeholder:"+593 99 999 9999",required:!0})]})]})]}),o.jsxs("div",{className:`p-6 rounded-xl border-2 ${d(s,"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200","bg-gradient-to-br from-green-900/20 to-emerald-900/20 border-green-700")}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${d(s,"bg-green-100","bg-green-900/30")}`,children:"📅"}),o.jsx("h4",{className:`text-xl font-bold ${d(s,"text-gray-900","text-white")}`,children:"Fechas y Duración"})]}),o.jsx("button",{type:"button",onClick:()=>f(!m),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${d(s,"bg-green-100 text-green-800 hover:bg-green-200","bg-green-900/30 text-green-200 hover:bg-green-800/40")}`,children:m?"🔒 Bloquear":"✏️ Editar Fechas"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(s,"text-gray-700","text-gray-300")}`,children:"📅 Fecha de Inicio *"}),o.jsx("input",{type:"date",value:u.start,onChange:v=>j(v.target.value),disabled:!m,className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(s,"border-gray-300 bg-white text-gray-900 focus:border-green-500 focus:ring-green-200","border-gray-600 bg-gray-700 text-white focus:border-green-400 focus:ring-green-800/30")} ${m?"":"opacity-60 cursor-not-allowed"}`,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(s,"text-gray-700","text-gray-300")}`,children:"⏱️ Duración (meses) *"}),o.jsxs("select",{value:u.months,onChange:v=>g(Number(v.target.value)),disabled:!m,className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(s,"border-gray-300 bg-white text-gray-900 focus:border-green-500 focus:ring-green-200","border-gray-600 bg-gray-700 text-white focus:border-green-400 focus:ring-green-800/30")} ${m?"":"opacity-60 cursor-not-allowed"}`,required:!0,children:[o.jsx("option",{value:1,children:"1 mes"}),o.jsx("option",{value:3,children:"3 meses"}),o.jsx("option",{value:6,children:"6 meses"}),o.jsx("option",{value:12,children:"12 meses"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(s,"text-gray-700","text-gray-300")}`,children:"🏁 Fecha de Fin"}),o.jsx("input",{type:"date",value:u.end,onChange:v=>h({...u,end:v.target.value}),disabled:!m,className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(s,"border-gray-300 bg-white text-gray-900 focus:border-green-500 focus:ring-green-200","border-gray-600 bg-gray-700 text-white focus:border-green-400 focus:ring-green-800/30")} ${m?"":"opacity-60 cursor-not-allowed"}`})]})]}),m&&o.jsx("div",{className:`mt-4 p-3 rounded-lg ${d(s,"bg-green-100 border border-green-200","bg-green-900/20 border border-green-600")}`,children:o.jsxs("p",{className:`text-sm font-semibold ${d(s,"text-green-800","text-green-300")}`,children:["💡 ",o.jsx("strong",{children:"Tip:"})," La fecha de fin se calcula automáticamente basada en la fecha de inicio y duración. Útil para renovaciones o ajustes de fechas."]})})]}),o.jsxs("div",{className:`p-6 rounded-xl border-2 ${d(s,"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200","bg-gradient-to-br from-purple-900/20 to-pink-900/20 border-purple-700")}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${d(s,"bg-yellow-100","bg-yellow-900/30")}`,children:"🔑"}),o.jsx("h4",{className:`text-xl font-bold ${d(s,"text-gray-900","text-white")}`,children:"Credenciales del Servicio"})]}),l?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:`p-3 rounded-lg ${d(s,"bg-orange-50 border border-orange-200","bg-orange-900/20 border border-orange-600")}`,children:o.jsx("p",{className:`text-sm font-semibold ${d(s,"text-orange-800","text-orange-300")}`,children:"🎁 Combo detectado: Edita las credenciales para cada servicio"})}),c.map((v,S)=>{var N,_;return o.jsxs("div",{className:`p-4 rounded-lg border ${d(s,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-600")}`,children:[o.jsxs("h5",{className:`text-lg font-bold mb-3 ${d(s,"text-gray-800","text-white")}`,children:[v," ",S===0?"🎬":S===1?"🎭":S===2?"🎪":"🎯"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-bold mb-2 ${d(s,"text-gray-700","text-gray-300")}`,children:["📧 Email del ",v]}),o.jsx("input",{type:"email",value:((N=b[v])==null?void 0:N.email)||"",onChange:P=>y(z=>{var R;return{...z,[v]:{...z[v],email:P.target.value,password:((R=z[v])==null?void 0:R.password)||""}}}),className:`w-full rounded-lg border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${d(s,"border-gray-300 bg-white text-gray-900 focus:border-blue-500","border-gray-600 bg-gray-700 text-white focus:border-blue-400")}`,placeholder:`usuario@${v.toLowerCase().replace(/[^a-z]/g,"")}.com`})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-bold mb-2 ${d(s,"text-gray-700","text-gray-300")}`,children:["🔑 Contraseña del ",v]}),o.jsx("input",{type:"password",value:((_=b[v])==null?void 0:_.password)||"",onChange:P=>y(z=>{var R;return{...z,[v]:{...z[v],password:P.target.value,email:((R=z[v])==null?void 0:R.email)||""}}}),className:`w-full rounded-lg border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-amber-500/20 ${d(s,"border-gray-300 bg-white text-gray-900 focus:border-amber-500","border-gray-600 bg-gray-700 text-white focus:border-amber-400")}`,placeholder:"••••••••"})]})]})]},v)})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(s,"text-gray-700","text-gray-300")}`,children:"Email del servicio *"}),o.jsx("input",{type:"email",value:u.service_email,onChange:v=>h({...u,service_email:v.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(s,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(s,"text-gray-700","text-gray-300")}`,children:"Contraseña del servicio *"}),o.jsx("input",{type:"text",value:u.service_password,onChange:v=>h({...u,service_password:v.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(s,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,required:!0})]})]})]}),o.jsxs("div",{className:`p-6 rounded-xl border-2 ${d(s,"bg-gradient-to-br from-amber-50 to-orange-50 border-amber-200","bg-gradient-to-br from-amber-900/20 to-orange-900/20 border-amber-700")}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${d(s,"bg-amber-100","bg-amber-900/30")}`,children:"📝"}),o.jsx("h4",{className:`text-xl font-bold ${d(s,"text-gray-900","text-white")}`,children:"Notas del Administrador"})]}),o.jsx("textarea",{value:u.admin_notes,onChange:v=>h({...u,admin_notes:v.target.value}),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 resize-none ${d(s,"border-gray-300 bg-white text-gray-900 focus:border-amber-500 focus:ring-amber-200","border-gray-600 bg-gray-700 text-white focus:border-amber-400 focus:ring-amber-800/30")}`,rows:4,placeholder:"Escribe información importante para el cliente (puedes usar saltos de línea)..."}),o.jsx("div",{className:`mt-3 p-3 rounded-lg ${d(s,"bg-amber-100 border border-amber-200","bg-amber-900/20 border border-amber-600")}`,children:o.jsxs("p",{className:`text-sm font-semibold ${d(s,"text-amber-800","text-amber-300")}`,children:["💡 ",o.jsx("strong",{children:"Nota:"})," Esta información será visible para el cliente y puede incluir instrucciones especiales, detalles de renovación, o cualquier información relevante."]})})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6",children:[o.jsx("button",{type:"button",onClick:t,className:`w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 ${d(s,"bg-gray-200 text-gray-800 hover:bg-gray-300","bg-gray-700 text-gray-200 hover:bg-gray-600")}`,children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("span",{children:"❌"}),o.jsx("span",{children:"Cancelar"})]})}),o.jsxs("button",{type:"button",onClick:x,className:`w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2 ${d(s,"bg-green-500 text-white hover:bg-green-600 shadow-lg hover:shadow-xl","bg-green-600 text-white hover:bg-green-700 shadow-lg hover:shadow-xl")}`,children:[o.jsx("span",{className:"text-lg",children:"📱"}),o.jsx("span",{className:"truncate",children:"Enviar por WhatsApp"})]}),o.jsxs("button",{type:"submit",className:"w-full sm:flex-1 px-6 py-3 rounded-xl text-sm font-bold transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 shadow-lg hover:shadow-xl",children:[o.jsx("span",{className:"text-lg",children:"💾"}),o.jsx("span",{className:"truncate",children:"Guardar Cambios"})]})]})]})})]})})}function Kc(e,t,r){return e?r:t}function px({open:e,onClose:t,children:r,title:n,isDark:s,className:a}){return e?o.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/50 p-4",onClick:t,children:o.jsxs("div",{className:`w-full max-w-lg rounded-2xl p-6 shadow-2xl ${Kc(s,"bg-white","bg-zinc-900")} ${a||""}`,onClick:i=>i.stopPropagation(),children:[o.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold",children:n}),o.jsx("button",{onClick:t,className:`w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold transition-colors ${Kc(s,"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-100","text-zinc-300 hover:text-zinc-100 hover:bg-zinc-800")}`,children:"×"})]}),r]})}):null}function xx({reserveModalOpen:e,registrationRequiredOpen:t,purchaseModalOpen:r,adminRegisterPurchaseOpen:n,editPurchaseOpen:s,selectedService:a,purchaseData:i,editingPurchase:l,user:c,isDark:u,systemPrefersDark:h,setReserveModalOpen:m,setRegistrationRequiredOpen:f,setPurchaseModalOpen:b,setAdminRegisterPurchaseOpen:y,setEditPurchaseOpen:w,onAddPurchase:j,onGoToAuth:g,onPurchase:p,onRegister:x,onUpdate:v}){return o.jsxs(o.Fragment,{children:[o.jsx(px,{open:e,onClose:()=>m(!1),title:`🔐 Registro Requerido - ${(a==null?void 0:a.name)||""}`,isDark:u,className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:a&&o.jsx(hx,{service:a,onClose:()=>m(!1),isDark:u,onGoToAuth:g})}),t&&o.jsx(dx,{service:a,onClose:()=>f(!1),onAddPurchase:j,isDark:u,user:c}),o.jsx(mx,{open:r,onClose:()=>b(!1),service:i,user:c,isDark:u,onPurchase:p}),o.jsx(fx,{open:n,onClose:()=>y(!1),onRegister:x,isDark:u,systemPrefersDark:h}),o.jsx(gx,{open:s,onClose:()=>w(!1),onUpdate:v,purchase:l,isDark:u,systemPrefersDark:h})]})}function bx({isOpen:e,onClose:t,purchase:r,isDark:n,onApprove:s,onUpdatePurchase:a}){const i=(r==null?void 0:r.service)||"";console.log("🔍 DEBUGGING - Servicio completo:",i);const l=i.includes("+")||i.includes("Netflix")&&i.includes("Disney");console.log("🔍 DEBUGGING - Es combo?:",l);let c=[i];l&&(i.includes("Netflix")&&i.includes("Disney")?c=["Netflix",i.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:i.includes("Max")&&i.includes("Prime")?c=["Max","Prime Video"]:i.includes("Netflix")&&i.includes("Max")?c=["Netflix","Max"]:i.includes("Netflix")&&i.includes("Prime")?c=["Netflix","Prime Video"]:i.includes("Prime")&&i.includes("Disney")?c=["Prime Video",i.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:i.includes("Disney")&&i.includes("Max")?c=[i.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Max"]:i.includes("Spotify")&&i.includes("Netflix")?c=["Spotify","Netflix"]:i.includes("Spotify")&&i.includes("Disney")?c=["Spotify",i.includes("Premium")?"Disney+ Premium":"Disney+ Estándar"]:i.includes("Spotify")&&i.includes("Prime")?c=["Spotify","Prime Video"]:i.includes("Paramount")&&i.includes("Max")&&i.includes("Prime")?c=["Paramount+","Max","Prime Video"]:i.includes("Netflix")&&i.includes("Max")&&i.includes("Disney")?c=["Netflix","Max",i.includes("Premium")?"Disney+ Premium":"Disney+ Estándar","Prime Video","Paramount+"]:c=i.split(/\s*\+\s*/).map(g=>g.trim()).filter(g=>g.length>0),console.log("🎯 COMBO DETECTADO - Servicios separados:",c)),console.log("🎯 FINAL - isCombo:",l,"services:",c);const[u,h]=E.useState({email:"",password:"",notes:""}),[m,f]=E.useState({}),[b,y]=E.useState(!1);if(!e||!r)return null;const w=()=>{const g=`🎬 *StreamZone* - Compra Aprobada ✅

¡Hola ${r.customer}! 

Tu compra de *${r.service}* ha sido aprobada exitosamente 🎉

Ve los datos completos de tu compra en nuestra página web 💻

🌟 No olvides que tu recomendación me ayuda a seguir creciendo.

¡Muchas gracias por confiar en mí! 🙏✨`,p=`https://wa.me/${r.phone.replace(/\D/g,"")}?text=${encodeURIComponent(g)}`;window.open(p,"_blank")},j=async()=>{if(console.log("🚀 ===== INICIANDO APROBACIÓN DE COMPRA ====="),console.log("📋 purchase:",r),console.log("📋 isCombo:",l),console.log("📋 services:",c),console.log("📋 serviceCredentials:",u),console.log("📋 multiCredentials:",m),console.log("📋 onApprove function:",s),console.log("📋 onUpdatePurchase function:",a),l){if(c.some(p=>{var x,v;return!((x=m[p])!=null&&x.email)||!((v=m[p])!=null&&v.password)})){alert("Por favor completa el email y contraseña para todos los servicios del combo");return}}else if(!u.email||!u.password){alert("Por favor completa el email y contraseña del servicio");return}y(!0);try{let g,p,x;if(l){const S=c.map(N=>{const _=m[N];return`${N}:
Email: ${_.email}
Contraseña: ${_.password}`}).join(`

`);g=`COMBO: ${c.join(" + ")}`,p=S,x=u.notes}else g=u.email,p=u.password,x=u.notes;console.log("🔄 Modal: Iniciando aprobación...",{purchaseId:r.id,isCombo:l,emailToSave:g,passwordToSave:p?"***":"undefined",notesToSave:x});const v=await Uh(r.id,g,p,x,"admin");if(console.log("📋 Modal: Resultado de approvePurchase:",v),v.data)console.log("✅ Modal: Compra aprobada en Supabase, actualizando estado local..."),a&&a(r.id,{validated:!0,service_email:g,service_password:p,admin_notes:x}),console.log("✅ Compra guardada en la base de datos exitosamente"),console.log("🔄 Actualizando estado local inmediatamente..."),a&&a(r.id,{validated:!0,service_email:g,service_password:p,admin_notes:x}),console.log("🔄 Llamando a onApprove para recargar datos..."),await s(),setTimeout(()=>{console.log("🔄 Cerrando modal después de actualización..."),t(),h({email:"",password:"",notes:""}),f({})},500),alert("✅ Compra aprobada y actualizada correctamente");else throw new Error("No se pudo guardar en la base de datos")}catch(g){console.error("Error aprobando compra:",g),alert("❌ Error al guardar en la base de datos")}finally{y(!1)}};return o.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 backdrop-blur-sm p-4",onClick:t,children:o.jsxs("div",{className:`w-full max-w-2xl rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto ${d(n,"bg-white","bg-gray-900")}`,onClick:g=>g.stopPropagation(),children:[o.jsx("div",{className:`relative p-6 border-b-2 ${d(n,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-700")}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:`text-2xl font-bold ${d(n,"text-gray-900","text-white")}`,children:"Aprobar Compra"}),o.jsx("button",{onClick:t,className:`w-8 h-8 rounded-full flex items-center justify-center text-xl font-bold transition-all ${d(n,"text-gray-500 hover:bg-gray-100","text-gray-400 hover:bg-gray-700")}`,children:"×"})]})}),o.jsx("div",{className:"p-6",children:o.jsxs("form",{className:"space-y-6",children:[o.jsx("div",{className:`p-6 rounded-xl border-2 ${d(n,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-700")}`,children:o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:`text-xl font-bold ${d(n,"text-gray-900","text-white")}`,children:r.customer}),o.jsxs("p",{className:`text-lg font-semibold ${d(n,"text-gray-700","text-gray-300")}`,children:[r.service," • ",r.months," ",r.months===1?"mes":"meses"]})]}),o.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${d(n,"bg-blue-100","bg-blue-900/30")}`,children:[o.jsx("span",{className:"text-lg",children:"📱"}),o.jsx("span",{className:`font-semibold ${d(n,"text-blue-800","text-blue-200")}`,children:r.phone})]})]})}),o.jsxs("div",{className:`p-6 rounded-xl border-2 ${d(n,"bg-purple-50 border-purple-200","bg-purple-900/20 border-purple-700")}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${d(n,"bg-yellow-100","bg-yellow-900/30")}`,children:"🔑"}),o.jsx("h4",{className:`text-xl font-bold ${d(n,"text-gray-900","text-white")}`,children:"Credenciales del Servicio"})]}),l?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:`p-3 rounded-lg ${d(n,"bg-orange-50 border border-orange-200","bg-orange-900/20 border border-orange-600")}`,children:o.jsx("p",{className:`text-sm font-semibold ${d(n,"text-orange-800","text-orange-300")}`,children:"🎁 Combo detectado: Ingresa las credenciales para cada servicio"})}),c.map((g,p)=>{var x,v;return o.jsxs("div",{className:`p-4 rounded-lg border ${d(n,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-600")}`,children:[o.jsxs("h5",{className:`text-lg font-bold mb-3 ${d(n,"text-gray-800","text-white")}`,children:[g," ",p===0?"🎬":p===1?"🎭":p===2?"🎪":"🎯"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-bold mb-2 ${d(n,"text-gray-700","text-gray-300")}`,children:["📧 Email del ",g]}),o.jsx("input",{type:"email",value:((x=m[g])==null?void 0:x.email)||"",onChange:S=>f(N=>{var _;return{...N,[g]:{...N[g],email:S.target.value,password:((_=N[g])==null?void 0:_.password)||""}}}),className:`w-full rounded-lg border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-blue-500","border-gray-600 bg-gray-700 text-white focus:border-blue-400")}`,placeholder:`usuario@${g.toLowerCase().replace(/[^a-z]/g,"")}.com`})]}),o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-bold mb-2 ${d(n,"text-gray-700","text-gray-300")}`,children:["🔑 Contraseña del ",g]}),o.jsx("input",{type:"password",value:((v=m[g])==null?void 0:v.password)||"",onChange:S=>f(N=>{var _;return{...N,[g]:{...N[g],password:S.target.value,email:((_=N[g])==null?void 0:_.email)||""}}}),className:`w-full rounded-lg border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-amber-500/20 ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-amber-500","border-gray-600 bg-gray-700 text-white focus:border-amber-400")}`,placeholder:"••••••••"})]})]})]},g)})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(n,"text-gray-700","text-gray-300")}`,children:"Email del servicio *"}),o.jsx("input",{type:"email",value:u.email,onChange:g=>h(p=>({...p,email:g.target.value})),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-bold ${d(n,"text-gray-700","text-gray-300")}`,children:"Contraseña del servicio *"}),o.jsx("input",{type:"text",value:u.password,onChange:g=>h(p=>({...p,password:g.target.value})),className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-purple-500 focus:ring-purple-200","border-gray-600 bg-gray-700 text-white focus:border-purple-400 focus:ring-purple-800/30")}`,required:!0})]})]})]}),o.jsxs("div",{className:`p-6 rounded-xl border-2 ${d(n,"bg-gray-50 border-gray-200","bg-gray-800 border-gray-700")}`,children:[o.jsx("h4",{className:`text-lg font-bold mb-4 ${d(n,"text-gray-900","text-white")}`,children:"Información Importante"}),o.jsx("textarea",{value:u.notes,onChange:g=>h(p=>({...p,notes:g.target.value})),placeholder:"Notas adicionales sobre esta compra...",className:`w-full rounded-xl border-2 px-4 py-3 text-sm font-medium transition-all focus:outline-none focus:ring-2 resize-none ${d(n,"border-gray-300 bg-white text-gray-900 focus:border-gray-500 focus:ring-gray-200","border-gray-600 bg-gray-700 text-white focus:border-gray-400 focus:ring-gray-800/30")}`,rows:3})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[o.jsx("button",{onClick:t,className:`w-full sm:flex-1 px-6 py-3 rounded-xl font-bold transition-all duration-200 hover:scale-105 ${d(n,"bg-gray-200 text-gray-700 hover:bg-gray-300","bg-gray-700 text-gray-200 hover:bg-gray-600")}`,children:"Cancelar"}),o.jsxs("button",{onClick:w,disabled:l?c.some(g=>{var p,x;return!((p=m[g])!=null&&p.email)||!((x=m[g])!=null&&x.password)}):!u.email||!u.password,className:`w-full sm:flex-1 px-6 py-3 rounded-xl font-bold transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${d(n,"bg-green-500 text-white hover:bg-green-600","bg-green-600 text-white hover:bg-green-700")}`,children:[o.jsx("span",{className:"text-lg",children:"📱"}),o.jsx("span",{className:"truncate",children:"Enviar por WhatsApp"})]}),o.jsx("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),console.log("🚀 BOTÓN APROBAR CLICKEADO"),console.log("🔍 loading:",b),console.log("🔍 serviceCredentials:",u),j()},disabled:b||(l?c.some(g=>{var p,x;return!((p=m[g])!=null&&p.email)||!((x=m[g])!=null&&x.password)}):!u.email||!u.password),className:`w-full sm:flex-1 px-6 py-3 rounded-xl font-bold transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 ${d(n,"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 shadow-lg hover:shadow-xl","bg-gradient-to-r from-blue-600 to-purple-700 text-white hover:from-blue-700 hover:to-purple-800 shadow-lg hover:shadow-xl")}`,children:b?o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),o.jsx("span",{className:"truncate",children:"Aprobando..."})]}):o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("span",{children:"✅"}),o.jsx("span",{className:"truncate",children:"Aprobar Compra"})]})})]})]})})]})})}function vx({isOpen:e,onClose:t,title:r="Error",message:n,isDark:s,onRetry:a,showRetry:i=!0}){return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 sm:p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-md",onClick:t}),o.jsx("div",{className:"relative w-full max-w-xs sm:max-w-sm transform transition-all duration-300 scale-100 opacity-100",children:o.jsxs("div",{className:`rounded-xl sm:rounded-2xl shadow-2xl border-2 ${s?"bg-gray-900 border-red-600":"bg-white border-red-500"}`,children:[o.jsxs("div",{className:"relative overflow-hidden rounded-t-xl sm:rounded-t-2xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600 via-red-700 to-red-800"}),o.jsxs("div",{className:"relative p-4 sm:p-6 text-center",children:[o.jsx("div",{className:"mx-auto mb-3 sm:mb-4 w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center",children:o.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-white/30 flex items-center justify-center shadow-lg",children:o.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),o.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-2 text-white drop-shadow-lg",children:r})]})]}),o.jsxs("div",{className:"p-4 sm:p-6",children:[o.jsx("div",{className:"text-center mb-4 sm:mb-6",children:o.jsx("p",{className:`text-sm sm:text-base leading-relaxed ${s?"text-gray-100":"text-gray-800"}`,children:n})}),o.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[i&&a&&o.jsx("button",{onClick:a,className:`w-full py-3 sm:py-3 px-4 rounded-lg sm:rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 transform hover:scale-105 shadow-lg ${s?"bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:from-blue-600 hover:to-blue-700 border border-blue-400":"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 border border-blue-500"}`,children:"🔄 Intentar de nuevo"}),o.jsx("button",{onClick:t,className:`w-full py-2.5 sm:py-2 px-4 rounded-lg sm:rounded-xl text-sm sm:text-base font-medium transition-all duration-200 shadow-md ${s?"bg-gray-700 text-gray-100 hover:bg-gray-600 border border-gray-500":"bg-gray-200 text-gray-800 hover:bg-gray-300 border border-gray-400"}`,children:"Cerrar"})]})]}),o.jsx("div",{className:`px-4 sm:px-6 pb-3 sm:pb-4 ${s?"bg-gray-900/80":"bg-gray-100/80"}`,children:o.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(3)].map((l,c)=>o.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${s?"bg-red-400":"bg-red-600"}`,style:{animationDelay:`${c*.3}s`,animationDuration:"1.5s"}},c))})})]})})]}):null}function yx(e,t){return{answer:async(n,s=[])=>{var i,l,c;const a=n.toLowerCase().trim();if([...s,a].join(" "),console.log("Chatbot recibió:",a),console.log("Servicios disponibles:",e.length),console.log("Combos disponibles:",t.length),/hola|buenas|hey|hi|hello|buenos|buenas tardes|buenas noches|buenos días/.test(a))return`¡Hola! Bienvenido a StreamZone. Soy su asistente especializado en streaming. Puedo ayudarle con:

💰 Ver precios - Catálogo completo de servicios
🎯 Combos especiales - Grandes ahorros
📺 Contenido disponible - Por plataforma
🛒 Cómo comprar - Proceso paso a paso
📱 Información de cuentas - Dispositivos y perfiles
🔐 Recuperar contraseña - Si olvidó su acceso
💳 Métodos de pago - Información bancaria
🛠️ Soporte técnico - Ayuda y problemas

Comandos rápidos:
• Escriba "ver precios" para el catálogo
• Escriba "combos" para ofertas especiales
• Escriba "cómo comprar" para el proceso
• Escriba "métodos de pago" para información bancaria

¿En qué puedo ayudarle?`;if(/olvide|olvidé|contraseña|password|recuperar|reset|resetear/.test(a))return`🔐 RECUPERACIÓN DE CONTRASEÑA

No se preocupe, puedo ayudarle a recuperar su contraseña.

Proporcione su email y le generaré un código de recuperación.

Ejemplo: miemail@gmail.com

Importante: El código se mostrará aquí en el chat, no se envía por email.

¿Cuál es su email registrado?`;if(/@.*\./.test(a)&&!/netflix|disney|hbo|amazon|spotify/.test(a)){const u=a.match(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/);if(u){const h=u[1];try{console.log("🔍 Chatbot generando token para:",h);const m=await pl(h);return console.log("🔍 Chatbot resultado completo:",m),console.log("🔍 Token generado:",(i=m.data)==null?void 0:i.token),console.log("🔍 Usuario:",(l=m.data)==null?void 0:l.user),m.data?`🔐 **¡CÓDIGO GENERADO EXITOSAMENTE!** ✅

📧 Email: ${h}
🔑 **Tu código de recuperación:**

**${m.data.token}**

📋 **Instrucciones:**
1. Ve a "Iniciar sesión" → "¿Olvidaste tu contraseña?"
2. Ingresa tu email: ${h}
3. Copia y pega este código: **${m.data.token}**
4. Crea tu nueva contraseña

⏰ **El código expira en 30 minutos**

💡 ¡Guarda este código en un lugar seguro!`:(console.log("🔍 Error en resultado:",m.error),`❌ **Error generando código**

📧 Email: ${h}
🚫 ${((c=m.error)==null?void 0:c.message)||"Error desconocido"}

💡 **Posibles causas:**
• El email no está registrado
• Problema de conexión

🔧 **Solución:**
• Verifica que el email sea correcto
• Intenta crear una cuenta nueva si no tienes una`)}catch(m){return console.log("🔍 Chatbot error en catch:",m),`❌ **Error en el proceso**

📧 Email: ${h}
🚫 Error: ${m}

💡 Intenta de nuevo o contacta soporte.`}}}return/recomendar|recomendación|recomendaciones|qué|que ver|mejor|sugerir|cuál|que plataforma|anime|familia|marvel|star wars|hbo|blockbuster|presupuesto bajo|dame|quiero ver|ayuda|opciones/.test(a)?/anime|manga|japonés|japones/.test(a)?`🎌 Para ANIME te recomiendo:

1️⃣ **Crunchyroll** - El catálogo más grande de anime
   Ejemplos: Attack on Titan, Demon Slayer, Jujutsu Kaisen

2️⃣ **Netflix** - Anime original y clásicos
   Ejemplos: Naruto, One Piece, Castlevania

💡 ¿Prefieres anime clásico o series nuevas?`:/familia|niños|kids|disney|marvel|star wars|pixar/.test(a)?`👨‍👩‍👧‍👦 Para CONTENIDO FAMILIAR te recomiendo:

1️⃣ **Disney+** - Marvel, Star Wars, Pixar
   Ejemplos: Loki, The Mandalorian, Encanto

2️⃣ **Combo Netflix + Disney+** - $6/mes (¡Ahorro!) 💰

🎭 ¿Buscas contenido para adultos o toda la familia?`:/hbo|warner|premiadas|premios|calidad|premium/.test(a)?`🏆 Para SERIES PREMIUM te recomiendo:

1️⃣ **Max (HBO)** - Contenido de alta calidad
   Ejemplos: House of the Dragon, The Last of Us, Succession

2️⃣ **Combo Max + Prime Video** - $5.50/mes

🎬 ¿Te gustan las series dramáticas o prefieres acción?`:/blockbuster|películas|peliculas|acción|accion|superhéroes/.test(a)?`🎬 Para BLOCKBUSTERS te recomiendo:

1️⃣ **Prime Video** - Películas + canales
   Ejemplos: The Boys, Jack Ryan, Fast & Furious

2️⃣ **Netflix** - Originales y éxitos
   Ejemplos: Stranger Things, The Witcher, Extraction

💥 ¿Prefieres películas de acción o series?`:/presupuesto bajo|barato|económico|economico|combo|ahorro/.test(a)?`💰 Para PRESUPUESTO BAJO te recomiendo:

1️⃣ **Netflix + Disney+** - $6/mes (¡50% descuento!)
2️⃣ **Netflix + Max** - $5.50/mes
3️⃣ **Prime Video + Disney+** - $5.75/mes

🎯 Todos incluyen: 1 perfil + 1 dispositivo
💡 ¿Cuánto quieres gastar al mes?`:`🎯 Te recomiendo estas opciones populares:

`+e.slice(0,3).map((h,m)=>`${m+1}️⃣ **${h.name}** - ${ct(h.price)}/${h.billing==="annual"?"año":"mes"}
   ${Tf(h.id)}`).join(`

`)+`

🤔 ¿Qué tipo de contenido te gusta más? (anime, familia, acción, etc.)`:/película|pelicula|serie|contenido|qué hay|que hay|disponible|ver|catálogo|catalogo/.test(a)?/netflix/.test(a)?`📺 **NETFLIX** - Catálogo completo:

🎬 **Series Originales:**
• Stranger Things, The Crown, La Casa de Papel
• Bridgerton, Ozark, The Witcher
• Wednesday, Dahmer, Money Heist

🎭 **Géneros:** Drama, Thriller, Comedia, Documentales
🌍 **Países:** Disponible en Ecuador y Latinoamérica

💡 ¿Te interesa algún género específico?`:/disney/.test(a)?`🏰 **DISNEY+** - Catálogo completo:

🦸 **Marvel:** Loki, WandaVision, Hawkeye, Moon Knight
⭐ **Star Wars:** The Mandalorian, Obi-Wan Kenobi
🎨 **Pixar:** Soul, Luca, Turning Red
🏰 **Disney Clásico:** Frozen, Moana, Encanto

👨‍👩‍👧‍👦 **Perfecto para:** Familias, fans de Marvel/Star Wars

🎯 ¿Buscas contenido para niños o adultos?`:/max|hbo/.test(a)?`👑 **MAX (HBO)** - Contenido Premium:

🐉 **Series Épicas:** Game of Thrones, House of the Dragon
🎮 **Videojuegos:** The Last of Us, Arcane
💼 **Drama:** Succession, Euphoria, White Lotus
🎬 **Películas:** Batman, Dune, Matrix

🏆 **Calidad:** 4K, HDR, Dolby Atmos

🎭 ¿Prefieres series dramáticas o películas épicas?`:/prime/.test(a)?`📦 **PRIME VIDEO** - Exclusivas + Beneficios:

🦸 **Originales:** The Boys, The Marvelous Mrs. Maisel
🎬 **Blockbusters:** Jack Ryan, Tom Clancy's
📚 **Beneficios Extra:** Envío gratis Amazon

🌍 **Disponibilidad:** Ecuador, Latinoamérica
💰 **Valor:** Incluye envíos de Amazon

🛒 ¿Te interesan las exclusivas o los beneficios de Amazon?`:/spotify/.test(a)?`🎵 **SPOTIFY** - Música Sin Límites:

🎶 **Música:** 100M+ canciones
🎧 **Podcasts:** Joe Rogan, Serial, Crime Junkie
🎤 **Audiolibros:** Harry Potter, El Principito

📱 **Dispositivos:** Móvil, PC, TV, Auto
🎯 **Perfecto para:** Música, podcasts, audiolibros

🎧 ¿Prefieres música, podcasts o audiolibros?`:`📺 **CATÁLOGOS DISPONIBLES:**

🎬 **Netflix:** Series originales, thrillers, documentales
🏰 **Disney+:** Marvel, Star Wars, Pixar, Disney clásico
👑 **Max:** HBO premium, Game of Thrones, películas épicas
📦 **Prime Video:** Exclusivas, blockbusters + Amazon
🎵 **Spotify:** Música, podcasts, audiolibros

🤔 ¿Qué plataforma te interesa más?`:/precio|precios|cuánto|cuesta|costar|combo|ahorro|descuento|barato|económico|economico/.test(a)?/combo/.test(a)?`💰 **COMBOS DISPONIBLES:**

`+t.map(u=>`🎯 **${u.name}** - ${ct(u.price)}/mes
   💡 Ahorro significativo vs individual`).join(`

`)+`

🎯 ¿Te interesa algún combo específico?`:`💰 **PRECIOS INDIVIDUALES:**

`+e.slice(0,5).map(u=>`📺 **${u.name}** - ${ct(u.price)}/${u.billing==="annual"?"año":"mes"}`).join(`

`)+`

💡 **Tip:** Los combos ofrecen grandes ahorros. Escribe "combos" para ver ofertas.`:/cómo comprar|como comprar|comprar|proceso|pasos|reservar|pagar|pago|metodo|método/.test(a)?`🛒 **PROCESO DE COMPRA:**

1️⃣ **Selecciona** tu servicio o combo
2️⃣ **Reserva** por WhatsApp (+593 98 428 0334)
3️⃣ **Paga** por transferencia bancaria
4️⃣ **Recibe** tus credenciales al instante
5️⃣ **Disfruta** de tu entretenimiento

💳 **Métodos de pago:**
• Banco Pichincha
• Banco de Guayaquil
• Banco del Pacífico
• PayPal
• Transferencia móvil

📱 **WhatsApp:** +593 98 428 0334

¿Necesitas ayuda con algún paso específico?`:/cuenta|perfil|dispositivo|dispositivos|usuario|usuario|sesión|sesion|login|acceso/.test(a)?`👤 **INFORMACIÓN DE CUENTAS:**

📱 **Dispositivos:**
• Móvil (Android/iOS)
• Smart TV (Samsung, LG, Sony)
• Computadora (Windows/Mac)
• Tablet (iPad, Android)

👥 **Perfiles:**
• 1 perfil por servicio
• Contraseña personalizada
• Acceso desde cualquier dispositivo

🔐 **Seguridad:**
• Cambio de contraseña disponible
• Recuperación por email
• Soporte 24/7

💡 ¿Necesitas ayuda con algún dispositivo específico?`:/método|metodo|pago|pagar|banco|transferencia|paypal|pichincha|guayaquil|pacifico/.test(a)?`💳 **MÉTODOS DE PAGO:**

🏦 **Bancos Nacionales:**
• Banco Pichincha
• Banco de Guayaquil
• Banco del Pacífico

💚 **PayPal:**
• Pago internacional
• Tarjeta de crédito/débito

📱 **Transferencia Móvil:**
• Pago desde tu celular
• Rápido y seguro

💰 **Proceso:**
1. Reserva por WhatsApp
2. Te enviamos datos bancarios
3. Realizas la transferencia
4. Recibes credenciales al instante

📱 **WhatsApp:** +593 98 428 0334

¿Prefieres algún método específico?`:/soporte|ayuda|problema|error|no funciona|no carga|técnico|tecnico|bug|falla/.test(a)?`🛠️ **SOPORTE TÉCNICO:**

📱 **Problemas comunes:**
• No carga el contenido → Reinicia la app
• Error de login → Verifica credenciales
• Lento → Cierra otras apps
• No reproduce → Actualiza la app

🔧 **Soluciones:**
• Reinicia el dispositivo
• Actualiza la aplicación
• Verifica tu conexión a internet
• Contacta soporte si persiste

📞 **Contacto:**
• WhatsApp: +593 98 428 0334
• Email: soporte@streamzone.com
• Disponible 24/7

¿Qué problema específico tienes?`:/streamzone|stream zone|qué es|que es|información|info|acerca|sobre/.test(a)?`🎬 **STREAMZONE** - Tu entretenimiento digital:

✨ **¿Qué somos?**
• Plataforma de streaming premium
• Acceso a todas las plataformas
• Precios increíbles
• Soporte 24/7

🎯 **Nuestros servicios:**
• Netflix, Disney+, Max, Prime Video
• Spotify, Crunchyroll, YouTube Premium
• Combos especiales con ahorros

💰 **Ventajas:**
• Precios más bajos que individual
• Activación inmediata
• Soporte personalizado
• Renovación automática

🛒 **¿Cómo funciona?**
1. Selecciona tu servicio
2. Reserva por WhatsApp
3. Paga y recibe credenciales
4. ¡Disfruta!

📱 **Contacto:** +593 98 428 0334

¿Te interesa algún servicio específico?`:`🤔 No estoy seguro de entender tu pregunta. Puedo ayudarte con:

💰 **Precios y combos**
📺 **Contenido disponible**
🛒 **Cómo comprar**
🔐 **Recuperar contraseña**
💳 **Métodos de pago**
🛠️ **Soporte técnico**

💡 **Comandos útiles:**
• "ver precios" - Catálogo completo
• "combos" - Ofertas especiales
• "cómo comprar" - Proceso paso a paso
• "métodos de pago" - Información bancaria

¿En qué más puedo ayudarte?`}}}function wx(){const[e,t]=E.useState(!1),[r,n]=E.useState(!1),[s,a]=E.useState(!1),[i,l]=E.useState(null),[c,u]=E.useState(null);return{reserveModalOpen:e,registrationRequiredOpen:r,purchaseModalOpen:s,selectedService:i,purchaseData:c,setReserveModalOpen:t,setRegistrationRequiredOpen:n,setPurchaseModalOpen:a,setSelectedService:l,setPurchaseData:u,handleReserve:(f,b)=>{b?(u(f),a(!0)):(l(f),t(!0))},closeAllModals:()=>{t(!1),n(!1),a(!1),l(null),u(null)}}}const jx="+593984280334",Nx="+593998799579",vs={PICHINCHA:"0122407273 (Jeremias Joel Guale)",GUAYAQUIL:"0122407273 (Jeremias Joel Guale)",PACIFICO:"1061220256 (Byron Guale)",PAYPAL:"guale2023@outlook.com"};function _x(e){const[t,r]=E.useState(!1),[n,s]=E.useState({isOpen:!1,message:""}),a=h=>{s({isOpen:!0,message:h})},i=()=>{s({isOpen:!1,message:""})},l=h=>{const{service:m,price:f,duration:b,devices:y,customer:w,phone:j,email:g,paymentMethod:p,notes:x}=h;return`🎬 *Nueva Compra - StreamZone*

👤 *Cliente:* ${w}
📱 *WhatsApp:* ${j}
📧 *Email:* ${g||"No proporcionado"}

🎯 *Servicio:* ${m}
💰 *Precio:* $${f}
⏱️ *Duración:* ${b} ${b===1?"mes":"meses"}
📱 *Dispositivos:* ${y}
💳 *Método de pago:* ${p}
📝 *Notas:* ${x||"Ninguna"}

💳 *Datos para transferencia:*
🏦 Pichincha: ${vs.PICHINCHA}
🏛️ Guayaquil: ${vs.GUAYAQUIL}
🌊 Pacífico: ${vs.PACIFICO}
💳 PayPal: ${vs.PAYPAL}

¡Gracias por tu compra! 🎉`},c=h=>{var j,g,p;const m=l(h),f=`https://wa.me/${jx.replace("+","")}?text=${encodeURIComponent(m)}`,b=`https://wa.me/${Nx.replace("+","")}?text=${encodeURIComponent(m)}`,y=document.createElement("div");y.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",y.innerHTML=`
      <div class="bg-white rounded-xl p-6 max-w-md mx-4 shadow-2xl">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-gray-800">¡Compra Registrada! 🎉</h3>
          <button id="closeModal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
        </div>
        <div class="bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4">
          <p class="text-orange-800 text-sm font-medium">⚠️ PASO OBLIGATORIO</p>
          <p class="text-orange-700 text-xs mt-1">Debes contactar por WhatsApp para confirmar tu compra y recibir las credenciales</p>
        </div>
        <p class="text-gray-600 mb-6">Selecciona un agente para continuar con tu compra:</p>
        <div class="space-y-3">
          <button id="agent1" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-semibold transition-colors">
            👨‍💼 Agente 1 (+593 98 428 0334)
          </button>
          <button id="agent2" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold transition-colors">
            👨‍💼 Agente 2 (+593 99 879 9579)
          </button>
        </div>
      </div>
    `,document.body.appendChild(y);const w=()=>{try{y&&y.parentNode&&document.body.removeChild(y)}catch{console.log("Modal ya cerrado")}};(j=document.getElementById("agent1"))==null||j.addEventListener("click",()=>{w(),setTimeout(()=>{try{window.open(f,"_blank")}catch{alert("No se pudo abrir WhatsApp automáticamente. Por favor, contacta al Agente 1: +593 98 428 0334")}},100)}),(g=document.getElementById("agent2"))==null||g.addEventListener("click",()=>{w(),setTimeout(()=>{try{window.open(b,"_blank")}catch{alert("No se pudo abrir WhatsApp automáticamente. Por favor, contacta al Agente 2: +593 99 879 9579")}},100)}),(p=document.getElementById("closeModal"))==null||p.addEventListener("click",w)};return{processPurchase:async h=>{r(!0);try{console.log("🛒 Procesando compra para usuario registrado:",h);const m={customer:h.customer||"Cliente StreamZone",phone:h.phone||"+593000000000",service:h.service||"Servicio Premium",price:h.price||10,duration:h.duration||1,devices:h.devices||1,total:h.total||10,paymentMethod:h.paymentMethod||"pichincha",notes:h.notes||"",email:h.email||"cliente@streamzone.com",start:h.start||new Date().toISOString().slice(0,10),end:h.end||new Date(Date.now()+30*24*60*60*1e3).toISOString().slice(0,10)};console.log("✅ Datos garantizados para usuario registrado:",m),console.log("🎯 Mostrando panel de agentes..."),c(m);try{console.log("💾 Intentando guardar en BD en segundo plano..."),console.log("🔍 Buscando usuario existente por email:",h.email);const{data:f}=await gl(h.email);let b=f==null?void 0:f.id,y=f==null?void 0:f.phone;if(b)console.log("✅ Usuario encontrado por email:",b),console.log("📱 Teléfono del usuario en BD:",y);else{console.log("🔍 Usuario no encontrado por email, buscando por teléfono:",h.phone);const{data:w,error:j}=await Ih(h.phone);if(w!=null&&w.id)b=w.id,y=w.phone,console.log("✅ Usuario encontrado por teléfono:",b);else{console.log("👤 Usuario no encontrado, creando nuevo usuario...");const g={name:h.customer,phone:h.phone,email:h.email||"sin-email@temp.com"},{data:p,error:x}=await Rh(g);if(x){console.warn("⚠️ Error creando usuario:",x),console.error("❌ NO SE PUEDE CONTINUAR SIN USUARIO VÁLIDO");return}else b=p==null?void 0:p.id,y=p==null?void 0:p.phone,console.log("✅ Usuario creado exitosamente:",b)}}if(b){console.log("🎯 TENEMOS userId:",b);const w={customer:h.customer,phone:y||h.phone,service:h.service,start:h.start,end:h.end,months:h.duration,validated:!1};console.log("📱 Teléfono del formulario:",h.phone),console.log("📱 Teléfono de la BD (usado):",y||h.phone),console.log("💾 Guardando compra pendiente en BD (campos correctos):",w),console.log("🔍 Llamando a createPurchase con:",JSON.stringify(w,null,2));const{data:j,error:g}=await zh(w);g?(console.error("❌ Error guardando compra:",g),console.error("❌ Detalles del error:",JSON.stringify(g,null,2)),console.error("❌ Tipo de error:",typeof g),console.error("❌ Mensaje del error:",g.message)):(console.log("✅ Compra guardada como pendiente:",j),console.log("✅ ID de la compra guardada:",j==null?void 0:j.id),console.log("✅ Validated status:",j==null?void 0:j.validated),console.log("🎯 ¡COMPRA GUARDADA EXITOSAMENTE! Debería aparecer en admin."),console.log("🔄 Forzando recarga inmediata de compras pendientes..."),setTimeout(async()=>{var p;try{const{getPendingPurchases:x}=await Yr(async()=>{const{getPendingPurchases:S}=await Promise.resolve().then(()=>ex);return{getPendingPurchases:S}},void 0),v=await x();console.log("🔄 RESULTADO INMEDIATO de getPendingPurchases:",v),console.log("🔄 Compras pendientes encontradas:",((p=v.data)==null?void 0:p.length)||0)}catch(x){console.error("❌ Error en recarga inmediata:",x)}},1e3))}else console.error("❌ NO HAY userId - NO SE PUEDE GUARDAR LA COMPRA"),console.error("❌ purchaseData:",h)}catch(f){console.warn("⚠️ Error en BD (no crítico):",f)}}catch(m){console.error("❌ Error crítico:",m),a("Error al procesar la compra. Por favor, inténtalo de nuevo.")}finally{r(!1)}},isProcessing:t,generateWhatsAppMessage:l,errorModal:n,closeErrorModal:i}}function Sx(e){const[t,r]=E.useState([]),[n,s]=E.useState([]),[a,i]=E.useState([]),[l,c]=E.useState([]),[u,h]=E.useState(null),[m,f]=E.useState(!1),[b,y]=E.useState(null),w=async()=>{f(!0),y(null);try{console.log("🔄 loadAllPurchasesFromSupabase: Iniciando carga...");const N=await Mh();return console.log("🔄 loadAllPurchasesFromSupabase: Resultado recibido:",N),N.data&&Array.isArray(N.data)?(r(N.data),console.log("✅ loadAllPurchasesFromSupabase: Todas las compras cargadas desde Supabase:",N.data.length),N.data.length>0&&console.log("📋 Primeras 3 compras:",N.data.slice(0,3).map(_=>({id:_.id,customer:_.customer,validated:_.validated,created_at:_.created_at}))),N.data):(console.warn("⚠️ loadAllPurchasesFromSupabase: No se pudieron cargar las compras desde Supabase"),r([]),[])}catch(N){return console.error("❌ loadAllPurchasesFromSupabase: Error cargando compras desde Supabase:",N),y("Error cargando compras desde la base de datos"),r([]),[]}finally{f(!1)}},j=async()=>{try{console.log("🔄 loadPendingPurchases: Iniciando carga...");const N=await Fh();return console.log("🔄 loadPendingPurchases: Resultado recibido:",N),N.data&&Array.isArray(N.data)?(s(N.data),console.log("✅ loadPendingPurchases: Compras pendientes cargadas:",N.data.length),N.data):(console.log("⚠️ loadPendingPurchases: No hay datos o no es array, estableciendo array vacío"),s([]),[])}catch(N){return console.error("❌ loadPendingPurchases: Error cargando compras pendientes:",N),s([]),[]}},g=async N=>{try{const _=await Bh(N);return _.data?(i(_.data),console.log("✅ Compras activas del usuario cargadas:",_.data.length),_.data):(i([]),[])}catch(_){return console.error("❌ Error cargando compras del usuario:",_),i([]),[]}},p=async()=>{try{const N=await Vh(7);return N.data?(c(N.data),console.log("✅ Servicios próximos a vencer cargados:",N.data.length),N.data):(c([]),[])}catch(N){return console.error("❌ Error cargando servicios próximos a vencer:",N),c([]),[]}},x=async()=>{try{const N=await Wh();return N.data?(h(N.data),console.log("✅ Estadísticas de renovaciones cargadas"),N.data):(h(null),null)}catch(N){return console.error("❌ Error cargando estadísticas de renovaciones:",N),h(null),null}},v=async()=>{console.log("🔄 refreshAllStats: Iniciando recarga completa..."),f(!0),y(null);try{console.log("🔄 refreshAllStats: Cargando todas las compras..."),await w(),console.log("🔄 refreshAllStats: Cargando compras pendientes..."),await j(),console.log("🔄 refreshAllStats: Cargando servicios próximos a vencer..."),await p(),console.log("🔄 refreshAllStats: Cargando estadísticas de renovaciones..."),await x(),console.log("✅ refreshAllStats: Todas las estadísticas actualizadas desde Supabase")}catch(N){console.error("❌ refreshAllStats: Error actualizando estadísticas:",N),y("Error actualizando estadísticas")}finally{f(!1)}};return E.useEffect(()=>{console.log("🔄 useSupabaseData: Iniciando carga de datos de admin..."),v()},[e]),E.useEffect(()=>{console.log("🔄 useSupabaseData: Cargando compras pendientes al inicio..."),(async()=>{const _=await j();console.log("🎯 RESULTADO INICIAL loadPendingPurchases:",_)})()},[]),E.useEffect(()=>{{console.log("🔄 useSupabaseData: Iniciando actualización automática cada 5 segundos...");const N=setInterval(async()=>{console.log("🔄 ACTUALIZACIÓN AUTOMÁTICA: Recargando compras pendientes...");try{const _=await j();console.log("🔄 ACTUALIZACIÓN AUTOMÁTICA: Compras pendientes:",(_==null?void 0:_.length)||0)}catch(_){console.error("❌ Error en actualización automática:",_)}},5e3);return()=>{console.log("🛑 useSupabaseData: Deteniendo actualización automática..."),clearInterval(N)}}},[e]),E.useEffect(()=>{i([])},[e]),E.useEffect(()=>{const N=_=>{_.key==="userPhone"&&_.newValue&&(console.log("🔄 Teléfono de usuario cambiado, recargando compras..."),f(!0),g(_.newValue).finally(()=>f(!1)))};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[]),{allPurchases:t,pendingPurchases:n,userActivePurchases:a,expiringServices:l,renewalStats:u,loading:m,error:b,loadAllPurchasesFromSupabase:w,loadPendingPurchases:j,loadUserActivePurchases:g,loadExpiringServices:p,loadRenewalStats:x,refreshAllStats:v,refreshUserPurchases:async N=>{console.log("🔄 Forzando recarga de compras del usuario:",N),f(!0);try{const _=await g(N);return console.log("✅ Compras del usuario recargadas:",(_==null?void 0:_.length)||0),_}catch(_){return console.error("❌ Error recargando compras del usuario:",_),[]}finally{f(!1)}}}}const Ex=()=>{const[e,t]=E.useState(()=>{try{return localStorage.getItem("sz_theme")||"dark"}catch{return"dark"}}),r=e==="dark",[n,s]=E.useState(!1);return E.useEffect(()=>{const i=window.matchMedia("(prefers-color-scheme: dark)");s(i.matches);const l=c=>{s(c.matches)};return i.addEventListener("change",l),()=>i.removeEventListener("change",l)},[]),E.useEffect(()=>{try{localStorage.setItem("sz_theme",e)}catch{}},[e]),{theme:e,setTheme:t,isDark:r,systemPrefersDark:n,toggleTheme:()=>t(r?"light":"dark")}},Cx=()=>{const[e,t]=E.useState(()=>_t.load("userProfile",null)),[r,n]=E.useState(()=>!!_t.load("adminLogged",!1)),[s,a]=E.useState(()=>_t.load("userProfileData",null)),[i,l]=E.useState(()=>_t.load("allPurchases",[])),[c,u]=E.useState("login"),[h,m]=E.useState(""),[f,b]=E.useState(""),[y,w]=E.useState("");return E.useEffect(()=>{_t.save("userProfile",e)},[e]),E.useEffect(()=>{_t.save("userProfileData",s)},[s]),E.useEffect(()=>{_t.save("allPurchases",i)},[i]),E.useEffect(()=>{_t.save("adminLogged",r)},[r]),{user:e,setUser:t,adminLogged:r,setAdminLogged:n,userProfile:s,setUserProfile:a,allPurchases:i,setAllPurchases:l,authStep:c,setAuthStep:u,resetEmail:h,setResetEmail:m,resetToken:f,setResetToken:b,resetCode:y,setResetCode:w,handleLogin:_=>{t(_)},handleLogout:()=>{t(null),a(null)},handleAdminLogin:_=>{_&&n(!0)},handleAdminLogout:()=>{n(!1)},handleForgotPassword:(_,P)=>{m(_),b(P),u("code")},handleCodeVerified:_=>{b(_),u("newpassword")},handlePasswordReset:()=>{u("login")}}},Px=[{email:"gualejeremi@gmail.com",role:"principal",canGenerateKeys:!1,canDeleteOthers:!0,isProtected:!0}],$x=(e=[],t,r)=>{const[n,s]=E.useState(Px),[a,i]=E.useState(!1),[l,c]=E.useState(""),[u,h]=E.useState("dashboard"),[m,f]=E.useState(!1),[b,y]=E.useState(!1),[w,j]=E.useState(!1),[g,p]=E.useState(!1),[x,v]=E.useState(null),[S,N]=E.useState(!1),[_,P]=E.useState(null),z=n.map(T=>T.email);return{adminUsers:n,setAdminUsers:s,loading:a,setLoading:i,msg:l,setMsg:c,adminView:u,setAdminView:h,adminDrawerOpen:m,setAdminDrawerOpen:f,adminMenuOpen:b,setAdminMenuOpen:y,adminRegisterPurchaseOpen:w,setAdminRegisterPurchaseOpen:j,editPurchaseOpen:g,setEditPurchaseOpen:p,editingPurchase:x,setEditingPurchase:v,approvePurchaseOpen:S,setApprovePurchaseOpen:N,selectedPurchase:_,setSelectedPurchase:P,adminEmails:z,handleToggleValidate:async T=>{console.log("🔍 handleToggleValidate called with ID:",T),console.log("📦 Current purchases:",e);const C=e.find(k=>k.id===T);if(console.log("🎯 Found purchase:",C),!C){console.log("❌ Purchase not found");return}if(!C.validated){P(C),N(!0);return}const O="invalidar";if(console.log("🔄 Invalidating purchase:",T),!I){console.error("❌ Supabase no está configurado"),c("❌ Error: Base de datos no disponible"),setTimeout(()=>c(""),3e3);return}if(!confirm(`¿Estás seguro de que quieres ${O} la compra de ${C.customer} - ${C.service}?`)){console.log("❌ User cancelled");return}i(!0);try{console.log("🔄 Actualizando en Supabase...",{purchaseId:T,validated:!1});const{error:k}=await I.from("purchases").update({validated:!1}).eq("id",T);if(k)throw console.error("❌ Error de Supabase:",k),k;console.log("✅ Actualización en Supabase exitosa"),t(L=>L.map(V=>V.id===T?{...V,validated:!1}:V)),c("✅ Compra invalidada exitosamente"),setTimeout(()=>c(""),3e3),r&&(console.log("🔄 Recargando datos desde Supabase..."),await r())}catch(k){console.error("Error al actualizar compra:",k),c("❌ Error al actualizar la compra"),setTimeout(()=>c(""),3e3)}finally{i(!1)}},handleDeletePurchase:async T=>{console.log("🗑️ handleDeletePurchase called with ID:",T),console.log("📦 Current purchases:",e);const C=e.find(k=>k.id===T);if(console.log("🎯 Found purchase:",C),!C){console.log("❌ Purchase not found");return}C.validated;const O=C.validated?`⚠️ ADVERTENCIA: ¿Estás seguro de que quieres ELIMINAR PERMANENTEMENTE la compra activa de ${C.customer} - ${C.service}?

Esta acción:
• Eliminará la compra de la base de datos
• El cliente perderá acceso al servicio
• NO se puede deshacer

Escribe "ELIMINAR" para confirmar:`:`¿Estás seguro de que quieres rechazar la compra de ${C.customer} - ${C.service}?`;if(confirm(O)){if(!I){console.error("❌ Supabase no está configurado"),c("❌ Error: Base de datos no disponible"),setTimeout(()=>c(""),3e3);return}if(C.validated&&prompt("Para confirmar la eliminación, escribe exactamente: ELIMINAR")!=="ELIMINAR"){alert('❌ Eliminación cancelada. Debes escribir "ELIMINAR" para confirmar.');return}i(!0);try{console.log("🗑️ Eliminando de Supabase...",{purchaseId:T});const{error:k}=await I.from("purchases").delete().eq("id",T);if(k)throw console.error("❌ Error de Supabase:",k),k;console.log("✅ Eliminación en Supabase exitosa"),t(L=>L.filter(V=>V.id!==T)),c(`✅ Compra ${C.validated?"eliminada":"rechazada"} exitosamente`),setTimeout(()=>c(""),3e3),r&&(console.log("🔄 Recargando datos desde Supabase..."),await r())}catch(k){console.error("Error al eliminar compra:",k),c("❌ Error al eliminar la compra"),setTimeout(()=>c(""),3e3)}finally{i(!1)}}},handleEditPurchase:T=>{v(T),p(!0)},handleReminderPurchase:T=>{const C=new Date,O=new Date(T.end),k=Math.ceil((O.getTime()-C.getTime())/(1e3*60*60*24));let L=`🎬 *StreamZone* - Renovación de Servicio

`;L+=`Estimado/a ${T.customer},

`,k<=0?(L+=`⚠️ Su servicio *${T.service}* venció el ${T.end}.

`,L+=`🔄 Para reactivar su cuenta, responda este mensaje.

`):k===1?(L+=`⏰ Su servicio *${T.service}* vence mañana (${T.end}).

`,L+=`🔄 Renueve ahora para evitar interrupciones.

`):k<=3?(L+=`📅 Su servicio *${T.service}* vence en ${k} días (${T.end}).

`,L+=`🔄 Renueve con anticipación para continuar sin interrupciones.

`):(L+=`📋 Recordatorio: Su servicio *${T.service}* vence en ${k} días (${T.end}).

`,L+=`🔄 Puede renovar cuando guste respondiendo este mensaje.

`),L+=`💬 Responda para proceder con la renovación.

`,L+=`Atentamente,
*Equipo StreamZone* 🎯`;const _e=`https://wa.me/593${T.phone.replace(/[^\d]/g,"")}?text=${encodeURIComponent(L)}`;try{window.open(_e,"_blank"),c(`📱 Recordatorio enviado a ${T.customer} (${T.phone})`),setTimeout(()=>c(""),5e3)}catch(Me){console.error("Error abriendo WhatsApp:",Me),c("❌ Error al abrir WhatsApp. Por favor, contacta manualmente."),setTimeout(()=>c(""),3e3)}},handleApproveSuccess:async()=>{if(console.log("🎉 handleApproveSuccess called"),console.log("🎯 selectedPurchase:",_),console.log("🔄 Actualizando estado local inmediatamente..."),t(T=>{const C=T.map(O=>O.id===(_==null?void 0:_.id)?{...O,validated:!0}:O);return console.log("📋 Estado actualizado:",C),C}),console.log("🔄 Forzando re-render del componente..."),r){console.log("🔄 Recargando datos desde Supabase después de aprobación...");try{await r(),console.log("✅ Datos recargados exitosamente desde Supabase"),_&&_.phone&&console.log("🔄 Forzando recarga de compras del usuario:",_.phone)}catch(T){console.error("❌ Error recargando datos:",T)}}else console.warn("⚠️ refreshFromSupabase function not available")},handleUpdatePurchase:async(T,C)=>{console.log("🔄 ===== INICIANDO ACTUALIZACIÓN DE COMPRA ====="),console.log("🆔 Purchase ID:",T),console.log("📝 Updates recibidos:",C),console.log("📊 Tipo de updates:",typeof C),console.log("🔍 Keys de updates:",Object.keys(C));try{if(!T||T==="undefined"||T==="null")throw new Error("ID de compra inválido");if(!C||Object.keys(C).length===0)throw new Error("No hay datos para actualizar");console.log("💾 Guardando cambios en Supabase..."),console.log("📤 Datos enviados a updatePurchase:",{id:T,updateData:C});const{data:O,error:k}=await Lh(T,C);if(console.log("📥 Respuesta de updatePurchase:",{data:O,error:k}),k){console.error("❌ Error guardando en Supabase:",k),console.error("❌ Detalles del error:",{code:k.code,message:k.message,details:k.details,hint:k.hint}),c(`❌ Error al guardar: ${k.message}`),setTimeout(()=>c(""),5e3);return}console.log("✅ Cambios guardados exitosamente en Supabase:",O),console.log("🔄 Actualizando estado local..."),t(L=>{const V=L.map(_e=>_e.id===T?{..._e,...C}:_e);return console.log("📊 Estado local actualizado:",V.find(_e=>_e.id===T)),V}),c("✅ Compra actualizada correctamente en la base de datos"),setTimeout(()=>c(""),5e3),r&&(console.log("🔄 Recargando datos desde Supabase..."),await r(),console.log("✅ Datos recargados desde Supabase")),console.log("🎉 ===== ACTUALIZACIÓN COMPLETADA EXITOSAMENTE =====")}catch(O){console.error("❌ ===== ERROR EN ACTUALIZACIÓN ====="),console.error("❌ Error actualizando compra:",O),console.error("❌ Stack trace:",O.stack),c(`❌ Error: ${O.message}`),setTimeout(()=>c(""),5e3)}},handleExportCSV:()=>{}}},Tx=()=>{const[e,t]=E.useState("home");return{view:e,setView:t,navigateToHome:()=>t("home"),navigateToCombos:()=>t("combos"),navigateToAdmin:()=>t("admin"),navigateToAuth:()=>t("auth"),navigateToProfile:()=>t("profile"),navigateToRegister:()=>t("register")}};function kx(){const{isDark:e,systemPrefersDark:t,toggleTheme:r}=Ex(),{view:n,setView:s}=Tx(),{user:a,adminLogged:i,setAllPurchases:l,authStep:c,setAuthStep:u,resetEmail:h,resetToken:m,handleLogin:f,handleLogout:b,handleAdminLogin:y,handleAdminLogout:w,handleForgotPassword:j,handleCodeVerified:g,handlePasswordReset:p}=Cx(),x=Sx(),{adminUsers:v,setAdminUsers:S,adminDrawerOpen:N,setAdminDrawerOpen:_,adminMenuOpen:P,setAdminMenuOpen:z,adminRegisterPurchaseOpen:R,setAdminRegisterPurchaseOpen:G,editPurchaseOpen:be,setEditPurchaseOpen:ke,editingPurchase:q,approvePurchaseOpen:De,setApprovePurchaseOpen:me,selectedPurchase:T,adminEmails:C,handleToggleValidate:O,handleDeletePurchase:k,handleEditPurchase:L,handleReminderPurchase:V,handleApproveSuccess:_e,handleUpdatePurchase:Me,handleExportCSV:mr}=$x(x.allPurchases,Ge=>{l(Ge)},x.refreshAllStats),re=wx(),ut=_x(),Dh=yx(ro,Cc);ou.useEffect(()=>{(async()=>{try{await gi([...ro]),console.log("Servicios sincronizados con Supabase"),await gi([...Cc]),console.log("Combos sincronizados con Supabase")}catch(Qh){console.error("Error sincronizando servicios:",Qh)}})()},[]);const Gh=Ge=>{console.log("handleReserve called with:",{service:Ge,user:a}),re.handleReserve(Ge,a)},Kh=Ge=>{console.log("Agregando compra:",Ge),re.setReserveModalOpen(!1)},Jh=async Ge=>{re.setPurchaseModalOpen(!1),await ut.processPurchase(Ge),console.log("🔄 handlePurchase: Recargando datos después de la compra..."),await x.refreshAllStats()};return o.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${d(e,"bg-gray-50","bg-zinc-900")}`,children:[o.jsx(Af,{isDark:e,view:n,user:a,adminLogged:i,setView:s,handleLogout:b}),o.jsx("main",{className:"flex-1",children:o.jsx(lx,{view:n,isDark:e,user:a,adminLogged:i,purchases:x.allPurchases,pendingPurchases:x.pendingPurchases,userActivePurchases:x.userActivePurchases,expiringServices:x.expiringServices,renewalStats:x.renewalStats,loading:x.loading,error:x.error,adminUsers:v,setAdminUsers:S,authStep:c,resetEmail:h,resetToken:m,setView:s,setAuthStep:u,handleReserve:Gh,handleToggleValidate:O,handleDeletePurchase:k,handleEditPurchase:L,handleReminderPurchase:V,handleLogin:f,handleAdminLogin:y,handleAdminLogout:w,handleForgotPassword:j,handleCodeVerified:g,handlePasswordReset:p,setAdminRegisterPurchaseOpen:G,handleExportCSV:mr,refreshAllStats:x.refreshAllStats,adminEmails:C})}),o.jsx(xx,{reserveModalOpen:re.reserveModalOpen,registrationRequiredOpen:re.registrationRequiredOpen,purchaseModalOpen:re.purchaseModalOpen,adminRegisterPurchaseOpen:R,editPurchaseOpen:be,selectedService:re.selectedService,purchaseData:re.purchaseData,editingPurchase:q,user:a,isDark:e,systemPrefersDark:t,setReserveModalOpen:re.setReserveModalOpen,setRegistrationRequiredOpen:re.setRegistrationRequiredOpen,setPurchaseModalOpen:re.setPurchaseModalOpen,setAdminRegisterPurchaseOpen:G,setEditPurchaseOpen:ke,onAddPurchase:Kh,onGoToAuth:()=>{re.setReserveModalOpen(!1),s("auth")},onPurchase:Jh,onRegister:()=>{},onUpdate:Ge=>{q!=null&&q.id&&Me(q.id,Ge)}}),o.jsx(lh,{open:N,onClose:()=>_(!1),isDark:e,adminUsers:v,setAdminUsers:S}),o.jsx(ch,{open:P,onClose:()=>z(!1),isDark:e,setSubView:()=>{},openAdmins:()=>_(!0),onExportCSV:mr,onLogout:w,onRegisterPurchase:()=>G(!0)}),o.jsx(bx,{isOpen:De,onClose:()=>me(!1),purchase:T,isDark:e,onApprove:_e,onUpdatePurchase:Me}),o.jsx(vx,{isOpen:ut.errorModal.isOpen,onClose:ut.closeErrorModal,title:"Error en la Compra",message:ut.errorModal.message,isDark:e,showRetry:!1}),o.jsx(cx,{answerFn:Dh.answer,isDark:e}),o.jsx(ux,{isDark:e,onToggle:r})]})}ua.createRoot(document.getElementById("root")).render(o.jsx(ou.StrictMode,{children:o.jsx(kx,{})}));
